!function(){"use strict";let e,t,r,n,o;var l,a,i,s,d,c,u,m,f,g,p,h,b,v=function(e){if(null===e)return"null";if(void 0===e)return"undefined";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t},y=function(e){return{eq:e}},C=y(function(e,t){return e===t}),x=function(e){return y(function(t,r){if(t.length!==r.length)return!1;for(var n=t.length,o=0;o<n;o++)if(!e.eq(t[o],r[o]))return!1;return!0})},w=function(e,t){var r,n;return r=x(e),n=function(e){return Array.prototype.slice.call(e).sort(t)},y(function(e,t){return r.eq(n(e),n(t))})},k=function(e){return y(function(t,r){var n=Object.keys(t),o=Object.keys(r);if(!w(C).eq(n,o))return!1;for(var l=n.length,a=0;a<l;a++){var i=n[a];if(!e.eq(t[i],r[i]))return!1}return!0})},_=y(function(e,t){if(e===t)return!0;var r=v(e);return r===v(t)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(r)?e===t:"array"===r?x(_).eq(e,t):"object"===r&&k(_).eq(e,t))});let S=Object.getPrototypeOf,E=(e,t,r)=>{var n;return!!r(e,t.prototype)||(null===(n=e.constructor)||void 0===n?void 0:n.name)===t.name},N=e=>{let t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&E(e,String,(e,t)=>t.isPrototypeOf(e))?"string":t},D=e=>t=>N(t)===e,R=e=>t=>typeof t===e,A=e=>t=>e===t,O=(e,t)=>B(e)&&E(e,t,(e,t)=>S(e)===t),T=D("string"),B=D("object"),P=e=>O(e,Object),L=D("array"),F=A(null),M=R("boolean"),I=A(void 0),U=e=>null==e,j=e=>!U(e),z=R("function"),H=R("number"),$=(e,t)=>{if(L(e)){for(let r=0,n=e.length;r<n;++r)if(!t(e[r]))return!1;return!0}return!1},q=()=>{},V=(e,t)=>(...r)=>e(t.apply(null,r)),W=(e,t)=>r=>e(t(r)),K=e=>()=>e,G=e=>e,Y=(e,t)=>e===t;function X(e,...t){return(...r)=>{let n=t.concat(r);return e.apply(null,n)}}let Q=e=>t=>!e(t),J=e=>()=>{throw Error(e)},Z=e=>e(),ee=e=>{e()},et=K(!1),er=K(!0);class en{constructor(e,t){this.tag=e,this.value=t}static some(e){return new en(!0,e)}static none(){return en.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?en.some(e(this.value)):en.none()}bind(e){return this.tag?e(this.value):en.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:en.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw Error(null!=e?e:"Called getOrDie on None")}static from(e){return j(e)?en.some(e):en.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}en.singletonNone=new en(!1);let eo=Array.prototype.slice,el=Array.prototype.indexOf,ea=Array.prototype.push,ei=(e,t)=>el.call(e,t),es=(e,t)=>{let r=ei(e,t);return -1===r?en.none():en.some(r)},ed=(e,t)=>ei(e,t)>-1,ec=(e,t)=>{for(let r=0,n=e.length;r<n;r++){let o=e[r];if(t(o,r))return!0}return!1},eu=(e,t)=>{let r=e.length,n=Array(r);for(let o=0;o<r;o++){let l=e[o];n[o]=t(l,o)}return n},em=(e,t)=>{for(let r=0,n=e.length;r<n;r++){let o=e[r];t(o,r)}},ef=(e,t)=>{for(let r=e.length-1;r>=0;r--){let n=e[r];t(n,r)}},eg=(e,t)=>{let r=[],n=[];for(let o=0,l=e.length;o<l;o++){let a=e[o],i=t(a,o)?r:n;i.push(a)}return{pass:r,fail:n}},ep=(e,t)=>{let r=[];for(let n=0,o=e.length;n<o;n++){let l=e[n];t(l,n)&&r.push(l)}return r},eh=(e,t,r)=>(ef(e,(e,n)=>{r=t(r,e,n)}),r),eb=(e,t,r)=>(em(e,(e,n)=>{r=t(r,e,n)}),r),ev=(e,t,r)=>{for(let n=0,o=e.length;n<o;n++){let l=e[n];if(t(l,n))return en.some(l);if(r(l,n))break}return en.none()},ey=(e,t)=>ev(e,t,et),eC=(e,t)=>{for(let r=0,n=e.length;r<n;r++){let o=e[r];if(t(o,r))return en.some(r)}return en.none()},ex=e=>{let t=[];for(let r=0,n=e.length;r<n;++r){if(!L(e[r]))throw Error("Arr.flatten item "+r+" was not an array, input: "+e);ea.apply(t,e[r])}return t},ew=(e,t)=>ex(eu(e,t)),ek=(e,t)=>{for(let r=0,n=e.length;r<n;++r){let o=e[r];if(!0!==t(o,r))return!1}return!0},e_=e=>{let t=eo.call(e,0);return t.reverse(),t},eS=(e,t)=>ep(e,e=>!ed(t,e)),eE=(e,t)=>{let r={};for(let n=0,o=e.length;n<o;n++){let l=e[n];r[String(l)]=t(l,n)}return r},eN=(e,t)=>{let r=eo.call(e,0);return r.sort(t),r},eD=(e,t)=>t>=0&&t<e.length?en.some(e[t]):en.none(),eR=e=>eD(e,0),eA=e=>eD(e,e.length-1),eO=z(Array.from)?Array.from:e=>eo.call(e),eT=(e,t)=>{for(let r=0;r<e.length;r++){let n=t(e[r],r);if(n.isSome())return n}return en.none()},eB=(e,t)=>{let r=[],n=z(t)?e=>ec(r,r=>t(r,e)):e=>ed(r,e);for(let o=0,l=e.length;o<l;o++){let a=e[o];n(a)||r.push(a)}return r},eP=Object.keys,eL=Object.hasOwnProperty,eF=(e,t)=>{let r=eP(e);for(let n=0,o=r.length;n<o;n++){let l=r[n],a=e[l];t(a,l)}},eM=(e,t)=>eI(e,(e,r)=>({k:r,v:t(e,r)})),eI=(e,t)=>{let r={};return eF(e,(e,n)=>{let o=t(e,n);r[o.k]=o.v}),r},eU=e=>(t,r)=>{e[r]=t},ej=(e,t,r,n)=>{eF(e,(e,o)=>{(t(e,o)?r:n)(e,o)})},ez=(e,t)=>{let r={},n={};return ej(e,t,eU(r),eU(n)),{t:r,f:n}},eH=(e,t)=>{let r={};return ej(e,t,eU(r),q),r},e$=(e,t)=>{let r=[];return eF(e,(e,n)=>{r.push(t(e,n))}),r},eq=e=>e$(e,G),eV=(e,t)=>eW(e,t)?en.from(e[t]):en.none(),eW=(e,t)=>eL.call(e,t),eK=(e,t)=>eW(e,t)&&void 0!==e[t]&&null!==e[t],eG=(e,t,r=_)=>k(r).eq(e,t),eY=e=>{let t={};return em(e,e=>{t[e]={}}),eP(t)},eX=e=>void 0!==e.length,eQ=Array.isArray,eJ=e=>{if(eQ(e))return e;{let t=[];for(let r=0,n=e.length;r<n;r++)t[r]=e[r];return t}},eZ=(e,t,r)=>{if(!e)return!1;if(r=r||e,eX(e)){for(let n=0,o=e.length;n<o;n++)if(!1===t.call(r,e[n],n,e))return!1}else for(let l in e)if(eW(e,l)&&!1===t.call(r,e[l],l,e))return!1;return!0},e0=(e,t)=>{let r=[];return eZ(e,(n,o)=>{r.push(t(n,o,e))}),r},e1=(e,t)=>{let r=[];return eZ(e,(n,o)=>{(!t||t(n,o,e))&&r.push(n)}),r},e2=(e,t)=>{if(e){for(let r=0,n=e.length;r<n;r++)if(e[r]===t)return r}return -1},e3=(e,t,r,n)=>{let o=I(r)?e[0]:r;for(let l=0;l<e.length;l++)o=t.call(n,o,e[l],l);return o},e8=(e,t,r)=>{for(let n=0,o=e.length;n<o;n++)if(t.call(r,e[n],n,e))return n;return -1},e5=e=>e[e.length-1],e6=e=>{let t,r=!1;return(...n)=>(r||(r=!0,t=e.apply(null,n)),t)},e9=(e,t,r,n)=>{let o=e.isiOS()&&!0===/ipad/i.test(r),l=e.isiOS()&&!o,a=e.isiOS()||e.isAndroid(),i=a||n("(pointer:coarse)"),s=o||!l&&a&&n("(min-device-width:768px)"),d=l||a&&!s,c=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(r);return{isiPad:K(o),isiPhone:K(l),isTablet:K(s),isPhone:K(d),isTouch:K(i),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:K(c),isDesktop:K(!d&&!s&&!c)}},e4=(e,t)=>{for(let r=0;r<e.length;r++){let n=e[r];if(n.test(t))return n}},e7=(e,t)=>{let r=e4(e,t);if(!r)return{major:0,minor:0};let n=e=>Number(t.replace(r,"$"+e));return tr(n(1),n(2))},te=(e,t)=>{let r=String(t).toLowerCase();return 0===e.length?tt():e7(e,r)},tt=()=>tr(0,0),tr=(e,t)=>({major:e,minor:t}),tn={nu:tr,detect:te,unknown:tt},to=(e,t)=>eT(t.brands,t=>{let r=t.brand.toLowerCase();return ey(e,e=>{var t;return r===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())}).map(e=>({current:e.name,version:tn.nu(parseInt(t.version,10),0)}))}),tl=(e,t)=>{let r=String(t).toLowerCase();return ey(e,e=>e.search(r))},ta=(e,t)=>tl(e,t).map(e=>{let r=tn.detect(e.versionRegexes,t);return{current:e.name,version:r}}),ti=(e,t)=>tl(e,t).map(e=>{let r=tn.detect(e.versionRegexes,t);return{current:e.name,version:r}}),ts=(e,t)=>e.substring(t),td=(e,t,r)=>""===t||e.length>=t.length&&e.substr(r,r+t.length)===t,tc=(e,t)=>tm(e,t)?ts(e,t.length):e,tu=(e,t,r=0,n)=>{let o=e.indexOf(t,r);return -1!==o&&(!!I(n)||o+t.length<=n)},tm=(e,t)=>td(e,t,0),tf=(e,t)=>td(e,t,e.length-t.length),tg=e=>t=>t.replace(e,""),tp=tg(/^\s+|\s+$/g),th=tg(/^\s+/g),tb=tg(/\s+$/g),tv=e=>e.length>0,ty=e=>!tv(e),tC=(e,t)=>t<=0?"":Array(t+1).join(e),tx=(e,t=10)=>{let r=parseInt(e,t);return isNaN(r)?en.none():en.some(r)},tw=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,tk=e=>t=>tu(t,e),t_=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>tu(e,"edge/")&&tu(e,"chrome")&&tu(e,"safari")&&tu(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,tw],search:e=>tu(e,"chrome")&&!tu(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>tu(e,"msie")||tu(e,"trident")},{name:"Opera",versionRegexes:[tw,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:tk("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:tk("firefox")},{name:"Safari",versionRegexes:[tw,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(tu(e,"safari")||tu(e,"mobile/"))&&tu(e,"applewebkit")}],tS=[{name:"Windows",search:tk("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>tu(e,"iphone")||tu(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:tk("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:tk("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:tk("linux"),versionRegexes:[]},{name:"Solaris",search:tk("sunos"),versionRegexes:[]},{name:"FreeBSD",search:tk("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:tk("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],tE={browsers:K(t_),oses:K(tS)},tN="Edge",tD="Chromium",tR="Opera",tA="Firefox",tO="Safari",tT=()=>tB({current:void 0,version:tn.unknown()}),tB=e=>{let t=e.current,r=e.version,n=e=>()=>t===e;return{current:t,version:r,isEdge:n(tN),isChromium:n(tD),isIE:n("IE"),isOpera:n(tR),isFirefox:n(tA),isSafari:n(tO)}},tP={unknown:tT,nu:tB,edge:K(tN),chromium:K(tD),ie:K("IE"),opera:K(tR),firefox:K(tA),safari:K(tO)},tL="Windows",tF="Android",tM="Linux",tI="macOS",tU="Solaris",tj="FreeBSD",tz="ChromeOS",tH=()=>t$({current:void 0,version:tn.unknown()}),t$=e=>{let t=e.current,r=e.version,n=e=>()=>t===e;return{current:t,version:r,isWindows:n(tL),isiOS:n("iOS"),isAndroid:n(tF),isMacOS:n(tI),isLinux:n(tM),isSolaris:n(tU),isFreeBSD:n(tj),isChromeOS:n(tz)}},tq={unknown:tH,nu:t$,windows:K(tL),ios:K("iOS"),android:K(tF),linux:K(tM),macos:K(tI),solaris:K(tU),freebsd:K(tj),chromeos:K(tz)},tV=(e,t,r)=>{let n=tE.browsers(),o=tE.oses(),l=t.bind(e=>to(n,e)).orThunk(()=>ta(n,e)).fold(tP.unknown,tP.nu),a=ti(o,e).fold(tq.unknown,tq.nu),i=e9(a,l,e,r);return{browser:l,os:a,deviceType:i}},tW={detect:tV},tK=e=>window.matchMedia(e).matches,tG=e6(()=>tW.detect(navigator.userAgent,en.from(navigator.userAgentData),tK)),tY=()=>tG(),tX=navigator.userAgent,tQ=tY(),tJ=tQ.browser,tZ=tQ.os,t0=tQ.deviceType,t1=-1!==tX.indexOf("Windows Phone"),t2={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:tJ.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!tJ.isIE(),windowsPhone:t1,browser:{current:tJ.current,version:tJ.version,isChromium:tJ.isChromium,isEdge:tJ.isEdge,isFirefox:tJ.isFirefox,isIE:tJ.isIE,isOpera:tJ.isOpera,isSafari:tJ.isSafari},os:{current:tZ.current,version:tZ.version,isAndroid:tZ.isAndroid,isChromeOS:tZ.isChromeOS,isFreeBSD:tZ.isFreeBSD,isiOS:tZ.isiOS,isLinux:tZ.isLinux,isMacOS:tZ.isMacOS,isSolaris:tZ.isSolaris,isWindows:tZ.isWindows},deviceType:{isDesktop:t0.isDesktop,isiPad:t0.isiPad,isiPhone:t0.isiPhone,isPhone:t0.isPhone,isTablet:t0.isTablet,isTouch:t0.isTouch,isWebView:t0.isWebView}},t3=/^\s*|\s*$/g,t8=e=>U(e)?"":(""+e).replace(t3,""),t5=(e,t)=>t?!!("array"===t&&eQ(e))||typeof e===t:void 0!==e,t6=(e,t,r={})=>{let n=T(e)?e.split(t||","):e||[],o=n.length;for(;o--;)r[n[o]]={};return r},t9=(e,...t)=>{for(let r=0;r<t.length;r++){let n=t[r];for(let o in n)if(eW(n,o)){let l=n[o];void 0!==l&&(e[o]=l)}}return e},t4=function(e,t,r,n){n=n||this,e&&(r&&(e=e[r]),eZ(e,(e,o)=>!1!==t.call(n,e,o,r)&&(t4(e,t,r,n),!0)))},t7=(e,t=window)=>{let r=e.split(".");for(let n=0,o=r.length;n<o&&(t=t[r[n]]);n++);return t},re=(e,t)=>L(e)?e:""===e?[]:e0(e.split(t||","),t8),rt=e=>{let t=t2.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e},rr={trim:t8,isArray:eQ,is:t5,toArray:eJ,makeMap:t6,each:eZ,map:e0,grep:e1,inArray:e2,hasOwn:eW,extend:t9,walk:t4,resolve:t7,explode:re,_addCacheSuffix:rt},rn=(e,t,r=Y)=>e.exists(e=>r(e,t)),ro=e=>{let t=[],r=e=>{t.push(e)};for(let n=0;n<e.length;n++)e[n].each(r);return t},rl=(e,t,r)=>e.isSome()&&t.isSome()?en.some(r(e.getOrDie(),t.getOrDie())):en.none(),ra=(e,t,r,n)=>e.isSome()&&t.isSome()&&r.isSome()?en.some(n(e.getOrDie(),t.getOrDie(),r.getOrDie())):en.none(),ri=(e,t)=>e?en.some(t):en.none();"undefined"!=typeof window?window:Function("return this;")();let rs=e=>{let t=e.dom.nodeName;return t.toLowerCase()},rd=e=>e.dom.nodeType,rc=e=>t=>rd(t)===e,ru=e=>8===rd(e)||"#comment"===rs(e),rm=rc(1),rf=rc(3),rg=rc(9),rp=rc(11),rh=e=>t=>rm(t)&&rs(t)===e,rb=(e,t,r)=>{if(T(r)||M(r)||H(r))e.setAttribute(t,r+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),Error("Attribute value was not simple")},rv=(e,t,r)=>{rb(e.dom,t,r)},ry=(e,t)=>{let r=e.dom;eF(t,(e,t)=>{rb(r,t,e)})},rC=(e,t)=>{let r=e.dom.getAttribute(t);return null===r?void 0:r},rx=(e,t)=>en.from(rC(e,t)),rw=(e,t)=>{let r=e.dom;return!!r&&!!r.hasAttribute&&r.hasAttribute(t)},rk=(e,t)=>{e.dom.removeAttribute(t)},r_=e=>{let t=e.dom.attributes;return null==t||0===t.length},rS=e=>eb(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}),rE=(e,t)=>{let r=rC(e,t);return void 0===r||""===r?[]:r.split(" ")},rN=(e,t,r)=>{let n=rE(e,t),o=n.concat([r]);return rv(e,t,o.join(" ")),!0},rD=(e,t,r)=>{let n=ep(rE(e,t),e=>e!==r);return n.length>0?rv(e,t,n.join(" ")):rk(e,t),!1},rR=e=>void 0!==e.dom.classList,rA=e=>rE(e,"class"),rO=(e,t)=>rN(e,"class",t),rT=(e,t)=>rD(e,"class",t),rB=(e,t)=>ed(rA(e),t)?rT(e,t):rO(e,t),rP=(e,t)=>{rR(e)?e.dom.classList.add(t):rO(e,t)},rL=e=>{let t=rR(e)?e.dom.classList:rA(e);0===t.length&&rk(e,"class")},rF=(e,t)=>{if(rR(e)){let r=e.dom.classList;r.remove(t)}else rT(e,t);rL(e)},rM=(e,t)=>{let r=rR(e)?e.dom.classList.toggle(t):rB(e,t);return rL(e),r},rI=(e,t)=>rR(e)&&e.dom.classList.contains(t),rU=e=>void 0!==e.style&&z(e.style.getPropertyValue),rj=(e,t)=>{let r=(t||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){let n="HTML does not have a single root node";throw console.error(n,e),Error(n)}return r$(r.childNodes[0])},rz=(e,t)=>{let r=(t||document).createElement(e);return r$(r)},rH=(e,t)=>{let r=(t||document).createTextNode(e);return r$(r)},r$=e=>{if(null==e)throw Error("Node cannot be null or undefined");return{dom:e}},rq=(e,t,r)=>en.from(e.dom.elementFromPoint(t,r)).map(r$),rV={fromHtml:rj,fromTag:rz,fromText:rH,fromDom:r$,fromPoint:rq},rW=(e,t)=>{let r=[],n=e=>(r.push(e),t(e)),o=t(e);do o=o.bind(n);while(o.isSome());return r},rK=(e,t)=>{let r=e.dom;if(1!==r.nodeType)return!1;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw Error("Browser lacks native selectors")},rG=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,rY=(e,t)=>{let r=void 0===t?document:t.dom;return rG(r)?[]:eu(r.querySelectorAll(e),rV.fromDom)},rX=(e,t)=>{let r=void 0===t?document:t.dom;return rG(r)?en.none():en.from(r.querySelector(e)).map(rV.fromDom)},rQ=(e,t)=>e.dom===t.dom,rJ=(e,t)=>{let r=e.dom,n=t.dom;return r!==n&&r.contains(n)},rZ=e=>rV.fromDom(e.dom.ownerDocument),r0=e=>rg(e)?e:rZ(e),r1=e=>rV.fromDom(r0(e).dom.documentElement),r2=e=>rV.fromDom(r0(e).dom.defaultView),r3=e=>en.from(e.dom.parentNode).map(rV.fromDom),r8=e=>en.from(e.dom.parentElement).map(rV.fromDom),r5=(e,t)=>{let r=z(t)?t:et,n=e.dom,o=[];for(;null!==n.parentNode&&void 0!==n.parentNode;){let l=n.parentNode,a=rV.fromDom(l);if(o.push(a),!0===r(a))break;n=l}return o},r6=e=>{let t=t=>ep(t,t=>!rQ(e,t));return r3(e).map(nt).map(t).getOr([])},r9=e=>en.from(e.dom.previousSibling).map(rV.fromDom),r4=e=>en.from(e.dom.nextSibling).map(rV.fromDom),r7=e=>e_(rW(e,r9)),ne=e=>rW(e,r4),nt=e=>eu(e.dom.childNodes,rV.fromDom),nr=(e,t)=>{let r=e.dom.childNodes;return en.from(r[t]).map(rV.fromDom)},nn=e=>nr(e,0),no=e=>nr(e,e.dom.childNodes.length-1),nl=e=>e.dom.childNodes.length,na=e=>{let t=e.dom.head;if(null==t)throw Error("Head is not available yet");return rV.fromDom(t)},ni=e=>rp(e)&&j(e.dom.host),ns=z(Element.prototype.attachShadow)&&z(Node.prototype.getRootNode),nd=K(ns),nc=ns?e=>rV.fromDom(e.dom.getRootNode()):r0,nu=e=>ni(e)?e:na(r0(e)),nm=e=>ni(e)?e:rV.fromDom(r0(e).dom.body),nf=e=>{let t=nc(e);return ni(t)?en.some(t):en.none()},ng=e=>rV.fromDom(e.dom.host),np=e=>{if(nd()&&j(e.target)){let t=rV.fromDom(e.target);if(rm(t)&&nh(t)&&e.composed&&e.composedPath){let r=e.composedPath();if(r)return eR(r)}}return en.from(e.target)},nh=e=>j(e.dom.shadowRoot),nb=e=>{let t=rf(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;let r=t.ownerDocument;return nf(rV.fromDom(t)).fold(()=>r.body.contains(t),W(nb,ng))},nv=(e,t,r)=>{if(!T(r))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",r,":: Element ",e),Error("CSS value must be a string: "+r);rU(e)&&e.style.setProperty(t,r)},ny=(e,t)=>{rU(e)&&e.style.removeProperty(t)},nC=(e,t,r)=>{let n=e.dom;nv(n,t,r)},nx=(e,t)=>{let r=e.dom;eF(t,(e,t)=>{nv(r,t,e)})},nw=(e,t)=>{let r=e.dom,n=window.getComputedStyle(r),o=n.getPropertyValue(t);return""!==o||nb(e)?o:nk(r,t)},nk=(e,t)=>rU(e)?e.style.getPropertyValue(t):"",n_=(e,t)=>{let r=e.dom,n=nk(r,t);return en.from(n).filter(e=>e.length>0)},nS=e=>{let t={},r=e.dom;if(rU(r))for(let n=0;n<r.style.length;n++){let o=r.style.item(n);t[o]=r.style[o]}return t},nE=(e,t)=>{let r=e.dom;ny(r,t),rn(rx(e,"style").map(tp),"")&&rk(e,"style")},nN=e=>e.dom.offsetWidth,nD=(e,t)=>{let r=r3(e);r.each(r=>{r.dom.insertBefore(t.dom,e.dom)})},nR=(e,t)=>{let r=r4(e);r.fold(()=>{let r=r3(e);r.each(e=>{nO(e,t)})},e=>{nD(e,t)})},nA=(e,t)=>{let r=nn(e);r.fold(()=>{nO(e,t)},r=>{e.dom.insertBefore(t.dom,r.dom)})},nO=(e,t)=>{e.dom.appendChild(t.dom)},nT=(e,t)=>{nD(e,t),nO(t,e)},nB=(e,t)=>{em(t,(r,n)=>{let o=0===n?e:t[n-1];nR(o,r)})},nP=(e,t)=>{em(t,t=>{nO(e,t)})},nL=e=>{e.dom.textContent="",em(nt(e),e=>{nF(e)})},nF=e=>{let t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},nM=e=>{let t=nt(e);t.length>0&&nB(e,t),nF(e)},nI=(e,t)=>{let r=(t||document).createElement("div");return r.innerHTML=e,nt(rV.fromDom(r))},nU=e=>eu(e,rV.fromDom),nj=e=>e.dom.innerHTML,nz=(e,t)=>{let r=rZ(e),n=r.dom,o=rV.fromDom(n.createDocumentFragment()),l=nI(t,n);nP(o,l),nL(e),nO(e,o)},nH=e=>{let t=rV.fromTag("div"),r=rV.fromDom(e.dom.cloneNode(!0));return nO(t,r),nj(t)},n$=(e,t,r,n,o,l,a)=>({target:e,x:t,y:r,stop:n,prevent:o,kill:l,raw:a}),nq=e=>{let t=rV.fromDom(np(e).getOr(e.target)),r=()=>e.stopPropagation(),n=()=>e.preventDefault(),o=V(n,r);return n$(t,e.clientX,e.clientY,r,n,o,e)},nV=(e,t)=>r=>{e(r)&&t(nq(r))},nW=(e,t,r,n,o)=>{let l=nV(r,n);return e.dom.addEventListener(t,l,o),{unbind:X(nG,e,t,l,o)}},nK=(e,t,r,n)=>nW(e,t,r,n,!1),nG=(e,t,r,n)=>{e.dom.removeEventListener(t,r,n)},nY=(e,t)=>{let r=(r,n)=>nY(e+r,t+n);return{left:e,top:t,translate:r}},nX=e=>{let t=e.getBoundingClientRect();return nY(t.left,t.top)},nQ=(e,t)=>void 0!==e?e:void 0!==t?t:0,nJ=e=>{let t=e.dom.ownerDocument,r=t.body,n=t.defaultView,o=t.documentElement;if(r===e.dom)return nY(r.offsetLeft,r.offsetTop);let l=nQ(null==n?void 0:n.pageYOffset,o.scrollTop),a=nQ(null==n?void 0:n.pageXOffset,o.scrollLeft),i=nQ(o.clientTop,r.clientTop),s=nQ(o.clientLeft,r.clientLeft);return nZ(e).translate(a-s,l-i)},nZ=e=>{let t=e.dom,r=t.ownerDocument,n=r.body;return n===t?nY(n.offsetLeft,n.offsetTop):nb(e)?nX(t):nY(0,0)},n0=e=>{let t=void 0!==e?e.dom:document,r=t.body.scrollLeft||t.documentElement.scrollLeft,n=t.body.scrollTop||t.documentElement.scrollTop;return nY(r,n)},n1=(e,t,r)=>{let n=void 0!==r?r.dom:document,o=n.defaultView;o&&o.scrollTo(e,t)},n2=(e,t)=>{let r=tY().browser.isSafari();r&&z(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},n3=e=>{let t=void 0===e?window:e;return tY().browser.isFirefox()?en.none():en.from(t.visualViewport)},n8=(e,t,r,n)=>({x:e,y:t,width:r,height:n,right:e+r,bottom:t+n}),n5=e=>{let t=void 0===e?window:e,r=t.document,n=n0(rV.fromDom(r));return n3(t).fold(()=>{let e=t.document.documentElement,r=e.clientWidth,o=e.clientHeight;return n8(n.left,n.top,r,o)},e=>n8(Math.max(e.pageLeft,n.left),Math.max(e.pageTop,n.top),e.width,e.height))},n6=(e,t)=>ep(nt(e),t),n9=(e,t)=>{let r=[];return em(nt(e),e=>{t(e)&&(r=r.concat([e])),r=r.concat(n9(e,t))}),r};var n4=(e,t,r,n,o)=>e(r,n)?en.some(r):z(o)&&o(r)?en.none():t(r,n,o);let n7=(e,t,r)=>{let n=e.dom,o=z(r)?r:et;for(;n.parentNode;){n=n.parentNode;let l=rV.fromDom(n);if(t(l))return en.some(l);if(o(l))break}return en.none()},oe=(e,t,r)=>{let n=(e,t)=>t(e);return n4(n,n7,e,t,r)},ot=(e,t)=>{let r=e.dom;return r.parentNode?or(rV.fromDom(r.parentNode),r=>!rQ(e,r)&&t(r)):en.none()},or=(e,t)=>{let r=e=>t(rV.fromDom(e)),n=ey(e.dom.childNodes,r);return n.map(rV.fromDom)},on=(e,t)=>{let r=e=>{for(let n=0;n<e.childNodes.length;n++){let o=rV.fromDom(e.childNodes[n]);if(t(o))return en.some(o);let l=r(e.childNodes[n]);if(l.isSome())return l}return en.none()};return r(e.dom)},oo=(e,t,r)=>n7(e,e=>rK(e,t),r),ol=(e,t)=>rX(t,e),oa=(e,t,r)=>{let n=(e,t)=>rK(e,t);return n4(n,oo,e,t,r)},oi=(e,t,r)=>oo(e,t,r).isSome();class os{constructor(e,t){this.node=e,this.rootNode=t,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node}prev(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node}prev2(e){return this.node=this.findPreviousNode(this.node,e),this.node}findSibling(e,t,r,n){if(e){if(!n&&e[t])return e[t];if(e!==this.rootNode){let o=e[r];if(o)return o;for(let l=e.parentNode;l&&l!==this.rootNode;l=l.parentNode)if(o=l[r])return o}}}findPreviousNode(e,t){if(e){let r=e.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!t){for(let n=r.lastChild;n;n=n.lastChild)if(!n.lastChild)return n}return r}let o=e.parentNode;if(o&&o!==this.rootNode)return o}}}let od=e=>t=>!!t&&t.nodeType===e,oc=e=>!!e&&!Object.getPrototypeOf(e),ou=od(1),om=e=>{let t=e.toLowerCase();return e=>j(e)&&e.nodeName.toLowerCase()===t},of=e=>{let t=e.map(e=>e.toLowerCase());return e=>{if(e&&e.nodeName){let r=e.nodeName.toLowerCase();return ed(t,r)}return!1}},og=(e,t)=>{let r=t.toLowerCase().split(" ");return t=>{if(ou(t)){let n=t.ownerDocument.defaultView;if(n)for(let o=0;o<r.length;o++){let l=n.getComputedStyle(t,null),a=l?l.getPropertyValue(e):null;if(a===r[o])return!0}}return!1}},op=e=>t=>ou(t)&&t.hasAttribute(e),oh=e=>ou(e)&&e.hasAttribute("data-mce-bogus"),ob=e=>ou(e)&&"all"===e.getAttribute("data-mce-bogus"),ov=e=>ou(e)&&"TABLE"===e.tagName,oy=e=>t=>!!ou(t)&&(t.contentEditable===e||t.getAttribute("data-mce-contenteditable")===e),oC=of(["textarea","input"]),ox=od(3),ow=od(4),ok=od(7),o_=od(8),oS=od(9),oE=od(11),oN=om("br"),oD=om("img"),oR=oy("true"),oA=oy("false"),oO=of(["td","th"]),oT=of(["td","th","caption"]),oB=of(["video","audio","object","embed"]),oP=om("li"),oL=e=>"\uFEFF"===e,oF=e=>e.replace(/\uFEFF/g,""),oM=(e,t)=>rY(t,e),oI=((e,t)=>{let r=r=>{if(!e(r))throw Error("Can only get "+t+" value of a "+t+" node");return n(r).getOr("")},n=t=>e(t)?en.from(t.dom.nodeValue):en.none(),o=(r,n)=>{if(!e(r))throw Error("Can only set raw "+t+" value of a "+t+" node");r.dom.nodeValue=n};return{get:r,getOption:n,set:o}})(rf,"text"),oU=e=>oI.get(e),oj=e=>oI.getOption(e),oz=["pre"].concat(["h1","h2","h3","h4","h5","h6"]),oH=e=>{let t;return r=>eW(t=t||eE(e,er),rs(r))},o$=oH(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),oq=e=>"table"===rs(e),oV=e=>rm(e)&&!o$(e),oW=e=>rm(e)&&"br"===rs(e),oK=oH(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),oG=oH(["ul","ol","dl"]),oY=oH(["li","dd","dt"]),oX=oH(["thead","tbody","tfoot"]),oQ=oH(["td","th"]),oJ=oH(["pre","script","textarea","style"]),oZ=oH(oz),o0=e=>oZ(e)||oV(e),o1=e=>{let t=[],r=e.dom;for(;r;)t.push(rV.fromDom(r)),r=r.lastChild;return t},o2=e=>{let t=oM(e,"br"),r=ep(o1(e).slice(-1),oW);t.length===r.length&&em(r,nF)},o3=()=>{let e=rV.fromTag("br");return rv(e,"data-mce-bogus","1"),e},o8=e=>{nL(e),nO(e,o3())},o5=e=>{no(e).each(t=>{r9(t).each(r=>{o$(e)&&oW(t)&&o$(r)&&nF(t)})})},o6=e=>(ox(e)&&(e=e.parentNode),ou(e)&&e.hasAttribute("data-mce-caret")),o9=e=>ox(e)&&oL(e.data),o4=e=>o6(e)||o9(e),o7=e=>e.firstChild!==e.lastChild||!oN(e.firstChild),le=(e,t)=>{var r;let n=null!==(r=e.ownerDocument)&&void 0!==r?r:document,o=n.createTextNode("\uFEFF"),l=e.parentNode;if(t){let a=e.previousSibling;if(ox(a)){if(o4(a))return a;if(ll(a))return a.splitText(a.data.length-1)}null==l||l.insertBefore(o,e)}else{let i=e.nextSibling;if(ox(i)){if(o4(i))return i;if(lo(i))return i.splitText(1),i}e.nextSibling?null==l||l.insertBefore(o,e.nextSibling):null==l||l.appendChild(o)}return o},lt=e=>{let t=e.container();return!!ox(t)&&("\uFEFF"===t.data.charAt(e.offset())||e.isAtStart()&&o9(t.previousSibling))},lr=e=>{let t=e.container();return!!ox(t)&&("\uFEFF"===t.data.charAt(e.offset()-1)||e.isAtEnd()&&o9(t.nextSibling))},ln=(e,t,r)=>{var n;let o=null!==(n=t.ownerDocument)&&void 0!==n?n:document,l=o.createElement(e);l.setAttribute("data-mce-caret",r?"before":"after"),l.setAttribute("data-mce-bogus","all"),l.appendChild(o3().dom);let a=t.parentNode;return r?null==a||a.insertBefore(l,t):t.nextSibling?null==a||a.insertBefore(l,t.nextSibling):null==a||a.appendChild(l),l},lo=e=>ox(e)&&"\uFEFF"===e.data[0],ll=e=>ox(e)&&"\uFEFF"===e.data[e.data.length-1],la=e=>{var t;let r=e.getElementsByTagName("br"),n=r[r.length-1];oh(n)&&(null===(t=n.parentNode)||void 0===t||t.removeChild(n))},li=e=>e&&e.hasAttribute("data-mce-caret")?(la(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,ls=e=>o6(e.startContainer),ld=of(["script","style","textarea"]),lc=of(["img","input","textarea","hr","iframe","video","audio","object","embed"]),lu=of(["table"]),lm=e=>!o4(e)&&(ox(e)?!ld(e.parentNode):lc(e)||oN(e)||lu(e)||lg(e)),lf=e=>ou(e)&&"true"===e.getAttribute("unselectable"),lg=e=>!lf(e)&&oA(e),lp=(e,t)=>{for(let r=e.parentNode;r&&r!==t;r=r.parentNode){if(lg(r))return!1;if(oR(r))break}return!0},lh=e=>!!lg(e)&&!eb(eO(e.getElementsByTagName("*")),(e,t)=>e||oR(t),!1),lb=e=>lc(e)||lh(e),lv=(e,t)=>lm(e)&&lp(e,t),ly=/^[ \t\r\n]*$/,lC=e=>ly.test(e),lx=e=>-1!==" \f	\v".indexOf(e),lw=e=>"\n"===e||"\r"===e,lk=(e,t)=>t<e.length&&t>=0&&lw(e[t]),l_=(e,t=4,r=!0,n=!0)=>{let o=tC(" ",t),l=e.replace(/\t/g,o),a=eb(l,(e,t)=>lx(t)||"\xa0"===t?e.pcIsSpace||""===e.str&&r||e.str.length===l.length-1&&n||lk(l,e.str.length+1)?{pcIsSpace:!1,str:e.str+"\xa0"}:{pcIsSpace:!0,str:e.str+" "}:{pcIsSpace:lw(t),str:e.str+t},{pcIsSpace:!1,str:""});return a.str},lS=(e,t)=>{let r=rV.fromDom(t),n=rV.fromDom(e);return oi(n,"pre,code",X(rQ,r))},lE=(e,t)=>ox(e)&&lC(e.data)&&!lS(e,t),lN=e=>ou(e)&&"A"===e.nodeName&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),lD=(e,t)=>lm(e)&&!lE(e,t)||lN(e)||lR(e),lR=op("data-mce-bookmark"),lA=op("data-mce-bogus"),lO=e=>ou(e)&&"all"===e.getAttribute("data-mce-bogus"),lT=(e,t)=>{let r=0;if(lD(e,e))return!1;{let n=e.firstChild;if(!n)return!0;let o=new os(n,e);do{if(t){if(lO(n)){n=o.next(!0);continue}if(lA(n)){n=o.next();continue}}if(oN(n)){r++,n=o.next();continue}if(lD(n,e))return!1;n=o.next()}while(n);return r<=1}},lB=(e,t=!0)=>lT(e.dom,t),lP="data-mce-block",lL=e=>ep(eP(e),e=>!/[A-Z]/.test(e)),lF=e=>lL(e).join(","),lM=(e,t)=>j(t.querySelector(e))?(t.setAttribute(lP,"true"),"inline-boundary"===t.getAttribute("data-mce-selected")&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(lP),!1),lI=(e,t)=>{let r=lF(e.getTransparentElements()),n=lF(e.getBlockElements());return ep(t.querySelectorAll(r),e=>lM(n,e))},lU=(e,t)=>{var r;let n=t?"lastChild":"firstChild";for(let o=e[n];o;o=o[n])if(lB(rV.fromDom(o))){null===(r=o.parentNode)||void 0===r||r.removeChild(o);return}},lj=(e,t)=>{let r=document.createRange(),n=e.parentNode;if(n){r.setStartBefore(e),r.setEndBefore(t);let o=r.extractContents();lU(o,!0),r.setStartAfter(t),r.setEndAfter(e);let l=r.extractContents();lU(l,!1),lB(rV.fromDom(o))||n.insertBefore(o,e),lB(rV.fromDom(t))||n.insertBefore(t,e),lB(rV.fromDom(l))||n.insertBefore(l,e),n.removeChild(e)}},lz=(e,t,r)=>{let n=e.getBlockElements(),o=rV.fromDom(t),l=e=>rs(e) in n,a=e=>rQ(e,o);em(nU(r),t=>{n7(t,l,a).each(r=>{let n=n6(t,t=>l(t)&&!e.isValidChild(rs(r),rs(t)));if(n.length>0){let o=r8(r);em(n,e=>{n7(e,l,a).each(t=>{lj(t.dom,e.dom)})}),o.each(t=>lI(e,t.dom))}})})},lH=(e,t)=>{let r=lI(e,t);lz(e,t,r)},l$=(e,t)=>{if(lK(e,t)){let r=lF(e.getBlockElements());lM(r,t)}},lq=(e,t,r)=>{let n=e=>rQ(e,rV.fromDom(t)),o=r5(rV.fromDom(r),n);eD(o,o.length-2).filter(rm).fold(()=>lH(e,t),t=>lH(e,t.dom))},lV=e=>e.hasAttribute(lP),lW=(e,t)=>eW(e.getTransparentElements(),t),lK=(e,t)=>ou(t)&&lW(e,t.nodeName),lG=(e,t)=>lK(e,t)&&lV(t),lY=(e,t)=>1===t.type&&lW(e,t.name)&&T(t.attr(lP)),lX=(e,t)=>1===t.type&&lW(e,t.name)&&I(t.attr(lP)),lQ=tY().browser,lJ=e=>ey(e,rm),lZ=e=>lQ.isFirefox()&&"table"===rs(e)?lJ(nt(e)).filter(e=>"caption"===rs(e)).bind(e=>lJ(ne(e)).map(t=>{let r=t.dom.offsetTop,n=e.dom.offsetTop,o=e.dom.offsetHeight;return r<=n?-o:0})).getOr(0):0,l0=(e,t)=>e.children&&ed(e.children,t),l1=(e,t,r)=>{let n=0,o=0,l=e.ownerDocument;if(r=r||e,t){if(r===e&&t.getBoundingClientRect&&"static"===nw(rV.fromDom(e),"position")){let a=t.getBoundingClientRect();return n=a.left+(l.documentElement.scrollLeft||e.scrollLeft)-l.documentElement.clientLeft,o=a.top+(l.documentElement.scrollTop||e.scrollTop)-l.documentElement.clientTop,{x:n,y:o}}let i=t;for(;i&&i!==r&&i.nodeType&&!l0(i,r);){let s=i;n+=s.offsetLeft||0,o+=s.offsetTop||0,i=s.offsetParent}for(i=t.parentNode;i&&i!==r&&i.nodeType&&!l0(i,r);)n-=i.scrollLeft||0,o-=i.scrollTop||0,i=i.parentNode;o+=lZ(rV.fromDom(t))}return{x:n,y:o}},l2=(e,t={})=>{let r=0,n={},o=rV.fromDom(e),l=r0(o),a=t.maxLoadTime||5e3,i=e=>{t.referrerPolicy=e},s=e=>{t.contentCssCors=e},d=e=>{nO(nu(o),e)},c=e=>{let t=nu(o);ol(t,"#"+e).each(nF)},u=e=>eV(n,e).getOrThunk(()=>({id:"mce-u"+r++,passed:[],failed:[],count:0})),m=r=>new Promise((o,i)=>{let s;let c=rr._addCacheSuffix(r),m=u(c);n[c]=m,m.count++;let f=(e,t)=>{em(e,ee),m.status=t,m.passed=[],m.failed=[],s&&(s.onload=null,s.onerror=null,s=null)},g=()=>f(m.passed,2),p=()=>f(m.failed,3),h=(e,t)=>{e()||(Date.now()-y<a?setTimeout(t):p())},b=()=>{h(()=>{let t=e.styleSheets,r=t.length;for(;r--;){let n=t[r],o=n.ownerNode;if(o&&s&&o.id===s.id)return g(),!0}return!1},b)};if(o&&m.passed.push(o),i&&m.failed.push(i),1===m.status)return;if(2===m.status){g();return}if(3===m.status){p();return}m.status=1;let v=rV.fromTag("link",l.dom);ry(v,{rel:"stylesheet",type:"text/css",id:m.id});let y=Date.now();t.contentCssCors&&rv(v,"crossOrigin","anonymous"),t.referrerPolicy&&rv(v,"referrerpolicy",t.referrerPolicy),(s=v.dom).onload=b,s.onerror=p,d(v),rv(v,"href",c)}),f=e=>{let t=Promise.allSettled(eu(e,e=>m(e).then(K(e))));return t.then(e=>{let t=eg(e,e=>"fulfilled"===e.status);return t.fail.length>0?Promise.reject(eu(t.fail,e=>e.reason)):eu(t.pass,e=>e.value)})},g=e=>{let t=rr._addCacheSuffix(e);eV(n,t).each(e=>{let r=--e.count;0===r&&(delete n[t],c(e.id))})},p=e=>{em(e,e=>{g(e)})};return{load:m,loadAll:f,unload:g,unloadAll:p,_setReferrerPolicy:i,_setContentCssCors:s}},l3=(()=>{let e=new WeakMap,t=(t,r)=>{let n=nc(t),o=n.dom;return en.from(e.get(o)).getOrThunk(()=>{let t=l2(o,r);return e.set(o,t),t})};return{forElement:t}})(),l8=e=>"span"===e.nodeName.toLowerCase(),l5=(e,t)=>j(e)&&(lD(e,t)||oV(rV.fromDom(e))),l6=(e,t)=>{let r=new os(e,t).prev(!1),n=new os(e,t).next(!1),o=I(r)||l5(r,t),l=I(n)||l5(n,t);return o&&l},l9=e=>l8(e)&&"bookmark"===e.getAttribute("data-mce-type"),l4=(e,t)=>ox(e)&&e.data.length>0&&l6(e,t),l7=e=>!!ou(e)&&e.childNodes.length>0,ae=e=>oE(e)||oS(e),at=(e,t,r)=>{var n;let o=r||t;if(ou(t)&&l9(t))return t;let l=t.childNodes;for(let a=l.length-1;a>=0;a--)at(e,l[a],o);if(ou(t)){let i=t.childNodes;1===i.length&&l9(i[0])&&(null===(n=t.parentNode)||void 0===n||n.insertBefore(i[0],t))}return ae(t)||lD(t,o)||l7(t)||l4(t,o)||e.remove(t),t},ar=rr.makeMap,an=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ao=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,al=/[<>&\"\']/g,aa=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,ai={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},as={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},ad={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},ac=e=>{let t=rV.fromTag("div").dom;return t.innerHTML=e,t.textContent||t.innerText||e},au=(e,t)=>{let r={};if(e){let n=e.split(",");t=t||10;for(let o=0;o<n.length;o+=2){let l=String.fromCharCode(parseInt(n[o],t));if(!as[l]){let a="&"+n[o+1]+";";r[l]=a,r[a]=l}}return r}},am=au("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),af=(e,t)=>e.replace(t?an:ao,e=>as[e]||e),ag=e=>(""+e).replace(al,e=>as[e]||e),ap=(e,t)=>e.replace(t?an:ao,e=>e.length>1?"&#"+((e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320)+65536)+";":as[e]||"&#"+e.charCodeAt(0)+";"),ah=(e,t,r)=>{let n=r||am;return e.replace(t?an:ao,e=>as[e]||n[e]||e)},ab=(e,t)=>{let r=au(t)||am,n=(e,t)=>e.replace(t?an:ao,e=>void 0!==as[e]?as[e]:void 0!==r[e]?r[e]:e.length>1?"&#"+((e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";"),o=(e,t)=>ah(e,t,r),l=ar(e.replace(/\+/g,","));return l.named&&l.numeric?n:l.named?t?o:ah:l.numeric?ap:af},av=e=>e.replace(aa,(e,t)=>t?(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))>65535?String.fromCharCode(55296+((t-=65536)>>10),56320+(1023&t)):ai[t]||String.fromCharCode(t):ad[e]||am[e]||ac(e)),ay={encodeRaw:af,encodeAllRaw:ag,encodeNumeric:ap,encodeNamed:ah,getEncodeFunc:ab,decode:av},aC={},ax={},aw={},ak=rr.makeMap,a_=rr.each,aS=rr.extend,aE=rr.explode,aN=rr.inArray,aD=(e,t)=>(e=rr.trim(e))?e.split(t||" "):[],aR=(e,t={})=>{let r=ak(e," ",ak(e.toUpperCase()," "));return aS(r,t)},aA=e=>aR("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),aO=e=>{let t,r,n,o;let l={},a=(e,r="",n="")=>{let o=aD(n),a=aD(e),i=a.length;for(;i--;){let s=aD([t,r].join(" "));l[a[i]]={attributes:eE(s,()=>({})),attributesOrder:s,children:eE(o,K(aw))}}},i=(e,t)=>{let r=aD(e),n=aD(t),o=r.length;for(;o--;){let a=l[r[o]];for(let i=0,s=n.length;i<s;i++)a.attributes[n[i]]={},a.attributesOrder.push(n[i])}};if(aC[e])return aC[e];if(t="id accesskey class dir lang style tabindex title role",r="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",n="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==e&&(t+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",r+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",n+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==e){t+=" xml:lang";let s="acronym applet basefont big font strike tt";n=[n,s].join(" "),a_(aD(s),e=>{a(e,"",n)});let d="center dir isindex noframes";o=[r=[r,d].join(" "),n].join(" "),a_(aD(d),e=>{a(e,"",o)})}return o=o||[r,n].join(" "),a("html","manifest","head body"),a("head","","base command link meta noscript script style title"),a("title hr noscript br"),a("base","href target"),a("link","href rel media hreflang type sizes hreflang"),a("meta","name http-equiv content charset"),a("style","media type scoped"),a("script","src async defer type charset"),a("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",o),a("address dt dd div caption","",o),a("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",n),a("blockquote","cite",o),a("ol","reversed start type","li"),a("ul","","li"),a("li","value",o),a("dl","","dt dd"),a("a","href target rel media hreflang type",o),a("q","cite",n),a("ins del","cite datetime",o),a("img","src sizes srcset alt usemap ismap width height"),a("iframe","src name width height",o),a("embed","src type width height"),a("object","data type typemustmatch name usemap form width height",[o,"param"].join(" ")),a("param","name value"),a("map","name",[o,"area"].join(" ")),a("area","alt coords shape href target rel media hreflang type"),a("table","border","caption colgroup thead tfoot tbody tr"+("html4"===e?" col":"")),a("colgroup","span","col"),a("col","span"),a("tbody thead tfoot","","tr"),a("tr","","td th"),a("td","colspan rowspan headers",o),a("th","colspan rowspan headers scope abbr",o),a("form","accept-charset action autocomplete enctype method name novalidate target",o),a("fieldset","disabled form name",[o,"legend"].join(" ")),a("label","form for",n),a("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),a("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===e?o:n),a("select","disabled form multiple name required size","option optgroup"),a("optgroup","disabled label","option"),a("option","disabled label selected value"),a("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),a("menu","type label",[o,"li"].join(" ")),a("noscript","",o),"html4"!==e&&(a("wbr"),a("ruby","",[n,"rt rp"].join(" ")),a("figcaption","",o),a("mark rt rp summary bdi","",n),a("canvas","width height",o),a("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[o,"track source"].join(" ")),a("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[o,"track source"].join(" ")),a("picture","","img source"),a("source","src srcset type media sizes"),a("track","kind src srclang label default"),a("datalist","",[n,"option"].join(" ")),a("article section nav aside main header footer","",o),a("hgroup","","h1 h2 h3 h4 h5 h6"),a("figure","",[o,"figcaption"].join(" ")),a("time","datetime",n),a("dialog","open",o),a("command","type label icon disabled checked radiogroup command"),a("output","for form name",n),a("progress","value max",n),a("meter","value min max low high optimum",n),a("details","open",[o,"summary"].join(" ")),a("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==e&&(i("script","language xml:space"),i("style","xml:space"),i("object","declare classid code codebase codetype archive standby align border hspace vspace"),i("embed","align name hspace vspace"),i("param","valuetype type"),i("a","charset name rev shape coords"),i("br","clear"),i("applet","codebase archive code object alt name width height align hspace vspace"),i("img","name longdesc align border hspace vspace"),i("iframe","longdesc frameborder marginwidth marginheight scrolling align"),i("font basefont","size color face"),i("input","usemap align"),i("select"),i("textarea"),i("h1 h2 h3 h4 h5 h6 div p legend caption","align"),i("ul","type compact"),i("li","type"),i("ol dl menu dir","compact"),i("pre","width xml:space"),i("hr","align noshade size width"),i("isindex","prompt"),i("table","summary width frame rules cellspacing cellpadding align bgcolor"),i("col","width align char charoff valign"),i("colgroup","width align char charoff valign"),i("thead","align char charoff valign"),i("tr","align char charoff valign bgcolor"),i("th","axis align char charoff valign nowrap bgcolor width height"),i("form","accept"),i("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),i("tfoot","align char charoff valign"),i("tbody","align char charoff valign"),i("area","nohref"),i("body","background bgcolor text link vlink alink")),"html4"!==e&&(i("input button select textarea","autofocus"),i("input textarea","placeholder"),i("a","download"),i("link script img","crossorigin"),i("img","loading"),i("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==e&&em([l.video,l.audio],e=>{delete e.children.audio,delete e.children.video}),a_(aD("a form meter progress dfn"),e=>{l[e]&&delete l[e].children[e]}),delete l.caption.children.table,delete l.script,aC[e]=l,l},aT=(e,t)=>{if(e){let r={};return T(e)&&(e={"*":e}),a_(e,(e,n)=>{r[n]=r[n.toUpperCase()]="map"===t?ak(e,/[, ]/):aE(e,/[, ]/)}),r}},aB=(e={})=>{var t;let r={},n={},o=[],l={},a={},i=(t,r,n)=>{let o=e[t];if(o)return ak(o,/[, ]/,ak(o.toUpperCase(),/[, ]/));{let l=ax[t];return l||(l=aR(r,n),ax[t]=l),l}},s=null!==(t=e.schema)&&void 0!==t?t:"html5",d=aO(s);!1===e.verify_html&&(e.valid_elements="*[*]");let c=aT(e.valid_styles),u=aT(e.invalid_styles,"map"),m=aT(e.valid_classes,"map"),f=i("whitespace_elements","pre script noscript style textarea video audio iframe object code"),g=i("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),p=i("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),h=i("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),b="td th iframe video audio object script code",v=i("non_empty_elements",b+" pre",p),y=i("move_caret_before_on_enter_elements",b+" table",p),C=i("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),x=i("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",C),w=i("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),k=i("transparent_elements","a ins del canvas map");a_("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),e=>{a[e]=RegExp("</"+e+"[^>]*>","gi")});let _=e=>RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),S=e=>{let t=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,n=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,l=/[*?+]/;if(e){let a,i;let s=aD(e,",");r["@"]&&(a=r["@"].attributes,i=r["@"].attributesOrder);for(let d=0,c=s.length;d<c;d++){let u=t.exec(s[d]);if(u){let m=u[1],f=u[2],g=u[3],p=u[5],h={},b=[],v={attributes:h,attributesOrder:b};if("#"===m&&(v.paddEmpty=!0),"-"===m&&(v.removeEmpty=!0),"!"===u[4]&&(v.removeEmptyAttrs=!0),a&&(eF(a,(e,t)=>{h[t]=e}),i&&b.push(...i)),p){let y=aD(p,"|");for(let C=0,x=y.length;C<x;C++)if(u=n.exec(y[C])){let w={},k=u[1],S=u[2].replace(/[\\:]:/g,":"),E=u[3],N=u[4];if("!"===k&&(v.attributesRequired=v.attributesRequired||[],v.attributesRequired.push(S),w.required=!0),"-"===k){delete h[S],b.splice(aN(b,S),1);continue}if(E&&("="===E&&(v.attributesDefault=v.attributesDefault||[],v.attributesDefault.push({name:S,value:N}),w.defaultValue=N),"~"===E&&(v.attributesForced=v.attributesForced||[],v.attributesForced.push({name:S,value:N}),w.forcedValue=N),"<"===E&&(w.validValues=ak(N,"?"))),l.test(S)){let D=w;v.attributePatterns=v.attributePatterns||[],D.pattern=_(S),v.attributePatterns.push(D)}else h[S]||b.push(S),h[S]=w}}if(a||"@"!==f||(a=h,i=b),g&&(v.outputName=f,r[g]=v),l.test(f)){let R=v;R.pattern=_(f),o.push(R)}else r[f]=v}}}},E=e=>{o=[],em(eP(r),e=>{delete r[e]}),S(e),a_(d,(e,t)=>{n[t]=e.children})},N=e=>{let t=/^(~)?(.+)$/;e&&(delete ax.text_block_elements,delete ax.block_elements,a_(aD(e,","),e=>{let o=t.exec(e);if(o){let a="~"===o[1],i=a?"span":"div",s=o[2];if(n[s]=n[i],l[s]=i,v[s.toUpperCase()]={},v[s]={},a||(x[s.toUpperCase()]={},x[s]={}),!r[s]){let d=r[i];delete(d=aS({},d)).removeEmptyAttrs,delete d.removeEmpty,r[s]=d}a_(n,(e,t)=>{e[i]&&(n[t]=e=aS({},n[t]),e[s]=e[i])})}}))},D=e=>{let t=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;delete aC[s],e&&a_(aD(e,","),e=>{let r=t.exec(e);if(r){let o;let l=r[1];o=l?n[r[2]]:n[r[2]]={"#comment":{}},o=n[r[2]],a_(aD(r[3],"|"),e=>{"-"===l?delete o[e]:o[e]={}})}})},R=e=>{let t=r[e];if(t)return t;let n=o.length;for(;n--;){let l=o[n];if(l.pattern.test(e))return l}};e.valid_elements?E(e.valid_elements):(a_(d,(e,t)=>{r[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},n[t]=e.children}),a_(aD("strong/b em/i"),e=>{let t=aD(e,"/");r[t[1]].outputName=t[0]}),a_(w,(t,n)=>{r[n]&&(e.padd_empty_block_inline_children&&(r[n].paddInEmptyBlock=!0),r[n].removeEmpty=!0)}),a_(aD("ol ul blockquote a table tbody"),e=>{r[e]&&(r[e].removeEmpty=!0)}),a_(aD("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),e=>{r[e].paddEmpty=!0}),a_(aD("span"),e=>{r[e].removeEmptyAttrs=!0})),N(e.custom_elements),D(e.valid_children),S(e.extended_valid_elements),D("+ol[ul|ol],+ul[ul|ol]"),a_({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(e,t)=>{r[t]&&(r[t].parentsRequired=aD(e))}),e.invalid_elements&&a_(aE(e.invalid_elements),e=>{r[e]&&delete r[e]}),R("span")||S("span[!data-mce-type|*]");let A=K(c),O=K(u),T=K(m),B=K(h),P=K(x),L=K(C),F=K(w),M=K(Object.seal(p)),I=K(g),U=K(v),j=K(y),z=K(f),H=K(k),$=K(Object.seal(a)),q=(e,t)=>{let r=n[e.toLowerCase()];return!!(r&&r[t.toLowerCase()])},V=(e,t)=>{let r=R(e);if(r){if(!t)return!0;{if(r.attributes[t])return!0;let n=r.attributePatterns;if(n){let o=n.length;for(;o--;)if(n[o].pattern.test(t))return!0}}}return!1},W=K(l);return{type:s,children:n,elements:r,getValidStyles:A,getValidClasses:T,getBlockElements:P,getInvalidStyles:O,getVoidElements:M,getTextBlockElements:L,getTextInlineElements:F,getBoolAttrs:B,getElementRule:R,getSelfClosingElements:I,getNonEmptyElements:U,getMoveCaretBeforeOnEnterElements:j,getWhitespaceElements:z,getTransparentElements:H,getSpecialElements:$,isValidChild:q,isValid:V,getCustomElements:W,addValidElements:S,setValidElements:E,addCustomElements:N,addValidChildren:D}},aP=(e={},t)=>{let r,n;let o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,l=/\s*([^:]+):\s*([^;]+);?/g,a=/\s+$/,i={};t&&(r=t.getValidStyles(),n=t.getInvalidStyles());let s="\\\" \\' \\; \\: ; : \uFEFF".split(" ");for(let d=0;d<s.length;d++)i[s[d]]="\uFEFF"+d,i["\uFEFF"+d]=s[d];let c={parse:t=>{let r={},n=!1,s=e.url_converter,d=e.url_converter_scope||c,u=(e,t,n)=>{let o=r[e+"-top"+t];if(!o)return;let l=r[e+"-right"+t];if(!l)return;let a=r[e+"-bottom"+t];if(!a)return;let i=r[e+"-left"+t];if(!i)return;let s=[o,l,a,i],d=s.length-1;for(;d--&&s[d]===s[d+1];);d>-1&&n||(r[e+t]=-1===d?s[0]:s.join(" "),delete r[e+"-top"+t],delete r[e+"-right"+t],delete r[e+"-bottom"+t],delete r[e+"-left"+t])},m=e=>{let t=r[e];if(!t)return;let n=t.split(" "),o=n.length;for(;o--;)if(n[o]!==n[0])return!1;return r[e]=n[0],!0},f=e=>(n=!0,i[e]),g=(e,t)=>(n&&(e=e.replace(/\uFEFF[0-9]/g,e=>i[e])),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e),p=e=>String.fromCharCode(parseInt(e.slice(1),16)),h=e=>e.replace(/\\[0-9a-f]+/gi,p),b=(t,r,n,o,l,a)=>{if(l=l||a)return"'"+(l=g(l)).replace(/\'/g,"\\'")+"'";if(r=g(r||n||o||""),!e.allow_script_urls){let i=r.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(i)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(i))return""}return s&&(r=s.call(d,r,"style")),"url('"+r.replace(/\'/g,"\\'")+"')"};if(t){var v,y,C;let x;for(t=(t=t.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,f).replace(/\"[^\"]+\"|\'[^\']+\'/g,e=>e.replace(/[;:]/g,f));x=l.exec(t);){l.lastIndex=x.index+x[0].length;let w=x[1].replace(a,"").toLowerCase(),k=x[2].replace(a,"");if(w&&k){if(w=h(w),k=h(k),-1!==w.indexOf("\uFEFF")||-1!==w.indexOf('"')||!e.allow_script_urls&&("behavior"===w||/expression\s*\(|\/\*|\*\//.test(k)))continue;"font-weight"===w&&"700"===k?k="bold":("color"===w||"background-color"===w)&&(k=k.toLowerCase()),k=k.replace(o,b),r[w]=n?g(k,!0):k}}u("border","",!0),u("border","-width"),u("border","-color"),u("border","-style"),u("padding",""),u("margin",""),y="border-style",C="border-color",m(v="border-width")&&m(y)&&m(C)&&(r.border=r[v]+" "+r[y]+" "+r[C],delete r[v],delete r[y],delete r[C]),"medium none"===r.border&&delete r.border,"none"===r["border-image"]&&delete r["border-image"]}return r},serialize:(e,t)=>{let o="",l=(t,r)=>{let n=r[t];if(n)for(let l=0,a=n.length;l<a;l++){let i=n[l],s=e[i];s&&(o+=(o.length>0?" ":"")+i+": "+s+";")}},a=(e,t)=>{if(!n||!t)return!0;let r=n["*"];return(!r||!r[e])&&!((r=n[t])&&r[e])};return t&&r?(l("*",r),l(t,r)):eF(e,(e,r)=>{e&&a(r,t)&&(o+=(o.length>0?" ":"")+r+": "+e+";")}),o}};return c},aL={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},aF=e=>e instanceof Event||z(e.initEvent),aM=e=>e.isDefaultPrevented===er||e.isDefaultPrevented===et,aI=e=>U(e.preventDefault)||aF(e),aU=(e,t)=>{let r=null!=t?t:{};for(let n in e)eW(aL,n)||(r[n]=e[n]);return j(e.composedPath)&&(r.composedPath=()=>e.composedPath()),r},aj=(e,t,r,n)=>{var o;let l=aU(t,n);return l.type=e,U(l.target)&&(l.target=null!==(o=l.srcElement)&&void 0!==o?o:r),aI(t)&&(l.preventDefault=()=>{l.defaultPrevented=!0,l.isDefaultPrevented=er,z(t.preventDefault)&&t.preventDefault()},l.stopPropagation=()=>{l.cancelBubble=!0,l.isPropagationStopped=er,z(t.stopPropagation)&&t.stopPropagation()},l.stopImmediatePropagation=()=>{l.isImmediatePropagationStopped=er,l.stopPropagation()},aM(l)||(l.isDefaultPrevented=!0===l.defaultPrevented?er:et,l.isPropagationStopped=!0===l.cancelBubble?er:et,l.isImmediatePropagationStopped=et)),l},az=/^(?:mouse|contextmenu)|click/,aH=(e,t,r,n)=>{e.addEventListener(t,r,n||!1)},a$=(e,t,r,n)=>{e.removeEventListener(t,r,n||!1)},aq=e=>j(e)&&az.test(e.type),aV=(e,t)=>{let r=aj(e.type,e,document,t);if(aq(e)&&I(e.pageX)&&!I(e.clientX)){let n=r.target.ownerDocument||document,o=n.documentElement,l=n.body,a=r;a.pageX=e.clientX+(o&&o.scrollLeft||l&&l.scrollLeft||0)-(o&&o.clientLeft||l&&l.clientLeft||0),a.pageY=e.clientY+(o&&o.scrollTop||l&&l.scrollTop||0)-(o&&o.clientTop||l&&l.clientTop||0)}return r},aW=(e,t,r)=>{let n=e.document,o={type:"ready"};if(r.domLoaded){t(o);return}let l=()=>{a$(e,"DOMContentLoaded",l),a$(e,"load",l),r.domLoaded||(r.domLoaded=!0,t(o)),e=null};"complete"===n.readyState||"interactive"===n.readyState&&n.body?l():aH(e,"DOMContentLoaded",l),r.domLoaded||aH(e,"load",l)};class aK{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(e,t,r,n){let o,l;let a=this,i=window,s=e=>{a.executeHandlers(aV(e||i.event),l)};if(!e||ox(e)||o_(e))return r;e[a.expando]?l=e[a.expando]:(l=a.count++,e[a.expando]=l,a.events[l]={}),n=n||e;let d=t.split(" "),c=d.length;for(;c--;){let u=d[c],m=s,f=!1,g=!1;if("DOMContentLoaded"===u&&(u="ready"),a.domLoaded&&"ready"===u&&"complete"===e.readyState){r.call(n,aV({type:u}));continue}a.hasFocusIn||"focusin"!==u&&"focusout"!==u||(f=!0,g="focusin"===u?"focus":"blur",m=e=>{let t=aV(e||i.event);t.type="focus"===t.type?"focusin":"focusout",a.executeHandlers(t,l)}),(o=a.events[l][u])?"ready"===u&&a.domLoaded?r(aV({type:u})):o.push({func:r,scope:n}):(a.events[l][u]=o=[{func:r,scope:n}],o.fakeName=g,o.capture=f,o.nativeHandler=m,"ready"===u?aW(e,m,a):aH(e,g||u,m,f))}return e=o=null,r}unbind(e,t,r){if(!e||ox(e)||o_(e))return this;let n=e[this.expando];if(n){let o=this.events[n];if(t){let l=t.split(" "),a=l.length;for(;a--;){let i=l[a],s=o[i];if(s){if(r){let d=s.length;for(;d--;)if(s[d].func===r){let c=s.nativeHandler,u=s.fakeName,m=s.capture,f=s.slice(0,d).concat(s.slice(d+1));f.nativeHandler=c,f.fakeName=u,f.capture=m,o[i]=f}}r&&0!==s.length||(delete o[i],a$(e,s.fakeName||i,s.nativeHandler,s.capture))}}}else eF(o,(t,r)=>{a$(e,t.fakeName||r,t.nativeHandler,t.capture)}),o={};for(let g in o)if(eW(o,g))return this;delete this.events[n];try{delete e[this.expando]}catch(p){e[this.expando]=null}}return this}fire(e,t,r){return this.dispatch(e,t,r)}dispatch(e,t,r){if(!e||ox(e)||o_(e))return this;let n=aV({type:t,target:e},r);do{let o=e[this.expando];o&&this.executeHandlers(n,o),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!n.isPropagationStopped());return this}clean(e){if(!e||ox(e)||o_(e))return this;if(e[this.expando]&&this.unbind(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName){this.unbind(e);let t=e.getElementsByTagName("*"),r=t.length;for(;r--;)(e=t[r])[this.expando]&&this.unbind(e)}return this}destroy(){this.events={}}cancel(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}executeHandlers(e,t){let r=this.events[t],n=r&&r[e.type];if(n)for(let o=0,l=n.length;o<l;o++){let a=n[o];if(a&&!1===a.func.call(a.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}}}aK.Event=new aK;let aG=rr.each,aY=rr.grep,aX="data-mce-style",aQ=rr.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),aJ=(e,t,r)=>{U(r)||""===r?rk(e,t):rv(e,t,r)},aZ=e=>e.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),a0=(e,t)=>{let r=0;if(e)for(let n=e.nodeType,o=e.previousSibling;o;o=o.previousSibling){let l=o.nodeType;(!(t&&ox(o))||l!==n&&o.data.length)&&(r++,n=l)}return r},a1=(e,t)=>{let r=rC(t,"style"),n=e.serialize(e.parse(r),rs(t));aJ(t,aX,n)},a2=(e,t)=>H(e)?eW(aQ,t)?e+"":e+"px":e,a3=(e,t,r)=>{let n=aZ(t);U(r)||""===r?nE(e,n):nC(e,n,a2(r,n))},a8=(e,t,r)=>{let n=t.keep_values,o={set:(e,n,o)=>{let l=rV.fromDom(e);z(t.url_converter)&&j(n)&&(n=t.url_converter.call(t.url_converter_scope||r(),String(n),o,e)),aJ(l,"data-mce-"+o,n),aJ(l,o,n)},get:(e,t)=>{let r=rV.fromDom(e);return rC(r,"data-mce-"+t)||rC(r,t)}},l={style:{set:(t,r)=>{let o=rV.fromDom(t);n&&aJ(o,aX,r),rk(o,"style"),T(r)&&nx(o,e.parse(r))},get:t=>{let r=rV.fromDom(t),n=rC(r,aX)||rC(r,"style");return e.serialize(e.parse(n),rs(r))}}};return n&&(l.href=l.src=o),l},a5=(e,t={})=>{let r={},n=window,o={},l=0,a=l3.forElement(rV.fromDom(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy}),i=[],s=t.schema?t.schema:aB({}),d=aP({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),c=t.ownEvents?new aK:aK.Event,u=s.getBlockElements(),m=e=>T(e)?eW(u,e):ou(e)&&(eW(u,e.nodeName)||lG(s,e)),f=t=>t&&e&&T(t)?e.getElementById(t):t,g=e=>{let t=f(e);return j(t)?rV.fromDom(t):null},p=(e,t,r="")=>{let n;let o=g(e);if(j(o)&&rm(o)){let l=eP[t];n=l&&l.get?l.get(o.dom,t):rC(o,t)}return j(n)?n:r},h=e=>{let t=f(e);return U(t)?[]:t.attributes},b=(e,r,n)=>{M(e,e=>{if(ou(e)){let o=rV.fromDom(e),l=""===n?null:n,a=rC(o,r),i=eP[r];i&&i.set?i.set(o.dom,l,r):aJ(o,r,l),a!==l&&t.onSetAttrib&&t.onSetAttrib({attrElm:o.dom,attrName:r,attrValue:l})}})},v=(e,t)=>e.cloneNode(t),y=()=>t.root_element||e.body,C=e=>{let t=n5(e);return{x:t.x,y:t.y,w:t.width,h:t.height}},x=(t,r)=>l1(e.body,f(t),r),w=(e,r,n)=>{M(e,e=>{let o=rV.fromDom(e);a3(o,r,n),t.update_styles&&a1(d,o)})},k=(e,r)=>{M(e,e=>{let n=rV.fromDom(e);eF(r,(e,t)=>{a3(n,t,e)}),t.update_styles&&a1(d,n)})},_=(e,t,r)=>{let n=f(e);return U(n)||!ou(n)?void 0:r?nw(rV.fromDom(n),aZ(t)):("float"===(t=t.replace(/-(\D)/g,(e,t)=>t.toUpperCase()))&&(t="cssFloat"),n.style?n.style[t]:void 0)},S=e=>{let t=f(e);if(!t)return{w:0,h:0};let r=_(t,"width"),n=_(t,"height");return r&&-1!==r.indexOf("px")||(r="0"),n&&-1!==n.indexOf("px")||(n="0"),{w:parseInt(r,10)||t.offsetWidth||t.clientWidth,h:parseInt(n,10)||t.offsetHeight||t.clientHeight}},E=e=>{let t=f(e),r=x(t),n=S(t);return{x:r.x,y:r.y,w:n.w,h:n.h}},N=(e,t)=>{if(!e)return!1;let r=L(e)?e:[e];return ec(r,e=>rK(rV.fromDom(e),t))},D=(e,t,r,n)=>{let o=[],l=f(e);n=void 0===n;let a=r||("BODY"!==y().nodeName?y().parentNode:null);if(T(t)){if("*"===t)t=ou;else{let i=t;t=e=>N(e,i)}}for(;l&&!(l===a||U(l.nodeType)||oS(l)||oE(l));){if(!t||t(l)){if(!n)return[l];o.push(l)}l=l.parentNode}return n?o:null},R=(e,t,r)=>{let n=D(e,t,r,!1);return n&&n.length>0?n[0]:null},A=(e,t,r)=>{let n=t;if(e){T(t)&&(n=e=>N(e,t));for(let o=e[r];o;o=o[r])if(z(n)&&n(o))return o}return null},O=(e,t)=>A(e,t,"nextSibling"),B=(e,t)=>A(e,t,"previousSibling"),P=e=>z(e.querySelectorAll),F=(r,n)=>{var o,l;let a=null!==(l=null!==(o=f(n))&&void 0!==o?o:t.root_element)&&void 0!==l?l:e;return P(a)?eO(a.querySelectorAll(r)):[]},M=function(e,t,r){let n=null!=r?r:this;if(L(e)){let o=[];return aG(e,(e,r)=>{let l=f(e);l&&o.push(t.call(n,l,r))}),o}{let l=f(e);return!!l&&t.call(n,l)}},I=(e,t)=>{M(e,e=>{eF(t,(t,r)=>{b(e,r,t)})})},H=(e,t)=>{M(e,e=>{let r=rV.fromDom(e);nz(r,t)})},$=(t,r,n,o,l)=>M(t,t=>{let a=T(r)?e.createElement(r):r;return j(n)&&I(a,n),o&&(!T(o)&&o.nodeType?a.appendChild(o):T(o)&&H(a,o)),l?a:t.appendChild(a)}),V=(t,r,n)=>$(e.createElement(t),t,r,n,!0),W=ay.decode,G=ay.encodeAllRaw,Y=(e,t,r="")=>{let n="<"+e;for(let o in t)eK(t,o)&&(n+=" "+o+'="'+G(t[o])+'"');return ty(r)&&eW(s.getVoidElements(),e)?n+" />":n+">"+r+"</"+e+">"},X=t=>{let r;let n=e.createElement("div"),o=e.createDocumentFragment();for(o.appendChild(n),t&&(n.innerHTML=t);r=n.firstChild;)o.appendChild(r);return o.removeChild(n),o},Q=(e,t)=>M(e,e=>{let r=rV.fromDom(e);return t&&em(nt(r),e=>{rf(e)&&0===e.dom.length?nF(e):nD(r,e)}),nF(r),r.dom}),J=e=>M(e,e=>{let t=e.attributes;for(let r=t.length-1;r>=0;r--)e.removeAttributeNode(t.item(r))}),Z=e=>d.parse(e),ee=(e,t)=>d.serialize(e,t),et=t=>{if(eB!==a5.DOM&&e===document){if(r[t])return;r[t]=!0}let n=e.getElementById("mceDefaultStyles");if(!n){(n=e.createElement("style")).id="mceDefaultStyles",n.type="text/css";let o=e.head;o.firstChild?o.insertBefore(n,o.firstChild):o.appendChild(n)}n.styleSheet?n.styleSheet.cssText+=t:n.appendChild(e.createTextNode(t))},er=e=>{e||(e=""),em(e.split(","),e=>{o[e]=!0,a.load(e).catch(q)})},en=(e,t,r)=>{M(e,e=>{if(ou(e)){let n=rV.fromDom(e),o=t.split(" ");em(o,e=>{j(r)?(r?rP:rF)(n,e):rM(n,e)})}})},eo=(e,t)=>{en(e,t,!0)},el=(e,t)=>{en(e,t,!1)},ea=(e,t)=>{let r=g(e),n=t.split(" ");return j(r)&&ek(n,e=>rI(r,e))},ei=e=>{M(e,e=>nE(rV.fromDom(e),"display"))},es=e=>{M(e,e=>nC(rV.fromDom(e),"display","none"))},ed=e=>{let t=g(e);return j(t)&&rn(n_(t,"display"),"none")},eu=e=>(e||"mce_")+l++,ef=e=>{let t=g(e);return j(t)?ou(t.dom)?t.dom.outerHTML:nH(t):""},eg=(e,t)=>{M(e,e=>{ou(e)&&(e.outerHTML=t)})},ep=(e,t)=>{let r=f(t);return M(e,e=>{let t=null==r?void 0:r.parentNode,n=null==r?void 0:r.nextSibling;return t&&(n?t.insertBefore(e,n):t.appendChild(e)),e})},eh=(e,t,r)=>M(t,n=>{var o;let l=L(t)?e.cloneNode(!0):e;return r&&aG(aY(n.childNodes),e=>{l.appendChild(e)}),null===(o=n.parentNode)||void 0===o||o.replaceChild(l,n),n}),eb=(e,t)=>{if(e.nodeName===t.toUpperCase())return e;{let r=V(t);return aG(h(e),t=>{b(r,t.nodeName,p(e,t.nodeName))}),eh(r,e,!0),r}},ev=(e,t)=>{let r=e;for(;r;){let n=t;for(;n&&r!==n;)n=n.parentNode;if(r===n)break;r=r.parentNode}return!r&&e.ownerDocument?e.ownerDocument.documentElement:r},ey=e=>{if(ou(e)){let t="a"===e.nodeName.toLowerCase()&&!p(e,"href")&&p(e,"id");if(p(e,"name")||p(e,"data-mce-bookmark")||t)return!0}return!1},eC=(e,t)=>{let r=0;if(ey(e))return!1;let n=e.firstChild;if(n){let o=new os(n,e),l=s?s.getWhitespaceElements():{},a=t||(s?s.getNonEmptyElements():null),i=n;do{if(ou(i)){let d=i.getAttribute("data-mce-bogus");if(d){i=o.next("all"===d);continue}let c=i.nodeName.toLowerCase();if(a&&a[c]){if("br"===c){r++,i=o.next();continue}return!1}if(ey(i))return!1}if(o_(i)||ox(i)&&!lC(i.data)||ox(i)&&i.parentNode&&l[i.parentNode.nodeName]&&lC(i.data))return!1;i=o.next()}while(i)}return r<=1},ex=()=>e.createRange(),ew=(e,t,r)=>{let n,o,l=ex();if(e&&t&&e.parentNode&&t.parentNode){let a=e.parentNode;return l.setStart(a,a0(e)),l.setEnd(t.parentNode,a0(t)),n=l.extractContents(),(l=ex()).setStart(t.parentNode,a0(t)+1),l.setEnd(a,a0(e)+1),o=l.extractContents(),a.insertBefore(at(eB,n),e),r?a.insertBefore(r,e):a.insertBefore(t,e),a.insertBefore(at(eB,o),e),Q(e),r||t}},e_=(r,o,l,a)=>{if(!L(r))return t.collect&&(r===e||r===n)&&i.push([r,o,l,a]),c.bind(r,o,l,a||eB);{let s=r.length,d=[];for(;s--;)d[s]=e_(r[s],o,l,a);return d}},eS=(t,r,o)=>{if(L(t)){let l=t.length,a=[];for(;l--;)a[l]=eS(t[l],r,o);return a}if(i.length>0&&(t===e||t===n)){let s=i.length;for(;s--;){let[d,u,m]=i[s];t!==d||r&&r!==u||o&&o!==m||c.unbind(d,u,m)}}return c.unbind(t,r,o)},eE=(e,t,r)=>c.dispatch(e,t,r),eN=(e,t,r)=>c.dispatch(e,t,r),eD=e=>{if(!(e&&ou(e)))return null;{let t=e.getAttribute("data-mce-contenteditable");return t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null}},eR=e=>{let t=y(),r=null;for(let n=e;n&&n!==t&&null===(r=eD(n));n=n.parentNode);return r},eA=()=>{if(i.length>0){let e=i.length;for(;e--;){let[t,r,n]=i[e];c.unbind(t,r,n)}}eF(o,(e,t)=>{a.unload(t),delete o[t]})},eT=(e,t)=>e===t||t.contains(e),eB={doc:e,settings:t,win:n,files:o,stdMode:!0,boxModel:!0,styleSheetLoader:a,boundEvents:i,styles:d,schema:s,events:c,isBlock:m,root:null,clone:v,getRoot:y,getViewPort:C,getRect:E,getSize:S,getParent:R,getParents:D,get:f,getNext:O,getPrev:B,select:F,is:N,add:$,create:V,createHTML:Y,createFragment:X,remove:Q,setStyle:w,getStyle:_,setStyles:k,removeAllAttribs:J,setAttrib:b,setAttribs:I,getAttrib:p,getPos:x,parseStyle:Z,serializeStyle:ee,addStyle:et,loadCSS:er,addClass:eo,removeClass:el,hasClass:ea,toggleClass:en,show:ei,hide:es,isHidden:ed,uniqueId:eu,setHTML:H,getOuterHTML:ef,setOuterHTML:eg,decode:W,encode:G,insertAfter:ep,replace:eh,rename:eb,findCommonAncestor:ev,run:M,getAttribs:h,isEmpty:eC,createRng:ex,nodeIndex:a0,split:ew,bind:e_,unbind:eS,fire:eN,dispatch:eE,getContentEditable:eD,getContentEditableParent:eR,destroy:eA,isChildOf:eT,dumpRng:e=>"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},eP=a8(d,t,K(eB));return eB};a5.DOM=a5(document),a5.nodeIndex=a0;let a6=a5.DOM;class a9{constructor(e={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=e}_setReferrerPolicy(e){this.settings.referrerPolicy=e}loadScript(e){return new Promise((t,r)=>{let n;let o=()=>{a6.remove(i),n&&(n.onerror=n.onload=n=null)},l=()=>{o(),t()},a=()=>{o(),r("Failed to load script: "+e)},i=a6.uniqueId();(n=document.createElement("script")).id=i,n.type="text/javascript",n.src=rr._addCacheSuffix(e),this.settings.referrerPolicy&&a6.setAttrib(n,"referrerpolicy",this.settings.referrerPolicy),n.onload=l,n.onerror=a,(document.getElementsByTagName("head")[0]||document.body).appendChild(n)})}isDone(e){return 2===this.states[e]}markDone(e){this.states[e]=2}add(e){let t=this;t.queue.push(e);let r=t.states[e];return void 0===r&&(t.states[e]=0),new Promise((r,n)=>{t.scriptLoadedCallbacks[e]||(t.scriptLoadedCallbacks[e]=[]),t.scriptLoadedCallbacks[e].push({resolve:r,reject:n})})}load(e){return this.add(e)}remove(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]}loadQueue(){let e=this.queue;return this.queue=[],this.loadScripts(e)}loadScripts(e){let t=this,r=(e,r)=>{eV(t.scriptLoadedCallbacks,r).each(t=>{em(t,t=>t[e](r))}),delete t.scriptLoadedCallbacks[r]},n=e=>{let t=ep(e,e=>"rejected"===e.status);return t.length>0?Promise.reject(ew(t,({reason:e})=>L(e)?e:[e])):Promise.resolve()},o=e=>Promise.allSettled(eu(e,e=>2===t.states[e]?(r("resolve",e),Promise.resolve()):3===t.states[e]?(r("reject",e),Promise.reject(e)):(t.states[e]=1,t.loadScript(e).then(()=>{t.states[e]=2,r("resolve",e);let l=t.queue;return l.length>0?(t.queue=[],o(l).then(n)):Promise.resolve()},()=>(t.states[e]=3,r("reject",e),Promise.reject(e)))))),l=e=>(t.loading=!0,o(e).then(e=>{t.loading=!1;let r=t.queueLoadedCallbacks.shift();return en.from(r).each(ee),n(e)})),a=eY(e);return t.loading?new Promise((e,r)=>{t.queueLoadedCallbacks.push(()=>l(a).then(e,r))}):l(a)}}a9.ScriptLoader=new a9;let a4=e=>{let t=e,r=e=>{t=e};return{get:()=>t,set:r}},a7=e=>B(e)&&eW(e,"raw"),ie=e=>L(e)&&e.length>1,it={},ir=a4("en"),io=()=>eV(it,ir.get()),il=()=>eM(it,e=>({...e})),ia=e=>{e&&ir.set(e)},ii=()=>ir.get(),is=(e,t)=>{let r=it[e];r||(it[e]=r={}),eF(t,(e,t)=>{r[t.toLowerCase()]=e})},id=e=>{let t=io().getOr({}),r=e=>z(e)?Object.prototype.toString.call(e):n(e)?"":""+e,n=e=>""===e||null==e,o=e=>{let n=r(e);return eV(t,n.toLowerCase()).map(r).getOr(n)},l=e=>e.replace(/{context:\w+}$/,"");if(n(e))return"";if(a7(e))return r(e.raw);if(ie(e)){let a=e.slice(1),i=o(e[0]).replace(/\{([0-9]+)\}/g,(e,t)=>eW(a,t)?r(a[t]):e);return l(i)}return l(o(e))},ic=()=>io().bind(e=>eV(e,"_dir")).exists(e=>"rtl"===e),iu=e=>eW(it,e),im={getData:il,setCode:ia,getCode:ii,add:is,translate:id,isRtl:ic,hasCode:iu},ig=()=>{let e=[],t={},r={},n=[],o=(e,t)=>{let r=ep(n,r=>r.name===e&&r.state===t);em(r,e=>e.resolve())},l=e=>eW(t,e),a=e=>eW(r,e),i=e=>{if(r[e])return r[e].instance},s=(e,r)=>{let n=im.getCode();n&&(!r||-1!==(","+(r||"")+",").indexOf(","+n+","))&&a9.ScriptLoader.add(t[e]+"/langs/"+n+".js")},d=(e,t)=>{!1!==ig.languageLoad&&(l(e)?s(e,t):g(e,"loaded").then(()=>s(e,t)))},c=(t,n)=>(e.push(n),r[t]={instance:n},o(t,"added"),n),u=e=>{delete t[e],delete r[e]},m=(e,t)=>T(t)?T(e)?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}:t,f=(e,n)=>{if(t[e])return Promise.resolve();let l=T(n)?n:n.prefix+n.resource+n.suffix;0!==l.indexOf("/")&&-1===l.indexOf("://")&&(l=ig.baseURL+"/"+l),t[e]=l.substring(0,l.lastIndexOf("/"));let a=()=>(o(e,"loaded"),Promise.resolve());return r[e]?a():a9.ScriptLoader.add(l).then(a)},g=(e,t="added")=>"added"===t&&a(e)?Promise.resolve():"loaded"===t&&l(e)?Promise.resolve():new Promise(r=>{n.push({name:e,state:t,resolve:r})});return{items:e,urls:t,lookup:r,get:i,requireLangPack:d,add:c,remove:u,createUrl:m,load:f,waitFor:g}};ig.languageLoad=!0,ig.baseURL="",ig.PluginManager=ig(),ig.ThemeManager=ig(),ig.ModelManager=ig();let ip=e=>{let t=a4(en.none()),r=()=>t.get().each(e),n=()=>{r(),t.set(en.none())},o=()=>t.get().isSome(),l=()=>t.get(),a=e=>{r(),t.set(en.some(e))};return{clear:n,isSet:o,get:l,set:a}},ih=e=>{let t=a4(en.none()),r=()=>t.get().each(e=>clearInterval(e)),n=()=>{r(),t.set(en.none())},o=()=>t.get().isSome(),l=()=>t.get(),a=n=>{r(),t.set(en.some(setInterval(n,e)))};return{clear:n,isSet:o,get:l,set:a}},ib=()=>{let e=ip(q),t=t=>e.get().each(t);return{...e,on:t}},iv=(e,t)=>{let r=null,n=()=>{F(r)||(clearTimeout(r),r=null)},o=(...n)=>{F(r)&&(r=setTimeout(()=>{r=null,e.apply(null,n)},t))};return{cancel:n,throttle:o}},iy=(e,t)=>{let r=null,n=()=>{F(r)||(clearTimeout(r),r=null)},o=(...o)=>{n(),r=setTimeout(()=>{r=null,e.apply(null,o)},t)};return{cancel:n,throttle:o}},iC=K("mce-annotation"),ix=K("data-mce-annotation"),iw=K("data-mce-annotation-uid"),ik=K("data-mce-annotation-active"),i_=K("data-mce-annotation-classes"),iS=K("data-mce-annotation-attrs"),iE=e=>t=>rQ(t,e),iN=(e,t)=>{let r=e.selection.getRng(),n=rV.fromDom(r.startContainer),o=rV.fromDom(e.getBody()),l=t.fold(()=>"."+iC(),e=>`[${ix()}="${e}"]`),a=nr(n,r.startOffset).getOr(n),i=oa(a,l,iE(o));return i.bind(t=>rx(t,`${iw()}`).bind(r=>rx(t,`${ix()}`).map(t=>{let n=iA(e,r);return{uid:r,name:t,elements:n}})))},iD=e=>rm(e)&&rI(e,iC()),iR=(e,t)=>rw(e,"data-mce-bogus")||oi(e,'[data-mce-bogus="all"]',iE(t)),iA=(e,t)=>{let r=rV.fromDom(e.getBody()),n=oM(r,`[${iw()}="${t}"]`);return ep(n,e=>!iR(e,r))},iO=(e,t)=>{let r=rV.fromDom(e.getBody()),n=oM(r,`[${ix()}="${t}"]`),o={};return em(n,e=>{if(!iR(e,r)){let t=rC(e,iw()),n=eV(o,t).getOr([]);o[t]=n.concat([e])}}),o},iT=(e,t)=>{let r=a4({}),n=()=>({listeners:[],previous:ib()}),o=(e,t)=>{l(e,e=>(t(e),e))},l=(e,t)=>{let o=r.get(),l=eV(o,e).getOrThunk(n),a=t(l);o[e]=a,r.set(o)},a=(e,t,r)=>{o(e,n=>{em(n.listeners,n=>n(!0,e,{uid:t,nodes:eu(r,e=>e.dom)}))})},i=e=>{o(e,t=>{em(t.listeners,t=>t(!1,e))})},s=(t,r)=>{em(iA(e,t),e=>{r?rv(e,ik(),"true"):rk(e,ik())})},d=iy(()=>{let r=eN(t.getNames());em(r,t=>{l(t,r=>{let n=r.previous.get();return iN(e,en.some(t)).fold(()=>{n.each(e=>{i(t),r.previous.clear(),s(e,!1)})},({uid:e,name:t,elements:o})=>{rn(n,e)||(n.each(e=>s(e,!1)),a(t,e,o),r.previous.set(e),s(e,!0))}),{previous:r.previous,listeners:r.listeners}})})},30);e.on("remove",()=>{d.cancel()}),e.on("NodeChange",()=>{d.throttle()});let c=(e,t)=>{l(e,e=>({previous:e.previous,listeners:e.listeners.concat([t])}))};return{addListener:c}},iB=(e,t)=>{let r=ix(),n=e=>en.from(e.attr(r)).bind(t.lookup),o=e=>{var t,r;e.attr(iw(),null),e.attr(ix(),null),e.attr(ik(),null);let n=en.from(e.attr(iS())).map(e=>e.split(",")).getOr([]),o=en.from(e.attr(i_())).map(e=>e.split(",")).getOr([]);em(n,t=>e.attr(t,null));let l=null!==(r=null===(t=e.attr("class"))||void 0===t?void 0:t.split(" "))&&void 0!==r?r:[],a=eS(l,[iC()].concat(o));e.attr("class",a.length>0?a.join(" "):null),e.attr(i_(),null),e.attr(iS(),null)};e.serializer.addTempAttr(ik()),e.serializer.addAttributeFilter(r,e=>{for(let t of e)n(t).each(e=>{!1===e.persistent&&("span"===t.name?t.unwrap():o(t))})})},iP=()=>{let e={},t=(t,r)=>{e[t]={name:t,settings:r}},r=t=>eV(e,t).map(e=>e.settings),n=()=>eP(e);return{register:t,lookup:r,getNames:n}},iL=0,iF=e=>{let t=new Date,r=t.getTime();return e+"_"+Math.floor(1e9*Math.random())+ ++iL+String(r)},iM=(e,t)=>{em(t,t=>{rP(e,t)})},iI=(e,t)=>{em(t,t=>{rF(e,t)})},iU=(e,t)=>rV.fromDom(e.dom.cloneNode(t)),ij=e=>iU(e,!1),iz=e=>iU(e,!0),iH=(e,t)=>{let r=rV.fromTag(t),n=rS(e);return ry(r,n),r},i$=(e,t)=>{let r=iH(e,t);nR(e,r);let n=nt(e);return nP(r,n),nF(e),r},iq=(e,t,r=et)=>{let n=new os(e,t),o=e=>{let t;do t=n[e]();while(t&&!ox(t)&&!r(t));return en.from(t).filter(ox)};return{current:()=>en.from(n.current()).filter(ox),next:()=>o("next"),prev:()=>o("prev"),prev2:()=>o("prev2")}},iV=(e,t)=>{let r=t||(t=>e.isBlock(t)||oN(t)||oA(t)),n=(e,t,r,o)=>{if(ox(e)){let l=o(e,t,e.data);if(-1!==l)return en.some({container:e,offset:l})}return r().bind(e=>n(e.container,e.offset,r,o))},o=(t,o,l,a)=>{let i=iq(t,null!=a?a:e.getRoot(),r);return n(t,o,()=>i.prev().map(e=>({container:e,offset:e.length})),l).getOrNull()},l=(t,o,l,a)=>{let i=iq(t,null!=a?a:e.getRoot(),r);return n(t,o,()=>i.next().map(e=>({container:e,offset:0})),l).getOrNull()};return{backwards:o,forwards:l}},iW=Math.round,iK=e=>e?{left:iW(e.left),top:iW(e.top),bottom:iW(e.bottom),right:iW(e.right),width:iW(e.width),height:iW(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},iG=(e,t)=>(e=iK(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),iY=(e,t)=>e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right,iX=(e,t,r)=>e>=0&&e<=Math.min(t.height,r.height)/2,iQ=(e,t)=>{let r=Math.min(t.height/2,e.height/2);return e.bottom-r<t.top||!(e.top>t.bottom)&&iX(t.top-e.bottom,e,t)},iJ=(e,t)=>e.top>t.bottom||!(e.bottom<t.top)&&iX(t.bottom-e.top,e,t),iZ=(e,t,r)=>t>=e.left&&t<=e.right&&r>=e.top&&r<=e.bottom,i0=e=>eb(e,(e,t)=>e.fold(()=>en.some(t),e=>{let r=Math.min(t.left,e.left),n=Math.min(t.top,e.top),o=Math.max(t.right,e.right),l=Math.max(t.bottom,e.bottom);return en.some({top:n,right:o,bottom:l,left:r,width:o-r,height:l-n})}),en.none()),i1=(e,t,r)=>{let n=Math.max(Math.min(t,e.left+e.width),e.left),o=Math.max(Math.min(r,e.top+e.height),e.top);return Math.sqrt((t-n)*(t-n)+(r-o)*(r-o))},i2=(e,t)=>Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),i3=(e,t,r)=>Math.min(Math.max(e,t),r),i8=e=>{let t=e.startContainer,r=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===r+1?t.childNodes[r]:null},i5=(e,t)=>{if(!(ou(e)&&e.hasChildNodes()))return e;{let r=e.childNodes,n=i3(t,0,r.length-1);return r[n]}},i6=(e,t)=>{if(!(t<0&&ou(e)&&e.hasChildNodes()))return i5(e,t)},i9=RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),i4=e=>T(e)&&e.charCodeAt(0)>=768&&i9.test(e),i7=og("display","block table"),se=og("float","left right"),st=((...e)=>t=>{for(let r=0;r<e.length;r++)if(!e[r](t))return!1;return!0})(ou,lm,Q(se)),sr=Q(og("white-space","pre pre-line pre-wrap")),sn=a5.nodeIndex,so=e=>e?e.createRange():a5.DOM.createRng(),sl=e=>T(e)&&/[\r\n\t ]/.test(e),sa=e=>!!e.setStart&&!!e.setEnd,si=e=>{let t=e.startContainer,r=e.startOffset;if(sl(e.toString())&&sr(t.parentNode)&&ox(t)){let n=t.data;if(sl(n[r-1])||sl(n[r+1]))return!0}return!1},ss=e=>{let t=e.ownerDocument,r=so(t),n=t.createTextNode("\xa0"),o=e.parentNode;o.insertBefore(n,e),r.setStart(n,0),r.setEnd(n,1);let l=iK(r.getBoundingClientRect());return o.removeChild(n),l},sd=e=>{let t=e.startContainer,r=e.endContainer,n=e.startOffset,o=e.endOffset;if(!(t===r&&ox(r))||0!==n||1!==o)return null;{let l=e.cloneRange();return l.setEndAfter(r),su(l)}},sc=e=>0===e.left&&0===e.right&&0===e.top&&0===e.bottom,su=e=>{var t;let r;let n=e.getClientRects();return(r=n.length>0?iK(n[0]):iK(e.getBoundingClientRect()),!sa(e)&&oN(e)&&sc(r))?ss(e):sc(r)&&sa(e)&&null!==(t=sd(e))&&void 0!==t?t:r},sm=(e,t)=>{let r=iG(e,t);return r.width=1,r.right=r.left+1,r},sf=e=>{let t=[],r=e=>{0===e.height||t.length>0&&iY(e,t[t.length-1])||t.push(e)},n=(e,t)=>{let n=so(e.ownerDocument);if(t<e.data.length){if(i4(e.data[t]))return;if(i4(e.data[t-1])&&(n.setStart(e,t),n.setEnd(e,t+1),!si(n))){r(sm(su(n),!1));return}}t>0&&(n.setStart(e,t-1),n.setEnd(e,t),si(n)||r(sm(su(n),!1))),t<e.data.length&&(n.setStart(e,t),n.setEnd(e,t+1),si(n)||r(sm(su(n),!0)))},o=e.container(),l=e.offset();if(ox(o))return n(o,l),t;if(ou(o)){if(e.isAtEnd()){let a=i6(o,l);ox(a)&&n(a,a.data.length),st(a)&&!oN(a)&&r(sm(su(a),!1))}else{let i=i6(o,l);if(ox(i)&&n(i,0),st(i)&&e.isAtEnd())return r(sm(su(i),!1)),t;let s=i6(e.container(),e.offset()-1);st(s)&&!oN(s)&&(i7(s)||i7(i)||!st(i))&&r(sm(su(s),!1)),st(i)&&r(sm(su(i),!0))}}return t},sg=(e,t,r)=>{let n=()=>(ox(e),0===t),o=()=>ox(e)?t>=e.data.length:t>=e.childNodes.length,l=()=>{let r=so(e.ownerDocument);return r.setStart(e,t),r.setEnd(e,t),r},a=()=>(r||(r=sf(sg(e,t))),r),i=r=>r&&e===r.container()&&t===r.offset(),s=r=>i6(e,r?t-1:t);return{container:K(e),offset:K(t),toRange:l,getClientRects:a,isVisible:()=>a().length>0,isAtStart:n,isAtEnd:o,isEqual:i,getNode:s}};sg.fromRangeStart=e=>sg(e.startContainer,e.startOffset),sg.fromRangeEnd=e=>sg(e.endContainer,e.endOffset),sg.after=e=>sg(e.parentNode,sn(e)+1),sg.before=e=>sg(e.parentNode,sn(e)),sg.isAbove=(e,t)=>rl(eR(t.getClientRects()),eA(e.getClientRects()),iQ).getOr(!1),sg.isBelow=(e,t)=>rl(eA(t.getClientRects()),eR(e.getClientRects()),iJ).getOr(!1),sg.isAtStart=e=>!!e&&e.isAtStart(),sg.isAtEnd=e=>!!e&&e.isAtEnd(),sg.isTextPosition=e=>!!e&&ox(e.container()),sg.isElementPosition=e=>!sg.isTextPosition(e);let sp=(e,t)=>{ox(t)&&0===t.data.length&&e.remove(t)},sh=(e,t,r)=>{t.insertNode(r),sp(e,r.previousSibling),sp(e,r.nextSibling)},sb=(e,t,r)=>{let n=en.from(r.firstChild),o=en.from(r.lastChild);t.insertNode(r),n.each(t=>sp(e,t.previousSibling)),o.each(t=>sp(e,t.nextSibling))},sv=(e,t,r)=>{oE(r)?sb(e,t,r):sh(e,t,r)},sy=a5.nodeIndex,sC=e=>{let t=e.parentNode;return oh(t)?sC(t):t},sx=e=>e?e3(e.childNodes,(e,t)=>(oh(t)&&"BR"!==t.nodeName?e=e.concat(sx(t)):e.push(t),e),[]):[],sw=(e,t)=>{let r=e;for(;(r=r.previousSibling)&&ox(r);)t+=r.data.length;return t},sk=e=>t=>e===t,s_=e=>{let t,r;r=e8(t=sx(sC(e)),sk(e),e),t=t.slice(0,r+1);let n=e3(t,(e,r,n)=>(ox(r)&&ox(t[n-1])&&e++,e),0);return(r=e8(t=e1(t,of([e.nodeName])),sk(e),e))-n},sS=e=>{let t=ox(e)?"text()":e.nodeName.toLowerCase();return t+"["+s_(e)+"]"},sE=(e,t,r)=>{let n=[];for(let o=t.parentNode;o&&o!==e&&!(r&&r(o));o=o.parentNode)n.push(o);return n},sN=(e,t)=>{let r,n=[],o=t.container(),l=t.offset();if(ox(o))r=sw(o,l);else{let a=o.childNodes;l>=a.length?(r="after",l=a.length-1):r="before",o=a[l]}n.push(sS(o));let i=sE(e,o);return i=e1(i,Q(oh)),(n=n.concat(e0(i,e=>sS(e)))).reverse().join("/")+","+r},sD=(e,t,r)=>{let n=sx(e);return n=e1(n,(e,t)=>!ox(e)||!ox(n[t-1])),(n=e1(n,of([t])))[r]},sR=(e,t)=>{let r=e,n=0;for(;ox(r);){let o=r.data.length;if(t>=n&&t<=n+o){e=r,t-=n;break}if(!ox(r.nextSibling)){e=r,t=o;break}n+=o,r=r.nextSibling}return ox(e)&&t>e.data.length&&(t=e.data.length),sg(e,t)},sA=(e,t)=>{if(!t)return null;let r=t.split(","),n=r[0].split("/"),o=r.length>1?r[1]:"before",l=e3(n,(e,t)=>{let r=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t);return r?("text()"===r[1]&&(r[1]="#text"),sD(e,r[1],parseInt(r[2],10))):null},e);if(!l)return null;if(!ox(l)&&l.parentNode){let a;return a="after"===o?sy(l)+1:sy(l),sg(l.parentNode,a)}return sR(l,parseInt(o,10))},sO=(e,t,r)=>{let n=e(t.data.slice(0,r)).length;for(let o=t.previousSibling;o&&ox(o);o=o.previousSibling)n+=e(o.data).length;return n},sT=(e,t,r,n,o)=>{let l=o?n.startContainer:n.endContainer,a=o?n.startOffset:n.endOffset,i=[],s=e.getRoot();if(ox(l))i.push(r?sO(t,l,a):a);else{let d=0,c=l.childNodes;a>=c.length&&c.length&&(d=1,a=Math.max(0,c.length-1)),i.push(e.nodeIndex(c[a],r)+d)}for(let u=l;u&&u!==s;u=u.parentNode)i.push(e.nodeIndex(u,r));return i},sB=(e,t,r,n)=>{let o=t.dom,l=sT(o,e,r,n,!0),a=t.isForward(),i=ls(n)?{isFakeCaret:!0}:{};if(t.isCollapsed())return{start:l,forward:a,...i};{let s=sT(o,e,r,n,!1);return{start:l,end:s,forward:a,...i}}},sP=(e,t,r)=>{let n=0;return rr.each(e.select(t),e=>{if("all"!==e.getAttribute("data-mce-bogus")){if(e===r)return!1;n++}}),n},sL=(e,t)=>{let r=t?e.startContainer:e.endContainer,n=t?e.startOffset:e.endOffset;if(ou(r)&&"TR"===r.nodeName){let o=r.childNodes;(r=o[Math.min(t?n:n-1,o.length-1)])&&(n=t?0:r.childNodes.length,t?e.setStart(r,n):e.setEnd(r,n))}},sF=e=>(sL(e,!0),sL(e,!1),e),sM=(e,t)=>{if(ou(e)&&oA(e=i5(e,t)))return e;if(o4(e)){ox(e)&&o6(e)&&(e=e.parentNode);let r=e.previousSibling;if(oA(r)||oA(r=e.nextSibling))return r}},sI=e=>sM(e.startContainer,e.startOffset)||sM(e.endContainer,e.endOffset),sU=(e,t,r)=>{let n=r.getNode(),o=r.getRng();if("IMG"===n.nodeName||oA(n)){let l=n.nodeName;return{name:l,index:sP(r.dom,l,n)}}let a=sI(o);if(a){let i=a.tagName;return{name:i,index:sP(r.dom,i,a)}}return sB(e,r,t,o)},sj=e=>{let t=e.getRng();return{start:sN(e.dom.getRoot(),sg.fromRangeStart(t)),end:sN(e.dom.getRoot(),sg.fromRangeEnd(t)),forward:e.isForward()}},sz=e=>({rng:e.getRng(),forward:e.isForward()}),sH=(e,t,r)=>{let n={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return r?e.create("span",n,"&#xFEFF;"):e.create("span",n)},s$=(e,t)=>{let r=e.dom,n=e.getRng(),o=r.uniqueId(),l=e.isCollapsed(),a=e.getNode(),i=a.nodeName,s=e.isForward();if("IMG"===i)return{name:i,index:sP(r,i,a)};let d=sF(n.cloneRange());if(!l){d.collapse(!1);let c=sH(r,o+"_end",t);sv(r,d,c)}(n=sF(n)).collapse(!0);let u=sH(r,o+"_start",t);return sv(r,n,u),e.moveToBookmark({id:o,keep:!0,forward:s}),{id:o,forward:s}},sq=(e,t,r=!1)=>2===t?sU(oF,r,e):3===t?sj(e):t?sz(e):s$(e,!1),sV=X(sU,G,!0),sW=e=>{let t=t=>t(e),r=K(e),n={tag:!0,inner:e,fold:(t,r)=>r(e),isValue:er,isError:et,map:t=>sY.value(t(e)),mapError:()=>n,bind:t,exists:t,forall:t,getOr:r,or:()=>n,getOrThunk:r,orThunk:()=>n,getOrDie:r,each:t=>{t(e)},toOptional:()=>en.some(e)};return n},sK=e=>{let t={tag:!1,inner:e,fold:(t,r)=>t(e),isValue:et,isError:er,map:()=>t,mapError:t=>sY.error(t(e)),bind:()=>t,exists:et,forall:er,getOr:G,or:G,getOrThunk:Z,orThunk:Z,getOrDie:J(String(e)),each:q,toOptional:en.none};return t},sG=(e,t)=>e.fold(()=>sK(t),sW),sY={value:sW,error:sK,fromOption:sG},sX=e=>{if(!L(e))throw Error("cases must be an array");if(0===e.length)throw Error("there must be at least one case");let t=[],r={};return em(e,(n,o)=>{let l=eP(n);if(1!==l.length)throw Error("one and only one name per case");let a=l[0],i=n[a];if(void 0!==r[a])throw Error("duplicate key detected:"+a);if("cata"===a)throw Error("cannot have a case named cata (sorry)");if(!L(i))throw Error("case arguments must be an array");t.push(a),r[a]=(...r)=>{let n=r.length;if(n!==i.length)throw Error("Wrong number of arguments to case "+a+". Expected "+i.length+" ("+i+"), got "+n);let l=e=>{let n=eP(e);if(t.length!==n.length)throw Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+n.join(","));let o=ek(t,e=>ed(n,e));if(!o)throw Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+t.join(", "));return e[a].apply(null,r)};return{fold:(...t)=>{if(t.length!==e.length)throw Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);let n=t[o];return n.apply(null,r)},match:l,log:e=>{console.log(e,{constructors:t,constructor:a,params:r})}}}}),r},sQ={generate:sX};sQ.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);let sJ=e=>{let t=[],r=[];return em(e,e=>{e.fold(e=>{t.push(e)},e=>{r.push(e)})}),{errors:t,values:r}},sZ=e=>"inline-command"===e.type||"inline-format"===e.type,s0=e=>"block-command"===e.type||"block-format"===e.type,s1=e=>{let t=t=>sY.error({message:t,pattern:e}),r=(r,n,o)=>{if(void 0!==e.format){let l;if(L(e.format)){if(!ek(e.format,T))return t(r+" pattern has non-string items in the `format` array");l=e.format}else{if(!T(e.format))return t(r+" pattern has non-string `format` parameter");l=[e.format]}return sY.value(n(l))}return void 0===e.cmd?t(r+" pattern is missing both `format` and `cmd` parameters"):T(e.cmd)?sY.value(o(e.cmd,e.value)):t(r+" pattern has non-string `cmd` parameter")};if(!B(e))return t("Raw pattern is not an object");if(!T(e.start))return t("Raw pattern is missing `start` parameter");if(void 0!==e.end){if(!T(e.end))return t("Inline pattern has non-string `end` parameter");if(0===e.start.length&&0===e.end.length)return t("Inline pattern has empty `start` and `end` parameters");let n=e.start,o=e.end;return 0===o.length&&(o=n,n=""),r("Inline",e=>({type:"inline-format",start:n,end:o,format:e}),(e,t)=>({type:"inline-command",start:n,end:o,cmd:e,value:t}))}return void 0!==e.replacement?T(e.replacement)?0===e.start.length?t("Replacement pattern has empty `start` parameter"):sY.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):t("Replacement pattern has non-string `replacement` parameter"):0===e.start.length?t("Block pattern has empty `start` parameter"):r("Block",t=>({type:"block-format",start:e.start,format:t[0]}),(t,r)=>({type:"block-command",start:e.start,cmd:t,value:r}))},s2=e=>ep(e,s0),s3=e=>ep(e,sZ),s8=(e,t)=>({inlinePatterns:s3(e),blockPatterns:s2(e),dynamicPatternsLookup:t}),s5=e=>{let t=sJ(eu(e,s1));return em(t.errors,e=>console.error(e.message,e.pattern)),t.values},s6=e=>t=>{let r=e(t);return s5(r)},s9=tY().deviceType,s4=s9.isTouch(),s7=a5.DOM,de=e=>{let t=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return eb(t,(e,t)=>{let r=t.split("="),n=r[0],o=r.length>1?r[1]:n;return e[tp(n)]=tp(o),e},{})},dt=e=>O(e,RegExp),dr=e=>t=>t.options.get(e),dn=e=>T(e)||B(e),dl=(e,t="")=>r=>{let n=T(r);if(!n)return{valid:!1,message:"Must be a string."};if(-1===r.indexOf("="))return{value:r,valid:n};{let o=de(r);return{value:eV(o,e.id).getOr(t),valid:n}}},da=e=>{let t=e.options.register;t("id",{processor:"string",default:e.id}),t("selector",{processor:"string"}),t("target",{processor:"object"}),t("suffix",{processor:"string"}),t("cache_suffix",{processor:"string"}),t("base_url",{processor:"string"}),t("referrer_policy",{processor:"string",default:""}),t("language_load",{processor:"boolean",default:!0}),t("inline",{processor:"boolean",default:!1}),t("iframe_attrs",{processor:"object",default:{}}),t("doctype",{processor:"string",default:"<!DOCTYPE html>"}),t("document_base_url",{processor:"string",default:e.documentBaseUrl}),t("body_id",{processor:dl(e,"tinymce"),default:"tinymce"}),t("body_class",{processor:dl(e),default:""}),t("content_security_policy",{processor:"string",default:""}),t("br_in_pre",{processor:"boolean",default:!0}),t("forced_root_block",{processor:e=>{let t=T(e)&&tv(e);return t?{value:e,valid:t}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),t("forced_root_block_attrs",{processor:"object",default:{}}),t("newline_behavior",{processor:e=>{let t=ed(["block","linebreak","invert","default"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),t("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),t("no_newline_selector",{processor:"string",default:""}),t("keep_styles",{processor:"boolean",default:!0}),t("end_container_on_empty_block",{processor:e=>M(e)?{valid:!0,value:e}:T(e)?{valid:!0,value:e}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),t("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),t("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),t("font_size_classes",{processor:"string",default:""}),t("automatic_uploads",{processor:"boolean",default:!0}),t("images_reuse_filename",{processor:"boolean",default:!1}),t("images_replace_blob_uris",{processor:"boolean",default:!0}),t("icons",{processor:"string",default:""}),t("icons_url",{processor:"string",default:""}),t("images_upload_url",{processor:"string",default:""}),t("images_upload_base_path",{processor:"string",default:""}),t("images_upload_credentials",{processor:"boolean",default:!1}),t("images_upload_handler",{processor:"function"}),t("language",{processor:"string",default:"en"}),t("language_url",{processor:"string",default:""}),t("entity_encoding",{processor:"string",default:"named"}),t("indent",{processor:"boolean",default:!0}),t("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_use_margin",{processor:"boolean",default:!1}),t("indentation",{processor:"string",default:"40px"}),t("content_css",{processor:e=>{let t=!1===e||T(e)||$(e,T);return t?T(e)?{value:eu(e.split(","),tp),valid:t}:L(e)?{value:e,valid:t}:!1===e?{value:[],valid:t}:{value:e,valid:t}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:d2(e)?[]:["default"]}),t("content_style",{processor:"string"}),t("content_css_cors",{processor:"boolean",default:!1}),t("font_css",{processor:e=>{let t=T(e)||$(e,T);if(!t)return{valid:!1,message:"Must be a string or an array of strings."};{let r=L(e)?e:eu(e.split(","),tp);return{value:r,valid:t}}},default:[]}),t("inline_boundaries",{processor:"boolean",default:!0}),t("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),t("object_resizing",{processor:e=>{let t=M(e)||T(e);return t?!1===e||s9.isiPhone()||s9.isiPad()?{value:"",valid:t}:{value:!0===e?"table,img,figure.image,div,video,iframe":e,valid:t}:{valid:!1,message:"Must be boolean or a string"}},default:!s4}),t("resize_img_proportional",{processor:"boolean",default:!0}),t("event_root",{processor:"object"}),t("service_message",{processor:"string"}),t("theme",{processor:e=>!1===e||T(e)||z(e),default:"silver"}),t("theme_url",{processor:"string"}),t("formats",{processor:"object"}),t("format_empty_lines",{processor:"boolean",default:!1}),t("format_noneditable_selector",{processor:"string",default:""}),t("preview_styles",{processor:e=>{let t=!1===e||T(e);return t?{value:!1===e?"":e,valid:t}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),t("custom_ui_selector",{processor:"string",default:""}),t("hidden_input",{processor:"boolean",default:!0}),t("submit_patch",{processor:"boolean",default:!0}),t("encoding",{processor:"string"}),t("add_form_submit_trigger",{processor:"boolean",default:!0}),t("add_unload_trigger",{processor:"boolean",default:!0}),t("custom_undo_redo_levels",{processor:"number",default:0}),t("disable_nodechange",{processor:"boolean",default:!1}),t("readonly",{processor:"boolean",default:!1}),t("plugins",{processor:"string[]",default:[]}),t("external_plugins",{processor:"object"}),t("forced_plugins",{processor:"string[]"}),t("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),t("model_url",{processor:"string"}),t("block_unsupported_drop",{processor:"boolean",default:!0}),t("visual",{processor:"boolean",default:!0}),t("visual_table_class",{processor:"string",default:"mce-item-table"}),t("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),t("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),t("setup",{processor:"function"}),t("init_instance_callback",{processor:"function"}),t("url_converter",{processor:"function",default:e.convertURL}),t("url_converter_scope",{processor:"object",default:e}),t("urlconverter_callback",{processor:"function"}),t("allow_conditional_comments",{processor:"boolean",default:!1}),t("allow_html_data_urls",{processor:"boolean",default:!1}),t("allow_svg_data_urls",{processor:"boolean"}),t("allow_html_in_named_anchor",{processor:"boolean",default:!1}),t("allow_script_urls",{processor:"boolean",default:!1}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),t("fix_list_elements",{processor:"boolean",default:!1}),t("preserve_cdata",{processor:"boolean",default:!1}),t("remove_trailing_brs",{processor:"boolean"}),t("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),t("element_format",{processor:"string",default:"html"}),t("entities",{processor:"string"}),t("schema",{processor:"string",default:"html5"}),t("convert_urls",{processor:"boolean",default:!0}),t("relative_urls",{processor:"boolean",default:!0}),t("remove_script_host",{processor:"boolean",default:!0}),t("custom_elements",{processor:"string"}),t("extended_valid_elements",{processor:"string"}),t("invalid_elements",{processor:"string"}),t("invalid_styles",{processor:dn}),t("valid_children",{processor:"string"}),t("valid_classes",{processor:dn}),t("valid_elements",{processor:"string"}),t("valid_styles",{processor:dn}),t("verify_html",{processor:"boolean",default:!0}),t("auto_focus",{processor:e=>T(e)||!0===e}),t("browser_spellcheck",{processor:"boolean",default:!1}),t("protect",{processor:"array"}),t("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),t("deprecation_warnings",{processor:"boolean",default:!0}),t("a11y_advanced_options",{processor:"boolean",default:!1}),t("api_key",{processor:"string"}),t("paste_block_drop",{processor:"boolean",default:!1}),t("paste_data_images",{processor:"boolean",default:!0}),t("paste_preprocess",{processor:"function"}),t("paste_postprocess",{processor:"function"}),t("paste_webkit_styles",{processor:"string",default:"none"}),t("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),t("paste_merge_formats",{processor:"boolean",default:!0}),t("smart_paste",{processor:"boolean",default:!0}),t("paste_as_text",{processor:"boolean",default:!1}),t("paste_tab_spaces",{processor:"number",default:4}),t("text_patterns",{processor:e=>$(e,B)||!1===e?{value:s5(!1===e?[]:e),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),t("text_patterns_lookup",{processor:e=>z(e)?{value:s6(e),valid:!0}:{valid:!1,message:"Must be a single function"},default:e=>[]}),t("noneditable_class",{processor:"string",default:"mceNonEditable"}),t("editable_class",{processor:"string",default:"mceEditable"}),t("noneditable_regexp",{processor:e=>$(e,dt)?{value:e,valid:!0}:dt(e)?{value:[e],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),t("table_tab_navigation",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{t("directionality",{processor:"string",default:im.isRtl()?"rtl":void 0}),t("placeholder",{processor:"string",default:s7.getAttrib(e.getElement(),"placeholder")})})},di=dr("iframe_attrs"),ds=dr("doctype"),dd=dr("document_base_url"),dc=dr("body_id"),du=dr("body_class"),dm=dr("content_security_policy"),df=dr("br_in_pre"),dg=dr("forced_root_block"),dp=dr("forced_root_block_attrs"),dh=dr("newline_behavior"),db=dr("br_newline_selector"),dv=dr("no_newline_selector"),dy=dr("keep_styles"),dC=dr("end_container_on_empty_block"),dx=dr("automatic_uploads"),dw=dr("images_reuse_filename"),dk=dr("images_replace_blob_uris"),d_=dr("icons"),dS=dr("icons_url"),dE=dr("images_upload_url"),dN=dr("images_upload_base_path"),dD=dr("images_upload_credentials"),dR=dr("images_upload_handler"),dA=dr("content_css_cors"),dO=dr("referrer_policy"),dT=dr("language"),dB=dr("language_url"),dP=dr("indent_use_margin"),dL=dr("indentation"),dF=dr("content_css"),dM=dr("content_style"),dI=dr("font_css"),dU=dr("directionality"),dj=dr("inline_boundaries_selector"),dz=dr("object_resizing"),dH=dr("resize_img_proportional"),d$=dr("placeholder"),dq=dr("event_root"),dV=dr("service_message"),dW=dr("theme"),dK=dr("theme_url"),dG=dr("model"),dY=dr("model_url"),dX=dr("inline_boundaries"),dQ=dr("formats"),dJ=dr("preview_styles"),dZ=dr("format_empty_lines"),d0=dr("format_noneditable_selector"),d1=dr("custom_ui_selector"),d2=dr("inline"),d3=dr("hidden_input"),d8=dr("submit_patch"),d5=dr("add_form_submit_trigger"),d6=dr("add_unload_trigger"),d9=dr("custom_undo_redo_levels"),d4=dr("disable_nodechange"),d7=dr("readonly"),ce=dr("content_css_cors"),ct=dr("plugins"),cr=dr("external_plugins"),cn=dr("block_unsupported_drop"),co=dr("visual"),cl=dr("visual_table_class"),ca=dr("visual_anchor_class"),ci=dr("iframe_aria_text"),cs=dr("setup"),cd=dr("init_instance_callback"),cc=dr("urlconverter_callback"),cu=dr("auto_focus"),cm=dr("browser_spellcheck"),cf=dr("protect"),cg=dr("paste_block_drop"),cp=dr("paste_data_images"),ch=dr("paste_preprocess"),cb=dr("paste_postprocess"),cv=dr("paste_webkit_styles"),cy=dr("paste_remove_styles_if_webkit"),cC=dr("paste_merge_formats"),cx=dr("smart_paste"),cw=dr("paste_as_text"),ck=dr("paste_tab_spaces"),c_=dr("allow_html_data_urls"),cS=dr("text_patterns"),cE=dr("text_patterns_lookup"),cN=dr("noneditable_class"),cD=dr("editable_class"),cR=dr("noneditable_regexp"),cA=dr("preserve_cdata"),cO=e=>e.options.isSet("text_patterns_lookup"),cT=e=>rr.explode(e.options.get("font_size_style_values")),cB=e=>rr.explode(e.options.get("font_size_classes")),cP=e=>"xml"===e.options.get("encoding"),cL=e=>rr.explode(e.options.get("images_file_types")),cF=dr("table_tab_navigation"),cM=e=>{let t=e.parentNode;t&&t.removeChild(e)},cI=e=>{let t=oF(e);return{count:e.length-t.length,text:t}},cU=e=>{let t;for(;-1!==(t=e.data.lastIndexOf("\uFEFF"));)e.deleteData(t,1)},cj=(e,t)=>(cW(e),t),cz=(e,t)=>{let r=cI(e.data.substr(0,t.offset())),n=cI(e.data.substr(t.offset())),o=r.text+n.text;return o.length>0?(cU(e),sg(e,t.offset()-r.count)):t},cH=(e,t)=>{let r=t.container(),n=es(eO(r.childNodes),e).map(e=>e<t.offset()?sg(r,t.offset()-1):t).getOr(t);return cW(e),n},c$=(e,t)=>ox(e)&&t.container()===e?cz(e,t):cj(e,t),cq=(e,t)=>t.container()===e.parentNode?cH(e,t):cj(e,t),cV=(e,t)=>sg.isTextPosition(t)?c$(e,t):cq(e,t),cW=e=>{ou(e)&&o4(e)&&(o7(e)?e.removeAttribute("data-mce-caret"):cM(e)),ox(e)&&(cU(e),0===e.data.length&&cM(e))},cK=(e,t,r)=>{let n,o;let l=iG(t.getBoundingClientRect(),r);if("BODY"===e.tagName){let a=e.ownerDocument.documentElement;n=e.scrollLeft||a.scrollLeft,o=e.scrollTop||a.scrollTop}else{let i=e.getBoundingClientRect();n=e.scrollLeft-i.left,o=e.scrollTop-i.top}l.left+=n,l.right+=n,l.top+=o,l.bottom+=o,l.width=1;let s=t.offsetWidth-t.clientWidth;return s>0&&(r&&(s*=-1),l.left+=s,l.right+=s),l},cG=e=>{var t,r;let n=oM(rV.fromDom(e),"*[contentEditable=false],video,audio,embed,object");for(let o=0;o<n.length;o++){let l=n[o].dom,a=l.previousSibling;if(ll(a)){let i=a.data;1===i.length?null===(t=a.parentNode)||void 0===t||t.removeChild(a):a.deleteData(i.length-1,1)}if(lo(a=l.nextSibling)){let s=a.data;1===s.length?null===(r=a.parentNode)||void 0===r||r.removeChild(a):a.deleteData(0,1)}}},cY=(e,t,r,n)=>{let o,l;let a=ib(),i=dg(e),s=e.dom,d=(e,n)=>{let o;if(c(),oO(n))return null;if(r(n)){let d=ln(i,n,e),m=cK(t,n,e);s.setStyle(d,"top",m.top),l=d;let f=s.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});s.setStyles(f,{...m}),s.add(t,f),a.set({caret:f,element:n,before:e}),e&&s.addClass(f,"mce-visual-caret-before"),u(),(o=n.ownerDocument.createRange()).setStart(d,0),o.setEnd(d,0)}else l=le(n,e),o=n.ownerDocument.createRange(),cQ(l.nextSibling)?(o.setStart(l,0),o.setEnd(l,0)):(o.setStart(l,1),o.setEnd(l,1));return o},c=()=>{cG(t),l&&(cW(l),l=null),a.on(e=>{s.remove(e.caret),a.clear()}),o&&(clearInterval(o),o=void 0)},u=()=>{o=setInterval(()=>{a.on(e=>{n()?s.toggleClass(e.caret,"mce-visual-caret-hidden"):s.addClass(e.caret,"mce-visual-caret-hidden")})},500)},m=()=>{a.on(e=>{let r=cK(t,e.element,e.before);s.setStyles(e.caret,{...r})})},f=()=>clearInterval(o);return{show:d,hide:c,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:m,destroy:f}},cX=()=>t2.browser.isFirefox(),cQ=e=>oA(e)||oB(e),cJ=e=>cQ(e)||ov(e)&&cX(),cZ=og("display","block table table-cell table-caption list-item"),c0=e=>e>0,c1=e=>e<0,c2=(e,t)=>{let r;for(;r=e(t);)if(!o6(r))return r;return null},c3=(e,t,r,n,o)=>{let l;let a=new os(e,n),i=oA(e)||o6(e);if(c1(t)){if(i&&r(l=c2(a.prev.bind(a),!0)))return l;for(;l=c2(a.prev.bind(a),o);)if(r(l))return l}if(c0(t)){if(i&&r(l=c2(a.next.bind(a),!0)))return l;for(;l=c2(a.next.bind(a),o);)if(r(l))return l}return null},c8=(e,t)=>{let r=e=>oR(e.dom);return n7(rV.fromDom(e),r,e=>e.dom===t).map(e=>e.dom).getOr(t)},c5=(e,t)=>{for(;e&&e!==t;){if(cZ(e))return e;e=e.parentNode}return null},c6=(e,t,r)=>c5(e.container(),r)===c5(t.container(),r),c9=(e,t)=>{if(!t)return en.none();let r=t.container(),n=t.offset();return ou(r)?en.from(r.childNodes[n+e]):en.none()},c4=(e,t)=>{var r;let n=null!==(r=t.ownerDocument)&&void 0!==r?r:document,o=n.createRange();return e?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)),o},c7=(e,t,r)=>c5(t,e)===c5(r,e),ue=(e,t,r)=>{let n=e?"previousSibling":"nextSibling",o=r;for(;o&&o!==t;){let l=o[n];if(l&&o4(l)&&(l=l[n]),oA(l)||oB(l)){if(c7(t,l,o))return l;break}if(lm(l))break;o=o.parentNode}return null},ut=X(c4,!0),ur=X(c4,!1),un=(e,t,r)=>{let n;let o=X(ue,!0,t),l=X(ue,!1,t),a=r.startContainer,i=r.startOffset;if(o6(a)){let s=ox(a)?a.parentNode:a,d=s.getAttribute("data-mce-caret");if("before"===d&&cJ(n=s.nextSibling))return ut(n);if("after"===d&&cJ(n=s.previousSibling))return ur(n)}if(!r.collapsed)return r;if(ox(a)){if(o4(a)){if(1===e){if(n=l(a))return ut(n);if(n=o(a))return ur(n)}if(-1===e){if(n=o(a))return ur(n);if(n=l(a))return ut(n)}return r}if(ll(a)&&i>=a.data.length-1)return 1===e&&(n=l(a))?ut(n):r;if(lo(a)&&i<=1)return -1===e&&(n=o(a))?ur(n):r;if(i===a.data.length)return(n=l(a))?ut(n):r;if(0===i&&(n=o(a)))return ur(n)}return r},uo=(e,t)=>c9(e?0:-1,t).filter(oA),ul=(e,t,r)=>{let n=un(e,t,r);return -1===e?sg.fromRangeStart(n):sg.fromRangeEnd(n)},ua=e=>en.from(e.getNode()).map(rV.fromDom),ui=e=>en.from(e.getNode(!0)).map(rV.fromDom),us=(e,t)=>{let r=t;for(;(r=e(r))&&!r.isVisible(););return r},ud=(e,t)=>{let r=c6(e,t);return!!(!r&&oN(e.getNode()))||r};(i=f||(f={}))[i.Backwards=-1]="Backwards",i[i.Forwards=1]="Forwards";let uc=(e,t)=>{let r=[],n=e;for(;n&&n!==t;)r.push(n),n=n.parentNode;return r},uu=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,um=(e,t)=>{if(c0(e)){if(lm(t.previousSibling)&&!ox(t.previousSibling))return sg.before(t);if(ox(t))return sg(t,0)}if(c1(e)){if(lm(t.nextSibling)&&!ox(t.nextSibling))return sg.after(t);if(ox(t))return sg(t,t.data.length)}return c1(e)?oN(t)?sg.before(t):sg.after(t):sg.before(t)},uf=(e,t)=>{let r=t.nextSibling;return r&&lm(r)?ox(r)?sg(r,0):sg.before(r):ug(f.Forwards,sg.after(t),e)},ug=(e,t,r)=>{let n,o,l,a;if(!ou(r)||!t)return null;if(t.isEqual(sg.after(r))&&r.lastChild){if(a=sg.after(r.lastChild),c1(e)&&lm(r.lastChild)&&ou(r.lastChild))return oN(r.lastChild)?sg.before(r.lastChild):a}else a=t;let i=a.container(),s=a.offset();if(ox(i)){if(c1(e)&&s>0)return sg(i,--s);if(c0(e)&&s<i.length)return sg(i,++s);n=i}else{if(c1(e)&&s>0&&lm(o=uu(i,s-1)))return!lb(o)&&(l=c3(o,e,lv,o))?ox(l)?sg(l,l.data.length):sg.after(l):ox(o)?sg(o,o.data.length):sg.before(o);if(c0(e)&&s<i.childNodes.length&&lm(o=uu(i,s)))return oN(o)?uf(r,o):!lb(o)&&(l=c3(o,e,lv,o))?ox(l)?sg(l,0):sg.before(l):ox(o)?sg(o,0):sg.after(o);n=o||a.getNode()}if(n&&(c0(e)&&a.isAtEnd()||c1(e)&&a.isAtStart())&&(n=c3(n,e,er,r,!0),lv(n,r)))return um(e,n);o=n?c3(n,e,lv,r):n;let d=e5(ep(uc(i,r),oA));return!d||o&&d.contains(o)?o?um(e,o):null:a=c0(e)?sg.after(d):sg.before(d)},up=e=>({next:t=>ug(f.Forwards,t,e),prev:t=>ug(f.Backwards,t,e)}),uh=(e,t,r)=>{let n=e?sg.before(r):sg.after(r);return uk(e,t,n)},ub=e=>oN(e)?sg.before(e):sg.after(e),uv=e=>sg.isTextPosition(e)?0===e.offset():lm(e.getNode()),uy=e=>{if(!sg.isTextPosition(e))return lm(e.getNode(!0));{let t=e.container();return e.offset()===t.data.length}},uC=(e,t)=>!sg.isTextPosition(e)&&!sg.isTextPosition(t)&&e.getNode()===t.getNode(!0),ux=e=>!sg.isTextPosition(e)&&oN(e.getNode()),uw=(e,t,r)=>e?!uC(t,r)&&!ux(t)&&uy(t)&&uv(r):!uC(r,t)&&uv(t)&&uy(r),uk=(e,t,r)=>{let n=up(t);return en.from(e?n.next(r):n.prev(r))},u_=(e,t,r)=>uk(e,t,r).bind(n=>c6(r,n,t)&&uw(e,r,n)?uk(e,t,n):en.some(n)),uS=(e,t,r,n)=>u_(e,t,r).bind(r=>n(r)?uS(e,t,r,n):en.some(r)),uE=(e,t)=>{let r=e?t.firstChild:t.lastChild;return ox(r)?en.some(sg(r,e?0:r.data.length)):r?lm(r)?en.some(e?sg.before(r):ub(r)):uh(e,t,r):en.none()},uN=X(uk,!0),uD=X(uk,!1),uR=X(uE,!0),uA=X(uE,!1),uO="_mce_caret",uT=e=>ou(e)&&e.id===uO,uB=(e,t)=>{let r=t;for(;r&&r!==e;){if(uT(r))return r;r=r.parentNode}return null},uP=e=>T(e.start),uL=e=>eW(e,"rng"),uF=e=>eW(e,"id"),uM=e=>eW(e,"name"),uI=e=>rr.isArray(e.start),uU=e=>!(!uM(e)&&M(e.forward))||e.forward,uj=(e,t)=>(ou(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),uz=(e,t)=>{let r=en.from(sA(e.getRoot(),t.start)),n=en.from(sA(e.getRoot(),t.end));return rl(r,n,(r,n)=>{let o=e.createRng();return o.setStart(r.container(),r.offset()),o.setEnd(n.container(),n.offset()),{range:o,forward:uU(t)}})},uH=(e,t)=>{var r;let n=null!==(r=e.ownerDocument)&&void 0!==r?r:document,o=n.createTextNode("\uFEFF");e.appendChild(o),t.setStart(o,0),t.setEnd(o,0)},u$=e=>!e.hasChildNodes(),uq=(e,t)=>uA(e).fold(et,e=>(t.setStart(e.container(),e.offset()),t.setEnd(e.container(),e.offset()),!0)),uV=(e,t,r)=>!!(u$(t)&&uB(e,t))&&(uH(t,r),!0),uW=(e,t,r,n)=>{let o=r[t?"start":"end"],l=e.getRoot();if(o){let a=l,i=o[0];for(let s=o.length-1;a&&s>=1;s--){let d=a.childNodes;if(uV(l,a,n))return!0;if(o[s]>d.length-1){if(uV(l,a,n))return!0;return uq(a,n)}a=d[o[s]]}ox(a)&&(i=Math.min(o[0],a.data.length)),ou(a)&&(i=Math.min(o[0],a.childNodes.length)),t?n.setStart(a,i):n.setEnd(a,i)}return!0},uK=e=>ox(e)&&e.data.length>0,uG=(e,t,r)=>{let n=e.get(r.id+"_"+t),o=null==n?void 0:n.parentNode,l=r.keep;if(!n||!o)return en.none();{let a,i;if("start"===t?l?n.hasChildNodes()?(a=n.firstChild,i=1):uK(n.nextSibling)?(a=n.nextSibling,i=0):uK(n.previousSibling)?(a=n.previousSibling,i=n.previousSibling.data.length):(a=o,i=e.nodeIndex(n)+1):(a=o,i=e.nodeIndex(n)):l?n.hasChildNodes()?(a=n.firstChild,i=1):uK(n.previousSibling)?(a=n.previousSibling,i=n.previousSibling.data.length):(a=o,i=e.nodeIndex(n)):(a=o,i=e.nodeIndex(n)),!l){let s;let d=n.previousSibling,c=n.nextSibling;for(rr.each(rr.grep(n.childNodes),e=>{ox(e)&&(e.data=e.data.replace(/\uFEFF/g,""))});s=e.get(r.id+"_"+t);)e.remove(s,!0);if(ox(c)&&ox(d)&&!t2.browser.isOpera()){let u=d.data.length;d.appendData(c.data),e.remove(c),a=d,i=u}}return en.some(sg(a,i))}},uY=(e,t)=>{let r=e.createRng();return uW(e,!0,t,r)&&uW(e,!1,t,r)?en.some({range:r,forward:uU(t)}):en.none()},uX=(e,t)=>{let r=uG(e,"start",t),n=uG(e,"end",t);return rl(r,n.or(r),(r,n)=>{let o=e.createRng();return o.setStart(uj(e,r.container()),r.offset()),o.setEnd(uj(e,n.container()),n.offset()),{range:o,forward:uU(t)}})},uQ=(e,t)=>en.from(e.select(t.name)[t.index]).map(t=>{let r=e.createRng();return r.selectNode(t),{range:r,forward:!0}}),uJ=(e,t)=>{let r=e.dom;if(t){if(uI(t))return uY(r,t);if(uP(t))return uz(r,t);if(uF(t))return uX(r,t);if(uM(t))return uQ(r,t);else if(uL(t))return en.some({range:t.rng,forward:uU(t)})}return en.none()},uZ=(e,t,r)=>sq(e,t,r),u0=(e,t)=>{uJ(e,t).each(({range:t,forward:r})=>{e.setRng(t,r)})},u1=e=>ou(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type"),u2=e=>"\xa0"===e,u3=e=>""!==e&&-1!==" \f\n\r	\v".indexOf(e),u8=e=>!u3(e)&&!u2(e)&&!oL(e),u5=e=>({value:e}),u6=e=>{let t=e.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},u9=e=>{let t=u6(e.red)+u6(e.green)+u6(e.blue);return u5(t)},u4=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,u7=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,me=(e,t,r,n)=>({red:e,green:t,blue:r,alpha:n}),mt=(e,t,r,n)=>{let o=parseInt(e,10),l=parseInt(t,10),a=parseInt(r,10),i=parseFloat(n);return me(o,l,a,i)},mr=e=>{if("transparent"===e)return en.some(me(0,0,0,0));let t=u4.exec(e);if(null!==t)return en.some(mt(t[1],t[2],t[3],"1"));let r=u7.exec(e);return null!==r?en.some(mt(r[1],r[2],r[3],r[4])):en.none()},mn=e=>mr(e).map(u9).map(e=>"#"+e.value).getOr(e),mo=e=>{let t=[];if(e)for(let r=0;r<e.rangeCount;r++)t.push(e.getRangeAt(r));return t},ml=e=>ew(e,e=>{let t=i8(e);return t?[rV.fromDom(t)]:[]}),ma=e=>mo(e).length>1,mi=e=>ep(ml(e),oQ),ms=e=>oM(e,"td[data-mce-selected],th[data-mce-selected]"),md=(e,t)=>{let r=ms(t);return r.length>0?r:mi(e)},mc=e=>md(mo(e.selection.getSel()),rV.fromDom(e.getBody())),mu=(e,t)=>oo(e,"table",t),mm=e=>{let t=e.startContainer,r=e.startOffset;return ox(t)?0===r?en.some(rV.fromDom(t)):en.none():en.from(t.childNodes[r]).map(rV.fromDom)},mf=e=>{let t=e.endContainer,r=e.endOffset;return ox(t)?r===t.data.length?en.some(rV.fromDom(t)):en.none():en.from(t.childNodes[r-1]).map(rV.fromDom)},mg=e=>nn(e).fold(K([e]),t=>[e].concat(mg(t))),mp=e=>no(e).fold(K([e]),t=>"br"===rs(t)?r9(t).map(t=>[e].concat(mp(t))).getOr([]):[e].concat(mp(t))),mh=(e,t)=>rl(mm(t),mf(t),(t,r)=>{let n=ey(mg(e),X(rQ,t)),o=ey(mp(e),X(rQ,r));return n.isSome()&&o.isSome()}).getOr(!1),mb=(e,t,r,n)=>{let o=new os(r,r),l=eH(e.schema.getMoveCaretBeforeOnEnterElements(),(e,t)=>!ed(["td","th","table"],t.toLowerCase())),a=r;do{if(ox(a)&&0!==rr.trim(a.data).length){n?t.setStart(a,0):t.setEnd(a,a.data.length);return}if(l[a.nodeName]){n?t.setStartBefore(a):"BR"===a.nodeName?t.setEndBefore(a):t.setEndAfter(a);return}}while(a=n?o.next():o.prev());"BODY"===r.nodeName&&(n?t.setStart(r,0):t.setEnd(r,r.childNodes.length))},mv=e=>{let t=e.selection.getSel();return j(t)&&t.rangeCount>0},my=(e,t)=>{let r=mc(e);r.length>0?em(r,r=>{let n=r.dom,o=e.dom.createRng();o.setStartBefore(n),o.setEndAfter(n),t(o,!0)}):t(e.selection.getRng(),!1)},mC=(e,t,r)=>{let n=s$(e,t);r(n),e.moveToBookmark(n)},mx=e=>H(null==e?void 0:e.nodeType),mw=e=>ou(e)&&!u1(e)&&!uT(e)&&!oh(e),mk=(e,t)=>{if(!mw(t)||/^(TD|TH)$/.test(t.nodeName))return!1;{let r=e.getAttrib(t,"data-mce-selected"),n=parseInt(r,10);return!isNaN(n)&&n>0}},m_=e=>!0===e.isContentEditable,mS=(e,t,r)=>{let{selection:n,dom:o}=e,l=n.getNode(),a=oA(l);mC(n,!0,()=>{t()});let i=a&&oA(l);i&&o.isChildOf(l,e.getBody())?e.selection.select(l):r(n.getStart())&&mE(o,n)},mE=(e,t)=>{var r,n;let o=t.getRng(),{startContainer:l,startOffset:a}=o,i=t.getNode();if(!mk(e,i)&&ou(l)){let s;let d=l.childNodes,c=e.getRoot();if(a<d.length){let u=d[a];s=new os(u,null!==(r=e.getParent(u,e.isBlock))&&void 0!==r?r:c)}else{let m=d[d.length-1];(s=new os(m,null!==(n=e.getParent(m,e.isBlock))&&void 0!==n?n:c)).next(!0)}for(let f=s.current();f;f=s.next()){if("false"===e.getContentEditable(f))return;if(ox(f)&&!mA(f)){o.setStart(f,0),t.setRng(o);return}}}},mN=(e,t,r)=>{if(e){let n=t?"nextSibling":"previousSibling";for(e=r?e:e[n];e;e=e[n])if(ou(e)||!mA(e))return e}},mD=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||lG(e,t),mR=(e,t,r)=>e.schema.isValidChild(t,r),mA=(e,t=!1)=>{if(!(j(e)&&ox(e)))return!1;{let r=t?e.data.replace(/ /g,"\xa0"):e.data;return lC(r)}},mO=e=>j(e)&&ox(e)&&0===e.length,mT=(e,t)=>{let r="[data-mce-cef-wrappable]",n=d0(e),o=ty(n)?r:`${r},${n}`;return rK(rV.fromDom(t),o)},mB=(e,t)=>{let r=e.dom;return mw(t)&&"false"===r.getContentEditable(t)&&mT(e,t)&&0===r.select('[contenteditable="true"]',t).length},mP=(e,t)=>z(e)?e(t):(j(t)&&(e=e.replace(/%(\w+)/g,(e,r)=>t[r]||e)),e),mL=(e,t)=>(t=t||"",e=""+((e=e||"").nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()),mF=(e,t)=>{if(U(e))return null;{let r=String(e);return("color"===t||"backgroundColor"===t)&&(r=mn(r)),"fontWeight"===t&&700===e&&(r="bold"),"fontFamily"===t&&(r=r.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),r}},mM=(e,t,r)=>{let n=e.getStyle(t,r);return mF(n,r)},mI=(e,t)=>{let r;return e.getParent(t,t=>!!ou(t)&&!!(r=e.getStyle(t,"text-decoration"))&&"none"!==r),r},mU=(e,t,r)=>e.getParents(t,r,e.getRoot()),mj=(e,t,r)=>{let n=e.formatter.get(t);return j(n)&&ec(n,r)},mz=(e,t)=>{let r=e=>{let t=e=>z(e)||e.length>1&&"%"===e.charAt(0);return ec(["styles","attributes"],r=>eV(e,r).exists(e=>{let r=L(e)?e:eq(e);return ec(r,t)}))};return mj(e,t,r)},mH=(e,t,r)=>{let n=["inline","block","selector","attributes","styles","classes"],o=e=>eH(e,(e,t)=>ec(n,e=>e===t));return mj(e,t,t=>{let n=o(t);return mj(e,r,e=>{let t=o(e);return eG(n,t)})})},m$=e=>eK(e,"block"),mq=e=>m$(e)&&!0===e.wrapper,mV=e=>m$(e)&&!0!==e.wrapper,mW=e=>eK(e,"selector"),mK=e=>eK(e,"inline"),mG=e=>mW(e)&&mK(e)&&rn(eV(e,"mixed"),!0),mY=e=>mW(e)&&!1!==e.expand&&!mK(e),mX=e=>oN(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,mQ=(e,t)=>{let r=t;for(;r;){if(ou(r)&&e.getContentEditable(r))return"false"===e.getContentEditable(r)?r:t;r=r.parentNode}return t},mJ=(e,t,r,n)=>{let o=t.data;if(e){for(let l=r;l>0;l--)if(n(o.charAt(l-1)))return l}else for(let a=r;a<o.length;a++)if(n(o.charAt(a)))return a;return -1},mZ=(e,t,r)=>mJ(e,t,r,e=>u2(e)||u3(e)),m0=(e,t,r)=>mJ(e,t,r,u8),m1=(e,t,r,n,o,l)=>{let a;let i=e.getParent(r,e.isBlock)||t,s=(t,r,n)=>{let l=iV(e),s=o?l.backwards:l.forwards;return en.from(s(t,r,(e,t)=>u1(e.parentNode)?-1:(a=e,n(o,e,t)),i))},d=s(r,n,mZ);return d.bind(e=>l?s(e.container,e.offset+(o?-1:0),m0):en.some(e)).orThunk(()=>a?en.some({container:a,offset:o?0:a.length}):en.none())},m2=(e,t,r,n,o)=>{let l=n[o];ox(n)&&ty(n.data)&&l&&(n=l);let a=mU(e,n);for(let i=0;i<a.length;i++)for(let s=0;s<t.length;s++){let d=t[s];if((!j(d.collapsed)||d.collapsed===r.collapsed)&&mW(d)&&e.is(a[i],d.selector))return a[i]}return n},m3=(e,t,r,n)=>{var o;let l=r,a=e.getRoot(),i=t[0];if(m$(i)&&(l=i.wrapper?null:e.getParent(r,i.block,a)),!l){let s=null!==(o=e.getParent(r,"LI,TD,TH"))&&void 0!==o?o:a;l=e.getParent(ox(r)?r.parentNode:r,t=>t!==a&&mD(e.schema,t),s)}if(l&&m$(i)&&i.wrapper&&(l=mU(e,l,"ul,ol").reverse()[0]||l),!l)for(l=r;l&&l[n]&&!e.isBlock(l[n])&&!mL(l=l[n],"br"););return l||r},m8=(e,t,r,n)=>{let o=r.parentNode;return!j(r[n])&&(!!(o===t||U(o)||e.isBlock(o))||m8(e,t,o,n))},m5=(e,t,r,n,o)=>{let l=r,a=o?"previousSibling":"nextSibling",i=e.getRoot();if(ox(r)&&!mA(r)&&(o?n>0:n<r.data.length))return r;for(;l;){if(!t[0].block_expand&&e.isBlock(l))return l;for(let s=l[a];s;s=s[a]){let d=ox(s)&&!m8(e,i,s,a);if(!u1(s)&&!mX(s)&&!mA(s,d))return l}if(l===i||l.parentNode===i){r=l;break}l=l.parentNode}return r},m6=e=>u1(e.parentNode)||u1(e),m9=(e,t,r,n=!1)=>{let{startContainer:o,startOffset:l,endContainer:a,endOffset:i}=t,s=r[0];if(ou(o)&&o.hasChildNodes()&&ox(o=i5(o,l))&&(l=0),ou(a)&&a.hasChildNodes()&&ox(a=i5(a,t.collapsed?i:i-1))&&(i=a.data.length),o=mQ(e,o),a=mQ(e,a),m6(o)&&(o=u1(o)?o:o.parentNode,ox(o=t.collapsed?o.previousSibling||o:o.nextSibling||o)&&(l=t.collapsed?o.length:0)),m6(a)&&(a=u1(a)?a:a.parentNode,ox(a=t.collapsed?a.nextSibling||a:a.previousSibling||a)&&(i=t.collapsed?0:a.length)),t.collapsed){let d=m1(e,e.getRoot(),o,l,!0,n);d.each(({container:e,offset:t})=>{o=e,l=t});let c=m1(e,e.getRoot(),a,i,!1,n);c.each(({container:e,offset:t})=>{a=e,i=t})}return(mK(s)||s.block_expand)&&(mK(s)&&ox(o)&&0!==l||(o=m5(e,r,o,l,!0)),mK(s)&&ox(a)&&i!==a.data.length||(a=m5(e,r,a,i,!1))),mY(s)&&(o=m2(e,r,t,o,"previousSibling"),a=m2(e,r,t,a,"nextSibling")),(m$(s)||mW(s))&&(o=m3(e,r,o,"previousSibling"),a=m3(e,r,a,"nextSibling"),m$(s)&&(e.isBlock(o)||(o=m5(e,r,o,l,!0)),e.isBlock(a)||(a=m5(e,r,a,i,!1)))),ou(o)&&o.parentNode&&(l=e.nodeIndex(o),o=o.parentNode),ou(a)&&a.parentNode&&(i=e.nodeIndex(a)+1,a=a.parentNode),{startContainer:o,startOffset:l,endContainer:a,endOffset:i}},m4=(e,t,r)=>{var n;let o=t.startOffset,l=i5(t.startContainer,o),a=t.endOffset,i=i5(t.endContainer,a-1),s=e=>{let t=e[0];ox(t)&&t===l&&o>=t.data.length&&e.splice(0,1);let r=e[e.length-1];return 0===a&&e.length>0&&r===i&&ox(r)&&e.splice(e.length-1,1),e},d=(e,t,r)=>{let n=[];for(;e&&e!==r;e=e[t])n.push(e);return n},c=(t,r)=>e.getParent(t,e=>e.parentNode===r,r),u=(e,t,n)=>{let o=n?"nextSibling":"previousSibling";for(let l=e,a=l.parentNode;l&&l!==t;l=a){a=l.parentNode;let i=d(l===e?l:l[o],o);i.length&&(n||i.reverse(),r(s(i)))}};if(l===i)return r(s([l]));let m=null!==(n=e.findCommonAncestor(l,i))&&void 0!==n?n:e.getRoot();if(e.isChildOf(l,i))return u(l,m,!0);if(e.isChildOf(i,l))return u(i,m);let f=c(l,m)||l,g=c(i,m)||i;u(l,f,!0);let p=d(f===l?f:f.nextSibling,"nextSibling",g===i?g.nextSibling:g);p.length&&r(s(p)),u(i,g)},m7=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],fe=e=>rf(e)&&"\uFEFF"===oU(e),ft=(e,t,r,n)=>r3(t).fold(()=>"skipping",o=>"br"===n||fe(t)?"valid":iD(t)?"existing":uT(t.dom)?"caret":ec(m7,e=>rK(t,e))?"valid-block":mR(e,r,n)&&mR(e,rs(o),r)?"valid":"invalid-child"),fr=(e,t)=>{let r=m9(e.dom,t,[{inline:"span"}]);t.setStart(r.startContainer,r.startOffset),t.setEnd(r.endContainer,r.endOffset),e.selection.setRng(t)},fn=(e,t,r,n,o,l)=>{let{uid:a=t,...i}=r;rP(e,iC()),rv(e,`${iw()}`,a),rv(e,`${ix()}`,n);let{attributes:s={},classes:d=[]}=o(a,i);if(ry(e,s),iM(e,d),l){d.length>0&&rv(e,`${i_()}`,d.join(","));let c=eP(s);c.length>0&&rv(e,`${iS()}`,c.join(","))}},fo=e=>{rF(e,iC()),rk(e,`${iw()}`),rk(e,`${ix()}`),rk(e,`${ik()}`);let t=rx(e,`${iS()}`).map(e=>e.split(",")).getOr([]),r=rx(e,`${i_()}`).map(e=>e.split(",")).getOr([]);em(t,t=>rk(e,t)),iI(e,r),rk(e,`${i_()}`),rk(e,`${iS()}`)},fl=(e,t,r,n,o)=>{let l=rV.fromTag("span",e);return fn(l,t,r,n,o,!1),l},fa=(e,t,r,n,o,l)=>{let a=[],i=fl(e.getDoc(),r,l,n,o),s=ib(),d=()=>{s.clear()},c=()=>s.get().getOrThunk(()=>{let e=ij(i);return a.push(e),s.set(e),e}),u=e=>{em(e,m)},m=t=>{let a=ft(e,t,"span",rs(t));switch(a){case"invalid-child":{d();let i=nt(t);u(i),d();break}case"valid-block":d(),fn(t,r,l,n,o,!0);break;case"valid":{let s=c();nT(t,s)}}},f=e=>{let t=eu(e,rV.fromDom);u(t)};return m4(e.dom,t,e=>{d(),f(e)}),a},fi=(e,t,r,n)=>{e.undoManager.transact(()=>{let o=e.selection,l=o.getRng(),a=mc(e).length>0,i=iF("mce-annotation");if(l.collapsed&&!a&&fr(e,l),o.getRng().collapsed&&!a){let s=fl(e.getDoc(),i,n,t,r.decorate);nz(s,"\xa0"),o.getRng().insertNode(s.dom),o.select(s.dom)}else mC(o,!1,()=>{my(e,o=>{fa(e,o,i,t,r.decorate,n)})})})},fs=e=>{let t=iP();iB(e,t);let r=iT(e,t),n=rh("span"),o=e=>{em(e,e=>{n(e)?nM(e):fo(e)})};return{register:(e,r)=>{t.register(e,r)},annotate:(r,n)=>{t.lookup(r).each(t=>{fi(e,r,t,n)})},annotationChanged:(e,t)=>{r.addListener(e,t)},remove:t=>{let r=e.selection.getBookmark();iN(e,en.some(t)).each(({elements:e})=>{o(e)}),e.selection.moveToBookmark(r)},removeAll:t=>{let r=e.selection.getBookmark();eF(iO(e,t),(e,t)=>{o(e)}),e.selection.moveToBookmark(r)},getAll:t=>{let r=iO(e,t);return eM(r,e=>eu(e,e=>e.dom))}}},fd=e=>({getBookmark:X(uZ,e),moveToBookmark:X(u0,e)});fd.isBookmarkNode=u1;let fc=(e,t,r)=>!r.collapsed&&ec(r.getClientRects(),r=>iZ(r,e,t)),fu=(e,t)=>e.dispatch("PreProcess",t),fm=(e,t)=>e.dispatch("PostProcess",t),ff=e=>{e.dispatch("remove")},fg=e=>{e.dispatch("detach")},fp=(e,t)=>{e.dispatch("SwitchMode",{mode:t})},fh=(e,t,r,n,o)=>{e.dispatch("ObjectResizeStart",{target:t,width:r,height:n,origin:o})},fb=(e,t,r,n,o)=>{e.dispatch("ObjectResized",{target:t,width:r,height:n,origin:o})},fv=e=>{e.dispatch("PreInit")},fy=e=>{e.dispatch("PostRender")},fC=e=>{e.dispatch("Init")},fx=(e,t)=>{e.dispatch("PlaceholderToggle",{state:t})},fw=(e,t,r)=>{e.dispatch(t,r)},fk=(e,t,r,n)=>{e.dispatch("FormatApply",{format:t,node:r,vars:n})},f_=(e,t,r,n)=>{e.dispatch("FormatRemove",{format:t,node:r,vars:n})},fS=(e,t)=>e.dispatch("BeforeSetContent",t),fE=(e,t)=>e.dispatch("SetContent",t),fN=(e,t)=>e.dispatch("BeforeGetContent",t),fD=(e,t)=>e.dispatch("GetContent",t),fR=(e,t)=>{e.dispatch("AutocompleterStart",t)},fA=(e,t)=>{e.dispatch("AutocompleterUpdate",t)},fO=e=>{e.dispatch("AutocompleterEnd")},fT=(e,t,r)=>e.dispatch("PastePreProcess",{content:t,internal:r}),fB=(e,t,r)=>e.dispatch("PastePostProcess",{node:t,internal:r}),fP=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),fL={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||fL.metaKeyPressed(e),metaKeyPressed:e=>t2.os.isMacOS()||t2.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},fF="data-mce-selected",fM=Math.abs,fI=Math.round,fU={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},fj=e=>"longpress"===e.type||0===e.type.indexOf("touch"),fz=(e,t)=>{let r,n,o,l,a,i,s,d,c,u,m,f,g,p,h,b,v;let y=t.dom,C=t.getDoc(),x=document,w=t.getBody(),k=e=>j(e)&&(oD(e)||y.is(e,"figure.image")),_=e=>oB(e)||y.hasClass(e,"mce-preview-object"),S=(e,t)=>{if(!fj(e))return k(e.target)&&!fc(e.clientX,e.clientY,t);{let r=e.touches[0];return k(e.target)&&!fc(r.clientX,r.clientY,t)}},E=e=>{let r=e.target;S(e,t.selection.getRng())&&!e.isDefaultPrevented()&&t.selection.select(r)},N=e=>y.hasClass(e,"mce-preview-object")&&j(e.firstElementChild)?[e,e.firstElementChild]:y.is(e,"figure.image")?[e.querySelector("img")]:[e],D=e=>{let r=dz(t);return!!r&&"false"!==e.getAttribute("data-mce-resize")&&e!==t.getBody()&&(y.hasClass(e,"mce-preview-object")&&j(e.firstElementChild)?rK(rV.fromDom(e.firstElementChild),r):rK(rV.fromDom(e),r))},R=e=>_(e)?y.create("img",{src:t2.transparentSrc}):e.cloneNode(!0),A=(e,r,n)=>{if(j(n)){let o=N(e);em(o,e=>{e.style[r]||!t.schema.isValid(e.nodeName.toLowerCase(),r)?y.setStyle(e,r,n):y.setAttrib(e,r,""+n)})}},O=(e,t,r)=>{A(e,"width",t),A(e,"height",r)},T=e=>{let a,C,x,S;a=e.screenX-i,C=e.screenY-s,p=a*l[2]+u,h=C*l[3]+m,p=p<5?5:p,h=h<5?5:h,((k(r)||_(r))&&!1!==dH(t)?!fL.modifierPressed(e):fL.modifierPressed(e))&&(fM(a)>fM(C)?(h=fI(p*f),p=fI(h/f)):(p=fI(h/f),h=fI(p*f))),O(n,p,h),x=l.startPos.x+a,S=l.startPos.y+C,x=x>0?x:0,S=S>0?S:0,y.setStyles(o,{left:x,top:S,display:"block"}),o.innerHTML=p+" &times; "+h,l[2]<0&&n.clientWidth<=p&&y.setStyle(n,"left",d+(u-p)),l[3]<0&&n.clientHeight<=h&&y.setStyle(n,"top",c+(m-h)),(a=w.scrollWidth-b)+(C=w.scrollHeight-v)!=0&&y.setStyles(o,{left:x-a,top:S-C}),g||(fh(t,r,u,m,"corner-"+l.name),g=!0)},B=()=>{let e=g;g=!1,e&&(A(r,"width",p),A(r,"height",h)),y.unbind(C,"mousemove",T),y.unbind(C,"mouseup",B),x!==C&&(y.unbind(x,"mousemove",T),y.unbind(x,"mouseup",B)),y.remove(n),y.remove(o),y.remove(a),P(r),e&&(fb(t,r,p,h,"corner-"+l.name),y.setAttrib(r,"style",y.getAttrib(r,"style"))),t.nodeChanged()},P=e=>{U();let d=y.getPos(e,w),c=d.x,g=d.y,k=e.getBoundingClientRect(),_=k.width||k.right-k.left,S=k.height||k.bottom-k.top;r!==e&&(F(),r=e,p=h=0);let E=t.dispatch("ObjectSelected",{target:e});D(e)&&!E.isDefaultPrevented()?eF(fU,(e,t)=>{let d=d=>{let p=N(r)[0];i=d.screenX,s=d.screenY,u=p.clientWidth,f=(m=p.clientHeight)/u,(l=e).name=t,l.startPos={x:_*e[0]+c,y:S*e[1]+g},b=w.scrollWidth,v=w.scrollHeight,a=y.add(w,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),y.setStyles(a,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),n=R(r),y.addClass(n,"mce-clonedresizable"),y.setAttrib(n,"data-mce-bogus","all"),n.contentEditable="false",y.setStyles(n,{left:c,top:g,margin:0}),O(n,_,S),n.removeAttribute(fF),w.appendChild(n),y.bind(C,"mousemove",T),y.bind(C,"mouseup",B),x!==C&&(y.bind(x,"mousemove",T),y.bind(x,"mouseup",B)),o=y.add(w,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},u+" &times; "+m)},p=y.get("mceResizeHandle"+t);p&&y.remove(p),p=y.add(w,"div",{id:"mceResizeHandle"+t,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+t+"-resize; margin:0; padding:0"}),y.bind(p,"mousedown",e=>{e.stopImmediatePropagation(),e.preventDefault(),d(e)}),e.elm=p,y.setStyles(p,{left:_*e[0]+c-p.offsetWidth/2,top:S*e[1]+g-p.offsetHeight/2})}):F(!1)},L=iv(P,0),F=(e=!0)=>{L.cancel(),U(),r&&e&&r.removeAttribute(fF),eF(fU,(e,t)=>{let r=y.get("mceResizeHandle"+t);r&&(y.unbind(r),y.remove(r))})},M=(e,t)=>y.isChildOf(e,t),I=r=>{if(g||t.removed||t.composing)return;let n="mousedown"===r.type?r.target:e.getNode(),o=oa(rV.fromDom(n),"table,img,figure.image,hr,video,span.mce-preview-object").map(e=>e.dom).getOrUndefined(),l=j(o)?y.getAttrib(o,fF,"1"):"1";if(em(y.select(`img[${fF}],hr[${fF}]`),e=>{e.removeAttribute(fF)}),j(o)&&M(o,w)){z();let a=e.getStart(!0);if(M(a,o)&&M(e.getEnd(!0),o)){y.setAttrib(o,fF,l),L.throttle(o);return}}F()},U=()=>{eF(fU,e=>{e.elm&&(y.unbind(e.elm),delete e.elm)})},z=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(e){}};t.on("init",()=>{z(),t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",I),t.on("keyup compositionend",e=>{r&&"TABLE"===r.nodeName&&I(e)}),t.on("hide blur",F),t.on("contextmenu longpress",E,!0)}),t.on("remove",U);let H=()=>{L.cancel(),r=n=a=null};return{isResizable:D,showResizeRect:P,hideResizeRect:F,updateResizeRect:I,destroy:H}},fH=(e,t)=>{t.fold(t=>{e.setStartBefore(t.dom)},(t,r)=>{e.setStart(t.dom,r)},t=>{e.setStartAfter(t.dom)})},f$=(e,t)=>{t.fold(t=>{e.setEndBefore(t.dom)},(t,r)=>{e.setEnd(t.dom,r)},t=>{e.setEndAfter(t.dom)})},fq=(e,t,r)=>{let n=e.document.createRange();return fH(n,t),f$(n,r),n},fV=(e,t,r,n,o)=>{let l=e.document.createRange();return l.setStart(t.dom,r),l.setEnd(n.dom,o),l},fW=sQ.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),fK=(e,t,r)=>t(rV.fromDom(r.startContainer),r.startOffset,rV.fromDom(r.endContainer),r.endOffset),fG=(e,t)=>t.match({domRange:e=>({ltr:K(e),rtl:en.none}),relative:(t,r)=>({ltr:e6(()=>fq(e,t,r)),rtl:e6(()=>en.some(fq(e,r,t)))}),exact:(t,r,n,o)=>({ltr:e6(()=>fV(e,t,r,n,o)),rtl:e6(()=>en.some(fV(e,n,o,t,r)))})}),fY=(e,t)=>{let r=t.ltr();if(!r.collapsed)return fK(e,fW.ltr,r);{let n=t.rtl().filter(e=>!1===e.collapsed);return n.map(e=>fW.rtl(rV.fromDom(e.endContainer),e.endOffset,rV.fromDom(e.startContainer),e.startOffset)).getOrThunk(()=>fK(e,fW.ltr,r))}},fX=(e,t)=>{let r=fG(e,t);return fY(e,r)};fW.ltr,fW.rtl;let fQ=(e,t,r,n)=>({start:e,soffset:t,finish:r,foffset:n}),fJ={create:fQ},fZ=(e,t,r)=>{var n,o;return en.from(null===(o=(n=e.dom).caretPositionFromPoint)||void 0===o?void 0:o.call(n,t,r)).bind(t=>{if(null===t.offsetNode)return en.none();let r=e.dom.createRange();return r.setStart(t.offsetNode,t.offset),r.collapse(),en.some(r)})},f0=(e,t,r)=>{var n,o;return en.from(null===(o=(n=e.dom).caretRangeFromPoint)||void 0===o?void 0:o.call(n,t,r))},f1=document.caretPositionFromPoint?fZ:document.caretRangeFromPoint?f0:en.none,f2=(e,t,r)=>{let n=rV.fromDom(e.document);return f1(n,t,r).map(e=>fJ.create(rV.fromDom(e.startContainer),e.startOffset,rV.fromDom(e.endContainer),e.endOffset))},f3=sQ.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),f8=(e,t,r,n)=>e.fold(t,r,n),f5=e=>e.fold(G,G,G),f6=f3.before,f9=f3.on,f4=f3.after,f7={before:f6,on:f9,after:f4,cata:f8,getStart:f5},ge=sQ.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),gt=e=>ge.exact(e.start,e.soffset,e.finish,e.foffset),gr=e=>e.match({domRange:e=>rV.fromDom(e.startContainer),relative:(e,t)=>f7.getStart(e),exact:(e,t,r,n)=>e}),gn=ge.domRange,go=ge.relative,gl=ge.exact,ga=e=>{let t=gr(e);return r2(t)},gi=fJ.create,gs={domRange:gn,relative:go,exact:gl,exactFromRange:gt,getWin:ga,range:gi},gd=(e,t)=>{let r=rs(e);return"input"===r?f7.after(e):ed(["br","img"],r)?0===t?f7.before(e):f7.after(e):f7.on(e,t)},gc=(e,t)=>{let r=e.fold(f7.before,gd,f7.after),n=t.fold(f7.before,gd,f7.after);return gs.relative(r,n)},gu=(e,t,r,n)=>{let o=gd(e,t),l=gd(r,n);return gs.relative(o,l)},gm=e=>e.match({domRange:e=>{let t=rV.fromDom(e.startContainer),r=rV.fromDom(e.endContainer);return gu(t,e.startOffset,r,e.endOffset)},relative:gc,exact:gu}),gf=(e,t)=>{let r=(t||document).createDocumentFragment();return em(e,e=>{r.appendChild(e.dom)}),rV.fromDom(r)},gg=e=>{let t=gs.getWin(e).dom,r=(e,r,n,o)=>fV(t,e,r,n,o),n=gm(e);return fX(t,n).match({ltr:r,rtl:r})},gp=(e,t,r)=>f2(e,t,r),gh=(e,t,r)=>{let n=r2(rV.fromDom(r));return gp(n.dom,e,t).map(e=>{let t=r.createRange();return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),t}).getOrUndefined()},gb=(e,t)=>j(e)&&j(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,gv=(e,t,r)=>{let n=e;for(;n&&n!==t;){if(r(n))return n;n=n.parentNode}return null},gy=(e,t,r)=>null!==gv(e,t,r),gC=(e,t,r)=>gy(e,t,e=>e.nodeName===r),gx=(e,t)=>o4(e)&&!gy(e,t,uT),gw=(e,t,r)=>{let n=t.parentNode;if(n){let o;let l=new os(t,e.getParent(n,e.isBlock)||e.getRoot());for(;o=l[r?"prev":"next"]();)if(oN(o))return!0}return!1},gk=(e,t)=>{var r;return(null===(r=e.previousSibling)||void 0===r?void 0:r.nodeName)===t},g_=(e,t)=>{let r=t;for(;r&&r!==e;){if(oA(r))return!0;r=r.parentNode}return!1},gS=(e,t,r,n,o)=>{let l,a;let i=e.getRoot(),s=e.schema.getNonEmptyElements(),d=o.parentNode;if(!d)return en.none();let c=e.getParent(d,e.isBlock)||i;if(n&&oN(o)&&t&&e.isEmpty(c))return en.some(sg(d,e.nodeIndex(o)));let u=new os(o,c);for(;a=u[n?"prev":"next"]();){if("false"===e.getContentEditableParent(a)||gx(a,i))return en.none();if(ox(a)&&a.data.length>0){if(!gC(a,i,"A"))return en.some(sg(a,n?a.data.length:0));return en.none()}if(e.isBlock(a)||s[a.nodeName.toLowerCase()])return en.none();l=a}return o_(l)?en.none():r&&l?en.some(sg(l,0)):en.none()},gE=(e,t,r,n)=>{let o;let l=e.getRoot(),a=!1,i=r?n.startContainer:n.endContainer,s=r?n.startOffset:n.endOffset,d=ou(i)&&s===i.childNodes.length,c=e.schema.getNonEmptyElements(),u=r;if(o4(i))return en.none();if(ou(i)&&s>i.childNodes.length-1&&(u=!1),oS(i)&&(i=l,s=0),i===l){if(u&&(o=i.childNodes[s>0?s-1:0])&&(o4(o)||c[o.nodeName]||ov(o)))return en.none();if(i.hasChildNodes()){if(s=Math.min(!u&&s>0?s-1:s,i.childNodes.length-1),s=ox(i=i.childNodes[s])&&d?i.data.length:0,!t&&i===l.lastChild&&ov(i)||g_(l,i)||o4(i))return en.none();if(i.hasChildNodes()&&!ov(i)){o=i;let m=new os(i,l);do{if(oA(o)||o4(o)){a=!1;break}if(ox(o)&&o.data.length>0){s=u?0:o.data.length,i=o,a=!0;break}if(c[o.nodeName.toLowerCase()]&&!oT(o)){s=e.nodeIndex(o),i=o.parentNode,!u&&s++,a=!0;break}}while(o=u?m.next():m.prev())}}}return t&&(ox(i)&&0===s&&gS(e,d,t,!0,i).each(e=>{i=e.container(),s=e.offset(),a=!0}),ou(i)&&((o=i.childNodes[s])||(o=i.childNodes[s-1]),o&&oN(o)&&!gk(o,"A")&&!gw(e,o,!1)&&!gw(e,o,!0)&&gS(e,d,t,!0,o).each(e=>{i=e.container(),s=e.offset(),a=!0}))),u&&!t&&ox(i)&&s===i.data.length&&gS(e,d,t,!1,i).each(e=>{i=e.container(),s=e.offset(),a=!0}),a&&i?en.some(sg(i,s)):en.none()},gN=(e,t)=>{let r=t.collapsed,n=t.cloneRange(),o=sg.fromRangeStart(t);return gE(e,r,!0,n).each(e=>{r&&sg.isAbove(o,e)||n.setStart(e.container(),e.offset())}),r||gE(e,r,!1,n).each(e=>{n.setEnd(e.container(),e.offset())}),r&&n.collapse(!0),gb(t,n)?en.none():en.some(n)},gD=(e,t)=>e.splitText(t),gR=e=>{let t=e.startContainer,r=e.startOffset,n=e.endContainer,o=e.endOffset;if(t===n&&ox(t)){if(r>0&&r<t.data.length){if(t=(n=gD(t,r)).previousSibling,o>r){o-=r;let l=gD(n,o).previousSibling;t=n=l,o=l.data.length,r=0}else o=0}}else if(ox(t)&&r>0&&r<t.data.length&&(t=gD(t,r),r=0),ox(n)&&o>0&&o<n.data.length){let a=gD(n,o).previousSibling;n=a,o=a.data.length}return{startContainer:t,startOffset:r,endContainer:n,endOffset:o}},gA=e=>{let t=(t,r)=>m4(e,t,r),r=t=>gN(e,t).fold(et,e=>(t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0)),n=(t,r={type:"word"})=>{if("word"===r.type){let n=m9(e,t,[{inline:"span"}]),o=e.createRng();return o.setStart(n.startContainer,n.startOffset),o.setEnd(n.endContainer,n.endOffset),o}return t};return{walk:t,split:gR,expand:n,normalize:r}};gA.compareRanges=gb,gA.getCaretRangeFromPoint=gh,gA.getSelectedNode=i8,gA.getNode=i5;let gO=((e,t)=>{let r=(t,r)=>{if(!H(r)&&!r.match(/^[0-9]+$/))throw Error(e+".set accepts only positive integer values. Value was "+r);let n=t.dom;rU(n)&&(n.style[e]=r+"px")},n=r=>{let n=t(r);if(n<=0||null===n){let o=nw(r,e);return parseFloat(o)||0}return n},o=(e,t)=>eb(t,(t,r)=>{let n=nw(e,r),o=void 0===n?0:parseInt(n,10);return isNaN(o)?t:t+o},0),l=(e,t,r)=>{let n=o(e,r);return t>n?t-n:0};return{set:r,get:n,getOuter:n,aggregate:o,max:l}})("height",e=>{let t=e.dom;return nb(e)?t.getBoundingClientRect().height:t.offsetHeight}),gT=e=>gO.get(e),gB=()=>rV.fromDom(document),gP=(e,t)=>{let r=e.view(t);return r.fold(K([]),t=>{let r=e.owner(t),n=gP(e,r);return[t].concat(n)})},gL=(e,t)=>{let r=t.owner(e);return gP(t,r)},gF=e=>{var t;let r=e.dom===document?en.none():en.from(null===(t=e.dom.defaultView)||void 0===t?void 0:t.frameElement);return r.map(rV.fromDom)},gM=e=>r0(e);var gI=Object.freeze({__proto__:null,view:gF,owner:gM});let gU=e=>{let t=gB(),r=n0(t),n=gL(e,gI),o=nZ(e),l=eh(n,(e,t)=>{let r=nZ(t);return{left:e.left+r.left,top:e.top+r.top}},{left:0,top:0});return nY(l.left+o.left+r.left,l.top+o.top+r.top)},gj=e=>"textarea"===rs(e),gz=(e,t)=>{let r=e.dispatch("ScrollIntoView",t);return r.isDefaultPrevented()},gH=(e,t)=>{e.dispatch("AfterScrollIntoView",t)},g$=(e,t)=>{let r=nt(e);if(0===r.length||gj(e))return{element:e,offset:t};if(t<r.length&&!gj(r[t]))return{element:r[t],offset:0};{let n=r[r.length-1];return gj(n)?{element:e,offset:t}:"img"===rs(n)?{element:n,offset:1}:rf(n)?{element:n,offset:oU(n).length}:{element:n,offset:nt(n).length}}},gq=(e,t)=>{let r=nJ(e),n=gT(e);return{element:e,bottom:r.top+n,height:n,pos:r,cleanup:t}},gV=(e,t)=>{let r=g$(e,t),n=rV.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">\uFEFF</span>');return nD(r.element,n),gq(n,()=>nF(n))},gW=e=>gq(rV.fromDom(e),q),gK=(e,t,r,n)=>{gQ(e,(o,l)=>gY(e,t,r,n),r)},gG=(e,t,r,n,o)=>{let l={elm:n.element.dom,alignToTop:o};if(gz(e,l))return;let a=n0(t).top;r(t,a,n,o),gH(e,l)},gY=(e,t,r,n)=>{let o=rV.fromDom(e.getBody()),l=rV.fromDom(e.getDoc());nN(o);let a=gV(rV.fromDom(r.startContainer),r.startOffset);gG(e,l,t,a,n),a.cleanup()},gX=(e,t,r,n)=>{let o=rV.fromDom(e.getDoc());gG(e,o,r,gW(t),n)},gQ=(e,t,r)=>{let n=r.startContainer,o=r.startOffset,l=r.endContainer,a=r.endOffset;t(rV.fromDom(n),rV.fromDom(l));let i=e.dom.createRng();i.setStart(n,o),i.setEnd(l,a),e.selection.setRng(r)},gJ=(e,t,r,n)=>{let o=e.pos;if(r)n1(o.left,o.top,n);else{let l=o.top-t+e.height;n1(o.left,l,n)}},gZ=(e,t,r,n,o)=>{let l=r+t,a=n.pos.top,i=n.bottom,s=i-a>=r;a<t?gJ(n,r,!1!==o,e):a>l?gJ(n,r,s?!1!==o:!0===o,e):i>l&&!s&&gJ(n,r,!0===o,e)},g0=(e,t,r,n)=>{let o=r2(e).dom.innerHeight;gZ(e,t,o,r,n)},g1=(e,t,r,n)=>{let o=r2(e).dom.innerHeight;gZ(e,t,o,r,n);let l=gU(r.element),a=n5(window);l.top<a.y?n2(r.element,!1!==n):l.top>a.bottom&&n2(r.element,!0===n)},g2=(e,t,r)=>gK(e,g0,t,r),g3=(e,t,r)=>gX(e,t,g0,r),g8=(e,t,r)=>gK(e,g1,t,r),g5=(e,t,r)=>gX(e,t,g1,r),g6=(e,t,r)=>{let n=e.inline?g3:g5;n(e,t,r)},g9=(e,t,r)=>{let n=e.inline?g2:g8;n(e,t,r)},g4=e=>e.dom.focus(),g7=e=>{let t=nc(e).dom;return e.dom===t.activeElement},pe=(e=gB())=>en.from(e.dom.activeElement).map(rV.fromDom),pt=e=>pe(nc(e)).filter(t=>e.dom.contains(t.dom)),pr=(e,t)=>{let r=rf(t)?oU(t).length:nt(t).length+1;return e>r?r:e<0?0:e},pn=e=>gs.range(e.start,pr(e.soffset,e.start),e.finish,pr(e.foffset,e.finish)),po=(e,t)=>!oc(t.dom)&&(rJ(e,t)||rQ(e,t)),pl=e=>t=>po(e,t.start)&&po(e,t.finish),pa=e=>e.inline||t2.browser.isFirefox(),pi=e=>gs.range(rV.fromDom(e.startContainer),e.startOffset,rV.fromDom(e.endContainer),e.endOffset),ps=e=>{let t=e.getSelection(),r=t&&0!==t.rangeCount?en.from(t.getRangeAt(0)):en.none();return r.map(pi)},pd=e=>{let t=r2(e);return ps(t.dom).filter(pl(e))},pc=(e,t)=>en.from(t).filter(pl(e)).map(pn),pu=e=>{let t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),en.some(t)}catch(r){return en.none()}},pm=e=>{let t=pa(e)?pd(rV.fromDom(e.getBody())):en.none();e.bookmark=t.isSome()?t:e.bookmark},pf=e=>{let t=e.bookmark?e.bookmark:en.none();return t.bind(t=>pc(rV.fromDom(e.getBody()),t)).bind(pu)},pg=e=>{pf(e).each(t=>e.selection.setRng(t))},pp=e=>{let t=e.className.toString();return -1!==t.indexOf("tox-")||-1!==t.indexOf("mce-")},ph={isEditorUIElement:pp},pb=(e,t)=>(H(t)||(t=0),setTimeout(e,t)),pv=(e,t)=>(H(t)||(t=0),setInterval(e,t)),py={setEditorTimeout:(e,t,r)=>pb(()=>{e.removed||t()},r),setEditorInterval:(e,t,r)=>{let n=pv(()=>{e.removed?clearInterval(n):t()},r);return n}},pC=e=>"nodechange"===e.type&&e.selectionChange,px=(e,t)=>{let r=()=>{t.throttle()};a5.DOM.bind(document,"mouseup",r),e.on("remove",()=>{a5.DOM.unbind(document,"mouseup",r)})},pw=(e,t)=>{e.on("mouseup touchend",e=>{t.throttle()})},pk=(e,t)=>{pw(e,t),e.on("keyup NodeChange AfterSetSelectionRange",t=>{pC(t)||pm(e)})},p_=e=>{let t=iv(()=>{pm(e)},0);e.on("init",()=>{e.inline&&px(e,t),pk(e,t)}),e.on("remove",()=>{t.cancel()})},pS=a5.DOM,pE=e=>ou(e)&&ph.isEditorUIElement(e),pN=e=>{let t=e.classList;return void 0!==t&&(t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"))},pD=(e,t)=>{let r=d1(e),n=pS.getParent(t,t=>pE(t)||!!r&&e.dom.is(t,r));return null!==n},pR=e=>{try{let t=nc(rV.fromDom(e.getElement()));return pe(t).fold(()=>document.body,e=>e.dom)}catch(r){return document.body}},pA=(t,r)=>{let n=r.editor;p_(n),n.on("focusin",()=>{let e=t.focusedEditor;e!==n&&(e&&e.dispatch("blur",{focusedEditor:n}),t.setActive(n),t.focusedEditor=n,n.dispatch("focus",{blurredEditor:e}),n.focus(!0))}),n.on("focusout",()=>{py.setEditorTimeout(n,()=>{let e=t.focusedEditor;pD(n,pR(n))||e!==n||(n.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null)})}),e||(e=e=>{let r=t.activeEditor;r&&np(e).each(e=>{e.ownerDocument!==document||e===document.body||pD(r,e)||t.focusedEditor!==r||(r.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null)})},pS.bind(document,"focusin",e))},pO=(t,r)=>{t.focusedEditor===r.editor&&(t.focusedEditor=null),!t.activeEditor&&e&&(pS.unbind(document,"focusin",e),e=null)},pT=e=>{e.on("AddEditor",X(pA,e)),e.on("RemoveEditor",X(pO,e))},pB=(e,t)=>e.dom.getParent(t,t=>"true"===e.dom.getContentEditable(t)),pP=e=>e.collapsed?en.from(i5(e.startContainer,e.startOffset)).map(rV.fromDom):en.none(),pL=(e,t)=>pP(t).bind(t=>oX(t)?en.some(t):rJ(e,t)?en.none():en.some(e)),pF=(e,t)=>{pL(rV.fromDom(e.getBody()),t).bind(e=>uR(e.dom)).fold(()=>{e.selection.normalize()},t=>e.selection.setRng(t.toRange()))},pM=e=>{if(e.setActive)try{e.setActive()}catch(t){e.focus()}else e.focus()},pI=e=>g7(e)||pt(e).isSome(),pU=e=>j(e.iframeElement)&&g7(rV.fromDom(e.iframeElement)),pj=e=>{let t=e.getBody();return t&&pI(rV.fromDom(t))},pz=e=>{let t=nc(rV.fromDom(e.getElement()));return pe(t).filter(t=>!pN(t.dom)&&pD(e,t.dom)).isSome()},pH=e=>e.inline?pj(e):pU(e),p$=e=>pH(e)||pz(e),pq=e=>{let t=e.selection,r=e.getBody(),n=t.getRng();e.quirks.refreshContentEditable(),j(e.bookmark)&&!pH(e)&&pf(e).each(t=>{e.selection.setRng(t),n=t});let o=pB(e,t.getNode());if(o&&e.dom.isChildOf(o,r)){pM(o),pF(e,n),pV(e);return}e.inline||(t2.browser.isOpera()||pM(r),e.getWin().focus()),(t2.browser.isFirefox()||e.inline)&&(pM(r),pF(e,n)),pV(e)},pV=e=>e.editorManager.setActive(e),pW=(e,t)=>{e.removed||(t?pV(e):pq(e))},pK=(e,t,r,n,o)=>{let l=r?t.startContainer:t.endContainer,a=r?t.startOffset:t.endOffset;return en.from(l).map(rV.fromDom).map(e=>n&&t.collapsed?e:nr(e,o(e,a)).getOr(e)).bind(e=>rm(e)?en.some(e):r3(e).filter(rm)).map(e=>e.dom).getOr(e)},pG=(e,t,r=!1)=>pK(e,t,!0,r,(e,t)=>Math.min(nl(e),t)),pY=(e,t,r=!1)=>pK(e,t,!1,r,(e,t)=>t>0?t-1:t),pX=(e,t)=>{let r=e;for(;e&&ox(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||r},pQ=(e,t)=>{if(!t)return e;let r=t.startContainer,n=t.endContainer,o=t.startOffset,l=t.endOffset,a=t.commonAncestorContainer;!t.collapsed&&(r===n&&l-o<2&&r.hasChildNodes()&&(a=r.childNodes[o]),ox(r)&&ox(n)&&(r=r.length===o?pX(r.nextSibling,!0):r.parentNode,n=0===l?pX(n.previousSibling,!1):n.parentNode,r&&r===n&&(a=r)));let i=ox(a)?a.parentNode:a;return ou(i)?i:e},pJ=(e,t,r,n)=>{let o=[],l=e.getRoot(),a=e.getParent(r||pG(l,t,t.collapsed),e.isBlock),i=e.getParent(n||pY(l,t,t.collapsed),e.isBlock);if(a&&a!==l&&o.push(a),a&&i&&a!==i){let s=a,d=new os(a,l);for(;(s=d.next())&&s!==i;)e.isBlock(s)&&o.push(s)}return i&&a!==i&&i!==l&&o.push(i),o},pZ=(e,t,r)=>en.from(t).bind(t=>en.from(t.parentNode).map(n=>{let o=e.nodeIndex(t),l=e.createRng();return l.setStart(n,o),l.setEnd(n,o+1),r&&(mb(e,l,t,!0),mb(e,l,t,!1)),l})),p0=(e,t)=>eu(t,t=>{let r=e.dispatch("GetSelectionRange",{range:t});return r.range!==t?r.range:t}),p1=e=>"img"===rs(e)?1:oj(e).fold(()=>nt(e).length,e=>e.length),p2=e=>oj(e).filter(e=>0!==e.trim().length||e.indexOf("\xa0")>-1).isSome(),p3=["img","br"],p8=e=>{let t=p2(e);return t||ed(p3,rs(e))},p5=e=>on(e,p8),p6=e=>p9(e,p8),p9=(e,t)=>{let r=e=>{let n=nt(e);for(let o=n.length-1;o>=0;o--){let l=n[o];if(t(l))return en.some(l);let a=r(l);if(a.isSome())return a}return en.none()};return r(e)},p4="[data-mce-autocompleter]",p7=(e,t)=>{if(ht(rV.fromDom(e.getBody())).isNone()){let r=rV.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());nO(r,rV.fromDom(t.extractContents())),t.insertNode(r.dom),r3(r).each(e=>e.dom.normalize()),p6(r).map(t=>{e.selection.setCursorLocation(t.dom,p1(t))})}},he=e=>oa(e,p4),ht=e=>ol(e,p4),hr=(e,t)=>ht(t).each(t=>{let r=e.selection.getBookmark();nM(t),e.selection.moveToBookmark(r)}),hn={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},ho=(e,t,r)=>{let n=r?"lastChild":"firstChild",o=r?"prev":"next";if(e[n])return e[n];if(e!==t){let l=e[o];if(l)return l;for(let a=e.parent;a&&a!==t;a=a.parent)if(l=a[o])return l}},hl=e=>{var t;let r=null!==(t=e.value)&&void 0!==t?t:"";if(!lC(r))return!1;let n=e.parent;return!(n&&("span"!==n.name||n.attr("style"))&&/^[ ]+$/.test(r))},ha=e=>{let t="a"===e.name&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class hi{constructor(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}static create(e,t){let r=new hi(e,hn[e]||1);return t&&eF(t,(e,t)=>{r.attr(t,e)}),r}replace(e){return e.parent&&e.remove(),this.insert(e,this),this.remove(),this}attr(e,t){let r=this;if(!T(e))return j(e)&&eF(e,(e,t)=>{r.attr(t,e)}),r;let n=r.attributes;if(n){if(void 0!==t){if(null===t){if(e in n.map){delete n.map[e];let o=n.length;for(;o--;)if(n[o].name===e){n.splice(o,1);break}}return r}if(e in n.map){let l=n.length;for(;l--;)if(n[l].name===e){n[l].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,r}return n.map[e]}}clone(){let e=new hi(this.name,this.type),t=this.attributes;if(t){let r=[];r.map={};for(let n=0,o=t.length;n<o;n++){let l=t[n];"id"!==l.name&&(r[r.length]={name:l.name,value:l.value},r.map[l.name]=l.value)}e.attributes=r}return e.value=this.value,e}wrap(e){return this.parent&&(this.parent.insert(e,this),e.append(this)),this}unwrap(){for(let e=this.firstChild;e;){let t=e.next;this.insert(e,this,!0),e=t}this.remove()}remove(){let e=this,t=e.parent,r=e.next,n=e.prev;return t&&(t.firstChild===e?(t.firstChild=r,r&&(r.prev=null)):n&&(n.next=r),t.lastChild===e?(t.lastChild=n,n&&(n.next=null)):r&&(r.prev=n),e.parent=e.next=e.prev=null),e}append(e){let t=this;e.parent&&e.remove();let r=t.lastChild;return r?(r.next=e,e.prev=r,t.lastChild=e):t.lastChild=t.firstChild=e,e.parent=t,e}insert(e,t,r){e.parent&&e.remove();let n=t.parent||this;return r?(t===n.firstChild?n.firstChild=e:t.prev&&(t.prev.next=e),e.prev=t.prev,e.next=t,t.prev=e):(t===n.lastChild?n.lastChild=e:t.next&&(t.next.prev=e),e.next=t.next,e.prev=t,t.next=e),e.parent=n,e}getAll(e){let t=[];for(let r=this.firstChild;r;r=ho(r,this))r.name===e&&t.push(r);return t}children(){let e=[];for(let t=this.firstChild;t;t=t.next)e.push(t);return e}empty(){let e=this;if(e.firstChild){let t=[];for(let r=e.firstChild;r;r=ho(r,e))t.push(r);let n=t.length;for(;n--;){let o=t[n];o.parent=o.firstChild=o.lastChild=o.next=o.prev=null}}return e.firstChild=e.lastChild=null,e}isEmpty(e,t={},r){var n;let o=this.firstChild;if(ha(this))return!1;if(o)do{if(1===o.type){if(o.attr("data-mce-bogus"))continue;if(e[o.name]||ha(o))return!1}if(8===o.type||3===o.type&&!hl(o)||3===o.type&&o.parent&&t[o.parent.name]&&lC(null!==(n=o.value)&&void 0!==n?n:"")||r&&r(o))return!1}while(o=ho(o,this));return!0}walk(e){return ho(this,null,e)}}let hs=(e,t)=>/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(e.substr(t)),hd=(e,t,r=0)=>{let n=e.toLowerCase();if(-1!==n.indexOf("[if ",r)&&hs(n,r)){let o=n.indexOf("[endif]",r);return n.indexOf(">",o)}if(t){let l=n.indexOf(">",r);return -1!==l?l:n.length}{let a=/--!?>/g;a.lastIndex=r;let i=a.exec(e);return i?i.index+i[0].length:n.length}},hc=(e,t,r)=>{let n=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,o=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,l=e.getVoidElements(),a=1,i=r;for(;0!==a;)for(n.lastIndex=i;;){let s=n.exec(t);if(null===s)return i;if("!"===s[1]){i=tm(s[2],"--")?hd(t,!1,s.index+3):hd(t,!0,s.index+1);break}{o.lastIndex=n.lastIndex;let d=o.exec(t);if(F(d)||d.index!==n.lastIndex)continue;"/"===s[1]?a-=1:eW(l,s[2])||(a+=1),i=n.lastIndex+d[0].length;break}}return i},hu=(e,t)=>{let r=RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return t.replace(r,"")},hm=(e,t)=>{let r;let n=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,o=e.schema,l=hu(e.getTempAttrs(),t),a=o.getVoidElements();for(;r=n.exec(l);){let i;let s=n.lastIndex,d=r[0].length;i=a[r[1]]?s:hc(o,l,s),l=l.substring(0,s-d)+l.substring(i),n.lastIndex=s-d}return oF(l)},hf=e=>{let t=oM(e,"[data-mce-bogus]");em(t,e=>{let t=rC(e,"data-mce-bogus");"all"===t?nF(e):oW(e)?(nD(e,rV.fromText("\uFEFF")),nF(e)):nM(e)})},hg=e=>{let t=oM(e,"input");em(t,e=>{rk(e,"name")})},hp=(e,t)=>{let r=dg(e),n=RegExp(`^(<${r}[^>]*>(&nbsp;|&#160;|\\s|\u00a0|<br \\/>|)<\\/${r}>[\r
]*|<br \\/>[\r
]*)$`);return t.replace(n,"")},hh=(e,t)=>{let r=e.getDoc(),n=nc(rV.fromDom(e.getBody())),o=rV.fromTag("div",r);rv(o,"data-mce-bogus","all"),nx(o,{position:"fixed",left:"-9999999px",top:"0"}),nz(o,t.innerHTML),hf(o),hg(o);let l=nm(n);nO(l,o);let a=oF(o.dom.innerText);return nF(o),a},hb=(e,t,r)=>{let n;n="raw"===t.format?rr.trim(hm(e.serializer,r.innerHTML)):"text"===t.format?hh(e,r):"tree"===t.format?e.serializer.serialize(r,t):hp(e,e.serializer.serialize(r,t));let o="text"!==t.format&&!oJ(rV.fromDom(r));return o&&T(n)?rr.trim(n):n},hv=(e,t)=>en.from(e.getBody()).fold(K("tree"===t.format?new hi("body",11):""),r=>hb(e,t,r)),hy=rr.makeMap,hC=e=>{let t=[];e=e||{};let r=e.indent,n=hy(e.indent_before||""),o=hy(e.indent_after||""),l=ay.getEncodeFunc(e.entity_encoding||"raw",e.entities),a="xhtml"!==e.element_format;return{start:(e,i,s)=>{if(r&&n[e]&&t.length>0){let d=t[t.length-1];d.length>0&&"\n"!==d&&t.push("\n")}if(t.push("<",e),i)for(let c=0,u=i.length;c<u;c++){let m=i[c];t.push(" ",m.name,'="',l(m.value,!0),'"')}if(!s||a?t[t.length]=">":t[t.length]=" />",s&&r&&o[e]&&t.length>0){let f=t[t.length-1];f.length>0&&"\n"!==f&&t.push("\n")}},end:e=>{let n;t.push("</",e,">"),r&&o[e]&&t.length>0&&(n=t[t.length-1]).length>0&&"\n"!==n&&t.push("\n")},text:(e,r)=>{e.length>0&&(t[t.length]=r?e:l(e))},cdata:e=>{t.push("<![CDATA[",e,"]]>")},comment:e=>{t.push("<!--",e,"-->")},pi:(e,n)=>{n?t.push("<?",e," ",l(n),"?>"):t.push("<?",e,"?>"),r&&t.push("\n")},doctype:e=>{t.push("<!DOCTYPE",e,">",r?"\n":"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},hx=(e={},t=aB())=>{let r=hC(e);e.validate=!("validate"in e)||e.validate;let n=n=>{let o=e.validate,l={3:e=>{var t;r.text(null!==(t=e.value)&&void 0!==t?t:"",e.raw)},8:e=>{var t;r.comment(null!==(t=e.value)&&void 0!==t?t:"")},7:e=>{r.pi(e.name,e.value)},10:e=>{var t;r.doctype(null!==(t=e.value)&&void 0!==t?t:"")},4:e=>{var t;r.cdata(null!==(t=e.value)&&void 0!==t?t:"")},11:e=>{let t=e;if(t=t.firstChild)do a(t);while(t=t.next)}};r.reset();let a=e=>{var n;let i=l[e.type];if(i)i(e);else{let s=e.name,d=s in t.getVoidElements(),c=e.attributes;if(o&&c&&c.length>1){let u=[];u.map={};let m=t.getElementRule(e.name);if(m){for(let f=0,g=m.attributesOrder.length;f<g;f++){let p=m.attributesOrder[f];if(p in c.map){let h=c.map[p];u.map[p]=h,u.push({name:p,value:h})}}for(let b=0,v=c.length;b<v;b++){let y=c[b].name;if(!(y in u.map)){let C=c.map[y];u.map[y]=C,u.push({name:y,value:C})}}c=u}}if(r.start(s,c,d),!d){let x=e.firstChild;if(x){("pre"===s||"textarea"===s)&&3===x.type&&(null===(n=x.value)||void 0===n?void 0:n[0])==="\n"&&r.text("\n",!0);do a(x);while(x=x.next)}r.end(s)}}};return 1!==n.type||e.inner?3===n.type?l[3](n):l[11](n):a(n),r.getContent()};return{serialize:n}},hw=new Set;em(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],e=>{hw.add(e)});let hk=["font","text-decoration","text-emphasis"],h_=(e,t)=>eP(e.parseStyle(e.getAttrib(t,"style"))),hS=e=>hw.has(e),hE=(e,t)=>ek(h_(e,t),e=>!hS(e)),hN=e=>ep(e,e=>ec(hk,t=>tm(e,t))),hD=(e,t,r)=>{let n=h_(e,t),o=h_(e,r),l=n=>{var o,l;let a=null!==(o=e.getStyle(t,n))&&void 0!==o?o:"",i=null!==(l=e.getStyle(r,n))&&void 0!==l?l:"";return tv(a)&&tv(i)&&a!==i};return ec(n,e=>{let t=t=>ec(t,t=>t===e);if(!(!t(o)&&t(hk)))return l(e);{let r=hN(o);return ec(r,l)}})},hR=(e,t,r)=>en.from(r.container()).filter(ox).exists(n=>t(n.data.charAt(r.offset()+(e?0:-1)))),hA=X(hR,!0,u3),hO=X(hR,!1,u3),hT=e=>{let t=e.container();return ox(t)&&(0===t.data.length||oL(t.data)&&fd.isBookmarkNode(t.parentNode))},hB=(e,t)=>r=>c9(e?0:-1,r).filter(t).isSome(),hP=e=>oD(e)&&"block"===nw(rV.fromDom(e),"display"),hL=e=>oA(e)&&!ob(e),hF=hB(!0,hP),hM=hB(!1,hP),hI=hB(!0,oB),hU=hB(!1,oB),hj=hB(!0,ov),hz=hB(!1,ov),hH=hB(!0,hL),h$=hB(!1,hL),hq=e=>e.slice(0,-1),hV=(e,t,r)=>rJ(t,e)?hq(r5(e,e=>r(e)||rQ(e,t))):[],hW=(e,t)=>hV(e,t,et),hK=(e,t)=>[e].concat(hW(e,t)),hG=(e,t,r)=>uS(e,t,r,hT),hY=(e,t)=>ey(hK(rV.fromDom(t.container()),e),o$),hX=(e,t,r)=>hG(e,t.dom,r).forall(e=>hY(t,r).fold(()=>!c6(e,r,t.dom),n=>!c6(e,r,t.dom)&&rJ(n,rV.fromDom(e.container())))),hQ=(e,t,r)=>hY(t,r).fold(()=>hG(e,t.dom,r).forall(e=>!c6(e,r,t.dom)),t=>hG(e,t.dom,r).isNone()),hJ=X(hQ,!1),hZ=X(hQ,!0),h0=X(hX,!1),h1=X(hX,!0),h2=e=>ua(e).exists(oW),h3=(e,t,r)=>{let n=ep(hK(rV.fromDom(r.container()),t),o$),o=eR(n).getOr(t);return uk(e,o.dom,r).filter(h2)},h8=(e,t)=>ua(t).exists(oW)||h3(!0,e,t).isSome(),h5=(e,t)=>ui(t).exists(oW)||h3(!1,e,t).isSome(),h6=X(h3,!1),h9=X(h3,!0),h4=e=>sg.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),h7=(e,t)=>{let r=ep(hK(rV.fromDom(t.container()),e),o$);return eR(r).getOr(e)},be=(e,t)=>h4(t)?hO(t):hO(t)||uD(h7(e,t).dom,t).exists(hO),bt=(e,t)=>h4(t)?hA(t):hA(t)||uN(h7(e,t).dom,t).exists(hA),br=e=>ed(["pre","pre-wrap"],e),bn=e=>ua(e).bind(e=>oe(e,rm)).exists(e=>br(nw(e,"white-space"))),bo=(e,t)=>uD(e.dom,t).isNone(),bl=(e,t)=>uN(e.dom,t).isNone(),ba=(e,t)=>bo(e,t)||bl(e,t)||hJ(e,t)||hZ(e,t)||h5(e,t)||h8(e,t),bi=e=>j(e)&&oA(e)&&cZ(e),bs=(e,t)=>r=>bi(new os(r,e)[t]()),bd=(e,t)=>{let r=uN(e.dom,t).getOr(t),n=bs(e.dom,"next");return t.isAtEnd()&&(n(t.container())||n(r.container()))},bc=(e,t)=>{let r=uD(e.dom,t).getOr(t),n=bs(e.dom,"prev");return t.isAtStart()&&(n(t.container())||n(r.container()))},bu=(e,t)=>!bn(t)&&(ba(e,t)||be(e,t)||bt(e,t)),bm=(e,t)=>!bn(t)&&(hJ(e,t)||h0(e,t)||h5(e,t)||be(e,t)||bc(e,t)),bf=e=>{let t=e.container(),r=e.offset();return ox(t)&&r<t.data.length?sg(t,r+1):e},bg=(e,t)=>!bn(t)&&(hZ(e,t)||h1(e,t)||h8(e,t)||bt(e,t)||bd(e,t)),bp=(e,t)=>bm(e,t)||bg(e,bf(t)),bh=(e,t)=>u2(e.charAt(t)),bb=(e,t)=>u3(e.charAt(t)),bv=e=>{let t=e.container();return ox(t)&&tu(t.data,"\xa0")},by=e=>{let t=e.split("");return eu(t,(e,r)=>u2(e)&&r>0&&r<t.length-1&&u8(t[r-1])&&u8(t[r+1])?" ":e).join("")},bC=(e,t,r)=>{let n=t.data,o=sg(t,0);return!r&&bh(n,0)&&!bp(e,o)?(t.data=" "+n.slice(1),!0):!!(r&&bb(n,0)&&bm(e,o))&&(t.data="\xa0"+n.slice(1),!0)},bx=e=>{let t=e.data,r=by(t);return r!==t&&(e.data=r,!0)},bw=(e,t,r)=>{let n=t.data,o=sg(t,n.length-1);return!r&&bh(n,n.length-1)&&!bp(e,o)?(t.data=n.slice(0,-1)+" ",!0):!!(r&&bb(n,n.length-1)&&bg(e,o))&&(t.data=n.slice(0,-1)+"\xa0",!0)},bk=(e,t)=>{let r=t.container();if(!ox(r))return en.none();if(bv(t)){let n=bC(e,r,!1)||bx(r)||bw(e,r,!1);return ri(n,t)}if(!bp(e,t))return en.none();{let o=bC(e,r,!0)||bw(e,r,!0);return ri(o,t)}},b_=e=>{let t=rV.fromDom(e.getBody());e.selection.isCollapsed()&&bk(t,sg.fromRangeStart(e.selection.getRng())).each(t=>{e.selection.setRng(t.toRange())})},bS=(e,t,r)=>{if(0===r)return;let n=rV.fromDom(e),o=n7(n,o$).getOr(n),l=e.data.slice(t,t+r),a=t+r>=e.data.length&&bg(o,sg(e,e.data.length)),i=0===t&&bm(o,sg(e,0));e.replaceData(t,r,l_(l,4,i,a))},bE=(e,t)=>{let r=e.data.slice(t),n=r.length-th(r).length;bS(e,t,n)},bN=(e,t)=>{let r=e.data.slice(0,t),n=r.length-tb(r).length;bS(e,t-n,n)},bD=(e,t,r,n=!0)=>{let o=tb(e.data).length,l=n?e:t,a=n?t:e;return n?l.appendData(a.data):l.insertData(0,a.data),nF(rV.fromDom(a)),r&&bE(l,o),l},bR=(e,t)=>{let r=e.container(),n=e.offset();return!sg.isTextPosition(e)&&r===t.parentNode&&n>sg.before(t).offset()},bA=(e,t)=>bR(t,e)?sg(t.container(),t.offset()-1):t,bO=e=>ox(e)?sg(e,0):sg.before(e),bT=e=>ox(e)?sg(e,e.data.length):sg.after(e),bB=e=>lm(e.previousSibling)?en.some(bT(e.previousSibling)):e.previousSibling?uA(e.previousSibling):en.none(),bP=e=>lm(e.nextSibling)?en.some(bO(e.nextSibling)):e.nextSibling?uR(e.nextSibling):en.none(),bL=(e,t)=>en.from(t.previousSibling?t.previousSibling:t.parentNode).bind(t=>uD(e,sg.before(t))).orThunk(()=>uN(e,sg.after(t))),bF=(e,t)=>uN(e,sg.after(t)).orThunk(()=>uD(e,sg.before(t))),bM=(e,t)=>bB(t).orThunk(()=>bP(t)).orThunk(()=>bL(e,t)),bI=(e,t)=>bP(t).orThunk(()=>bB(t)).orThunk(()=>bF(e,t)),bU=(e,t,r)=>e?bI(t,r):bM(t,r),bj=(e,t,r)=>bU(e,t,r).map(X(bA,r)),bz=(e,t,r)=>{r.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),t)})},bH=e=>t=>t.dom===e,b$=(e,t)=>t&&eW(e.schema.getBlockElements(),rs(t)),bq=e=>{if(!lB(e))return en.none();{let t=rV.fromHtml('<br data-mce-bogus="1">');return nL(e),nO(e,t),en.some(sg.before(t.dom))}},bV=(e,t,r)=>{let n=r9(e).filter(rf),o=r4(e).filter(rf);return nF(e),ra(n,o,t,(e,t,n)=>{let o=e.dom,l=t.dom,a=o.data.length;return bD(o,l,r),n.container()===l?sg(o,a):n}).orThunk(()=>(r&&(n.each(e=>bN(e.dom,e.dom.length)),o.each(e=>bE(e.dom,0))),t))},bW=(e,t)=>eW(e.schema.getTextInlineElements(),rs(t)),bK=(e,t,r,n=!0)=>{let o=bj(t,e.getBody(),r.dom),l=n7(r,X(b$,e),bH(e.getBody())),a=bV(r,o,bW(e,r));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):l.bind(bq).fold(()=>{n&&bz(e,t,a)},r=>{n&&bz(e,t,en.some(r))})},bG=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,bY=e=>bG.test(e),bX=(e,t)=>rK(rV.fromDom(t),dj(e))&&!lG(e.schema,t),bQ=e=>{var t;return"rtl"===a5.DOM.getStyle(e,"direction",!0)||bY(null!==(t=e.textContent)&&void 0!==t?t:"")},bJ=(e,t,r)=>ep(a5.DOM.getParents(r.container(),"*",t),e),bZ=(e,t,r)=>{let n=bJ(e,t,r);return en.from(n[n.length-1])},b0=(e,t,r)=>{let n=c5(t,e),o=c5(r,e);return j(n)&&n===o},b1=e=>lt(e)||lr(e),b2=(e,t)=>{let r=t.container(),n=t.offset();return e?o9(r)?ox(r.nextSibling)?sg(r.nextSibling,0):sg.after(r):lt(t)?sg(r,n+1):t:o9(r)?ox(r.previousSibling)?sg(r.previousSibling,r.previousSibling.data.length):sg.before(r):lr(t)?sg(r,n-1):t},b3=X(b2,!0),b8=X(b2,!1),b5=(e,t)=>{let r=e=>e.stopImmediatePropagation();e.on("beforeinput input",r,!0),e.getDoc().execCommand(t),e.off("beforeinput input",r)},b6=e=>{e.execCommand("delete")},b9=e=>b5(e,"Delete"),b4=e=>b5(e,"ForwardDelete"),b7=e=>t=>rn(r3(t),e,rQ),ve=e=>oK(e)||oY(e),vt=(e,t)=>rJ(e,t)?oe(t,ve,b7(e)):en.none(),vr=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},vn=(e,t,r)=>rl(uR(r),uA(r),(n,o)=>{let l=b2(!0,n),a=b2(!1,o),i=b2(!1,t);return e?uN(r,i).exists(e=>e.isEqual(a)&&t.isEqual(l)):uD(r,i).exists(e=>e.isEqual(l)&&t.isEqual(a))}).getOr(!0),vo=e=>{let t=ru(e)?r9(e):no(e);return t.bind(vo).orThunk(()=>en.some(e))},vl=(e,t,r,n=!0)=>{var o;t.deleteContents();let l=vo(r).getOr(r),a=rV.fromDom(null!==(o=e.dom.getParent(l.dom,e.dom.isBlock))&&void 0!==o?o:r.dom);if(a.dom===e.getBody()?vr(e,n):lB(a)&&(o8(a),n&&e.selection.setCursorLocation(a.dom,0)),!rQ(r,a)){let i=rn(r3(a),r)?[]:r6(a);em(i.concat(nt(r)),e=>{!rQ(e,a)&&!rJ(e,a)&&lB(e)&&nF(e)})}},va=e=>t=>rQ(e,t),vi=e=>oM(e,"td,th"),vs=(e,t)=>{let r=e=>mu(rV.fromDom(e),t),n=r(e.startContainer),o=r(e.endContainer),l=n.isSome(),a=o.isSome(),i=rl(n,o,rQ).getOr(!1);return{startTable:n,endTable:o,isStartInTable:l,isEndInTable:a,isSameTable:i,isMultiTable:!i&&l&&a}},vd=(e,t)=>({start:e,end:t}),vc=(e,t,r)=>({rng:e,table:t,cells:r}),vu=sQ.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),vm=(e,t)=>oa(rV.fromDom(e),"td,th",t),vf=e=>!rQ(e.start,e.end),vg=(e,t)=>mu(e.start,t).bind(r=>mu(e.end,t).bind(e=>ri(rQ(r,e),r))),vp=(e,t)=>!vf(e)&&vg(e,t).exists(e=>{let t=e.dom.rows;return 1===t.length&&1===t[0].cells.length}),vh=(e,t)=>{let r=vm(e.startContainer,t),n=vm(e.endContainer,t);return rl(r,n,vd)},vb=e=>t=>mu(t,e).bind(e=>eA(vi(e)).map(e=>vd(t,e))),vv=e=>t=>mu(t,e).bind(e=>eR(vi(e)).map(e=>vd(e,t))),vy=e=>t=>vg(t,e).map(e=>vc(t,e,vi(e))),vC=(e,t,r,n)=>{if(r.collapsed||!e.forall(vf))return en.none();if(t.isSameTable){let o=e.bind(vy(n));return en.some({start:o,end:o})}{let l=vm(r.startContainer,n),a=vm(r.endContainer,n),i=l.bind(vb(n)).bind(vy(n)),s=a.bind(vv(n)).bind(vy(n));return en.some({start:i,end:s})}},vx=(e,t)=>eC(e,e=>rQ(e,t)),vw=e=>rl(vx(e.cells,e.rng.start),vx(e.cells,e.rng.end),(t,r)=>e.cells.slice(t,r+1)),vk=(e,t,r)=>e.exists(e=>vp(e,r)&&mh(e.start,t)),v_=(e,t)=>{let{startTable:r,endTable:n}=t,o=e.cloneRange();return r.each(e=>o.setStartAfter(e.dom)),n.each(e=>o.setEndBefore(e.dom)),o},vS=(e,t,r,n)=>vC(e,t,r,n).bind(({start:e,end:t})=>e.or(t)).bind(e=>{let{isSameTable:n}=t,o=vw(e).getOr([]);if(n&&e.cells.length===o.length)return en.some(vu.fullTable(e.table));if(!(o.length>0))return en.none();if(n)return en.some(vu.partialTable(o,en.none()));{let l=v_(r,t);return en.some(vu.partialTable(o,en.some({...t,rng:l})))}}),vE=(e,t,r,n)=>vC(e,t,r,n).bind(({start:e,end:n})=>{let o=e.bind(vw).getOr([]),l=n.bind(vw).getOr([]);if(!(o.length>0)||!(l.length>0))return en.none();{let a=v_(r,t);return en.some(vu.multiTable(o,l,a))}}),vN=(e,t)=>{let r=va(e),n=vh(t,r),o=vs(t,r);return vk(n,t,r)?n.map(e=>vu.singleCellTable(t,e.start)):o.isMultiTable?vE(n,o,t,r):vS(n,o,t,r)},vD=e=>em(e,e=>{rk(e,"contenteditable"),o8(e)}),vR=(e,t)=>en.from(e.dom.getParent(t,e.dom.isBlock)).map(rV.fromDom),vA=(e,t,r)=>{r.each(r=>{t?nF(r):(o8(r),e.selection.setCursorLocation(r.dom,0))})},vO=(e,t,r,n)=>{let o=r.cloneRange();n?(o.setStart(r.startContainer,r.startOffset),o.setEndAfter(t.dom.lastChild)):(o.setStartBefore(t.dom.firstChild),o.setEnd(r.endContainer,r.endOffset)),vL(e,o,t,!1).each(e=>e())},vT=e=>{let t=mc(e),r=rV.fromDom(e.selection.getNode());oO(r.dom)&&lB(r)?e.selection.setCursorLocation(r.dom,0):e.selection.collapse(!0),t.length>1&&ec(t,e=>rQ(e,r))&&rv(r,"data-mce-selected","1")},vB=(e,t,r)=>en.some(()=>{let n=e.selection.getRng(),o=r.bind(({rng:r,isStartInTable:o})=>{let l=vR(e,o?r.endContainer:r.startContainer);r.deleteContents(),vA(e,o,l.filter(lB));let a=o?t[0]:t[t.length-1];return(vO(e,a,n,o),lB(a))?en.none():en.some(o?t.slice(1):t.slice(0,-1))}).getOr(t);vD(o),vT(e)}),vP=(e,t,r,n)=>en.some(()=>{let o=e.selection.getRng(),l=t[0],a=r[r.length-1];vO(e,l,o,!0),vO(e,a,o,!1);let i=lB(l)?t:t.slice(1),s=lB(a)?r:r.slice(0,-1);vD(i.concat(s)),n.deleteContents(),vT(e)}),vL=(e,t,r,n=!0)=>en.some(()=>{vl(e,t,r,n)}),vF=(e,t)=>en.some(()=>bK(e,!1,t)),vM=(e,t,r)=>vN(t,r).bind(t=>t.fold(X(vL,e),X(vF,e),X(vB,e),X(vP,e))),vI=(e,t)=>vq(e,t),vU=(e,t,r,n)=>vH(t,n).fold(()=>vM(e,t,r),t=>vI(e,t)),vj=(e,t,r)=>{let n=rV.fromDom(e.getBody()),o=e.selection.getRng();return 0!==r.length?vB(e,r,en.none()):vU(e,n,o,t)},vz=(e,t)=>ey(hK(t,e),oQ),vH=(e,t)=>ey(hK(t,e),rh("caption")),v$=(e,t,r,n,o)=>u_(r,e.getBody(),o).bind(e=>vz(t,rV.fromDom(e.getNode())).bind(e=>rQ(e,n)?en.none():en.some(q))),vq=(e,t)=>en.some(()=>{o8(t),e.selection.setCursorLocation(t.dom,0)}),vV=(e,t,r,n)=>uR(e.dom).bind(o=>uA(e.dom).map(e=>t?r.isEqual(o)&&n.isEqual(e):r.isEqual(e)&&n.isEqual(o))).getOr(!0),vW=(e,t)=>vq(e,t),vK=(e,t,r)=>vH(e,rV.fromDom(r.getNode())).fold(()=>en.some(q),e=>ri(!rQ(e,t),q)),vG=(e,t,r,n,o)=>u_(r,e.getBody(),o).fold(()=>en.some(q),l=>vV(n,r,o,l)?vW(e,n):vK(t,n,l)),vY=(e,t,r,n)=>{let o=sg.fromRangeStart(e.selection.getRng());return vz(r,n).bind(n=>lB(n)?vq(e,n):v$(e,r,t,n,o))},vX=(e,t,r,n)=>{let o=sg.fromRangeStart(e.selection.getRng());return lB(n)?vq(e,n):vG(e,r,t,n,o)},vQ=(e,t)=>e?hj(t):hz(t),vJ=(e,t)=>{let r=sg.fromRangeStart(e.selection.getRng());return vQ(t,r)||uk(t,e.getBody(),r).exists(e=>vQ(t,e))},vZ=(e,t,r)=>{let n=rV.fromDom(e.getBody());return vH(n,r).fold(()=>vY(e,t,n,r).orThunk(()=>ri(vJ(e,t),q)),r=>vX(e,t,n,r))},v0=(e,t)=>{let r=rV.fromDom(e.selection.getStart(!0)),n=mc(e);return e.selection.isCollapsed()&&0===n.length?vZ(e,t,r):vj(e,r,n)},v1=(e,t)=>{let r=t;for(;r&&r!==e;){if(oR(r)||oA(r))return r;r=r.parentNode}return null},v2=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],v3=rr.each,v8=e=>{let t=e.dom,r=new Set(e.serializer.getTempAttrs()),n=(e,r)=>{if(e.nodeName!==r.nodeName||e.nodeType!==r.nodeType)return!1;let n=e=>{let r={};return v3(t.getAttribs(e),n=>{let l=n.nodeName.toLowerCase();"style"===l||o(l)||(r[l]=t.getAttrib(e,l))}),r},l=(e,t)=>{for(let r in e)if(eW(e,r)){let n=t[r];if(I(n)||e[r]!==n)return!1;delete t[r]}for(let o in t)if(eW(t,o))return!1;return!0};return(!(ou(e)&&ou(r))||!!l(n(e),n(r))&&!!l(t.parseStyle(t.getAttrib(e,"style")),t.parseStyle(t.getAttrib(r,"style"))))&&!u1(e)&&!u1(r)},o=e=>ec(v2,t=>tm(e,t))||r.has(e);return{compare:n,isAttributeInternal:o}},v5=(e,t)=>{let r=e;for(;r=r.walk();)t(r)},v6=(e,t,r,n)=>{let o=r.name;for(let l=0,a=e.length;l<a;l++){let i=e[l];if(i.name===o){let s=n.nodes[o];s?s.nodes.push(r):n.nodes[o]={filter:i,nodes:[r]}}}if(r.attributes)for(let d=0,c=t.length;d<c;d++){let u=t[d],m=u.name;if(m in r.attributes.map){let f=n.attributes[m];f?f.nodes.push(r):n.attributes[m]={filter:u,nodes:[r]}}}},v9=(e,t,r)=>{let n={nodes:{},attributes:{}};return r.firstChild&&v5(r,r=>{v6(e,t,r,n)}),n},v4=(e,t)=>{let r=(e,r)=>{eF(e,e=>{let n=eO(e.nodes);em(e.filter.callbacks,o=>{for(let l=n.length-1;l>=0;l--){let a=n[l],i=r?void 0!==a.attr(e.filter.name):a.name===e.filter.name;(!i||U(a.parent))&&n.splice(l,1)}n.length>0&&o(n,e.filter.name,t)})})};r(e.nodes,!1),r(e.attributes,!0)},v7=(e,t,r,n={})=>{let o=v9(e,t,r);v4(o,n)},ye=(e,t,r)=>{if(e.insert&&t(r)){let n=new hi("br",1);n.attr("data-mce-bogus","1"),r.empty().append(n)}else r.empty().append(new hi("#text",3)).value="\xa0"},yt=e=>{var t;return yr(e,"#text")&&(null===(t=null==e?void 0:e.firstChild)||void 0===t?void 0:t.value)==="\xa0"},yr=(e,t)=>{let r=null==e?void 0:e.firstChild;return j(r)&&r===e.lastChild&&r.name===t},yn=(e,t)=>{let r=e.getElementRule(t.name);return(null==r?void 0:r.paddEmpty)===!0},yo=(e,t,r,n)=>n.isEmpty(t,r,t=>yn(e,t)),yl=(e,t)=>j(e)&&(t(e)||"br"===e.name),ya=(e,t,r=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{let n=e.children();for(let o of n)r&&!t.isValidChild(r.name,o.name)&&ya(o,t,r);e.unwrap()}},yi=(e,t,r=q)=>{let n=t.getTextBlockElements(),o=t.getNonEmptyElements(),l=t.getWhitespaceElements(),a=rr.makeMap("tr,td,th,tbody,thead,tfoot,table"),i=new Set;for(let s=0;s<e.length;s++){let d,c,u;let m=e[s];if(!m.parent||i.has(m))continue;if(n[m.name]&&"li"===m.parent.name){let f=m.next;for(;f&&n[f.name];)f.name="li",i.add(f),m.parent.insert(f,m.parent),f=f.next;m.unwrap();continue}let g=[m];for(d=m.parent;d&&!t.isValidChild(d.name,m.name)&&!a[d.name];d=d.parent)g.push(d);if(d&&g.length>1){if(t.isValidChild(d.name,m.name)){g.reverse(),r(c=g[0].clone());let p=c;for(let h=0;h<g.length-1;h++){t.isValidChild(p.name,g[h].name)?(r(u=g[h].clone()),p.append(u)):u=p;for(let b=g[h].firstChild;b&&b!==g[h+1];){let v=b.next;u.append(b),b=v}p=u}yo(t,o,l,c)?d.insert(m,g[0],!0):(d.insert(c,g[0],!0),d.insert(m,c)),(yo(t,o,l,d=g[0])||yr(d,"br"))&&d.empty().remove()}else ya(m,t)}else if(m.parent){if("li"===m.name){let y=m.prev;if(y&&("ul"===y.name||"ol"===y.name)){y.append(m);continue}if((y=m.next)&&("ul"===y.name||"ol"===y.name)&&y.firstChild){y.insert(m,y.firstChild,!0);continue}let C=new hi("ul",1);r(C),m.wrap(C);continue}if(t.isValidChild(m.parent.name,"div")&&t.isValidChild("div",m.name)){let x=new hi("div",1);r(x),m.wrap(x)}else ya(m,t)}}},ys=(e,t)=>{let r=e;for(;r;){if(r.name===t)return!0;r=r.parent}return!1},yd=(e,t,r=t.parent)=>!!r&&!!e.children[t.name]&&!e.isValidChild(r.name,t.name)||!!(r&&"a"===t.name&&ys(r,"a")),yc=(e,t,r,n)=>{let o=document.createRange();return o.setStart(e,t),o.setEnd(r,n),o},yu=e=>{let t=sg.fromRangeStart(e),r=sg.fromRangeEnd(e),n=e.commonAncestorContainer;return uk(!1,n,r).map(o=>!c6(t,r,n)&&c6(t,o,n)?yc(t.container(),t.offset(),o.container(),o.offset()):e).getOr(e)},ym=e=>e.collapsed?e:yu(e),yf=e=>j(e.firstChild)&&e.firstChild===e.lastChild,yg=e=>"br"===e.name||"\xa0"===e.value,yp=(e,t)=>{let r=e.getBlockElements();return r[t.name]&&yf(t)&&yg(t.firstChild)},yh=(e,t)=>{let r=e.getNonEmptyElements();return j(t)&&(t.isEmpty(r)||yp(e,t))},yb=(e,t)=>{let r=t.firstChild,n=t.lastChild;return r&&"meta"===r.name&&(r=r.next),n&&"mce_marker"===n.attr("id")&&(n=n.prev),yh(e,n)&&(n=null==n?void 0:n.prev),!!r&&r===n&&("ul"===r.name||"ol"===r.name)},yv=e=>{var t,r;let n=e.firstChild,o=e.lastChild;return n&&"META"===n.nodeName&&(null===(t=n.parentNode)||void 0===t||t.removeChild(n)),o&&"mce_marker"===o.id&&(null===(r=o.parentNode)||void 0===r||r.removeChild(o)),e},yy=(e,t,r)=>{let n=t.serialize(r),o=e.createFragment(n);return yv(o)},yC=e=>{var t;return ep(null!==(t=null==e?void 0:e.childNodes)&&void 0!==t?t:[],e=>"LI"===e.nodeName)},yx=e=>"\xa0"===e.data||oN(e),yw=e=>j(null==e?void 0:e.firstChild)&&e.firstChild===e.lastChild&&yx(e.firstChild),yk=e=>!e.firstChild||yw(e),y_=e=>e.length>0&&yk(e[e.length-1])?e.slice(0,-1):e,yS=(e,t)=>{let r=e.getParent(t,e.isBlock);return r&&"LI"===r.nodeName?r:null},yE=(e,t)=>!!yS(e,t),yN=(e,t)=>{let r=t.cloneRange(),n=t.cloneRange();return r.setStartBefore(e),n.setEndAfter(e),[r.cloneContents(),n.cloneContents()]},yD=(e,t)=>{let r=sg.before(e),n=up(t),o=n.next(r);return o?o.toRange():null},yR=(e,t)=>{let r=sg.after(e),n=up(t),o=n.prev(r);return o?o.toRange():null},yA=(e,t,r,n)=>{let o=yN(e,n),l=e.parentNode;return l&&(l.insertBefore(o[0],e),rr.each(t,t=>{l.insertBefore(t,e)}),l.insertBefore(o[1],e),l.removeChild(e)),yR(t[t.length-1],r)},yO=(e,t,r)=>{let n=e.parentNode;return n&&rr.each(t,t=>{n.insertBefore(t,e)}),yD(e,r)},yT=(e,t,r,n)=>(n.insertAfter(t.reverse(),e),yR(t[0],r)),yB=(e,t,r,n)=>{let o=yy(t,e,n),l=yS(t,r.startContainer),a=y_(yC(o.firstChild)),i=t.getRoot(),s=e=>{let n=sg.fromRangeStart(r),o=up(t.getRoot()),a=1===e?o.prev(n):o.next(n),i=null==a?void 0:a.getNode();return!i||yS(t,i)!==l};return l?s(1)?yO(l,a,i):s(2)?yT(l,a,i,t):yA(l,a,i,r):null},yP=["pre"],yL=(e,t,r,n)=>{var o;let l=t.firstChild,a=t.lastChild,i="bookmark"===a.attr("data-mce-type")?a.prev:a,s=ed(yP,l.name);if(l!==i||!s)return!1;{let d="false"!==l.attr("contenteditable"),c=(null===(o=e.getParent(r,e.isBlock))||void 0===o?void 0:o.nodeName.toLowerCase())===l.name,u=en.from(v1(n,r)).forall(oR);return d&&c&&u}},yF=(e,t,r)=>{if(!j(r))return!1;{let n=e.getParent(t.endContainer,oO);return r===n&&mh(rV.fromDom(r),t)}},yM=(e,t,r)=>{var n;if("all"===r.getAttribute("data-mce-bogus"))null===(n=r.parentNode)||void 0===n||n.insertBefore(e.dom.createFragment(t),r);else{let o=r.firstChild,l=r.lastChild;o&&(o!==l||"BR"!==o.nodeName)?e.selection.setContent(t,{no_events:!0}):e.dom.setHTML(r,t)}},yI=(e,t)=>{en.from(e.getParent(t,"td,th")).map(rV.fromDom).each(o5)},yU=(e,t)=>{let r=e.schema.getTextInlineElements(),n=e.dom;if(t){let o=e.getBody(),l=v8(e);rr.each(n.select("*[data-mce-fragment]"),e=>{let t=j(r[e.nodeName.toLowerCase()]);if(t&&hE(n,e))for(let a=e.parentElement;j(a)&&a!==o;a=a.parentElement){let i=hD(n,e,a);if(i)break;if(l.compare(a,e)){n.remove(e,!0);break}}})}},yj=e=>{let t=e;for(;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")},yz=e=>{rr.each(e.getElementsByTagName("*"),e=>{e.removeAttribute("data-mce-fragment")})},yH=e=>!!e.getAttribute("data-mce-fragment"),y$=(e,t)=>j(t)&&!e.schema.getVoidElements()[t.nodeName],yq=(e,t)=>{var r,n,o;let l;let a=e.dom,i=e.selection;if(!t)return;i.scrollIntoView(t);let s=v1(e.getBody(),t);if(s&&"false"===a.getContentEditable(s)){a.remove(t),i.select(s);return}let d=a.createRng(),c=t.previousSibling;if(ox(c)){d.setStart(c,null!==(n=null===(r=c.nodeValue)||void 0===r?void 0:r.length)&&void 0!==n?n:0);let u=t.nextSibling;ox(u)&&(c.appendData(u.data),null===(o=u.parentNode)||void 0===o||o.removeChild(u))}else d.setStartBefore(t),d.setEndBefore(t);let m=a.getParent(t,a.isBlock);a.remove(t),m&&a.isEmpty(m)&&(nL(rV.fromDom(m)),d.setStart(m,0),d.setEnd(m,0),!oO(m)&&!yH(m)&&(l=(t=>{let r=sg.fromRangeStart(t),n=up(e.getBody());return null==(r=n.next(r))?void 0:r.toRange()})(d))?(d=l,a.remove(m)):a.add(m,a.create("br",{"data-mce-bogus":"1"}))),i.setRng(d)},yV=e=>{let t=e.dom,r=ym(e.selection.getRng());e.selection.setRng(r);let n=t.getParent(r.startContainer,oO);yF(t,r,n)?vL(e,r,rV.fromDom(n)):r.startContainer===r.endContainer&&r.endOffset-r.startOffset==1&&ox(r.startContainer.childNodes[r.startOffset])?r.deleteContents():e.getDoc().execCommand("Delete",!1)},yW=(e,t,r)=>{var n,o;let l=e.selection,a=e.dom,i=e.parser,s=r.merge,d=hx({validate:!0},e.schema),c='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';-1===t.indexOf("{$caret}")&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,c);let u=l.getRng(),m=u.startContainer,f=e.getBody();m===f&&l.isCollapsed()&&a.isBlock(f.firstChild)&&y$(e,f.firstChild)&&a.isEmpty(f.firstChild)&&((u=a.createRng()).setStart(f.firstChild,0),u.setEnd(f.firstChild,0),l.setRng(u)),l.isCollapsed()||yV(e);let g=l.getNode(),p={context:g.nodeName.toLowerCase(),data:r.data,insert:!0},h=i.parse(t,p);if(!0===r.paste&&yb(e.schema,h)&&yE(a,g))return(u=yB(d,a,l.getRng(),h))&&l.setRng(u),t;!0===r.paste&&yL(a,h,g,e.getBody())&&(null===(n=h.firstChild)||void 0===n||n.unwrap()),yj(h);let b=h.lastChild;if(b&&"mce_marker"===b.attr("id")){let v=b;for(b=b.prev;b;b=b.walk(!0))if(3===b.type||!a.isBlock(b.name)){b.parent&&e.schema.isValidChild(b.parent.name,"span")&&b.parent.insert(v,b,"br"===b.name);break}}if(e._selectionOverrides.showBlockCaretContainer(g),p.invalid){let y;e.selection.setContent(c);let C=l.getNode(),x=e.getBody();for(oS(C)?C=y=x:y=C;y&&y!==x;)C=y,y=y.parentNode;t=C===x?x.innerHTML:a.getOuterHTML(C);let w=i.parse(t);for(let k=w;k;k=k.walk())if("mce_marker"===k.attr("id")){k.replace(h);break}let _=h.children(),S=null!==(o=h.parent)&&void 0!==o?o:w;h.unwrap();let E=ep(_,t=>yd(e.schema,t,S));yi(E,e.schema),v7(i.getNodeFilters(),i.getAttributeFilters(),w),t=d.serialize(w),C===x?a.setHTML(x,t):a.setOuterHTML(C,t)}else yM(e,t=d.serialize(h),g);return yU(e,s),yq(e,a.get("mce_marker")),yz(e.getBody()),yI(a,l.getStart()),lq(e.schema,e.getBody(),l.getStart()),t},yK=e=>e instanceof hi,yG=e=>{pH(e)&&uR(e.getBody()).each(t=>{let r=t.getNode(),n=ov(r)?uR(r).getOr(t):t;e.selection.setRng(n.toRange())})},yY=(e,t,r)=>{e.dom.setHTML(e.getBody(),t),!0!==r&&yG(e)},yX=(e,t,r,n)=>{if(0===r.length||/^\s+$/.test(r)){let o='<br data-mce-bogus="1">';"TABLE"===t.nodeName?r="<tr><td>"+o+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(r="<li>"+o+"</li>");let l=dg(e);return e.schema.isValidChild(t.nodeName.toLowerCase(),l.toLowerCase())?(r=o,r=e.dom.createHTML(l,dp(e),r)):r||(r=o),yY(e,r,n.no_selection),{content:r,html:r}}{"raw"!==n.format&&(r=hx({validate:!1},e.schema).serialize(e.parser.parse(r,{isRootContent:!0,insert:!0})));let a=oJ(rV.fromDom(t))?r:rr.trim(r);return yY(e,a,n.no_selection),{content:a,html:a}}},yQ=(e,t,r,n)=>{v7(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),r);let o=hx({validate:!1},e.schema).serialize(r),l=oJ(rV.fromDom(t))?o:rr.trim(o);return yY(e,l,n.no_selection),{content:r,html:l}},yJ=(e,t,r)=>en.from(e.getBody()).map(n=>yK(t)?yQ(e,n,t,r):yX(e,n,t,r)).getOr({content:t,html:yK(r.content)?"":r.content}),yZ=(e,t)=>ot(e,t).isSome(),y0=e=>z(e)?e:et,y1=(e,t,r)=>{let n=e.dom,o=y0(r);for(;n.parentNode;){n=n.parentNode;let l=rV.fromDom(n),a=t(l);if(a.isSome())return a;if(o(l))break}return en.none()},y2=(e,t,r)=>{let n=t(e),o=y0(r);return n.orThunk(()=>o(e)?en.none():y1(e,t,o))},y3=(e,t,r)=>{let n=e.formatter.get(r);if(n)for(let o=0;o<n.length;o++){let l=n[o];if(mW(l)&&!1===l.inherit&&e.dom.is(t,l.selector))return!0}return!1},y8=(e,t,r,n,o)=>{let l=e.dom.getRoot();if(t===l)return!1;let a=e.dom.getParent(t,t=>!!y3(e,t,r)||t.parentNode===l||!!y9(e,t,r,n,!0));return!!y9(e,a,r,n,o)},y5=(e,t,r)=>!!(mK(r)&&mL(t,r.inline)||m$(r)&&mL(t,r.block))||!!mW(r)&&ou(t)&&e.is(t,r.selector),y6=(e,t,r,n,o,l)=>{let a=r[n],i="attributes"===n;if(z(r.onmatch))return r.onmatch(t,r,n);if(a){if(eX(a))for(let s=0;s<a.length&&(i?!e.getAttrib(t,a[s]):!mM(e,t,a[s]));s++);else for(let d in a)if(eW(a,d)){let c=i?e.getAttrib(t,d):mM(e,t,d),u=mP(a[d],l),m=U(c)||ty(c);if(m&&U(u))continue;if(o&&m&&!r.exact||(!o||r.exact)&&!mL(c,mF(u,d)))return!1}}return!0},y9=(e,t,r,n,o)=>{let l=e.formatter.get(r),a=e.dom;if(l&&ou(t))for(let i=0;i<l.length;i++){let s=l[i];if(y5(e.dom,t,s)&&y6(a,t,s,"attributes",o,n)&&y6(a,t,s,"styles",o,n)){let d=s.classes;if(d){for(let c=0;c<d.length;c++)if(!e.dom.hasClass(t,mP(d[c],n)))return}return s}}},y4=(e,t,r,n,o)=>{if(n)return y8(e,n,t,r,o);if(n=e.selection.getNode(),y8(e,n,t,r,o))return!0;let l=e.selection.getStart();return!!(l!==n&&y8(e,l,t,r,o))},y7=(e,t,r)=>{let n=[],o={},l=e.selection.getStart();return e.dom.getParent(l,l=>{for(let a=0;a<t.length;a++){let i=t[a];!o[i]&&y9(e,l,i,r)&&(o[i]=!0,n.push(i))}},e.dom.getRoot()),n},Ce=(e,t)=>{let r=t=>rQ(t,rV.fromDom(e.getBody())),n=(t,r)=>y9(e,t.dom,r)?en.some(r):en.none();return en.from(e.selection.getStart(!0)).bind(e=>y2(rV.fromDom(e),e=>eT(t,t=>n(e,t)),r)).getOrNull()},Ct=(e,t)=>{let r=e.formatter.get(t),n=e.dom;if(r){let o=e.selection.getStart(),l=mU(n,o);for(let a=r.length-1;a>=0;a--){let i=r[a];if(!mW(i))return!0;for(let s=l.length-1;s>=0;s--)if(n.is(l[s],i.selector))return!0}}return!1},Cr=(e,t,r)=>eb(r,(r,n)=>{let o=mz(e,n);return e.formatter.matchNode(t,n,{},o)?r.concat([n]):r},[]),Cn=(e,t)=>e.importNode(t,!0),Co=e=>{let t=[],r=e;for(;r;){if(ox(r)&&"\uFEFF"!==r.data||r.childNodes.length>1)return[];ou(r)&&t.push(r),r=r.firstChild}return t},Cl=e=>Co(e).length>0,Ca=e=>{if(e){let t=new os(e,e);for(let r=t.current();r;r=t.next())if(ox(r))return r}return null},Ci=e=>{let t=rV.fromTag("span");return ry(t,{id:uO,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&nO(t,rV.fromText("\uFEFF")),t},Cs=e=>{let t=Ca(e);return t&&"\uFEFF"===t.data.charAt(0)&&t.deleteData(0,1),t},Cd=(e,t,r=!0)=>{let n=e.dom,o=e.selection;if(Cl(t))bK(e,!1,rV.fromDom(t),r);else{let l=o.getRng(),a=n.getParent(t,n.isBlock),i=l.startContainer,s=l.startOffset,d=l.endContainer,c=l.endOffset,u=Cs(t);n.remove(t,!0),i===u&&s>0&&l.setStart(u,s-1),d===u&&c>0&&l.setEnd(u,c-1),a&&n.isEmpty(a)&&o8(rV.fromDom(a)),o.setRng(l)}},Cc=(e,t,r=!0)=>{let n=e.dom,o=e.selection;if(t)Cd(e,t,r);else if(!(t=uB(e.getBody(),o.getStart())))for(;t=n.get(uO);)Cd(e,t,!1)},Cu=(e,t,r)=>{var n,o;let l=e.dom,a=l.getParent(r,X(mD,e.schema));a&&l.isEmpty(a)?null===(n=r.parentNode)||void 0===n||n.replaceChild(t,r):(o2(rV.fromDom(r)),l.isEmpty(r)?null===(o=r.parentNode)||void 0===o||o.replaceChild(t,r):l.insertAfter(t,r))},Cm=(e,t)=>(e.appendChild(t),t),Cf=(e,t)=>{var r;let n=eh(e,(e,t)=>Cm(e,t.cloneNode(!1)),t),o=null!==(r=n.ownerDocument)&&void 0!==r?r:document;return Cm(n,o.createTextNode("\uFEFF"))},Cg=(e,t,r,n,o,l)=>{let a=e.formatter,i=e.dom,s=ep(eP(a.get()),e=>e!==n&&!tu(e,"removeformat")),d=Cr(e,r,s),c=ep(d,t=>!mH(e,t,n));if(!(c.length>0))return en.none();{let u=r.cloneNode(!1);return i.add(t,u),a.remove(n,o,u,l),i.remove(u),en.some(u)}},Cp=(e,t,r)=>{let n;let o=e.selection,l=e.formatter.get(t);if(!l)return;let a=o.getRng(),i=a.startOffset,s=a.startContainer,d=s.nodeValue;n=uB(e.getBody(),o.getStart());let c=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(d&&i>0&&i<d.length&&c.test(d.charAt(i))&&c.test(d.charAt(i-1))){let u=o.getBookmark();a.collapse(!0);let m=m9(e.dom,a,l);m=gR(m),e.formatter.apply(t,r,m),o.moveToBookmark(u)}else{let f=n?Ca(n):null;n&&(null==f?void 0:f.data)==="\uFEFF"||(f=(n=Cn(e.getDoc(),Ci(!0).dom)).firstChild,a.insertNode(n),i=1),e.formatter.apply(t,r,n),o.setCursorLocation(f,i)}},Ch=(e,t,r,n)=>{let o;let l=e.dom,a=e.selection,i=!1,s=e.formatter.get(t);if(!s)return;let d=a.getRng(),c=d.startContainer,u=d.startOffset,m=c;ox(c)&&(u!==c.data.length&&(i=!0),m=m.parentNode);let f=[];for(;m;){if(y9(e,m,t,r,n)){o=m;break}m.nextSibling&&(i=!0),f.push(m),m=m.parentNode}if(o){if(i){let g=a.getBookmark();d.collapse(!0);let p=m9(l,d,s,!0);p=gR(p),e.formatter.remove(t,r,p,n),a.moveToBookmark(g)}else{let h=uB(e.getBody(),o),b=Ci(!1).dom;Cu(e,b,null!=h?h:o);let v=Cg(e,b,o,t,r,n),y=Cf(f.concat(v.toArray()),b);h&&Cd(e,h,!1),a.setCursorLocation(y,1),l.isEmpty(o)&&l.remove(o)}}},Cb=(e,t)=>{let r=e.selection,n=e.getBody();Cc(e,null,!1),(8===t||46===t)&&r.isCollapsed()&&"\uFEFF"===r.getStart().innerHTML&&Cc(e,uB(n,r.getStart())),(37===t||39===t)&&Cc(e,uB(n,r.getStart()))},Cv=e=>{e.on("mouseup keydown",t=>{Cb(e,t.keyCode)})},Cy=(e,t)=>{let r=Ci(!1),n=Cf(t,r.dom);return nD(rV.fromDom(e),r),nF(rV.fromDom(e)),sg(n,0)},CC=(e,t)=>{let r=e.schema.getTextInlineElements();return eW(r,rs(t))&&!uT(t.dom)&&!oh(t.dom)},Cx=e=>uT(e.dom)&&Cl(e.dom),Cw={},Ck=of(["pre"]),C_=(e,t)=>{eW(Cw,e)&&em(Cw[e],e=>{e(t)})};((e,t)=>{let r=Cw[e];r||(Cw[e]=[]),Cw[e].push(t)})("pre",e=>{let t=e.selection.getRng(),r=(e,t)=>{let r=rV.fromDom(t),n=r0(r).dom;nF(r),nP(rV.fromDom(e),[rV.fromTag("br",n),rV.fromTag("br",n),...nt(r)])};if(!t.collapsed){let n=e.selection.getSelectedBlocks(),o=ep(ep(n,Ck),e=>{let t=e.previousSibling;return Ck(t)&&ed(n,t)});em(o,e=>{r(e.previousSibling,e)})}});let CS=["fontWeight","fontStyle","color","fontSize","fontFamily"],CE=e=>B(e.styles)&&ec(eP(e.styles),e=>ed(CS,e)),CN=e=>ey(e,e=>mK(e)&&"span"===e.inline&&CE(e)),CD=(e,t)=>{let r=e.get(t);return L(r)?CN(r):en.none()},CR=(e,t)=>uD(t,sg.fromRangeStart(e)).isNone(),CA=(e,t)=>!1===uN(t,sg.fromRangeEnd(e)).exists(e=>!oN(e.getNode())||uN(t,e).isSome()),CO=e=>t=>oP(t)&&"false"!==e.getContentEditableParent(t),CT=e=>{let t=e.getSelectedBlocks(),r=e.getRng();if(e.isCollapsed())return[];if(1===t.length)return CR(r,t[0])&&CA(r,t[0])?t:[];{let n=eR(t).filter(e=>CR(r,e)).toArray(),o=eA(t).filter(e=>CA(r,e)).toArray(),l=t.slice(1,-1);return n.concat(l).concat(o)}},CB=e=>ep(CT(e),CO(e.dom)),CP=e=>ep(e.getSelectedBlocks(),CO(e.dom)),CL=rr.each,CF=e=>ou(e)&&!u1(e)&&!uT(e)&&!oh(e),CM=(e,t)=>{for(let r=e;r&&!(ox(r)&&tv(r.data));r=r[t])if(ou(r)&&!u1(r))return r;return e},CI=(e,t,r)=>{let n=v8(e),o=ou(t)&&m_(t),l=ou(r)&&m_(r);if(o&&l){let a=CM(t,"previousSibling"),i=CM(r,"nextSibling");if(n.compare(a,i)){for(let s=a.nextSibling;s&&s!==i;){let d=s;s=s.nextSibling,a.appendChild(d)}return e.dom.remove(i),rr.each(rr.grep(i.childNodes),e=>{a.appendChild(e)}),a}}return r},CU=(e,t,r,n)=>{var o;if(n&&!1!==t.merge_siblings){let l=null!==(o=CI(e,mN(n),n))&&void 0!==o?o:n;CI(e,l,mN(l,!0))}},Cj=(e,t,r)=>{if(t.clear_child_styles){let n=t.links?"*:not(a)":"*";CL(e.select(n,r),r=>{CF(r)&&m_(r)&&CL(t.styles,(t,n)=>{e.setStyle(r,n,"")})})}},Cz=(e,t,r)=>{CL(e.childNodes,e=>{CF(e)&&(t(e)&&r(e),e.hasChildNodes()&&Cz(e,t,r))})},CH=(e,t)=>{"SPAN"===t.nodeName&&0===e.getAttribs(t).length&&e.remove(t,!0)},C$=(e,t)=>r=>!!(r&&mM(e,r,t)),Cq=(e,t,r)=>n=>{e.setStyle(n,t,r),""===n.getAttribute("style")&&n.removeAttribute("style"),CH(e,n)},CV=sQ.generate([{keep:[]},{rename:["name"]},{removed:[]}]),CW=/^(src|href|style)$/,CK=rr.each,CG=e=>/^(TR|TH|TD)$/.test(e.nodeName),CY=(e,t,r)=>e.isChildOf(t,r)&&t!==r&&!e.isBlock(r),CX=(e,t,r)=>{let n=t[r?"startContainer":"endContainer"],o=t[r?"startOffset":"endOffset"];if(ou(n)){let l=n.childNodes.length-1;!r&&o&&o--,n=n.childNodes[o>l?l:o]}return ox(n)&&r&&o>=n.data.length&&(n=new os(n,e.getBody()).next()||n),ox(n)&&!r&&0===o&&(n=new os(n,e.getBody()).prev()||n),n},CQ=(e,t)=>{let r=t?"firstChild":"lastChild",n=e[r];return CG(e)&&n?"TR"===e.nodeName&&n[r]||n:e},CJ=(e,t,r,n)=>{var o;let l=e.create(r,n);return null===(o=t.parentNode)||void 0===o||o.insertBefore(l,t),l.appendChild(t),l},CZ=(e,t,r,n,o)=>{let l=rV.fromDom(t),a=rV.fromDom(e.create(n,o)),i=r?ne(l):r7(l);return nP(a,i),r?(nD(l,a),nA(a,l)):(nR(l,a),nO(a,l)),a.dom},C0=(e,t)=>t.links&&"A"===e.nodeName,C1=(e,t,r)=>{let n;let o=t.parentNode,l=e.dom,a=dg(e);!m$(r)||o!==l.getRoot()||r.list_block&&mL(t,r.list_block)||em(eO(t.childNodes),t=>{mR(e,a,t.nodeName.toLowerCase())?n?n.appendChild(t):(n=CJ(l,t,a),l.setAttribs(n,dp(e))):n=null}),(!mG(r)||mL(r.inline,t))&&l.remove(t,!0)},C2=(e,t,r)=>H(e)?{name:t,value:null}:{name:e,value:mP(t,r)},C3=(e,t)=>{""===e.getAttrib(t,"style")&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},C8=(e,t,r,n,o)=>{let l=!1;CK(r.styles,(a,i)=>{let{name:s,value:d}=C2(i,a,n),c=mF(d,s);(r.remove_similar||F(d)||!ou(o)||mL(mM(e,o,s),c))&&e.setStyle(t,s,""),l=!0}),l&&C3(e,t)},C5=(e,t,r)=>{"removeformat"===t?em(CP(e.selection),t=>{em(CS,r=>e.dom.setStyle(t,r,"")),C3(e.dom,t)}):CD(e.formatter,t).each(t=>{em(CP(e.selection),n=>C8(e.dom,n,t,r,null))})},C6=(e,t,r,n,o)=>{let l=e.dom,a=v8(e),i=e.schema;if(mK(t)&&lW(i,t.inline)&&lG(i,n)&&n.parentElement===e.getBody())return C1(e,n,t),CV.removed();if(!t.ceFalseOverride&&n&&"false"===l.getContentEditableParent(n)||n&&!y5(l,n,t)&&!C0(n,t))return CV.keep();let s=t.preserve_attributes;if(mK(t)&&"all"===t.remove&&L(s)){let d=ep(l.getAttribs(n),e=>ed(s,e.name.toLowerCase()));if(l.removeAllAttribs(n),em(d,e=>l.setAttrib(n,e.name,e.value)),d.length>0)return CV.rename("span")}if("all"!==t.remove){C8(l,n,t,r,o),CK(t.attributes,(e,a)=>{let{name:i,value:s}=C2(a,e,r);if(t.remove_similar||F(s)||!ou(o)||mL(l.getAttrib(o,i),s)){if("class"===i){let d=l.getAttrib(n,i);if(d){let c="";if(em(d.split(/\s+/),e=>{/mce\-\w+/.test(e)&&(c+=(c?" ":"")+e)}),c){l.setAttrib(n,i,c);return}}}if(CW.test(i)&&n.removeAttribute("data-mce-"+i),"style"===i&&of(["li"])(n)&&"none"===l.getStyle(n,"list-style-type")){n.removeAttribute(i),l.setStyle(n,"list-style-type","none");return}"class"===i&&n.removeAttribute("className"),n.removeAttribute(i)}}),CK(t.classes,e=>{e=mP(e,r),(!ou(o)||l.hasClass(o,e))&&l.removeClass(n,e)});let c=l.getAttribs(n);for(let u=0;u<c.length;u++){let m=c[u].nodeName;if(!a.isAttributeInternal(m))return CV.keep()}}return"none"!==t.remove?(C1(e,n,t),CV.removed()):CV.keep()},C9=(e,t,r,n,o)=>C6(e,t,r,n,o).fold(et,t=>(e.dom.rename(n,t),!0),er),C4=(e,t,r,n,o)=>{let l;return t.parentNode&&em(mU(e.dom,t.parentNode).reverse(),t=>{if(!l&&ou(t)&&"_start"!==t.id&&"_end"!==t.id){let a=y9(e,t,r,n,o);a&&!1!==a.split&&(l=t)}}),l},C7=(e,t,r,n)=>C6(e,t,r,n,n).fold(K(n),t=>{let r=e.dom.createFragment();return r.appendChild(n),e.dom.rename(n,t)},K(null)),xe=(e,t,r,n,o,l,a,i)=>{var s,d;let c,u;let m=e.dom;if(r){let f=r.parentNode;for(let g=n.parentNode;g&&g!==f;g=g.parentNode){let p=m.clone(g,!1);for(let h=0;h<t.length&&null!==(p=C7(e,t[h],i,p));h++);p&&(c&&p.appendChild(c),u||(u=p),c=p)}!l||a.mixed&&m.isBlock(r)||(n=null!==(s=m.split(r,n))&&void 0!==s?s:n),c&&u&&(null===(d=o.parentNode)||void 0===d||d.insertBefore(c,o),u.appendChild(o),mK(a)&&CU(e,a,i,c))}return n},xt=(e,t,r,n,o)=>{let l=e.formatter.get(t),a=l[0],i=e.dom,s=e.selection,d=n=>{let i=C4(e,n,t,r,o);return xe(e,l,i,n,n,!0,a,r)},c=e=>u1(e)&&ou(e)&&("_start"===e.id||"_end"===e.id),u=t=>ec(l,n=>C9(e,n,r,t,t)),m=t=>{let r=eO(t.childNodes),n=u(t),o=n||ec(l,e=>y5(i,t,e)),s=t.parentNode;if(!o&&j(s)&&mY(a)&&u(s),a.deep&&r.length)for(let d=0;d<r.length;d++)m(r[d]);em(["underline","line-through","overline"],r=>{ou(t)&&e.dom.getStyle(t,"text-decoration")===r&&t.parentNode&&mI(i,t.parentNode)===r&&C9(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:r}},void 0,t)})},f=e=>{let t=i.get(e?"_start":"_end");if(!t)return null;{let r=t[e?"firstChild":"lastChild"];return c(r)&&(r=r[e?"firstChild":"lastChild"]),ox(r)&&0===r.data.length&&(r=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling),i.remove(t,!0),r}},g=t=>{let r,n;let o=m9(i,t,l,t.collapsed);if(a.split){if(o=gR(o),r=CX(e,o,!0),n=CX(e,o),r!==n){if(r=CQ(r,!0),n=CQ(n,!1),CY(i,r,n)){let s=en.from(r.firstChild).getOr(r);d(CZ(i,s,!0,"span",{id:"_start","data-mce-type":"bookmark"})),f(!0);return}if(CY(i,n,r)){let c=en.from(n.lastChild).getOr(n);d(CZ(i,c,!1,"span",{id:"_end","data-mce-type":"bookmark"})),f(!1);return}r=CJ(i,r,"span",{id:"_start","data-mce-type":"bookmark"}),n=CJ(i,n,"span",{id:"_end","data-mce-type":"bookmark"});let u=i.createRng();u.setStartAfter(r),u.setEndBefore(n),m4(i,u,e=>{em(e,e=>{u1(e)||u1(e.parentNode)||d(e)})}),d(r),d(n),r=f(!0),n=f()}else r=n=d(r);o.startContainer=r.parentNode?r.parentNode:r,o.startOffset=i.nodeIndex(r),o.endContainer=n.parentNode?n.parentNode:n,o.endOffset=i.nodeIndex(n)+1}m4(i,o,e=>{em(e,m)})};if(n){if(mx(n)){let p=i.createRng();p.setStartBefore(n),p.setEndAfter(n),g(p)}else g(n);f_(e,t,n,r);return}s.isCollapsed()&&mK(a)&&!mc(e).length?Ch(e,t,r,o):(mS(e,()=>my(e,g),n=>mK(a)&&y4(e,t,r,n)),e.nodeChanged()),C5(e,t,r),f_(e,t,n,r)},xr=rr.each,xn=(e,t,r,n)=>{let o=t=>{if(ou(t)&&ou(t.parentNode)&&m_(t)){let r=mI(e,t.parentNode);e.getStyle(t,"color")&&r?e.setStyle(t,"text-decoration",r):e.getStyle(t,"text-decoration")===r&&e.setStyle(t,"text-decoration",null)}};t.styles&&(t.styles.color||t.styles.textDecoration)&&(rr.walk(n,o,"childNodes"),o(n))},xo=(e,t,r,n)=>{if(t.styles&&t.styles.backgroundColor){let o=C$(e,"fontSize");Cz(n,e=>o(e)&&m_(e),Cq(e,"backgroundColor",mP(t.styles.backgroundColor,r)))}},xl=(e,t,r,n)=>{if(mK(t)&&("sub"===t.inline||"sup"===t.inline)){let o=C$(e,"fontSize");Cz(n,e=>o(e)&&m_(e),Cq(e,"fontSize",""));let l=ep(e.select("sup"===t.inline?"sub":"sup",n),m_);e.remove(l,!0)}},xa=(e,t,r,n)=>{xr(t,t=>{mK(t)&&xr(e.dom.select(t.inline,n),n=>{CF(n)&&C9(e,t,r,n,t.exact?n:null)}),Cj(e.dom,t,n)})},xi=(e,t,r,n,o)=>{let l=o.parentNode;!(y9(e,l,r,n)&&C9(e,t,n,o))&&t.merge_with_parents&&l&&e.dom.getParent(l,l=>!!y9(e,l,r,n)&&(C9(e,t,n,o),!0))},xs=rr.each,xd=(e,t,r,n)=>{if(!(dZ(e)&&mK(t))||!r.parentNode)return!1;{let o=aA(e.schema),l=yZ(rV.fromDom(r),e=>uT(e.dom));return eK(o,n)&&lB(rV.fromDom(r.parentNode),!1)&&!l}},xc=(e,t,r,n)=>{if(xs(r.styles,(r,o)=>{e.setStyle(t,o,mP(r,n))}),r.styles){let o=e.getAttrib(t,"style");o&&e.setAttrib(t,"data-mce-style",o)}},xu=(e,t,r,n)=>{let o=e.formatter.get(t),l=o[0],a=!n&&e.selection.isCollapsed(),i=e.dom,s=e.selection,d=(e,t=l)=>{z(t.onformat)&&t.onformat(e,t,r,n),xc(i,e,t,r),xs(t.attributes,(t,n)=>{i.setAttrib(e,n,mP(t,r))}),xs(t.classes,t=>{let n=mP(t,r);i.hasClass(e,n)||i.addClass(e,n)})},c=(e,t)=>{let r=!1;return xs(e,e=>!!mW(e)&&(!!("false"===i.getContentEditable(t)&&!e.ceFalseOverride||j(e.collapsed)&&e.collapsed!==a)||!i.is(t,e.selector)||!!uT(t)||(d(t,e),r=!0,!1))),r},u=e=>{if(!T(e))return null;{let t=i.create(e);return d(t),t}},m=(n,a,i)=>{let s=[],m=!0,f=l.inline||l.block,g=u(f),p=n=>mq(l)&&y9(e,n,t,r),h=(t,r,n)=>{let o=mV(l)&&mD(e.schema,t)&&mR(e,r,f);return n&&o},b=(t,r,o,a)=>{let s=t.nodeName.toLowerCase(),d=mR(e,f,s)&&mR(e,r,f),c=!i&&ox(t)&&oL(t.data),u=uT(t),m=!mK(l)||!n.isBlock(t);return(o||a)&&d&&!c&&!u&&m};m4(n,a,t=>{let r;let a=t=>{let i=!1,u=m,v=!1,y=t.parentNode,C=y.nodeName.toLowerCase(),x=n.getContentEditable(t);j(x)&&(u=m,m="true"===x,i=!0,v=mB(e,t));let w=m&&!i;if(oN(t)&&!xd(e,l,t,C)){r=null,m$(l)&&n.remove(t);return}if(p(t)){r=null;return}if(h(t,C,w)){let k=n.rename(t,f);d(k),s.push(k),r=null;return}if(mW(l)){let _=c(o,t);if(!_&&j(y)&&mY(l)&&(_=c(o,y)),!mK(l)||_){r=null;return}}j(g)&&b(t,C,w,v)?(r||(r=n.clone(g,!1),y.insertBefore(r,t),s.push(r)),v&&i&&(m=u),r.appendChild(t)):(r=null,em(eO(t.childNodes),a),i&&(m=u),r=null)};em(t,a)}),!0===l.links&&em(s,e=>{let t=e=>{"A"===e.nodeName&&d(e,l),em(eO(e.childNodes),t)};t(e)}),em(s,a=>{let i;let c=(i=0,em(a.childNodes,e=>{!mO(e)&&!u1(e)&&i++}),i);if((s.length>1||!n.isBlock(a))&&0===c){n.remove(a,!0);return}(mK(l)||m$(l)&&l.wrapper)&&(l.exact||1!==c||(a=(e=>{let t=ey(e.childNodes,mw).filter(e=>"false"!==n.getContentEditable(e)&&y5(n,e,l));return t.map(t=>{let r=n.clone(t,!1);return d(r),n.replace(r,e,!0),n.remove(t,!0),r}).getOr(e)})(a)),xa(e,o,r,a),xi(e,l,t,r,a),xo(n,l,r,a),xn(n,l,r,a),xl(n,l,r,a),CU(e,l,r,a))})},f=mx(n)?n:s.getNode();if("false"===i.getContentEditable(f)&&!mB(e,f)){c(o,n=f),fk(e,t,n,r);return}if(l){if(n){if(mx(n)){if(!c(o,n)){let g=i.createRng();g.setStartBefore(n),g.setEndAfter(n),m(i,m9(i,g,o),!0)}}else m(i,n,!0)}else a&&mK(l)&&!mc(e).length?Cp(e,t,r):(s.setRng(ym(s.getRng())),mS(e,()=>{my(e,(e,t)=>{let r=t?e:m9(i,e,o);m(i,r,!1)})},er),e.nodeChanged()),CD(e.formatter,t).each(t=>{em(CB(e.selection),e=>xc(i,e,t,r))});C_(t,e)}fk(e,t,n,r)},xm=e=>eW(e,"vars"),xf=(e,t)=>{e.set({}),t.on("NodeChange",r=>{xb(t,r.element,e.get())}),t.on("FormatApply FormatRemove",r=>{let n=en.from(r.node).map(e=>mx(e)?e:e.startContainer).bind(e=>ou(e)?en.some(e):en.from(e.parentElement)).getOrThunk(()=>xg(t));xb(t,n,e.get())})},xg=e=>e.selection.getStart(),xp=(e,t,r,n,o)=>{let l=t=>{let l=e.formatter.matchNode(t,r,null!=o?o:{},n);return!I(l)},a=t=>!!y3(e,t,r)||!n&&j(e.formatter.matchNode(t,r,o,!0));return ev(t,l,a)},xh=(e,t)=>{let r=null!=t?t:xg(e);return ep(mU(e.dom,r),e=>ou(e)&&!oh(e))},xb=(e,t,r)=>{let n=xh(e,t);eF(r,(r,o)=>{let l=r=>{let l=xp(e,n,o,r.similar,xm(r)?r.vars:void 0),a=l.isSome();if(r.state.get()!==a){r.state.set(a);let i=l.getOr(t);xm(r)?r.callback(a,{node:i,format:o,parents:n}):em(r.callbacks,e=>e(a,{node:i,format:o,parents:n}))}};em([r.withSimilar,r.withoutSimilar],l),em(r.withVars,l)})},xv=(e,t,r,n,o,l)=>{let a=t.get();em(r.split(","),t=>{let r=eV(a,t).getOrThunk(()=>{let e={withSimilar:{state:a4(!1),similar:!0,callbacks:[]},withoutSimilar:{state:a4(!1),similar:!1,callbacks:[]},withVars:[]};return a[t]=e,e}),i=()=>{let r=xh(e);return xp(e,r,t,o,l).isSome()};if(I(l)){let s=o?r.withSimilar:r.withoutSimilar;s.callbacks.push(n),1===s.callbacks.length&&s.state.set(i())}else r.withVars.push({state:a4(i()),similar:o,vars:l,callback:n})}),t.set(a)},xy=(e,t,r)=>{let n=e.get();em(t.split(","),e=>eV(n,e).each(t=>{n[e]={withSimilar:{...t.withSimilar,callbacks:ep(t.withSimilar.callbacks,e=>e!==r)},withoutSimilar:{...t.withoutSimilar,callbacks:ep(t.withoutSimilar.callbacks,e=>e!==r)},withVars:ep(t.withVars,e=>e.callback!==r)}})),e.set(n)},xC=(e,t,r,n,o,l)=>(xv(e,t,r,n,o,l),{unbind:()=>xy(t,r,n)}),xx=(e,t,r,n)=>{let o=e.formatter.get(t);o&&(!y4(e,t,r,n)||"toggle"in o[0]&&!o[0].toggle?xu(e,t,r,n):xt(e,t,r,n))};function xw(e){return(xw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xk(e,t){return(xk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x_(e,t,r){return(x_=!function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&xk(o,r.prototype),o}:Reflect.construct).apply(null,arguments)}function xS(e){return function(e){if(Array.isArray(e))return xE(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return xE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xE(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xE(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var xN=Object.hasOwnProperty,xD=Object.setPrototypeOf,xR=Object.isFrozen,xA=Object.getPrototypeOf,xO=Object.getOwnPropertyDescriptor,xT=Object.freeze,xB=Object.seal,xP=Object.create,xL="undefined"!=typeof Reflect&&Reflect,xF=xL.apply,xM=xL.construct;xF||(xF=function(e,t,r){return e.apply(t,r)}),xT||(xT=function(e){return e}),xB||(xB=function(e){return e}),xM||(xM=function(e,t){return x_(e,xS(t))});var xI=xG(Array.prototype.forEach),xU=xG(Array.prototype.pop),xj=xG(Array.prototype.push),xz=xG(String.prototype.toLowerCase),xH=xG(String.prototype.match),x$=xG(String.prototype.replace),xq=xG(String.prototype.indexOf),xV=xG(String.prototype.trim),xW=xG(RegExp.prototype.test),xK=(l=TypeError,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return xM(l,t)});function xG(e){return function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return xF(e,t,n)}}function xY(e,t){xD&&xD(e,null);for(var r=t.length;r--;){var n=t[r];if("string"==typeof n){var o=xz(n);o!==n&&(xR(t)||(t[r]=o),n=o)}e[n]=!0}return e}function xX(e){var t,r=xP(null);for(t in e)xF(xN,e,[t])&&(r[t]=e[t]);return r}function xQ(e,t){for(;null!==e;){var r=xO(e,t);if(r){if(r.get)return xG(r.get);if("function"==typeof r.value)return xG(r.value)}e=xA(e)}return function(e){return console.warn("fallback value for",e),null}}var xJ=xT(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),xZ=xT(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),x0=xT(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),x1=xT(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),x2=xT(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),x3=xT(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),x8=xT(["#text"]),x5=xT(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),x6=xT(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),x9=xT(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),x4=xT(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),x7=xB(/\{\{[\w\W]*|[\w\W]*\}\}/gm),we=xB(/<%[\w\W]*|[\w\W]*%>/gm),wt=xB(/^data-[\-\w.\u00B7-\uFFFF]/),wr=xB(/^aria-[\-\w]+$/),wn=xB(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),wo=xB(/^(?:\w+script|data):/i),wl=xB(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),wa=xB(/^html$/i),wi=function(e,t){if("object"!==xw(e)||"function"!=typeof e.createPolicy)return null;var r=null,n="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(n)&&(r=t.currentScript.getAttribute(n));var o="dompurify"+(r?"#"+r:"");try{return e.createPolicy(o,{createHTML:function(e){return e}})}catch(l){return console.warn("TrustedTypes policy "+o+" could not be created."),null}},ws=function e(){var t,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof window?null:window,o=function(t){return e(t)};if(o.version="2.3.8",o.removed=[],!n||!n.document||9!==n.document.nodeType)return o.isSupported=!1,o;var l=n.document,a=n.document,i=n.DocumentFragment,s=n.HTMLTemplateElement,d=n.Node,c=n.Element,u=n.NodeFilter,m=n.NamedNodeMap,f=void 0===m?n.NamedNodeMap||n.MozNamedAttrMap:m,g=n.HTMLFormElement,p=n.DOMParser,h=n.trustedTypes,b=c.prototype,v=xQ(b,"cloneNode"),y=xQ(b,"nextSibling"),C=xQ(b,"childNodes"),x=xQ(b,"parentNode");if("function"==typeof s){var w=a.createElement("template");w.content&&w.content.ownerDocument&&(a=w.content.ownerDocument)}var k=wi(h,l),_=k?k.createHTML(""):"",S=a,E=S.implementation,N=S.createNodeIterator,D=S.createDocumentFragment,R=S.getElementsByTagName,A=l.importNode,O={};try{O=xX(a).documentMode?a.documentMode:{}}catch(T){}var B={};o.isSupported="function"==typeof x&&E&&void 0!==E.createHTMLDocument&&9!==O;var P=wn,L=null,F=xY({},[].concat(xS(xJ),xS(xZ),xS(x0),xS(x2),xS(x8))),M=null,I=xY({},[].concat(xS(x5),xS(x6),xS(x9),xS(x4))),U=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),j=null,z=null,H=!0,$=!0,q=!1,V=!1,W=!1,K=!1,G=!1,Y=!1,X=!1,Q=!1,J=!0,Z=!0,ee=!1,et={},er=null,en=xY({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),eo=null,el=xY({},["audio","video","img","source","image","track"]),ea=null,ei=xY({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),es="http://www.w3.org/1998/Math/MathML",ed="http://www.w3.org/2000/svg",ec="http://www.w3.org/1999/xhtml",eu=ec,em=!1,ef=["application/xhtml+xml","text/html"],eg=null,ep=a.createElement("form"),eh=function(e){return e instanceof RegExp||e instanceof Function},eb=function(e){eg&&eg===e||(e&&"object"===xw(e)||(e={}),L="ALLOWED_TAGS"in(e=xX(e))?xY({},e.ALLOWED_TAGS):F,M="ALLOWED_ATTR"in e?xY({},e.ALLOWED_ATTR):I,ea="ADD_URI_SAFE_ATTR"in e?xY(xX(ei),e.ADD_URI_SAFE_ATTR):ei,eo="ADD_DATA_URI_TAGS"in e?xY(xX(el),e.ADD_DATA_URI_TAGS):el,er="FORBID_CONTENTS"in e?xY({},e.FORBID_CONTENTS):en,j="FORBID_TAGS"in e?xY({},e.FORBID_TAGS):{},z="FORBID_ATTR"in e?xY({},e.FORBID_ATTR):{},et="USE_PROFILES"in e&&e.USE_PROFILES,H=!1!==e.ALLOW_ARIA_ATTR,$=!1!==e.ALLOW_DATA_ATTR,q=e.ALLOW_UNKNOWN_PROTOCOLS||!1,V=e.SAFE_FOR_TEMPLATES||!1,W=e.WHOLE_DOCUMENT||!1,Y=e.RETURN_DOM||!1,X=e.RETURN_DOM_FRAGMENT||!1,Q=e.RETURN_TRUSTED_TYPE||!1,G=e.FORCE_BODY||!1,J=!1!==e.SANITIZE_DOM,Z=!1!==e.KEEP_CONTENT,ee=e.IN_PLACE||!1,P=e.ALLOWED_URI_REGEXP||P,eu=e.NAMESPACE||ec,e.CUSTOM_ELEMENT_HANDLING&&eh(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(U.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&eh(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(U.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(U.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),r="application/xhtml+xml"===(t=t=-1===ef.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE)?function(e){return e}:xz,V&&($=!1),X&&(Y=!0),et&&(L=xY({},xS(x8)),M=[],!0===et.html&&(xY(L,xJ),xY(M,x5)),!0===et.svg&&(xY(L,xZ),xY(M,x6),xY(M,x4)),!0===et.svgFilters&&(xY(L,x0),xY(M,x6),xY(M,x4)),!0===et.mathMl&&(xY(L,x2),xY(M,x9),xY(M,x4))),e.ADD_TAGS&&(L===F&&(L=xX(L)),xY(L,e.ADD_TAGS)),e.ADD_ATTR&&(M===I&&(M=xX(M)),xY(M,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&xY(ea,e.ADD_URI_SAFE_ATTR),e.FORBID_CONTENTS&&(er===en&&(er=xX(er)),xY(er,e.FORBID_CONTENTS)),Z&&(L["#text"]=!0),W&&xY(L,["html","head","body"]),L.table&&(xY(L,["tbody"]),delete j.tbody),xT&&xT(e),eg=e)},ev=xY({},["mi","mo","mn","ms","mtext"]),ey=xY({},["foreignobject","desc","title","annotation-xml"]),eC=xY({},["title","style","font","a","script"]),ex=xY({},xZ);xY(ex,x0),xY(ex,x1);var ew=xY({},x2);xY(ew,x3);var ek=function(e){var t=x(e);t&&t.tagName||(t={namespaceURI:ec,tagName:"template"});var r=xz(e.tagName),n=xz(t.tagName);return e.namespaceURI===ed?t.namespaceURI===ec?"svg"===r:t.namespaceURI===es?"svg"===r&&("annotation-xml"===n||ev[n]):Boolean(ex[r]):e.namespaceURI===es?t.namespaceURI===ec?"math"===r:t.namespaceURI===ed?"math"===r&&ey[n]:Boolean(ew[r]):e.namespaceURI===ec&&(t.namespaceURI!==ed||!!ey[n])&&(t.namespaceURI!==es||!!ev[n])&&!ew[r]&&(eC[r]||!ex[r])},e_=function(e){xj(o.removed,{element:e});try{e.parentNode.removeChild(e)}catch(r){try{e.outerHTML=_}catch(t){e.remove()}}},eS=function(e,t){try{xj(o.removed,{attribute:t.getAttributeNode(e),from:t})}catch(r){xj(o.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!M[e]){if(Y||X)try{e_(t)}catch(n){}else try{t.setAttribute(e,"")}catch(l){}}},eE=function(e){if(G)e="<remove></remove>"+e;else{var r,n,o=xH(e,/^[\r\n\t ]+/);n=o&&o[0]}"application/xhtml+xml"===t&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var l=k?k.createHTML(e):e;if(eu===ec)try{r=new p().parseFromString(l,t)}catch(i){}if(!r||!r.documentElement){r=E.createDocument(eu,"template",null);try{r.documentElement.innerHTML=em?"":l}catch(s){}}var d=r.body||r.documentElement;return(e&&n&&d.insertBefore(a.createTextNode(n),d.childNodes[0]||null),eu===ec)?R.call(r,W?"html":"body")[0]:W?r.documentElement:d},eN=function(e){return N.call(e.ownerDocument||e,e,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT,null,!1)},eD=function(e){return"object"===xw(d)?e instanceof d:e&&"object"===xw(e)&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},eR=function(e,t,r){B[e]&&xI(B[e],function(e){e.call(o,t,r,eg)})},eA=function(e){if(eR("beforeSanitizeElements",e,null),e instanceof g&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof f)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore)||xW(/[\u0080-\uFFFF]/,e.nodeName))return e_(e),!0;var t,n=r(e.nodeName);if(eR("uponSanitizeElement",e,{tagName:n,allowedTags:L}),e.hasChildNodes()&&!eD(e.firstElementChild)&&(!eD(e.content)||!eD(e.content.firstElementChild))&&xW(/<[/\w]/g,e.innerHTML)&&xW(/<[/\w]/g,e.textContent)||"select"===n&&xW(/<template/i,e.innerHTML))return e_(e),!0;if(!L[n]||j[n]){if(!j[n]&&eT(n)&&(U.tagNameCheck instanceof RegExp&&xW(U.tagNameCheck,n)||U.tagNameCheck instanceof Function&&U.tagNameCheck(n)))return!1;if(Z&&!er[n]){var l=x(e)||e.parentNode,a=C(e)||e.childNodes;if(a&&l)for(var i=a.length,s=i-1;s>=0;--s)l.insertBefore(v(a[s],!0),y(e))}return e_(e),!0}return e instanceof c&&!ek(e)||("noscript"===n||"noembed"===n)&&xW(/<\/no(script|embed)/i,e.innerHTML)?(e_(e),!0):(V&&3===e.nodeType&&(t=x$(t=e.textContent,x7," "),t=x$(t,we," "),e.textContent!==t&&(xj(o.removed,{element:e.cloneNode()}),e.textContent=t)),eR("afterSanitizeElements",e,null),!1)},eO=function(e,t,r){if(J&&("id"===t||"name"===t)&&(r in a||r in ep))return!1;if($&&!z[t]&&xW(wt,t));else if(H&&xW(wr,t));else if(!M[t]||z[t]){if(!(eT(e)&&(U.tagNameCheck instanceof RegExp&&xW(U.tagNameCheck,e)||U.tagNameCheck instanceof Function&&U.tagNameCheck(e))&&(U.attributeNameCheck instanceof RegExp&&xW(U.attributeNameCheck,t)||U.attributeNameCheck instanceof Function&&U.attributeNameCheck(t))||"is"===t&&U.allowCustomizedBuiltInElements&&(U.tagNameCheck instanceof RegExp&&xW(U.tagNameCheck,r)||U.tagNameCheck instanceof Function&&U.tagNameCheck(r))))return!1}else if(ea[t]);else if(xW(P,x$(r,wl,"")));else if(("src"===t||"xlink:href"===t||"href"===t)&&"script"!==e&&0===xq(r,"data:")&&eo[e]);else if(q&&!xW(wo,x$(r,wl,"")));else if(r)return!1;return!0},eT=function(e){return e.indexOf("-")>0},eB=function(e){eR("beforeSanitizeAttributes",e,null);var t,n,o,l,a=e.attributes;if(a){var i={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:M};for(l=a.length;l--;){var s=(t=a[l]).name,d=t.namespaceURI;n="value"===s?t.value:xV(t.value),o=r(s);var c=n;if(i.attrName=o,i.attrValue=n,i.keepAttr=!0,i.forceKeepAttr=void 0,eR("uponSanitizeAttribute",e,i),n=i.attrValue,!i.forceKeepAttr){if(!i.keepAttr||xW(/\/>/i,n)||(V&&(n=x$(n,x7," "),n=x$(n,we," ")),!eO(r(e.nodeName),o,n))){eS(s,e);continue}if(n!==c)try{d?e.setAttributeNS(d,s,n):e.setAttribute(s,n)}catch(u){eS(s,e)}}}eR("afterSanitizeAttributes",e,null)}},eP=function e(t){var r,n=eN(t);for(eR("beforeSanitizeShadowDOM",t,null);r=n.nextNode();)eR("uponSanitizeShadowNode",r,null),eA(r)||(r.content instanceof i&&e(r.content),eB(r));eR("afterSanitizeShadowDOM",t,null)};return o.sanitize=function(e,t){if((em=!e)&&(e="<!-->"),"string"!=typeof e&&!eD(e)){if("function"!=typeof e.toString)throw xK("toString is not a function");if("string"!=typeof(e=e.toString()))throw xK("dirty is not a string, aborting")}if(!o.isSupported){if("object"===xw(n.toStaticHTML)||"function"==typeof n.toStaticHTML){if("string"==typeof e)return n.toStaticHTML(e);if(eD(e))return n.toStaticHTML(e.outerHTML)}return e}if(K||eb(t),o.removed=[],"string"==typeof e&&(ee=!1),ee){if(e.nodeName){var a,s,c,u,m,f=r(e.nodeName);if(!L[f]||j[f])throw xK("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof d)1===(s=(a=eE("<!---->")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===s.nodeName?a=s:"HTML"===s.nodeName?a=s:a.appendChild(s);else{if(!Y&&!V&&!W&&-1===e.indexOf("<"))return k&&Q?k.createHTML(e):e;if(!(a=eE(e)))return Y?null:Q?_:""}a&&G&&e_(a.firstChild);for(var g=eN(ee?e:a);c=g.nextNode();)3===c.nodeType&&c===u||eA(c)||(c.content instanceof i&&eP(c.content),eB(c),u=c);if(u=null,ee)return e;if(Y){if(X)for(m=D.call(a.ownerDocument);a.firstChild;)m.appendChild(a.firstChild);else m=a;return M.shadowroot&&(m=A.call(l,m,!0)),m}var p=W?a.outerHTML:a.innerHTML;return W&&L["!doctype"]&&a.ownerDocument&&a.ownerDocument.doctype&&a.ownerDocument.doctype.name&&xW(wa,a.ownerDocument.doctype.name)&&(p="<!DOCTYPE "+a.ownerDocument.doctype.name+">\n"+p),V&&(p=x$(p,x7," "),p=x$(p,we," ")),k&&Q?k.createHTML(p):p},o.setConfig=function(e){eb(e),K=!0},o.clearConfig=function(){eg=null,K=!1},o.isValidAttribute=function(e,t,n){return eg||eb({}),eO(r(e),r(t),n)},o.addHook=function(e,t){"function"==typeof t&&(B[e]=B[e]||[],xj(B[e],t))},o.removeHook=function(e){if(B[e])return xU(B[e])},o.removeHooks=function(e){B[e]&&(B[e]=[])},o.removeAllHooks=function(){B={}},o}();let wd=rr.explode,wc=()=>{let e={},t=(t,r)=>{em(wd(t),t=>{eW(e,t)||(e[t]={name:t,callbacks:[]}),e[t].callbacks.push(r)})},r=()=>eq(e),n=(t,r)=>{em(wd(t),t=>{if(eW(e,t)){if(j(r)){let n=e[t],o=ep(n.callbacks,e=>e!==r);o.length>0?n.callbacks=o:delete e[t]}else delete e[t]}})};return{addFilter:t,getFilters:r,removeFilter:n}},wu=(e,t)=>{em(t,t=>{e.attr(t,null)})},wm=(e,t,r)=>{e.addNodeFilter("font",e=>{em(e,e=>{let n=t.parse(e.attr("style")),o=e.attr("color"),l=e.attr("face"),a=e.attr("size");o&&(n.color=o),l&&(n["font-family"]=l),a&&tx(a).each(e=>{n["font-size"]=r[e-1]}),e.name="span",e.attr("style",t.serialize(n)),wu(e,["color","face","size"])})})},wf=(e,t,r)=>{e.addNodeFilter("strike",e=>{let n="html4"!==t.type;em(e,e=>{if(n)e.name="s";else{let t=r.parse(e.attr("style"));t["text-decoration"]="line-through",e.name="span",e.attr("style",r.serialize(t))}})})},wg=(e,t,r)=>{var n;let o=aP();t.convert_fonts_to_spans&&wm(e,o,rr.explode(null!==(n=t.font_size_legacy_values)&&void 0!==n?n:"")),wf(e,r,o)},wp=(e,t,r)=>{t.inline_styles&&wg(e,t,r)},wh=e=>fetch(e).then(e=>e.ok?e.blob():Promise.reject()).catch(()=>Promise.reject(`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`)),wb=e=>{let t=/([a-z0-9+\/=\s]+)/i.exec(e);return t?t[1]:""},wv=e=>{let[t,...r]=e.split(","),n=r.join(","),o=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(!o)return en.none();{let l=";base64"===o[2],a=l?wb(n):decodeURIComponent(n);return en.some({type:o[1],data:a,base64Encoded:l})}},wy=(e,t,r=!0)=>{let n=t;if(r)try{n=atob(t)}catch(o){return en.none()}let l=new Uint8Array(n.length);for(let a=0;a<l.length;a++)l[a]=n.charCodeAt(a);return en.some(new Blob([l],{type:e}))},wC=e=>new Promise((t,r)=>{wv(e).bind(({type:e,data:t,base64Encoded:r})=>wy(e,t,r)).fold(()=>r("Invalid data URI"),t)}),wx=e=>tm(e,"blob:")?wh(e):tm(e,"data:")?wC(e):Promise.reject("Unknown URI format"),ww=e=>new Promise((t,r)=>{let n=new FileReader;n.onloadend=()=>{t(n.result)},n.onerror=()=>{var e;r(null===(e=n.error)||void 0===e?void 0:e.message)},n.readAsDataURL(e)}),wk=0,w_=e=>(e||"blobid")+wk++,wS=(e,t,r)=>wv(e).bind(({data:e,type:n,base64Encoded:o})=>{if(t&&!o)return en.none();{let l=o?e:btoa(e);return r(l,n)}}),wE=(e,t,r)=>{let n=e.create(w_(),t,r);return e.add(n),n},wN=(e,t,r=!1)=>wS(t,r,(t,r)=>en.from(e.getByData(t,r)).orThunk(()=>wy(r,t).map(r=>wE(e,r,t)))),wD=(e,t)=>{let r=()=>Promise.reject("Invalid data URI");if(tm(t,"blob:")){let n=e.getByUri(t);return j(n)?Promise.resolve(n):wx(t).then(t=>ww(t).then(n=>wS(n,!1,r=>en.some(wE(e,t,r))).getOrThunk(r)))}return tm(t,"data:")?wN(e,t).fold(r,e=>Promise.resolve(e)):Promise.reject("Unknown image data format")},wR=e=>j(e.attr("data-mce-bogus")),wA=e=>e.attr("src")===t2.transparentSrc||j(e.attr("data-mce-placeholder")),wO=(e,t)=>{let{blob_cache:r}=t;if(r){let n=e=>{let t=e.attr("src");wA(e)||wR(e)||U(t)||wN(r,t,!0).each(t=>{e.attr("src",t.blobUri())})};e.addAttributeFilter("src",e=>em(e,n))}},wT=(e,t)=>{let r=e.schema;t.remove_trailing_brs&&e.addNodeFilter("br",(e,t,n)=>{let o=rr.extend({},r.getBlockElements()),l=r.getNonEmptyElements(),a=r.getWhitespaceElements();o.body=1;let i=e=>e.name in o&&lX(r,e);for(let s=0,d=e.length;s<d;s++){let c=e[s],u=c.parent;if(u&&o[u.name]&&c===u.lastChild){let m=c.prev;for(;m;){let f=m.name;if("span"!==f||"bookmark"!==m.attr("data-mce-type")){"br"===f&&(c=null);break}m=m.prev}if(c&&(c.remove(),yo(r,l,a,u))){let g=r.getElementRule(u.name);g&&(g.removeEmpty?u.remove():g.paddEmpty&&ye(n,i,u))}}else{let p=c;for(;u&&u.firstChild===p&&u.lastChild===p&&(p=u,!o[u.name]);)u=u.parent;if(p===u){let h=new hi("#text",3);h.value="\xa0",c.replace(h)}}}}),e.addAttributeFilter("href",e=>{let r=e.length,n=e=>{let t=e.split(" ").filter(e=>e.length>0);return t.concat(["noopener"]).sort().join(" ")},o=e=>{let t=e?rr.trim(e):"";return/\b(noopener)\b/g.test(t)?t:n(t)};if(!t.allow_unsafe_link_target)for(;r--;){let l=e[r];"a"===l.name&&"_blank"===l.attr("target")&&l.attr("rel",o(l.attr("rel")))}}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",e=>{let t=e.length,r,n,o,l;for(;t--;)if("a"===(l=e[t]).name&&l.firstChild&&!l.attr("href"))for(o=l.parent,r=l.lastChild;r&&o;)n=r.prev,o.insert(r,l),r=n}),t.fix_list_elements&&e.addNodeFilter("ul,ol",e=>{let t=e.length,r,n;for(;t--;)if((n=(r=e[t]).parent)&&("ul"===n.name||"ol"===n.name)){if(r.prev&&"li"===r.prev.name)r.prev.append(r);else{let o=new hi("li",1);o.attr("style","list-style-type: none"),r.wrap(o)}}});let n=r.getValidClasses();t.validate&&n&&e.addAttributeFilter("class",e=>{var t;let r=e.length;for(;r--;){let o=e[r],l=null!==(t=o.attr("class"))&&void 0!==t?t:"",a=rr.explode(l," "),i="";for(let s=0;s<a.length;s++){let d=a[s],c=!1,u=n["*"];u&&u[d]&&(c=!0),u=n[o.name],!c&&u&&u[d]&&(c=!0),c&&(i&&(i+=" "),i+=d)}i.length||(i=null),o.attr("class",i)}}),wO(e,t)},wB=rr.each,wP=rr.trim,wL=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],wF={ftp:21,http:80,https:443,mailto:25},wM=["img","video"],wI=(e,t)=>j(e)?!e:!j(t)||!ed(wM,t),wU=e=>{try{return decodeURIComponent(e)}catch(t){return unescape(e)}},wj=(e,t,r)=>{let n=wU(t);return!e.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(n)||!e.allow_html_data_urls&&(/^data:image\//i.test(n)?wI(e.allow_svg_data_urls,r)&&/^data:image\/svg\+xml/i.test(n):/^data:/i.test(n)))};class wz{constructor(e,t={}){this.path="",this.directory="",e=wP(e),this.settings=t;let r=t.base_uri,n=this;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e)){n.source=e;return}let o=0===e.indexOf("//");if(0!==e.indexOf("/")||o||(e=(r&&r.protocol||"http")+"://mce_host"+e),!/^[\w\-]*:?\/\//.test(e)){let l=r?r.path:new wz(document.location.href).directory;if((null==r?void 0:r.protocol)==="")e="//mce_host"+n.toAbsPath(l,e);else{let a=/([^#?]*)([#?]?.*)/.exec(e);a&&(e=(r&&r.protocol||"http")+"://mce_host"+n.toAbsPath(l,a[1])+a[2])}}e=e.replace(/@@/g,"(mce_at)");let i=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);i&&wB(wL,(e,t)=>{let r=i[t];r&&(r=r.replace(/\(mce_at\)/g,"@@")),n[e]=r}),r&&(n.protocol||(n.protocol=r.protocol),n.userInfo||(n.userInfo=r.userInfo),n.port||"mce_host"!==n.host||(n.port=r.port),n.host&&"mce_host"!==n.host||(n.host=r.host),n.source=""),o&&(n.protocol="")}static parseDataUri(e){let t;let r=decodeURIComponent(e).split(","),n=/data:([^;]+)/.exec(r[0]);return n&&(t=n[1]),{type:t,data:r[1]}}static isDomSafe(e,t,r={}){if(r.allow_script_urls)return!0;{let n=ay.decode(e).replace(/[\s\u0000-\u001F]+/g,"");return!wj(r,n,t)}}static getDocumentBaseUrl(e){var t;let r;return r=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?null!==(t=e.href)&&void 0!==t?t:"":e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}setPath(e){let t=/^(.*?)\/?(\w+)?$/.exec(e);t&&(this.path=t[0],this.directory=t[1],this.file=t[2]),this.source="",this.getURI()}toRelative(e){if("./"===e)return e;let t=new wz(e,{base_uri:this});if("mce_host"!==t.host&&this.host!==t.host&&t.host||this.port!==t.port||this.protocol!==t.protocol&&""!==t.protocol)return t.getURI();let r=this.getURI(),n=t.getURI();if(r===n||"/"===r.charAt(r.length-1)&&r.substr(0,r.length-1)===n)return r;let o=this.toRelPath(this.path,t.path);return t.query&&(o+="?"+t.query),t.anchor&&(o+="#"+t.anchor),o}toAbsolute(e,t){let r=new wz(e,{base_uri:this});return r.getURI(t&&this.isSameOrigin(r))}isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;let t=this.protocol?wF[this.protocol]:null;if(t&&(this.port||t)==(e.port||t))return!0}return!1}toRelPath(e,t){let r=0,n="",o,l,a=e.substring(0,e.lastIndexOf("/")).split("/"),i=t.split("/");if(a.length>=i.length){for(o=0,l=a.length;o<l;o++)if(o>=i.length||a[o]!==i[o]){r=o+1;break}}if(a.length<i.length){for(o=0,l=i.length;o<l;o++)if(o>=a.length||a[o]!==i[o]){r=o+1;break}}if(1===r)return t;for(o=0,l=a.length-(r-1);o<l;o++)n+="../";for(o=r-1,l=i.length;o<l;o++)o!==r-1?n+="/"+i[o]:n+=i[o];return n}toAbsPath(e,t){let r,n=0,o=/\/$/.test(t)?"/":"",l=e.split("/"),a=t.split("/"),i=[];wB(l,e=>{e&&i.push(e)});let s=[];for(let d=a.length-1;d>=0;d--)if(0!==a[d].length&&"."!==a[d]){if(".."===a[d]){n++;continue}if(n>0){n--;continue}s.push(a[d])}let c=i.length-n;return 0!==(r=c<=0?e_(s).join("/"):i.slice(0,c).join("/")+"/"+e_(s).join("/")).indexOf("/")&&(r="/"+r),o&&r.lastIndexOf("/")!==r.length-1&&(r+=o),r}getURI(e=!1){let t;return(!this.source||e)&&(t="",!e&&(this.protocol?t+=this.protocol+"://":t+="//",this.userInfo&&(t+=this.userInfo+"@"),this.host&&(t+=this.host),this.port&&(t+=":"+this.port)),this.path&&(t+=this.path),this.query&&(t+="?"+this.query),this.anchor&&(t+="#"+this.anchor),this.source=t),this.source}}let wH=rr.makeMap,w$=rr.extend,wq={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]},wV=rr.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),wW="data-mce-type",wK=(e,t)=>{let r={...wq};return r.PARSER_MEDIA_TYPE=t,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},wG=(e,t)=>{let r=ws(),n=t.getSpecialElements(),o=e.validate,l=0;return r.addHook("uponSanitizeElement",(r,a)=>{var i,s,d;8===r.nodeType&&!e.allow_conditional_comments&&/^\[if/i.test(null!==(i=r.nodeValue)&&void 0!==i?i:"")&&(r.nodeValue=" "+r.nodeValue);let c=a.tagName;if(1!==r.nodeType||"body"===c)return;let u=rV.fromDom(r),m=c.toLowerCase(),f=rw(u,wW),g=rC(u,"data-mce-bogus");if(!f&&T(g)){"all"===g?nF(u):nM(u);return}let p=t.getElementRule(m);if(o&&!p){eW(n,m)?nF(u):nM(u);return}if(a.allowedTags[c]=!0,o&&p&&!f){if(em(null!==(s=p.attributesForced)&&void 0!==s?s:[],e=>{rv(u,e.name,"{$uid}"===e.value?`mce_${l++}`:e.value)}),em(null!==(d=p.attributesDefault)&&void 0!==d?d:[],e=>{rw(u,e.name)||rv(u,e.name,"{$uid}"===e.value?`mce_${l++}`:e.value)}),p.attributesRequired&&!ec(p.attributesRequired,e=>rw(u,e))||p.removeEmptyAttrs&&r_(u)){nM(u);return}p.outputName&&p.outputName!==m&&i$(u,p.outputName)}}),r.addHook("uponSanitizeAttribute",(r,n)=>{let l=r.tagName.toLowerCase(),{attrName:a,attrValue:i}=n;n.keepAttr=!o||t.isValid(l,a)||tm(a,"data-")||tm(a,"aria-"),a in wV&&wj(e,i,l)&&(n.keepAttr=!1),n.keepAttr?(n.allowedAttributes[a]=!0,a in t.getBoolAttrs()&&(n.attrValue=a),e.allow_svg_data_urls&&tm(i,"data:image/svg+xml")&&(n.forceKeepAttr=!0)):r.hasAttribute(wW)&&("id"===a||"class"===a||"style"===a)&&(n.forceKeepAttr=!0)}),r},wY=(e,t,r)=>{let n=e.name,o=n in r&&"title"!==n&&"textarea"!==n,l=t.childNodes;for(let a=0,i=l.length;a<i;a++){let s=l[a],d=new hi(s.nodeName.toLowerCase(),s.nodeType);if(ou(s)){let c=s.attributes;for(let u=0,m=c.length;u<m;u++){let f=c[u];d.attr(f.name,f.value)}}else ox(s)?(d.value=s.data,o&&(d.raw=!0)):(o_(s)||ow(s)||ok(s))&&(d.value=s.data);wY(d,s,r),e.append(d)}},wX=(e,t,r)=>{let n=[];for(let o=e,l=o;o;l=o,o=o.walk()){let a=o;em(t,e=>e(a)),U(a.parent)&&a!==e?o=l:n.push(a)}for(let i=n.length-1;i>=0;i--){let s=n[i];em(r,e=>e(s))}},wQ=(e,t,r,n)=>{let o=r.validate,l=t.getNonEmptyElements(),a=t.getWhitespaceElements(),i=w$(wH("script,style,head,html,body,title,meta,param"),t.getBlockElements()),s=aA(t),d=/[ \t\r\n]+/g,c=/^[ \t\r\n]+/,u=/[ \t\r\n]+$/,m=e=>{let t=e.parent;for(;j(t);){if(t.name in a)return!0;t=t.parent}return!1},f=e=>{let r=e;for(;j(r);){if(r.name in s)return yo(t,l,a,r);r=r.parent}return!1},g=e=>e.name in i&&!lX(t,e),p=(t,r)=>{let o=r?t.prev:t.next;return!(j(o)||U(t.parent))&&g(t.parent)&&(t.parent!==e||!0===n.isRootContent)},h=e=>{var t;if(3===e.type&&!m(e)){let r=null!==(t=e.value)&&void 0!==t?t:"";r=r.replace(d," "),(yl(e.prev,g)||p(e,!0))&&(r=r.replace(c,"")),0===r.length?e.remove():e.value=r}},b=e=>{var r;if(1===e.type){let i=t.getElementRule(e.name);if(o&&i){let s=yo(t,l,a,e);i.paddInEmptyBlock&&s&&f(e)?ye(n,g,e):i.removeEmpty&&s?g(e)?e.remove():e.unwrap():i.paddEmpty&&(s||yt(e))&&ye(n,g,e)}}else if(3===e.type&&!m(e)){let d=null!==(r=e.value)&&void 0!==r?r:"";(e.next&&g(e.next)||p(e,!1))&&(d=d.replace(u,"")),0===d.length?e.remove():e.value=d}};return[h,b]},wJ=(e,t)=>{var r;let n=null!==(r=t.forced_root_block)&&void 0!==r?r:e.forced_root_block;return!1===n?"":!0===n?"p":n},wZ=(e={},t=aB())=>{let r=wc(),n=wc(),o={validate:!0,root_name:"body",...e},l=new DOMParser,a=wG(o,t),i=(e,r,n="html")=>{let i="xhtml"===n?"application/xhtml+xml":"text/html",s=eW(t.getSpecialElements(),r.toLowerCase()),d=s?`<${r}>${e}</${r}>`:e,c="xhtml"===n?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${d}</body></html>`:`<body>${d}</body>`,u=l.parseFromString(c,i).body;return a.sanitize(u,wK(o,i)),a.removed=[],s?u.firstChild:u},s=r.addFilter,d=r.getFilters,c=r.removeFilter,u=n.addFilter,m=n.getFilters,f=n.removeFilter,g=(e,r)=>{yd(t,e)&&r.push(e)},p=(e,r)=>{let n=T(r.attr(wW)),o=1===r.type&&!eW(e,r.name)&&!lY(t,r);return 3===r.type||o&&!n},h=(e,r)=>{let n=w$(wH("script,style,head,html,body,title,meta,param"),t.getBlockElements()),l=/^[ \t\r\n]+/,a=/[ \t\r\n]+$/,i=e.firstChild,s=null,d=e=>{var t,r;e&&((i=e.firstChild)&&3===i.type&&(i.value=null===(t=i.value)||void 0===t?void 0:t.replace(l,"")),(i=e.lastChild)&&3===i.type&&(i.value=null===(r=i.value)||void 0===r?void 0:r.replace(a,"")))};if(t.isValidChild(e.name,r.toLowerCase())){for(;i;){let c=i.next;p(n,i)?(s||((s=new hi(r,1)).attr(o.forced_root_block_attrs),e.insert(s,i)),s.append(i)):(d(s),s=null),i=c}d(s)}},b=(e,r={})=>{var n;let l=o.validate,a=null!==(n=r.context)&&void 0!==n?n:o.root_name,s=i(e,a,r.format);lH(t,s);let c=new hi(a,11);wY(c,s,t.getSpecialElements()),s.innerHTML="";let[u,f]=wQ(c,t,o,r),p=[],b={nodes:{},attributes:{}},v=e=>v6(d(),m(),e,b);if(wX(c,[u,v],[f,l?e=>g(e,p):q]),p.reverse(),l&&p.length>0){if(r.context){let{pass:y,fail:C}=eg(p,e=>e.parent===c);yi(C,t,v),r.invalid=y.length>0}else yi(p,t,v)}let x=wJ(o,r);return x&&("body"===c.name||r.isRootContent)&&h(c,x),r.invalid||v4(b,r),c},v={schema:t,addAttributeFilter:u,getAttributeFilters:m,removeAttributeFilter:f,addNodeFilter:s,getNodeFilters:d,removeNodeFilter:c,parse:b};return wT(v,o),wp(v,o,t),v},w0=e=>yK(e)?hx({validate:!1}).serialize(e):e,w1=(e,t)=>{let r=w0(e),n=t(r);if(n.isDefaultPrevented()||!yK(e))return n;if(n.content===r)return{...n,content:e};{let o=wZ({validate:!1,forced_root_block:!1}).parse(n.content,{context:e.name});return{...n,content:o}}},w2=(e,t)=>{if(t.no_events)return sY.value(t);{let r=fN(e,t);return r.isDefaultPrevented()?sY.error(fD(e,{content:"",...r}).content):sY.value(r)}},w3=(e,t,r)=>{if(r.no_events)return t;{let n=w1(t,t=>fD(e,{...r,content:t}));return n.content}},w8=(e,t)=>{if(t.no_events)return sY.value(t);{let r=w1(t.content,r=>fS(e,{...t,content:r}));return r.isDefaultPrevented()?(fE(e,r),sY.error(void 0)):sY.value(r)}},w5=(e,t,r)=>{r.no_events||fE(e,{...r,content:t})},w6=(e,t,r)=>({element:e,width:t,rows:r}),w9=(e,t)=>({element:e,cells:t}),w4=(e,t)=>({x:e,y:t}),w7=(e,t)=>rx(e,t).bind(tx).getOr(1),ke=(e,t,r,n,o)=>{let l=w7(o,"rowspan"),a=w7(o,"colspan"),i=e.rows;for(let s=r;s<r+l;s++){i[s]||(i[s]=w9(iz(n),[]));for(let d=t;d<t+a;d++){let c=i[s].cells;c[d]=s===r&&d===t?o:ij(o)}}},kt=(e,t,r)=>{let n=e.rows,o=n[r]?n[r].cells:[];return!!o[t]},kr=(e,t,r)=>{for(;kt(e,t,r);)t++;return t},kn=e=>eb(e,(e,t)=>t.cells.length>e?t.cells.length:e,0),ko=(e,t)=>{let r=e.rows;for(let n=0;n<r.length;n++){let o=r[n].cells;for(let l=0;l<o.length;l++)if(rQ(o[l],t))return en.some(w4(l,n))}return en.none()},kl=(e,t,r,n,o)=>{let l=[],a=e.rows;for(let i=r;i<=o;i++){let s=a[i].cells,d=t<n?s.slice(t,n+1):s.slice(n,t+1);l.push(w9(a[i].element,d))}return l},ka=(e,t,r)=>{let n=t.x,o=t.y,l=r.x,a=r.y,i=o<a?kl(e,n,o,l,a):kl(e,n,a,l,o);return w6(e.element,kn(i),i)},ki=(e,t)=>{let r=ij(e.element),n=rV.fromTag("tbody");return nP(n,t),nO(r,n),r},ks=e=>eu(e.rows,e=>{let t=eu(e.cells,e=>{let t=iz(e);return rk(t,"colspan"),rk(t,"rowspan"),t}),r=ij(e.element);return nP(r,t),r}),kd=e=>{let t=w6(ij(e),0,[]);return em(oM(e,"tr"),(e,r)=>{em(oM(e,"td,th"),(n,o)=>{ke(t,kr(t,o,r),r,e,n)})}),w6(t.element,kn(t.rows),t.rows)},kc=e=>ki(e,ks(e)),ku=(e,t,r)=>ko(e,t).bind(t=>ko(e,r).map(r=>ka(e,t,r))),km=e=>ey(e,e=>"ul"===rs(e)||"ol"===rs(e)),kf=(e,t)=>ey(e,e=>"li"===rs(e)&&mh(e,t)).fold(K([]),t=>km(e).map(e=>{let t=rV.fromTag(rs(e)),r=eH(nS(e),(e,t)=>tm(t,"list-style"));return nx(t,r),[rV.fromTag("li"),t]}).getOr([])),kg=(e,t)=>{let r=eb(t,(e,t)=>(nO(t,e),t),e);return t.length>0?gf([r]):r},kp=e=>oY(e)?r3(e).filter(oG).fold(K([]),t=>[e,t]):oG(e)?[e]:[],kh=(e,t)=>{let r=rV.fromDom(t.commonAncestorContainer),n=hK(r,e),o=ep(n,o0),l=kf(n,t),a=o.concat(l.length?l:kp(r));return eu(a,ij)},kb=()=>gf([]),kv=(e,t)=>kg(rV.fromDom(t.cloneContents()),kh(e,t)),ky=(e,t)=>oo(t,"table",X(rQ,e)),kC=(e,t)=>ky(e,t[0]).bind(e=>{let r=t[0],n=t[t.length-1],o=kd(e);return ku(o,r,n).map(e=>gf([kc(e)]))}).getOrThunk(kb),kx=(e,t)=>t.length>0&&t[0].collapsed?kb():kv(e,t[0]),kw=(e,t)=>{let r=md(t,e);return r.length>0?kC(e,r):kx(e,t)},kk=(e,t)=>t>=0&&t<e.length&&u3(e.charAt(t)),k_=e=>oF(e.innerText),kS=e=>e.map(e=>e.nodeName).getOr("div").toLowerCase(),kE=e=>en.from(e.selection.getRng()).map(t=>{var r;let n=en.from(e.dom.getParent(t.commonAncestorContainer,e.dom.isBlock)),o=e.getBody(),l=kS(n),a=rV.fromDom(t.cloneContents());hf(a),hg(a);let i=e.dom.add(o,l,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},a.dom),s=k_(i),d=oF(null!==(r=i.textContent)&&void 0!==r?r:"");if(e.dom.remove(i),!(kk(d,0)||kk(d,d.length-1)))return s;{let c=n.getOr(o),u=k_(c),m=u.indexOf(s);if(-1===m)return s;{let f=kk(u,m-1),g=kk(u,m+s.length);return(f?" ":"")+s+(g?" ":"")}}}).getOr(""),kN=(e,t)=>{let r=e.selection.getRng(),n=e.dom.create("body"),o=e.selection.getSel(),l=p0(e,mo(o)),a=t.contextual?kw(rV.fromDom(e.getBody()),l).dom:r.cloneContents();return a&&n.appendChild(a),e.selection.serializer.serialize(n,t)},kD=(e,t)=>{if("text"===t.format)return kE(e);{let r=kN(e,t);return"tree"===t.format?r:e.selection.isCollapsed()?"":r}},kR=(e,t)=>({...e,format:t,get:!0,selection:!0,getInner:!0}),kA=(e,t,r={})=>{let n=kR(r,t);return w2(e,n).fold(G,t=>{let r=kD(e,t);return w3(e,r,t)})},kO=(e,t)=>{let r=e.length+t.length+2,n=Array(r),o=Array(r),l=(e,t,r)=>({start:e,end:t,diag:r}),a=(r,n,o,l,i)=>{let d=s(r,n,o,l);if(null===d||d.start===n&&d.diag===n-l||d.end===r&&d.diag===r-o){let c=r,u=o;for(;c<n||u<l;)c<n&&u<l&&e[c]===t[u]?(i.push([0,e[c]]),++c,++u):n-r>l-o?(i.push([2,e[c]]),++c):(i.push([1,t[u]]),++u)}else{a(r,d.start,o,d.start-d.diag,i);for(let m=d.start;m<d.end;++m)i.push([0,e[m]]);a(d.end,n,d.end-d.diag,l,i)}},i=(r,n,o,a)=>{let i=r;for(;i-n<a&&i<o&&e[i]===t[i-n];)++i;return l(r,i,n)},s=(r,l,a,s)=>{let d,c,u,m,f;let g=l-r,p=s-a;if(0===g||0===p)return null;let h=g-p,b=p+g,v=(b%2==0?b:b+1)/2;for(d=0,n[1+v]=r,o[1+v]=l+1;d<=v;++d){for(c=-d;c<=d;c+=2){for(u=c+v,c===-d||c!==d&&n[u-1]<n[u+1]?n[u]=n[u+1]:n[u]=n[u-1]+1,f=(m=n[u])-r+a-c;m<l&&f<s&&e[m]===t[f];)n[u]=++m,++f;if(h%2!=0&&h-d<=c&&c<=h+d&&o[u-h]<=n[u])return i(o[u-h],c+r-a,l,s)}for(c=h-d;c<=h+d;c+=2){for(u=c+v-h,c===h-d||c!==h+d&&o[u+1]<=o[u-1]?o[u]=o[u+1]-1:o[u]=o[u-1],f=(m=o[u]-1)-r+a-c;m>=r&&f>=a&&e[m]===t[f];)o[u]=m--,f--;if(h%2==0&&-d<=c&&c<=d&&o[u]<=n[u+h])return i(o[u],c+r-a,l,s)}}return null},d=[];return a(0,e.length,0,t.length,d),d},kT=e=>ou(e)?e.outerHTML:ox(e)?ay.encodeRaw(e.data,!1):o_(e)?"<!--"+e.data+"-->":"",kB=e=>{let t;let r=document.createElement("div"),n=document.createDocumentFragment();for(e&&(r.innerHTML=e);t=r.firstChild;)n.appendChild(t);return n},kP=(e,t,r)=>{let n=kB(t);if(e.hasChildNodes()&&r<e.childNodes.length){let o=e.childNodes[r];e.insertBefore(n,o)}else e.appendChild(n)},kL=(e,t)=>{if(e.hasChildNodes()&&t<e.childNodes.length){let r=e.childNodes[t];e.removeChild(r)}},kF=(e,t)=>{let r=0;em(e,e=>{0===e[0]?r++:1===e[0]?(kP(t,e[1],r),r++):2===e[0]&&kL(t,r)})},kM=e=>ep(eu(eO(e.childNodes),kT),e=>e.length>0),kI=(e,t)=>{let r=eu(eO(t.childNodes),kT);return kF(kO(r,e),t),t},kU=e6(()=>document.implementation.createHTMLDocument("undo")),kj=e=>-1!==e.indexOf("</iframe>"),kz=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),kH=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),k$=e=>{let t=kM(e.getBody()),r=ew(t,t=>{let r=hm(e.serializer,t);return r.length>0?[r]:[]}),n=r.join("");return kj(n)?kz(r):kH(n)},kq=(e,t,r)=>{let n=r?t.beforeBookmark:t.bookmark;"fragmented"===t.type?kI(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:!(j(n)&&uI(n))||!n.isFakeCaret}),n&&(e.selection.moveToBookmark(n),e.selection.scrollIntoView())},kV=e=>"fragmented"===e.type?e.fragments.join(""):e.content,kW=e=>{let t=rV.fromTag("body",kU());return nz(t,kV(e)),em(oM(t,"*[data-mce-bogus]"),nM),nj(t)},kK=(e,t)=>kV(e)===kV(t),kG=(e,t)=>kW(e)===kW(t),kY=(e,t)=>!!e&&!!t&&(!!kK(e,t)||kG(e,t)),kX=e=>0===e.get(),kQ=(e,t,r)=>{kX(r)&&(e.typing=t)},kJ=(e,t)=>{e.typing&&(kQ(e,!1,t),e.add())},kZ=e=>{e.typing&&(e.typing=!1,e.add())},k0=(e,t,r)=>{kX(t)&&r.set(sV(e.selection))},k1=(e,t,r,n,o,l,a)=>{let i=k$(e),s=rr.extend(l||{},i);if(!kX(n)||e.removed)return null;let d=t.data[r.get()];if(e.dispatch("BeforeAddUndo",{level:s,lastLevel:d,originalEvent:a}).isDefaultPrevented()||d&&kY(d,s))return null;t.data[r.get()]&&o.get().each(e=>{t.data[r.get()].beforeBookmark=e});let c=d9(e);if(c&&t.data.length>c){for(let u=0;u<t.data.length-1;u++)t.data[u]=t.data[u+1];t.data.length--,r.set(t.data.length)}s.bookmark=sV(e.selection),r.get()<t.data.length-1&&(t.data.length=r.get()+1),t.data.push(s),r.set(t.data.length-1);let m={level:s,lastLevel:d,originalEvent:a};return r.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",m),e.dispatch("change",m)):e.dispatch("AddUndo",m),s},k2=(e,t,r)=>{t.data=[],r.set(0),t.typing=!1,e.dispatch("ClearUndos")},k3=(e,t,r,n,o)=>{if(t.transact(n)){let l=t.data[r.get()].bookmark,a=t.data[r.get()-1];kq(e,a,!0),t.transact(o)&&(t.data[r.get()-1].beforeBookmark=l)}},k8=(e,t,r)=>{let n;return t.get()<r.length-1&&(t.set(t.get()+1),kq(e,n=r[t.get()],!1),e.setDirty(!0),e.dispatch("Redo",{level:n})),n},k5=(e,t,r,n)=>{let o;return t.typing&&(t.add(),t.typing=!1,kQ(t,!1,r)),n.get()>0&&(n.set(n.get()-1),kq(e,o=t.data[n.get()],!0),e.setDirty(!0),e.dispatch("Undo",{level:o})),o},k6=e=>{e.clear(),e.add()},k9=(e,t,r)=>r.get()>0||t.typing&&t.data[0]&&!kY(k$(e),t.data[0]),k4=(e,t)=>t.get()<e.data.length-1&&!e.typing,k7=(e,t,r)=>(kJ(e,t),e.beforeChange(),e.ignore(r),e.add()),_e=(e,t)=>{try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}},_t=(e,t)=>{let r=e.dom,n=j(t)?t:e.getBody();em(r.select("table,a",n),t=>{switch(t.nodeName){case"TABLE":let n=cl(e),o=r.getAttrib(t,"border");(!o||"0"===o)&&e.hasVisual?r.addClass(t,n):r.removeClass(t,n);break;case"A":if(!r.getAttrib(t,"href")){let l=r.getAttrib(t,"name")||t.id,a=ca(e);l&&e.hasVisual?r.addClass(t,a):r.removeClass(t,a)}}}),e.dispatch("VisualAid",{element:t,hasVisual:e.hasVisual})},_r=e=>({init:{bindEvents:q},undoManager:{beforeChange:(t,r)=>k0(e,t,r),add:(t,r,n,o,l,a)=>k1(e,t,r,n,o,l,a),undo:(t,r,n)=>k5(e,t,r,n),redo:(t,r)=>k8(e,t,r),clear:(t,r)=>k2(e,t,r),reset:e=>k6(e),hasUndo:(t,r)=>k9(e,t,r),hasRedo:(e,t)=>k4(e,t),transact:(e,t,r)=>k7(e,t,r),ignore:(e,t)=>_e(e,t),extra:(t,r,n,o)=>k3(e,t,r,n,o)},formatter:{match:(t,r,n,o)=>y4(e,t,r,n,o),matchAll:(t,r)=>y7(e,t,r),matchNode:(t,r,n,o)=>y9(e,t,r,n,o),canApply:t=>Ct(e,t),closest:t=>Ce(e,t),apply:(t,r,n)=>xu(e,t,r,n),remove:(t,r,n,o)=>xt(e,t,r,n,o),toggle:(t,r,n)=>xx(e,t,r,n),formatChanged:(t,r,n,o,l)=>xC(e,t,r,n,o,l)},editor:{getContent:t=>hv(e,t),setContent:(t,r)=>yJ(e,t,r),insertContent:(t,r)=>yW(e,t,r),addVisual:t=>_t(e,t)},selection:{getContent:(t,r)=>kA(e,t,r)},autocompleter:{addDecoration:t=>p7(e,t),removeDecoration:()=>hr(e,rV.fromDom(e.getBody()))},raw:{getModel:()=>en.none()}}),_n=e=>{let t=e=>B(e)?e:{},{init:r,undoManager:n,formatter:o,editor:l,selection:a,autocompleter:i,raw:s}=e;return{init:{bindEvents:r.bindEvents},undoManager:{beforeChange:n.beforeChange,add:n.add,undo:n.undo,redo:n.redo,clear:n.clear,reset:n.reset,hasUndo:n.hasUndo,hasRedo:n.hasRedo,transact:(e,t,r)=>n.transact(r),ignore:(e,t)=>n.ignore(t),extra:(e,t,r,o)=>n.extra(r,o)},formatter:{match:(e,r,n,l)=>o.match(e,t(r),l),matchAll:o.matchAll,matchNode:o.matchNode,canApply:e=>o.canApply(e),closest:e=>o.closest(e),apply:(e,r,n)=>o.apply(e,t(r)),remove:(e,r,n,l)=>o.remove(e,t(r)),toggle:(e,r,n)=>o.toggle(e,t(r)),formatChanged:(e,t,r,n,l)=>o.formatChanged(t,r,n,l)},editor:{getContent:e=>l.getContent(e),setContent:(e,t)=>({content:l.setContent(e,t),html:""}),insertContent:(e,t)=>(l.insertContent(e),""),addVisual:l.addVisual},selection:{getContent:(e,t)=>a.getContent(t)},autocompleter:{addDecoration:i.addDecoration,removeDecoration:i.removeDecoration},raw:{getModel:()=>en.some(s.getRawModel())}}},_o=()=>{let e=K(null),t=K("");return{init:{bindEvents:q},undoManager:{beforeChange:q,add:e,undo:e,redo:e,clear:q,reset:q,hasUndo:et,hasRedo:et,transact:e,ignore:q,extra:q},formatter:{match:et,matchAll:K([]),matchNode:K(void 0),canApply:et,closest:t,apply:q,remove:q,toggle:q,formatChanged:K({unbind:q})},editor:{getContent:t,setContent:K({content:"",html:""}),insertContent:K(""),addVisual:q},selection:{getContent:t},autocompleter:{addDecoration:q,removeDecoration:q},raw:{getModel:K(en.none())}}},_l=e=>eW(e.plugins,"rtc"),_a=e=>eV(e.plugins,"rtc").bind(e=>en.from(e.setup)),_i=e=>{let t=e;return _a(e).fold(()=>(t.rtcInstance=_r(e),en.none()),e=>(t.rtcInstance=_o(),en.some(()=>e().then(e=>(t.rtcInstance=_n(e),e.rtc.isRemote)))))},_s=e=>e.rtcInstance?e.rtcInstance:_r(e),_d=e=>{let t=e.rtcInstance;if(t)return t;throw Error("Failed to get RTC instance not yet initialized.")},_c=(e,t,r)=>{_d(e).undoManager.beforeChange(t,r)},_u=(e,t,r,n,o,l,a)=>_d(e).undoManager.add(t,r,n,o,l,a),_m=(e,t,r,n)=>_d(e).undoManager.undo(t,r,n),_f=(e,t,r)=>_d(e).undoManager.redo(t,r),_g=(e,t,r)=>{_d(e).undoManager.clear(t,r)},_p=(e,t)=>{_d(e).undoManager.reset(t)},_h=(e,t,r)=>_d(e).undoManager.hasUndo(t,r),_b=(e,t,r)=>_d(e).undoManager.hasRedo(t,r),_v=(e,t,r,n)=>_d(e).undoManager.transact(t,r,n),_y=(e,t,r)=>{_d(e).undoManager.ignore(t,r)},_C=(e,t,r,n,o)=>{_d(e).undoManager.extra(t,r,n,o)},_x=(e,t,r,n,o)=>_d(e).formatter.match(t,r,n,o),_w=(e,t,r)=>_d(e).formatter.matchAll(t,r),_k=(e,t,r,n,o)=>_d(e).formatter.matchNode(t,r,n,o),__=(e,t)=>_d(e).formatter.canApply(t),_S=(e,t)=>_d(e).formatter.closest(t),_E=(e,t,r,n)=>{_d(e).formatter.apply(t,r,n)},_N=(e,t,r,n,o)=>{_d(e).formatter.remove(t,r,n,o)},_D=(e,t,r,n)=>{_d(e).formatter.toggle(t,r,n)},_R=(e,t,r,n,o,l)=>_d(e).formatter.formatChanged(t,r,n,o,l),_A=(e,t)=>_s(e).editor.getContent(t),_O=(e,t,r)=>_s(e).editor.setContent(t,r),_T=(e,t,r)=>_s(e).editor.insertContent(t,r),_B=(e,t,r)=>_d(e).selection.getContent(t,r),_P=(e,t)=>_d(e).editor.addVisual(t),_L=e=>_d(e).init.bindEvents(),_F=(e,t)=>_d(e).autocompleter.addDecoration(t),_M=e=>_d(e).autocompleter.removeDecoration(),_I=(e,t={})=>{let r=t.format?t.format:"html";return _B(e,r,t)},_U=e=>0===e.dom.length?(nF(e),en.none()):en.some(e),_j=(e,t)=>e.filter(e=>fd.isBookmarkNode(e.dom)).bind(t?r4:r9),_z=(e,t,r,n)=>{let o=e.dom,l=t.dom,a=n?o.length:l.length;n?(bD(o,l,!1,!n),r.setStart(l,a)):(bD(l,o,!1,!n),r.setEnd(l,a))},_H=(e,t)=>{r3(e).each(r=>{let n=e.dom;t&&bm(r,sg(n,0))?bE(n,0):!t&&bg(r,sg(n,n.length))&&bN(n,n.length)})},_$=(e,t,r,n)=>{e.bind(e=>((n?bN:bE)(e.dom,n?e.dom.length:0),t.filter(rf).map(t=>_z(e,t,r,n)))).orThunk(()=>{let e=_j(t,n).or(t).filter(rf);return e.map(e=>_H(e,n))})},_q=(e,t)=>{let r=en.from(t.firstChild).map(rV.fromDom),n=en.from(t.lastChild).map(rV.fromDom);e.deleteContents(),e.insertNode(t);let o=r.bind(r9).filter(rf).bind(_U),l=n.bind(r4).filter(rf).bind(_U);_$(o,r,e,!0),_$(l,n,e,!1),e.collapse(!1)},_V=(e,t)=>({format:"html",...e,set:!0,selection:!0,content:t}),_W=(e,t)=>{if("raw"===t.format)return t.content;{let r=e.selection.getRng(),n=e.dom.getParent(r.commonAncestorContainer,e.dom.isBlock),o=n?{context:n.nodeName.toLowerCase()}:{},l=e.parser.parse(t.content,{forced_root_block:!1,...o,...t});return hx({validate:!1},e.schema).serialize(l)}},_K=(e,t,r={})=>{let n=_V(r,t);w8(e,n).each(t=>{let r=_W(e,t),n=e.selection.getRng();_q(n,n.createContextualFragment(r)),e.selection.setRng(n),g9(e,n),w5(e,r,t)})},_G=(e,t,r)=>{if(eW(e,t)){let n=ep(e[t],e=>e!==r);0===n.length?delete e[t]:e[t]=n}};var _Y=(e,t)=>{let r,n;let o=(t,r)=>ey(r,r=>e.is(r,t)),l=t=>e.getParents(t,void 0,e.getRoot()),a=()=>{r={},n={},t.on("NodeChange",e=>{let t=e.element,a=l(t),i={};eF(r,(e,t)=>{o(t,a).each(r=>{n[t]||(em(e,e=>{e(!0,{node:r,selector:t,parents:a})}),n[t]=e),i[t]=e})}),eF(n,(e,r)=>{i[r]||(delete n[r],em(e,e=>{e(!1,{node:t,selector:r,parents:a})}))})})};return{selectorChangedWithUnbind:(e,i)=>(r||a(),r[e]||(r[e]=[]),r[e].push(i),o(e,l(t.selection.getStart())).each(()=>{n[e]=r[e]}),{unbind:()=>{_G(r,e,i),_G(n,e,i)}})}};let _X=e=>!!(e&&e.ownerDocument)&&rJ(rV.fromDom(e.ownerDocument),rV.fromDom(e)),_Q=e=>!!e&&_X(e.startContainer)&&_X(e.endContainer),_J=(e,t,r,n)=>{let o,l;let{selectorChangedWithUnbind:a}=_Y(e,n),i=(t,r)=>{let o=e.createRng();j(t)&&j(r)?(o.setStart(t,r),o.setEnd(t,r),y(o),h(!1)):(mb(e,o,n.getBody(),!0),y(o))},s=e=>_I(n,e),d=(e,t)=>_K(n,e,t),c=e=>pG(n.getBody(),v(),e),u=e=>pY(n.getBody(),v(),e),m=(e,t)=>B.getBookmark(e,t),f=e=>B.moveToBookmark(e),g=(t,r)=>(pZ(e,t,r).each(y),t),p=()=>{let e=v(),t=b();return!!e&&!e.item&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},h=e=>{let t=v();t.collapse(!!e),y(t)},b=()=>t.getSelection?t.getSelection():t.document.selection,v=()=>{let r;let a=(e,t,r)=>{try{return t.compareBoundaryPoints(e,r)}catch(n){return -1}},i=t.document;if(j(n.bookmark)&&!pH(n)){let s=pf(n);if(s.isSome())return s.map(e=>p0(n,[e])[0]).getOr(i.createRange())}try{let d=b();d&&!oc(d.anchorNode)&&(r=d.rangeCount>0?d.getRangeAt(0):i.createRange(),r=p0(n,[r])[0])}catch(c){}if(r||(r=i.createRange()),oS(r.startContainer)&&r.collapsed){let u=e.getRoot();r.setStart(u,0),r.setEnd(u,0)}return o&&l&&(0===a(r.START_TO_START,r,o)&&0===a(r.END_TO_END,r,o)?r=l:(o=null,l=null)),r},y=(e,t)=>{if(!_Q(e))return;let r=b(),a=n.dispatch("SetSelectionRange",{range:e,forward:t});if(e=a.range,r){l=e;try{r.removeAllRanges(),r.addRange(e)}catch(i){}!1===t&&r.extend&&(r.collapse(e.endContainer,e.endOffset),r.extend(e.startContainer,e.startOffset)),o=r.rangeCount>0?r.getRangeAt(0):null}if(!e.collapsed&&e.startContainer===e.endContainer&&(null==r?void 0:r.setBaseAndExtent)&&e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()){let s=e.startContainer.childNodes[e.startOffset];s&&"IMG"===s.nodeName&&(r.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),(r.anchorNode!==e.startContainer||r.focusNode!==e.endContainer)&&r.setBaseAndExtent(s,0,s,1))}n.dispatch("AfterSetSelectionRange",{range:e,forward:t})},C=t=>(d(e.getOuterHTML(t)),t),x=()=>pQ(n.getBody(),v()),w=(t,r)=>pJ(e,v(),t,r),k=()=>{let t=b(),r=null==t?void 0:t.anchorNode,n=null==t?void 0:t.focusNode;if(!t||!r||!n||oc(r)||oc(n))return!0;let o=e.createRng(),l=e.createRng();try{o.setStart(r,t.anchorOffset),o.collapse(!0),l.setStart(n,t.focusOffset),l.collapse(!0)}catch(a){return!0}return 0>=o.compareBoundaryPoints(o.START_TO_START,l)},_=()=>{let t=v(),r=b();if(!ma(r)&&mv(n)){let o=gN(e,t);return o.each(e=>{y(e,k())}),o.getOr(t)}return t},S=(e,t)=>(a(e,t),T),E=()=>{let t;let r=e.getRoot();for(;r&&"BODY"!==r.nodeName;){if(r.scrollHeight>r.clientHeight){t=r;break}r=r.parentNode}return t},N=(e,t)=>{j(e)?g6(n,e,t):g9(n,v(),t)},D=(e,t)=>y(gh(e,t,n.getDoc())),R=()=>{let e=v();return e.collapsed?sg.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},A=()=>{t=o=l=null,P.destroy()},O=(t={type:"word"})=>y(gA(e).expand(v(),t)),T={dom:e,win:t,serializer:r,editor:n,expand:O,collapse:h,setCursorLocation:i,getContent:s,setContent:d,getBookmark:m,moveToBookmark:f,select:g,isCollapsed:p,isForward:k,setNode:C,getNode:x,getSel:b,setRng:y,getRng:v,getStart:c,getEnd:u,getSelectedBlocks:w,normalize:_,selectorChanged:S,selectorChangedWithUnbind:a,getScrollContainer:E,scrollIntoView:N,placeCaretAt:D,getBoundingClientRect:R,destroy:A},B=fd(T),P=fz(T,n);return T.bookmarkManager=B,T.controlSelection=P,T},_Z=(e,t,r)=>{e.addAttributeFilter("data-mce-tabindex",(e,t)=>{let r=e.length;for(;r--;){let n=e[r];n.attr("tabindex",n.attr("data-mce-tabindex")),n.attr(t,null)}}),e.addAttributeFilter("src,href,style",(e,n)=>{let o="data-mce-"+n,l=t.url_converter,a=t.url_converter_scope,i=e.length;for(;i--;){let s=e[i],d=s.attr(o);void 0!==d?(s.attr(n,d.length>0?d:null),s.attr(o,null)):(d=s.attr(n),"style"===n?d=r.serializeStyle(r.parseStyle(d),s.name):l&&(d=l.call(a,d,n,s.name)),s.attr(n,d.length>0?d:null))}}),e.addAttributeFilter("class",e=>{let t=e.length;for(;t--;){let r=e[t],n=r.attr("class");n&&(n=n.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),r.attr("class",n.length>0?n:null))}}),e.addAttributeFilter("data-mce-type",(e,t,r)=>{let n=e.length;for(;n--;){let o=e[n];if("bookmark"===o.attr("data-mce-type")&&!r.cleanup){let l=en.from(o.firstChild).exists(e=>{var t;return!oL(null!==(t=e.value)&&void 0!==t?t:"")});l?o.unwrap():o.remove()}}}),e.addNodeFilter("noscript",e=>{var t;let r=e.length;for(;r--;){let n=e[r].firstChild;n&&(n.value=ay.decode(null!==(t=n.value)&&void 0!==t?t:""))}}),e.addNodeFilter("script,style",(e,r)=>{var n;let o=e=>e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,""),l=e.length;for(;l--;){let a=e[l],i=a.firstChild,s=null!==(n=null==i?void 0:i.value)&&void 0!==n?n:"";if("script"===r){let d=a.attr("type");d&&a.attr("type","mce-no/type"===d?null:d.replace(/^mce\-/,"")),"xhtml"===t.element_format&&i&&s.length>0&&(i.value="// <![CDATA[\n"+o(s)+"\n// ]]>")}else"xhtml"===t.element_format&&i&&s.length>0&&(i.value="<!--\n"+o(s)+"\n-->")}}),e.addNodeFilter("#comment",e=>{let n=e.length;for(;n--;){let o=e[n],l=o.value;t.preserve_cdata&&(null==l?void 0:l.indexOf("[CDATA["))===0?(o.name="#cdata",o.type=4,o.value=r.decode(l.replace(/^\[CDATA\[|\]\]$/g,""))):(null==l?void 0:l.indexOf("mce:protected "))===0&&(o.name="#text",o.type=3,o.raw=!0,o.value=unescape(l).substr(14))}}),e.addNodeFilter("xml:namespace,input",(e,t)=>{let r=e.length;for(;r--;){let n=e[r];7===n.type?n.remove():1!==n.type||"input"!==t||n.attr("type")||n.attr("type","text")}}),e.addAttributeFilter("data-mce-type",t=>{em(t,t=>{"format-caret"===t.attr("data-mce-type")&&(t.isEmpty(e.schema.getNonEmptyElements())?t.remove():t.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(e,t)=>{let r=e.length;for(;r--;)e[r].attr(t,null)})},_0=e=>{let t=e=>(null==e?void 0:e.name)==="br",r=e.lastChild;if(t(r)){let n=r.prev;t(n)&&(r.remove(),n.remove())}},_1=(e,t,r)=>{let n;let o=e.dom,l=t.cloneNode(!0),a=document.implementation;if(a.createHTMLDocument){let i=a.createHTMLDocument("");rr.each("BODY"===l.nodeName?l.childNodes:[l],e=>{i.body.appendChild(i.importNode(e,!0))}),l="BODY"!==l.nodeName?i.body.firstChild:i.body,n=o.doc,o.doc=i}return fu(e,{...r,node:l}),n&&(o.doc=n),l},_2=(e,t)=>j(e)&&e.hasEventListeners("PreProcess")&&!t.no_events,_3=(e,t,r)=>_2(e,r)?_1(e,t,r):t,_8=(e,t,r)=>{-1===rr.inArray(t,r)&&(e.addAttributeFilter(r,(e,t)=>{let r=e.length;for(;r--;)e[r].attr(t,null)}),t.push(r))},_5=(e,t,r)=>{if(t.no_events||!e)return r;{let n=fm(e,{...t,content:r});return n.content}},_6=(e,t,r)=>{let n=oF(r.getInner?t.innerHTML:e.getOuterHTML(t));return r.selection||oJ(rV.fromDom(t))?n:rr.trim(n)},_9=(e,t,r)=>{let n=r.selection?{forced_root_block:!1,...r}:r,o=e.parse(t,n);return _0(o),o},_4=(e,t,r)=>{let n=hx(e,t);return n.serialize(r)},_7=(e,t,r,n,o)=>{let l=_4(t,r,n);return _5(e,o,l)},Se=(e,t)=>{let r=["data-mce-selected"],n=t&&t.dom?t.dom:a5.DOM,o=t&&t.schema?t.schema:aB(e);e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs=!("remove_trailing_brs"in e)||e.remove_trailing_brs;let l=wZ(e,o);_Z(l,e,n);let a=(r,a={})=>{let i={format:"html",...a},s=_3(t,r,i),d=_6(n,s,i),c=_9(l,d,i);return"tree"===i.format?c:_7(t,e,o,c,i)};return{schema:o,addNodeFilter:l.addNodeFilter,addAttributeFilter:l.addAttributeFilter,serialize:a,addRules:o.addValidElements,setRules:o.setValidElements,addTempAttr:X(_8,l,r),getTempAttrs:K(r),getNodeFilters:l.getNodeFilters,getAttributeFilters:l.getAttributeFilters,removeNodeFilter:l.removeNodeFilter,removeAttributeFilter:l.removeAttributeFilter}},St=(e,t)=>{let r=Se(e,t);return{schema:r.schema,addNodeFilter:r.addNodeFilter,addAttributeFilter:r.addAttributeFilter,serialize:r.serialize,addRules:r.addRules,setRules:r.setRules,addTempAttr:r.addTempAttr,getTempAttrs:r.getTempAttrs,getNodeFilters:r.getNodeFilters,getAttributeFilters:r.getAttributeFilters,removeNodeFilter:r.removeNodeFilter,removeAttributeFilter:r.removeAttributeFilter}},Sr=(e,t)=>({...e,format:t,get:!0,getInner:!0}),Sn=(e,t={})=>{let r=t.format?t.format:"html",n=Sr(t,r);return w2(e,n).fold(G,t=>{let r=_A(e,t);return w3(e,r,t)})},So=(e,t)=>({format:"html",...e,set:!0,content:t}),Sl=(e,t,r={})=>{let n=So(r,t);return w8(e,n).map(t=>{let r=_O(e,t.content,t);return w5(e,r.html,t),r.content}).getOr(t)},Sa="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),Si="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),Ss=e=>{let t=ep(Sa,t=>eW(e,t)),r=e.forced_root_block;return(!1===r||""===r)&&t.push("forced_root_block (false only)"),eN(t)},Sd=e=>{let t=rr.makeMap(e.plugins," "),r=e=>eW(t,e),n=ep(Si,r);return eN(n)},Sc=(e,t)=>{let r=Ss(e),n=Sd(t),o=n.length>0,l=r.length>0,a="mobile"===t.theme;if(o||l||a){let i=a?`

Themes:
- mobile`:"",s=o?`

Plugins:
- ${n.join("\n- ")}`:"",d=l?`

Options:
- ${r.join("\n- ")}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+i+s+d)}},Su=(e,t)=>{Sc(e,t)},Sm=a5.DOM,Sf=e=>{Sm.setStyle(e.id,"display",e.orgDisplay)},Sg=e=>en.from(e).each(e=>e.destroy()),Sp=e=>{let t=e;t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null;let r=e.selection;if(r){let n=r.dom;t.selection=r.win=r.dom=n.doc=null}},Sh=e=>{let t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,delete t._mceOldSubmit),Sm.unbind(t,"submit reset",e.formEventDelegate))},Sb=e=>{if(!e.removed){let{_selectionOverrides:t,editorUpload:r}=e,n=e.getBody(),o=e.getElement();n&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&j(null==o?void 0:o.nextSibling)&&Sm.remove(o.nextSibling),ff(e),e.editorManager.remove(e),!e.inline&&n&&Sf(e),fg(e),Sm.remove(e.getContainer()),Sg(t),Sg(r),e.destroy()}},Sv=(e,t)=>{let{selection:r,dom:n}=e;if(!e.destroyed){if(!t&&!e.removed){e.remove();return}t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),Sg(r),Sg(n)),Sh(e),Sp(e),e.destroyed=!0}},Sy=(()=>{let e={},t=(t,r)=>{e[t]=r},r=t=>e[t]?e[t]:{icons:{}},n=t=>eW(e,t);return{add:t,get:r,has:n}})(),SC=ig.ModelManager,Sx=(e,t)=>{let r=t.dom;return r[e]},Sw=(e,t)=>parseInt(nw(t,e),10),Sk=X(Sx,"clientWidth"),S_=X(Sx,"clientHeight"),SS=X(Sw,"margin-top"),SE=X(Sw,"margin-left"),SN=e=>e.dom.getBoundingClientRect(),SD=(e,t,r)=>{let n=Sk(e),o=S_(e);return t>=0&&r>=0&&t<=n&&r<=o},SR=(e,t,r,n)=>{let o=SN(t),l=e?o.left+t.dom.clientLeft+SE(t):0,a=e?o.top+t.dom.clientTop+SS(t):0;return{x:r-l,y:n-a}},SA=(e,t,r)=>{let n=rV.fromDom(e.getBody()),o=e.inline?n:r1(n),l=SR(e.inline,o,t,r);return SD(o,l.x,l.y)},SO=e=>en.from(e).map(rV.fromDom),ST=e=>{let t=e.inline?e.getBody():e.getContentAreaContainer();return SO(t).map(nb).getOr(!1)};var SB=()=>{let e=()=>{throw Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};let SP=e=>{let t=[],r=()=>{let t=e.theme;return t&&t.getNotificationManagerImpl?t.getNotificationManagerImpl():SB()},n=()=>en.from(t[0]),o=(e,t)=>e.type===t.type&&e.text===t.text&&!e.progressBar&&!e.timeout&&!t.progressBar&&!t.timeout,l=()=>{em(t,e=>{e.reposition()})},a=e=>{t.push(e)},i=e=>{eC(t,t=>t===e).each(e=>{t.splice(e,1)})},s=(s,d=!0)=>e.removed||!ST(e)?{}:(d&&e.dispatch("BeforeOpenNotification",{notification:s}),ey(t,e=>o(r().getArgs(e),s)).getOrThunk(()=>{e.editorManager.setActive(e);let t=r().open(s,()=>{i(t),l(),n().fold(()=>e.focus(),e=>g4(rV.fromDom(e.getEl())))});return a(t),l(),e.dispatch("OpenNotification",{notification:{...t}}),t})),d=()=>{n().each(e=>{r().close(e),i(e),l()})},c=K(t);return e.on("SkinLoaded",()=>{let t=dV(e);t&&s({text:t,type:"warning",timeout:0},!1),l()}),e.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(l)}),e.on("remove",()=>{em(t.slice(),e=>{r().close(e)})}),{open:s,close:d,getNotifications:c}},SL=ig.PluginManager,SF=ig.ThemeManager;var SM=()=>{let e=()=>{throw Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};let SI=e=>{let t=[],r=()=>{let t=e.theme;return t&&t.getWindowManagerImpl?t.getWindowManagerImpl():SM()},n=(e,t)=>(...r)=>t?t.apply(e,r):void 0,o=t=>{e.dispatch("OpenWindow",{dialog:t})},l=t=>{e.dispatch("CloseWindow",{dialog:t})},a=e=>{t.push(e),o(e)},i=r=>{l(r),0===(t=ep(t,e=>e!==r)).length&&e.focus()},s=()=>en.from(t[t.length-1]),d=t=>{e.editorManager.setActive(e),pm(e),e.ui.show();let r=t();return a(r),r},c=(e,t)=>d(()=>r().open(e,t,i)),u=e=>d(()=>r().openUrl(e,i)),m=(e,t,o)=>{let l=r();l.alert(e,n(o||l,t))},f=(e,t,o)=>{let l=r();l.confirm(e,n(o||l,t))},g=()=>{s().each(e=>{r().close(e),i(e)})};return e.on("remove",()=>{em(t,e=>{r().close(e)})}),{open:c,openUrl:u,alert:m,confirm:f,close:g}},SU=(e,t)=>{e.notificationManager.open({type:"error",text:t})},Sj=(e,t)=>{e._skinLoaded?SU(e,t):e.on("SkinLoaded",()=>{SU(e,t)})},Sz=(e,t)=>{Sj(e,im.translate(["Failed to upload image: {0}",t]))},SH=(e,t,r)=>{fw(e,t,{message:r}),console.error(r)},S$=(e,t,r)=>r?`Failed to load ${e}: ${r} from url ${t}`:`Failed to load ${e} url: ${t}`,Sq=(e,t,r)=>{SH(e,"PluginLoadError",S$("plugin",t,r))},SV=(e,t,r)=>{SH(e,"IconsLoadError",S$("icons",t,r))},SW=(e,t,r)=>{SH(e,"LanguageLoadError",S$("language",t,r))},SK=(e,t,r)=>{SH(e,"ThemeLoadError",S$("theme",t,r))},SG=(e,t,r)=>{SH(e,"ModelLoadError",S$("model",t,r))},SY=(e,t,r)=>{let n=im.translate(["Failed to initialize plugin: {0}",t]);fw(e,"PluginLoadError",{message:n}),SX(n,r),Sj(e,n)},SX=(e,...t)=>{let r=window.console;r&&(r.error?r.error(e,...t):r.log(e,...t))},SQ=e=>/^[a-z0-9\-]+$/i.test(e),SJ=e=>S0(e,dF(e)),SZ=e=>S0(e,dI(e)),S0=(e,t)=>{let r=e.editorManager.baseURL+"/skins/content",n=e.editorManager.suffix,o=`content${n}.css`;return eu(t,t=>SQ(t)&&!e.inline?`${r}/${t}/${o}`:e.documentBaseURI.toAbsolute(t))},S1=e=>{e.contentCSS=e.contentCSS.concat(SJ(e),SZ(e))},S2=(e,t,r)=>nK(e,t,er,r),S3=e=>e?eO(e.getElementsByTagName("img")):[],S8=(e,t)=>{let r={},n=(n,o=er)=>{let l=ep(S3(n),t=>{let r=t.src;return!(t.hasAttribute("data-mce-bogus")||t.hasAttribute("data-mce-placeholder"))&&!!r&&r!==t2.transparentSrc&&(tm(r,"blob:")?!e.isUploaded(r)&&o(t):!!tm(r,"data:")&&o(t))}),a=eu(l,e=>{let n=e.src;if(eW(r,n))return r[n].then(t=>T(t)?t:{image:e,blobInfo:t.blobInfo});{let o=wD(t,n).then(t=>(delete r[n],{image:e,blobInfo:t})).catch(e=>(delete r[n],e));return r[n]=o,o}});return Promise.all(a)};return{findAll:n}},S5=()=>{let e={},t=(e,t)=>({status:e,resultUri:t}),r=t=>t in e,n=t=>{let r=e[t];return r?r.resultUri:null},o=t=>!!r(t)&&1===e[t].status,l=t=>!!r(t)&&2===e[t].status,a=r=>{e[r]=t(1,null)},i=(r,n)=>{e[r]=t(2,n)},s=t=>{delete e[t]},d=()=>{e={}};return{hasBlobUri:r,getResultUri:n,isPending:o,isUploaded:l,markPending:a,markUploaded:i,removeFailed:s,destroy:d}},S6=0,S9=()=>{let e=()=>Math.round(4294967295*Math.random()).toString(36),t=new Date().getTime();return"s"+t.toString(36)+e()+e()+e()},S4=e=>e+S6+++S9(),S7=()=>{let e=[],t=e=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[e.toLowerCase()]||"dat",r=(e,t,r,o,l)=>{if(T(e))return n({id:e,name:o,filename:l,blob:t,base64:r});if(B(e))return n(e);throw Error("Unknown input type")},n=e=>{if(!e.blob||!e.base64)throw Error("blob and base64 representations of the image are required for BlobInfo to be created");let r=e.id||S4("blobid"),n=e.name||r,o=e.blob;return{id:K(r),name:K(n),filename:K(e.filename||n+"."+t(o.type)),blob:K(o),base64:K(e.base64),blobUri:K(e.blobUri||URL.createObjectURL(o)),uri:K(e.uri)}},o=t=>{a(t.id())||e.push(t)},l=t=>ey(e,t).getOrUndefined(),a=e=>l(t=>t.id()===e),i=e=>l(t=>t.blobUri()===e),s=(e,t)=>l(r=>r.base64()===e&&r.blob().type===t),d=t=>{e=ep(e,e=>e.blobUri()!==t||(URL.revokeObjectURL(e.blobUri()),!1))},c=()=>{em(e,e=>{URL.revokeObjectURL(e.blobUri())}),e=[]};return{create:r,add:o,get:a,getByUri:i,getByData:s,findFirst:l,removeByUri:d,destroy:c}},Ee=(e,t)=>{let r={},n=(e,t)=>e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t,o=(e,r)=>new Promise((o,l)=>{let a=new XMLHttpRequest;a.open("POST",t.url),a.withCredentials=t.credentials,a.upload.onprogress=e=>{r(e.loaded/e.total*100)},a.onerror=()=>{l("Image upload failed due to a XHR Transport error. Code: "+a.status)},a.onload=()=>{if(a.status<200||a.status>=300){l("HTTP Error: "+a.status);return}let e=JSON.parse(a.responseText);if(!e||!T(e.location)){l("Invalid JSON: "+a.responseText);return}o(n(t.basePath,e.location))};let i=new FormData;i.append("file",e.blob(),e.filename()),a.send(i)}),l=z(t.handler)?t.handler:o,a=()=>new Promise(e=>{e([])}),i=(e,t)=>({url:t,blobInfo:e,status:!0}),s=(e,t)=>({url:"",blobInfo:e,status:!1,error:t}),d=(e,t)=>{rr.each(r[e],e=>{e(t)}),delete r[e]},c=(t,r,n)=>(e.markPending(t.blobUri()),new Promise(o=>{let l,a;try{let c=()=>{l&&(l.close(),a=q)},u=r=>{c(),e.markUploaded(t.blobUri(),r),d(t.blobUri(),i(t,r)),o(i(t,r))},m=r=>{c(),e.removeFailed(t.blobUri()),d(t.blobUri(),s(t,r)),o(s(t,r))};a=e=>{e<0||e>100||en.from(l).orThunk(()=>en.from(n).map(Z)).each(t=>{l=t,t.progressBar.value(e)})},r(t,a).then(u,e=>{m(T(e)?{message:e}:e)})}catch(f){o(s(t,f))}})),u=e=>e===o,m=e=>{let t=e.blobUri();return new Promise(e=>{r[t]=r[t]||[],r[t].push(e)})},f=(t,r)=>(t=rr.grep(t,t=>!e.isUploaded(t.blobUri())),Promise.all(rr.map(t,t=>e.isPending(t.blobUri())?m(t):c(t,l,r)))),g=(e,r)=>!t.url&&u(l)?a():f(e,r);return{upload:g}},Et=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),Er=(e,t)=>Ee(t,{url:dE(e),basePath:dN(e),credentials:dD(e),handler:dR(e)}),En=e=>{let t=S5(),r=Er(e,t);return{upload:(t,n=!0)=>r.upload(t,n?Et(e):void 0)}},Eo=e=>{let t,r;let n=S7(),o=S5(),l=[],a=t=>r=>e.selection?t(r):[],i=e=>e+(-1===e.indexOf("?")?"?":"&")+new Date().getTime(),s=(e,t,r)=>{let n=0;do -1!==(n=e.indexOf(t,n))&&(e=e.substring(0,n)+r+e.substr(n+t.length),n+=r.length-t.length+1);while(-1!==n);return e},d=(e,t,r)=>{let n=`src="${r}"${r===t2.transparentSrc?' data-mce-placeholder="1"':""}`;return e=s(e,`src="${t}"`,n),e=s(e,'data-mce-src="'+t+'"','data-mce-src="'+r+'"')},c=(t,r)=>{em(e.undoManager.data,e=>{"fragmented"===e.type?e.fragments=eu(e.fragments,e=>d(e,t,r)):e.content=d(e.content,t,r)})},u=(t,r)=>{let n=e.convertURL(r,"src");c(t.src,r),ry(rV.fromDom(t),{src:dw(e)?i(r):r,"data-mce-src":n})},m=()=>(t||(t=Er(e,o)),h().then(a(r=>{let o=eu(r,e=>e.blobInfo);return t.upload(o,Et(e)).then(a(t=>{let o=[],l=!1,a=eu(t,(t,a)=>{let{blobInfo:i,image:s}=r[a],d=!1;return t.status&&dk(e)?(t.url&&!tu(s.src,t.url)&&(l=!0),n.removeByUri(s.src),_l(e)||u(s,t.url)):t.error&&(t.error.remove&&(c(s.src,t2.transparentSrc),o.push(s),d=!0),Sz(e,t.error.message)),{element:s,status:t.status,uploadUri:t.url,blobInfo:i,removed:d}});return o.length>0&&!_l(e)?e.undoManager.transact(()=>{em(o,t=>{e.dom.remove(t),n.removeByUri(t.src)})}):l&&e.undoManager.dispatchChange(),a}))}))),f=()=>dx(e)?m():Promise.resolve([]),g=e=>ek(l,t=>t(e)),p=e=>{l.push(e)},h=()=>(r||(r=S8(o,n)),r.findAll(e.getBody(),g).then(a(t=>{let r=ep(t,t=>!T(t)||(Sj(e,t),!1));return _l(e)||em(r,e=>{c(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")}),r}))),b=()=>{n.destroy(),o.destroy(),r=t=null},v=t=>t.replace(/src="(blob:[^"]+)"/g,(t,r)=>{let l=o.getResultUri(r);if(l)return'src="'+l+'"';let a=n.getByUri(r);if(a||(a=eb(e.editorManager.get(),(e,t)=>e||t.editorUpload&&t.editorUpload.blobCache.getByUri(r),void 0)),a){let i=a.blob();return'src="data:'+i.type+";base64,"+a.base64()+'"'}return t});return e.on("SetContent",()=>{dx(e)?f():h()}),e.on("RawSaveContent",e=>{e.content=v(e.content)}),e.on("GetContent",e=>{e.source_view||"raw"===e.format||"tree"===e.format||(e.content=v(e.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",e=>{em(e,e=>{let t=e.attr("src");if(!t||n.getByUri(t))return;let r=o.getResultUri(t);r&&e.attr("src",r)})})}),{blobCache:n,addFilter:p,uploadImages:m,uploadImagesAuto:f,scanForImages:h,destroy:b}},El=e=>{let t=e.dom,r=e.schema.type,n={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:e=>{t.setStyle(e,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:e=>{t.setStyle(e,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{let e={inline:"span",styles:{textDecoration:"line-through"},exact:!0},t={inline:"strike",remove:"all",preserve_attributes:["class","style"]},n={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==r?[n,e,t]:[e,n,t]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(e,t,r)=>ou(e)&&e.hasAttribute("href"),onformat:(e,r,n)=>{rr.each(n,(r,n)=>{t.setAttrib(e,n,r)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":e=>{var t;return null!==(t=null==e?void 0:e.customValue)&&void 0!==t?t:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return rr.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),e=>{n[e]={block:e,remove:"all"}}),n},Ea={remove_similar:!0,inherit:!1},Ei={selector:"td,th",...Ea},Es={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...Ei},tablecellverticalalign:{styles:{"vertical-align":"%value"},...Ei},tablecellbordercolor:{styles:{borderColor:"%value"},...Ei},tablecellclass:{classes:["%value"],...Ei},tableclass:{selector:"table",classes:["%value"],...Ea},tablecellborderstyle:{styles:{borderStyle:"%value"},...Ei},tablecellborderwidth:{styles:{borderWidth:"%value"},...Ei}},Ed=K(Es),Ec=e=>{let t={},r=e=>j(e)?t[e]:t,n=e=>eW(t,e),o=(e,r)=>{e&&(T(e)?(L(r)||(r=[r]),em(r,e=>{I(e.deep)&&(e.deep=!mW(e)),I(e.split)&&(e.split=!mW(e)||mK(e)),I(e.remove)&&mW(e)&&!mK(e)&&(e.remove="none"),mW(e)&&mK(e)&&(e.mixed=!0,e.block_expand=!0),T(e.classes)&&(e.classes=e.classes.split(/\s+/))}),t[e]=r):eF(e,(e,t)=>{o(t,e)}))},l=e=>(e&&t[e]&&delete t[e],t);return o(El(e)),o(Ed()),o(dQ(e)),{get:r,has:n,register:o,unregister:l}},Eu=rr.each,Em=a5.DOM,Ef=e=>j(e)&&B(e),Eg=(e,t)=>{let r=t&&t.schema||aB({}),n=(e,t)=>{t.classes.length>0&&Em.addClass(e,t.classes.join(" ")),Em.setAttribs(e,t.attrs)},o=e=>{let t=T(e)?{name:e,classes:[],attrs:{}}:e,r=Em.create(t.name);return n(r,t),r},l=(e,t)=>{let n=r.getElementRule(e.nodeName.toLowerCase()),o=null==n?void 0:n.parentsRequired;return!!o&&!!o.length&&(t&&ed(o,t)?t:o[0])},a=(e,t,r)=>{let n;let i=t[0],s=Ef(i)?i.name:void 0,d=l(e,s);if(d)s===d?(n=i,t=t.slice(1)):n=d;else if(i)n=i,t=t.slice(1);else if(!r)return e;let c=n?o(n):Em.create("div");c.appendChild(e),r&&rr.each(r,t=>{let r=o(t);c.insertBefore(r,e)});let u=Ef(n)?n.siblings:void 0;return a(c,t,u)},i=Em.create("div");if(e.length>0){let s=e[0],d=o(s),c=Ef(s)?s.siblings:void 0;i.appendChild(a(d,e.slice(1),c))}return i},Ep=e=>{e=rr.trim(e);let t="div",r={name:t,classes:[],attrs:{},selector:e};return"*"!==e&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(e,t,n,o,l)=>{switch(t){case"#":r.attrs.id=n;break;case".":r.classes.push(n);break;case":":-1!==rr.inArray("checked disabled enabled read-only required".split(" "),n)&&(r.attrs[n]=n)}if("["===o){let a=l.match(/([\w\-]+)(?:\=\"([^\"]+))?/);a&&(r.attrs[a[1]]=a[2])}return""})),r.name=t||"div",r},Eh=e=>T(e)?(e=(e=e.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),rr.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),e=>{let t=rr.map(e.split(/(?:~\+|~|\+)/),Ep),r=t.pop();return t.length&&(r.siblings=t),r}).reverse()):[],Eb=(e,t)=>{let r,n="",o=dJ(e);if(""===o)return"";let l=e=>T(e)?e.replace(/%(\w+)/g,""):"",a=(t,r)=>Em.getStyle(null!=r?r:e.getBody(),t,!0);if(T(t)){let i=e.formatter.get(t);if(!i)return"";t=i[0]}if("preview"in t){let s=t.preview;if(!1===s)return"";o=s||o}let d=t.block||t.inline||"span",c=Eh(t.selector);c.length>0?(c[0].name||(c[0].name=d),d=t.selector,r=Eg(c,e)):r=Eg([d],e);let u=Em.select(d,r)[0]||r.firstChild;Eu(t.styles,(e,t)=>{let r=l(e);r&&Em.setStyle(u,t,r)}),Eu(t.attributes,(e,t)=>{let r=l(e);r&&Em.setAttrib(u,t,r)}),Eu(t.classes,e=>{let t=l(e);Em.hasClass(u,t)||Em.addClass(u,t)}),e.dispatch("PreviewFormats"),Em.setStyles(r,{position:"absolute",left:-65535}),e.getBody().appendChild(r);let m=a("fontSize"),f=/px$/.test(m)?parseInt(m,10):0;return Eu(o.split(" "),e=>{let t=a(e,u);if((!("background-color"===e&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(t))||"#ffffff"!==mn(t=a(e)).toLowerCase())&&("color"!==e||"#000000"!==mn(t).toLowerCase())){if("font-size"===e&&/em|%$/.test(t)){if(0===f)return;let r=parseFloat(t)/(/%$/.test(t)?100:1);t=r*f+"px"}"border"===e&&t&&(n+="padding:0 2px;"),n+=e+":"+t+";"}}),e.dispatch("AfterPreviewFormats"),Em.remove(r),n},Ev=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},Ey=e=>{let t=Ec(e),r=a4({});return Ev(e),Cv(e),_l(e)||xf(r,e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(t,r,n)=>{_E(e,t,r,n)},remove:(t,r,n,o)=>{_N(e,t,r,n,o)},toggle:(t,r,n)=>{_D(e,t,r,n)},match:(t,r,n,o)=>_x(e,t,r,n,o),closest:t=>_S(e,t),matchAll:(t,r)=>_w(e,t,r),matchNode:(t,r,n,o)=>_k(e,t,r,n,o),canApply:t=>__(e,t),formatChanged:(t,n,o,l)=>_R(e,r,t,n,o,l),getCssText:X(Eb,e)}},EC=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},Ex=(e,t,r)=>{let n=a4(!1),o=e=>{kQ(t,!1,r),t.add({},e)};e.on("init",()=>{t.add()}),e.on("BeforeExecCommand",e=>{let n=e.command;EC(n)||(kJ(t,r),t.beforeChange())}),e.on("ExecCommand",e=>{let t=e.command;EC(t)||o(e)}),e.on("ObjectResizeStart cut",()=>{t.beforeChange()}),e.on("SaveContent ObjectResized blur",o),e.on("dragend",o),e.on("keyup",r=>{let l=r.keyCode;!r.isDefaultPrevented()&&((l>=33&&l<=36||l>=37&&l<=40||45===l||r.ctrlKey)&&(o(),e.nodeChanged()),(46===l||8===l)&&e.nodeChanged(),n.get()&&t.typing&&!kY(k$(e),t.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),n.set(!1),e.nodeChanged()))}),e.on("keydown",e=>{let l=e.keyCode;if(e.isDefaultPrevented())return;if(l>=33&&l<=36||l>=37&&l<=40||45===l){t.typing&&o(e);return}let a=e.ctrlKey&&!e.altKey||e.metaKey;(l<16||l>20)&&224!==l&&91!==l&&!t.typing&&!a&&(t.beforeChange(),kQ(t,!0,r),t.add({},e),n.set(!0))}),e.on("mousedown",e=>{t.typing&&o(e)});let l=e=>"insertReplacementText"===e.inputType,a=e=>"insertText"===e.inputType&&null===e.data,i=e=>"insertFromPaste"===e.inputType||"insertFromDrop"===e.inputType;e.on("input",e=>{e.inputType&&(l(e)||a(e)||i(e))&&o(e)}),e.on("AddUndo Undo Redo ClearUndos",t=>{t.isDefaultPrevented()||e.nodeChanged()})},Ew=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},Ek=e=>{let t=ib(),r=a4(0),n=a4(0),o={data:[],typing:!1,beforeChange:()=>{_c(e,r,t)},add:(l,a)=>_u(e,o,n,r,t,l,a),dispatchChange:()=>{e.setDirty(!0);let t=k$(e);t.bookmark=sV(e.selection),e.dispatch("change",{level:t,lastLevel:eD(o.data,n.get()).getOrUndefined()})},undo:()=>_m(e,o,r,n),redo:()=>_f(e,n,o.data),clear:()=>{_g(e,o,n)},reset:()=>{_p(e,o)},hasUndo:()=>_h(e,o,n),hasRedo:()=>_b(e,o,n),transact:t=>_v(e,o,r,t),ignore:t=>{_y(e,r,t)},extra:(t,r)=>{_C(e,o,n,t,r)}};return _l(e)||Ex(e,o,r),Ew(e),o},E_=[9,27,fL.HOME,fL.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,fL.DOWN,fL.UP,fL.LEFT,fL.RIGHT].concat(t2.browser.isFirefox()?[224]:[]),ES="data-mce-placeholder",EE=e=>"keydown"===e.type||"keyup"===e.type,EN=e=>{let t=e.keyCode;return t===fL.BACKSPACE||t===fL.DELETE},ED=e=>{if(!EE(e))return!1;{let t=e.keyCode;return!EN(e)&&(fL.metaKeyPressed(e)||e.altKey||t>=112&&t<=123||ed(E_,t))}},ER=e=>EE(e)&&!(EN(e)||"keyup"===e.type&&229===e.keyCode),EA=(e,t,r)=>{if(!lB(rV.fromDom(t),!1))return!1;{let n=t.firstElementChild;return!n||!(e.getStyle(t.firstElementChild,"padding-left")||e.getStyle(t.firstElementChild,"padding-right"))&&r===n.nodeName.toLowerCase()}},EO=e=>{var t;let r=e.dom,n=dg(e),o=null!==(t=d$(e))&&void 0!==t?t:"",l=(t,a)=>{if(ED(t))return;let i=e.getBody(),s=!ER(t)&&EA(r,i,n),d=""!==r.getAttrib(i,ES);(d!==s||a)&&(r.setAttrib(i,ES,s?o:null),r.setAttrib(i,"aria-placeholder",s?o:null),fx(e,s),e.on(s?"keydown":"keyup",l),e.off(s?"keyup":"keydown",l))};tv(o)&&e.on("init",t=>{l(t,!0),e.on("change SetContent ExecCommand",l),e.on("paste",t=>py.setEditorTimeout(e,()=>l(t)))})},ET=(e,t)=>({block:e,position:t}),EB=(e,t)=>({from:e,to:t}),EP=(e,t)=>{let r=rV.fromDom(e),n=rV.fromDom(t.container());return vt(r,n).map(e=>ET(e,t))},EL=e=>!rQ(e.from.block,e.to.block),EF=(e,t)=>{let r=t=>rQ(t,e),n=e=>oQ(e)||oR(e.dom);return oe(t,n,r).filter(rm).getOr(e)},EM=(e,t)=>{let r=rV.fromDom(e);return rQ(EF(r,t.from.block),EF(r,t.to.block))},EI=e=>!1===oA(e.from.block.dom)&&!1===oA(e.to.block.dom),EU=e=>{let t=e=>oK(e)||lV(e.dom);return t(e.from.block)&&t(e.to.block)},Ej=(e,t,r)=>oN(r.position.getNode())&&!lB(r.block)?uE(!1,r.block.dom).bind(n=>n.isEqual(r.position)?uk(t,e,n).bind(t=>EP(e,t)):en.some(r)).getOr(r):r,Ez=(e,t,r)=>{let n=EP(e,sg.fromRangeStart(r)),o=n.bind(r=>uk(t,e,r.position).bind(r=>EP(e,r).map(r=>Ej(e,t,r))));return rl(n,o,EB).filter(t=>EL(t)&&EM(e,t)&&EI(t)&&EU(t))},EH=(e,t,r)=>r.collapsed?Ez(e,t,r):en.none(),E$=e=>{let t=nt(e);return eC(t,o$).fold(K(t),e=>t.slice(0,e))},Eq=e=>{let t=E$(e);return em(t,nF),t},EV=(e,t)=>{let r=hK(t,e);return ey(r.reverse(),e=>lB(e)).each(nF)},EW=e=>0===ep(r7(e),e=>!lB(e)).length,EK=(e,t,r,n)=>{if(lB(r))return o8(r),uR(r.dom);EW(n)&&lB(t)&&nD(n,rV.fromTag("br"));let o=uD(r.dom,sg.before(n.dom));return em(Eq(t),e=>{nD(n,e)}),EV(e,t),o},EG=(e,t,r)=>{if(lB(r))return nF(r),lB(t)&&o8(t),uR(t.dom);let n=uA(r.dom);return em(Eq(t),e=>{nO(r,e)}),EV(e,t),n},EY=(e,t)=>{let r=hK(t,e);return en.from(r[r.length-1])},EX=(e,t)=>rJ(t,e)?EY(t,e):en.none(),EQ=(e,t)=>{uE(e,t.dom).bind(e=>en.from(e.getNode())).map(rV.fromDom).filter(oW).each(nF)},EJ=(e,t,r)=>(EQ(!0,t),EQ(!1,r),EX(t,r).fold(X(EG,e,t,r),X(EK,e,t,r))),EZ=(e,t,r,n)=>t?EJ(e,n,r):EJ(e,r,n),E0=(e,t)=>{let r=rV.fromDom(e.getBody()),n=EH(r.dom,t,e.selection.getRng()).map(n=>()=>{EZ(r,t,n.from.block,n.to.block).each(t=>{e.selection.setRng(t.toRange())})});return n},E1=(e,t)=>{let r=t.getRng();return rl(vt(e,rV.fromDom(r.startContainer)),vt(e,rV.fromDom(r.endContainer)),(n,o)=>rQ(n,o)?en.none():en.some(()=>{r.deleteContents(),EZ(e,!0,n,o).each(e=>{t.setRng(e.toRange())})})).getOr(en.none())},E2=(e,t)=>{let r=rV.fromDom(t),n=X(rQ,e);return n7(r,oQ,n).isSome()},E3=(e,t)=>E2(e,t.startContainer)||E2(e,t.endContainer),E8=(e,t)=>{let r=uD(e.dom,sg.fromRangeStart(t)).isNone(),n=uN(e.dom,sg.fromRangeEnd(t)).isNone();return!E3(e,t)&&r&&n},E5=e=>en.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),E6=e=>{let t=rV.fromDom(e.getBody()),r=e.selection.getRng();return E8(t,r)?E5(e):E1(t,e.selection)},E9=(e,t)=>e.selection.isCollapsed()?en.none():E6(e),E4=(e,t,r,n,o)=>en.from(t._selectionOverrides.showCaret(e,r,n,o)),E7=e=>{let t=e.ownerDocument.createRange();return t.selectNode(e),t},Ne=(e,t)=>{let r=e.dispatch("BeforeObjectSelected",{target:t});return r.isDefaultPrevented()?en.none():en.some(E7(t))},Nt=(e,t,r)=>{let n=un(1,e.getBody(),t),o=sg.fromRangeStart(n),l=o.getNode();if(cQ(l))return E4(1,e,l,!o.isAtEnd(),!1);let a=o.getNode(!0);if(cQ(a))return E4(1,e,a,!1,!1);let i=v1(e.dom.getRoot(),o.getNode());return cQ(i)?E4(1,e,i,!1,r):en.none()},Nr=(e,t,r)=>t.collapsed?Nt(e,t,r).getOr(t):t,Nn=e=>hH(e)||hI(e),No=e=>h$(e)||hU(e),Nl=(e,t)=>{ox(t)&&0===t.data.length&&e.remove(t)},Na=(e,t,r,n,o,l)=>{E4(n,e,l.getNode(!o),o,!0).each(r=>{if(t.collapsed){let n=t.cloneRange();o?n.setEnd(r.startContainer,r.startOffset):n.setStart(r.endContainer,r.endOffset),n.deleteContents()}else t.deleteContents();e.selection.setRng(r)}),Nl(e.dom,r)},Ni=(e,t)=>{let r=e.selection.getRng();if(!ox(r.commonAncestorContainer))return en.none();let n=t?f.Forwards:f.Backwards,o=up(e.getBody()),l=X(us,t?o.next:o.prev),a=t?Nn:No,i=ul(n,e.getBody(),r),s=l(i),d=s?b2(t,s):s;if(!d||!ud(i,d))return en.none();if(a(d))return en.some(()=>Na(e,r,i.getNode(),n,t,d));let c=l(d);return c&&a(c)&&ud(d,c)?en.some(()=>Na(e,r,i.getNode(),n,t,c)):en.none()},Ns=(e,t)=>Ni(e,t),Nd=(e,t)=>{let r=e.getBody();return t?uR(r).filter(hH):uA(r).filter(h$)},Nc=e=>{let t=e.selection.getRng();return!t.collapsed&&(Nd(e,!0).exists(e=>e.isEqual(sg.fromRangeStart(t)))||Nd(e,!1).exists(e=>e.isEqual(sg.fromRangeEnd(t))))},Nu=e=>j(e)&&(oQ(rV.fromDom(e))||oY(rV.fromDom(e))),Nm=sQ.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),Nf=(e,t)=>{let r=t.getNode(!e);return ou(r)&&r.getAttribute("data-mce-caret")===(e?"after":"before")},Ng=(e,t,r,n)=>{let o=t=>oV(rV.fromDom(t))&&!c6(r,n,e);return uo(!t,r).fold(()=>uo(t,n).fold(et,o),o)},Np=(e,t,r,n)=>{let o=n.getNode(!t);return vt(rV.fromDom(e),rV.fromDom(r.getNode())).map(e=>lB(e)?Nm.remove(e.dom):Nm.moveToElement(o)).orThunk(()=>en.some(Nm.moveToElement(o)))},Nh=(e,t,r)=>uk(t,e,r).bind(n=>Nu(n.getNode())||Ng(e,t,r,n)?en.none():t&&oA(n.getNode())||!t&&oA(n.getNode(!0))?Np(e,t,r,n):t&&h$(r)?en.some(Nm.moveToPosition(n)):!t&&hH(r)?en.some(Nm.moveToPosition(n)):en.none()),Nb=(e,t)=>U(t)?en.none():e&&oA(t.nextSibling)?en.some(Nm.moveToElement(t.nextSibling)):!e&&oA(t.previousSibling)?en.some(Nm.moveToElement(t.previousSibling)):en.none(),Nv=(e,t,r)=>r.fold(e=>en.some(Nm.remove(e)),e=>en.some(Nm.moveToElement(e)),r=>c6(t,r,e)?en.none():en.some(Nm.moveToPosition(r))),Ny=(e,t,r)=>Nf(t,r)?Nb(t,r.getNode(!t)).orThunk(()=>Nh(e,t,r)):Nh(e,t,r).bind(t=>Nv(e,r,t)),NC=(e,t,r)=>{let n=un(t?1:-1,e,r),o=sg.fromRangeStart(n),l=rV.fromDom(e);return!t&&h$(o)?en.some(Nm.remove(o.getNode(!0))):t&&hH(o)?en.some(Nm.remove(o.getNode())):!t&&hH(o)&&h5(l,o)?h6(l,o).map(e=>Nm.remove(e.getNode())):t&&h$(o)&&h8(l,o)?h9(l,o).map(e=>Nm.remove(e.getNode())):Ny(e,t,o)},Nx=(e,t)=>r=>(e._selectionOverrides.hideFakeCaret(),bK(e,t,rV.fromDom(r)),!0),Nw=(e,t)=>r=>{let n=t?sg.before(r):sg.after(r);return e.selection.setRng(n.toRange()),!0},Nk=e=>t=>(e.selection.setRng(t.toRange()),!0),N_=(e,t)=>en.from(v1(e.getBody(),t)),NS=(e,t)=>{let r=e.selection.getNode();return N_(e,r).filter(oA).fold(()=>NC(e.getBody(),t,e.selection.getRng()).map(r=>()=>r.fold(Nx(e,t),Nw(e,t),Nk(e))),()=>en.some(q))},NE=e=>{em(oM(e,".mce-offscreen-selection"),nF)},NN=(e,t)=>{let r=e.selection.getNode();if(oA(r)&&!oO(r)){let n=N_(e,r.parentNode).filter(oA);return n.fold(()=>en.some(()=>{NE(rV.fromDom(e.getBody())),bK(e,t,rV.fromDom(e.selection.getNode())),vr(e)}),()=>en.some(q))}return Nc(e)?en.some(()=>{vl(e,e.selection.getRng(),rV.fromDom(e.getBody()))}):en.none()},ND=e=>{let t=e.dom,r=e.selection,n=v1(e.getBody(),r.getNode());if(oR(n)&&t.isBlock(n)&&t.isEmpty(n)){let o=t.create("br",{"data-mce-bogus":"1"});t.setHTML(n,""),n.appendChild(o),r.setRng(sg.before(o).toRange())}return!0},NR=(e,t)=>e.selection.isCollapsed()?NS(e,t):NN(e,t),NA=(e,t)=>{let r=sg.fromRangeStart(e.selection.getRng());return uk(t,e.getBody(),r).filter(e=>t?hF(e):hM(e)).bind(e=>c9(t?0:-1,e)).map(t=>()=>e.selection.select(t))},NO=(e,t)=>e.selection.isCollapsed()?NA(e,t):en.none(),NT=e=>ox(e)&&"\uFEFF"===e.data[0],NB=e=>ox(e)&&"\uFEFF"===e.data[e.data.length-1],NP=e=>{var t;let r=null!==(t=e.ownerDocument)&&void 0!==t?t:document;return r.createTextNode("\uFEFF")},NL=e=>{var t;if(ox(e.previousSibling))return NB(e.previousSibling)||e.previousSibling.appendData("\uFEFF"),e.previousSibling;if(ox(e))return NT(e)||e.insertData(0,"\uFEFF"),e;{let r=NP(e);return null===(t=e.parentNode)||void 0===t||t.insertBefore(r,e),r}},NF=e=>{var t,r;if(ox(e.nextSibling))return NT(e.nextSibling)||e.nextSibling.insertData(0,"\uFEFF"),e.nextSibling;if(ox(e))return NB(e)||e.appendData("\uFEFF"),e;{let n=NP(e);return e.nextSibling?null===(t=e.parentNode)||void 0===t||t.insertBefore(n,e.nextSibling):null===(r=e.parentNode)||void 0===r||r.appendChild(n),n}},NM=(e,t)=>e?NL(t):NF(t),NI=X(NM,!0),NU=X(NM,!1),Nj=(e,t)=>ox(e.container())?NM(t,e.container()):NM(t,e.getNode()),Nz=(e,t)=>{let r=t.get();return r&&e.container()===r&&o9(r)},NH=(e,t)=>t.fold(t=>{cW(e.get());let r=NI(t);return e.set(r),en.some(sg(r,r.length-1))},t=>uR(t).map(t=>{if(Nz(t,e)){let r=e.get();return sg(r,1)}{cW(e.get());let n=Nj(t,!0);return e.set(n),sg(n,1)}}),t=>uA(t).map(t=>{if(Nz(t,e)){let r=e.get();return sg(r,r.length-1)}{cW(e.get());let n=Nj(t,!1);return e.set(n),sg(n,n.length-1)}}),t=>{cW(e.get());let r=NU(t);return e.set(r),en.some(sg(r,1))}),N$=(e,t)=>{for(let r=0;r<e.length;r++){let n=e[r].apply(null,t);if(n.isSome())return n}return en.none()},Nq=sQ.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),NV=(e,t)=>{let r=c5(t,e);return r||e},NW=(e,t,r)=>{let n=b3(r),o=NV(t,n.container());return bZ(e,o,n).fold(()=>uN(o,n).bind(X(bZ,e,o)).map(e=>Nq.before(e)),en.none)},NK=(e,t)=>null===uB(e,t),NG=(e,t,r)=>bZ(e,t,r).filter(X(NK,t)),NY=(e,t,r)=>{let n=b8(r);return NG(e,t,n).bind(e=>{let t=uD(e,n);return t.isNone()?en.some(Nq.start(e)):en.none()})},NX=(e,t,r)=>{let n=b3(r);return NG(e,t,n).bind(e=>{let t=uN(e,n);return t.isNone()?en.some(Nq.end(e)):en.none()})},NQ=(e,t,r)=>{let n=b8(r),o=NV(t,n.container());return bZ(e,o,n).fold(()=>uD(o,n).bind(X(bZ,e,o)).map(e=>Nq.after(e)),en.none)},NJ=e=>!bQ(N0(e)),NZ=(e,t,r)=>{let n=N$([NW,NY,NX,NQ],[e,t,r]);return n.filter(NJ)},N0=e=>e.fold(G,G,G,G),N1=e=>e.fold(K("before"),K("start"),K("end"),K("after")),N2=e=>e.fold(Nq.before,Nq.before,Nq.after,Nq.after),N3=e=>e.fold(Nq.start,Nq.start,Nq.end,Nq.end),N8=(e,t)=>N1(e)===N1(t)&&N0(e)===N0(t),N5=(e,t,r,n,o,l)=>rl(bZ(t,r,n),bZ(t,r,o),(t,n)=>t!==n&&b0(r,t,n)?Nq.after(e?t:n):l).getOr(l),N6=(e,t)=>e.fold(er,e=>!N8(e,t)),N9=(e,t,r,n,o)=>{let l=b2(e,o),a=uk(e,r,l).map(X(b2,e)),i=a.fold(()=>n.map(N2),o=>NZ(t,r,o).map(X(N5,e,t,r,l,o)).filter(X(N6,n)));return i.filter(NJ)},N4=(e,t)=>e?t.fold(V(en.some,Nq.start),en.none,V(en.some,Nq.after),en.none):t.fold(en.none,V(en.some,Nq.before),en.none,V(en.some,Nq.end)),N7=(e,t,r,n)=>{let o=b2(e,n),l=NZ(t,r,o);return NZ(t,r,o).bind(X(N4,e)).orThunk(()=>N9(e,t,r,l,n))},De=e=>z(e.selection.getSel().modify),Dt=(e,t,r)=>(t.setRng(sg(r.container(),r.offset()+(e?1:-1)).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0),Dr=(e,t)=>{let r=t.selection.getRng(),n=e?sg.fromRangeEnd(r):sg.fromRangeStart(r);return!!De(t)&&(e&&lt(n)?Dt(!0,t.selection,n):!!(!e&&lr(n))&&Dt(!1,t.selection,n))};(s=g||(g={}))[s.Br=0]="Br",s[s.Block=1]="Block",s[s.Wrap=2]="Wrap",s[s.Eol=3]="Eol";let Dn=(e,t)=>e===f.Backwards?e_(t):t,Do=(e,t,r)=>e===f.Forwards?t.next(r):t.prev(r),Dl=(e,t,r,n)=>oN(n.getNode(t===f.Forwards))?g.Br:!1===c6(r,n)?g.Block:g.Wrap,Da=(e,t,r,n)=>{let o=up(r),l=n,a=[];for(;l;){let i=Do(t,o,l);if(!i)break;if(oN(i.getNode(!1))){if(t===f.Forwards)return{positions:Dn(t,a).concat([i]),breakType:g.Br,breakAt:en.some(i)};return{positions:Dn(t,a),breakType:g.Br,breakAt:en.some(i)}}if(!i.isVisible()){l=i;continue}if(e(l,i)){let s=Dl(r,t,l,i);return{positions:Dn(t,a),breakType:s,breakAt:en.some(i)}}a.push(i),l=i}return{positions:Dn(t,a),breakType:g.Eol,breakAt:en.none()}},Di=(e,t,r,n)=>t(r,n).breakAt.map(n=>{let o=t(r,n).positions;return e===f.Backwards?o.concat(n):[n].concat(o)}).getOr([]),Ds=(e,t)=>eb(e,(e,r)=>e.fold(()=>en.some(r),n=>rl(eR(n.getClientRects()),eR(r.getClientRects()),(e,o)=>{let l=Math.abs(t-e.left),a=Math.abs(t-o.left);return a<=l?r:n}).or(e)),en.none()),Dd=(e,t)=>eR(t.getClientRects()).bind(t=>Ds(e,t.left)),Dc=X(Da,sg.isAbove,-1),Du=X(Da,sg.isBelow,1),Dm=X(Di,-1,Dc),Df=X(Di,1,Du),Dg=(e,t)=>Dc(e,t).breakAt.isNone(),Dp=(e,t)=>Du(e,t).breakAt.isNone(),Dh=e=>uR(e).map(t=>[t].concat(Du(e,t).positions)).getOr([]),Db=e=>uA(e).map(t=>Dc(e,t).positions.concat(t)).getOr([]),Dv=(e,t)=>Dd(Dm(e,t),t),Dy=(e,t)=>Dd(Df(e,t),t),DC=(e,t)=>Math.abs(e.left-t),Dx=(e,t)=>Math.abs(e.right-t),Dw=e=>eK(e,"node"),Dk=(e,t)=>e3(e,(e,r)=>{let n=Math.min(DC(e,t),Dx(e,t)),o=Math.min(DC(r,t),Dx(r,t));return o===n&&Dw(r)&&oA(r.node)||o<n?r:e}),D_=e=>{let t=t=>eu(t,t=>{let r=iK(t);return r.node=e,r});if(ou(e))return t(e.getClientRects());if(!ox(e))return[];{let r=e.ownerDocument.createRange();return r.setStart(e,0),r.setEnd(e,e.data.length),t(r.getClientRects())}},DS=e=>ew(e,D_);(d=p||(p={}))[d.Up=-1]="Up",d[d.Down=1]="Down";let DE=(e,t,r,n)=>{let o=n;for(;o=c3(o,e,lv,t);)if(r(o))return},DN=(e,t,r,n,o,l)=>{let a=0,i=[],s=n=>{let l=DS([n]);-1===e&&(l=l.reverse());for(let s=0;s<l.length;s++){let c=l[s];if(!r(c,d)){if(i.length>0&&t(c,e5(i))&&a++,c.line=a,o(c))return!0;i.push(c)}}return!1},d=e5(l.getClientRects());if(!d)return i;let c=l.getNode();return c&&(s(c),DE(e,n,s,c)),i},DD=(e,t)=>t.line>e,DR=(e,t)=>t.line===e,DA=X(DN,p.Up,iQ,iJ),DO=X(DN,p.Down,iJ,iQ),DT=e=>e5(e.getClientRects()),DB=(e,t,r,n)=>{let o,l,a,i;let s=up(t),d=[],c=0;1===e?(o=s.next,l=iJ,a=iQ,i=sg.after(n)):(o=s.prev,l=iQ,a=iJ,i=sg.before(n));let u=DT(i);do{if(!i.isVisible())continue;let m=DT(i);if(a(m,u))continue;d.length>0&&l(m,e5(d))&&c++;let f=iK(m);if(f.position=i,f.line=c,r(f))break;d.push(f)}while(i=o(i));return d},DP=e=>t=>DD(e,t),DL=e=>t=>DR(e,t),DF=(e,t)=>{e.selection.setRng(t),g9(e,e.selection.getRng())},DM=(e,t,r)=>en.some(Nr(e,t,r)),DI=(e,t,r,n,o,l)=>{let a=t===f.Forwards,i=up(e.getBody()),s=X(us,a?i.next:i.prev),d=a?n:o;if(!r.collapsed){let c=i8(r);if(l(c))return E4(t,e,c,t===f.Backwards,!1);if(Nc(e)){let u=r.cloneRange();return u.collapse(t===f.Backwards),en.from(u)}}let m=ul(t,e.getBody(),r);if(d(m))return Ne(e,m.getNode(!a));let g=s(m),p=ls(r);if(!g)return p?en.some(r):en.none();if(d(g=b2(a,g)))return E4(t,e,g.getNode(!a),a,!1);let h=s(g);return h&&d(h)&&ud(g,h)?E4(t,e,h.getNode(!a),a,!1):p?DM(e,g.toRange(),!1):en.none()},DU=(e,t,r,n,o,l)=>{let a;let i=ul(t,e.getBody(),r),s=e5(i.getClientRects()),d=t===p.Down,c=e.getBody();if(!s)return en.none();if(Nc(e)){let u=d?sg.fromRangeEnd(r):sg.fromRangeStart(r);return(d?Dy:Dv)(c,u).orThunk(()=>en.from(u)).map(e=>e.toRange())}let m=(d?DO:DA)(c,DP(1),i),f=ep(m,DL(1)),g=s.left,h=Dk(f,g);if(h&&l(h.node)){let b=Math.abs(g-h.left),v=Math.abs(g-h.right);return E4(t,e,h.node,b<v,!1)}if(a=n(i)?i.getNode():o(i)?i.getNode(!0):i8(r)){let y=DB(t,c,DP(1),a),C=Dk(ep(y,DL(1)),g);if(C||(C=e5(ep(y,DL(0)))))return DM(e,C.position.toRange(),!1)}return 0===f.length?Dj(e,d).filter(d?o:n).map(t=>Nr(e,t.toRange(),!1)):en.none()},Dj=(e,t)=>{let r=e.selection.getRng(),n=t?sg.fromRangeEnd(r):sg.fromRangeStart(r),o=c8(n.container(),e.getBody());if(t){let l=Du(o,n);return eA(l.positions)}{let a=Dc(o,n);return eR(a.positions)}},Dz=(e,t,r)=>Dj(e,t).filter(r).exists(t=>(e.selection.setRng(t.toRange()),!0)),DH=(e,t)=>{let r=e.dom.createRng();r.setStart(t.container(),t.offset()),r.setEnd(t.container(),t.offset()),e.selection.setRng(r)},D$=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},Dq=(e,t,r)=>NH(t,r).map(t=>(DH(e,t),r)),DV=(e,t,r)=>{let n=sg.fromRangeStart(e);if(e.collapsed)return n;{let o=sg.fromRangeEnd(e);return r?uD(t,o).getOr(o):uN(t,n).getOr(n)}},DW=(e,t,r)=>{let n=e.getBody(),o=DV(e.selection.getRng(),n,r),l=X(bX,e),a=N7(r,l,n,o);return a.bind(r=>Dq(e,t,r))},DK=(e,t,r)=>{let n=eu(oM(rV.fromDom(t.getRoot()),'*[data-mce-selected="inline-boundary"]'),e=>e.dom),o=ep(n,e),l=ep(r,e);em(eS(o,l),X(D$,!1)),em(eS(l,o),X(D$,!0))},DG=(e,t)=>{let r=t.get();if(e.selection.isCollapsed()&&!e.composing&&r){let n=sg.fromRangeStart(e.selection.getRng());sg.isTextPosition(n)&&!b1(n)&&(DH(e,cV(r,n)),t.set(null))}},DY=(e,t,r,n)=>{if(t.selection.isCollapsed()){let o=ep(n,e);em(o,n=>{let o=sg.fromRangeStart(t.selection.getRng());NZ(e,t.getBody(),o).bind(e=>Dq(t,r,e))})}},DX=(e,t,r)=>!!dX(e)&&DW(e,t,r).isSome(),DQ=(e,t,r)=>!!dX(t)&&Dr(e,t),DJ=e=>{let t=a4(null),r=X(bX,e);return e.on("NodeChange",n=>{dX(e)&&(DK(r,e.dom,n.parents),DG(e,t),DY(r,e,t,n.parents))}),t},DZ=X(DQ,!0),D0=X(DQ,!1),D1=(e,t,r)=>{if(!dX(e))return!1;{let n=Dj(e,t).getOrThunk(()=>{let r=e.selection.getRng();return t?sg.fromRangeEnd(r):sg.fromRangeStart(r)});return NZ(X(bX,e),e.getBody(),n).exists(t=>{let n=N2(t);return NH(r,n).exists(t=>(DH(e,t),!0))})}},D2=(e,t)=>{let r=document.createRange();return r.setStart(e.container(),e.offset()),r.setEnd(t.container(),t.offset()),r},D3=e=>rl(uR(e),uA(e),(t,r)=>{let n=b2(!0,t),o=b2(!1,r);return uN(e,n).forall(e=>e.isEqual(o))}).getOr(!0),D8=(e,t)=>r=>NH(t,r).map(t=>()=>DH(e,t)),D5=(e,t,r,n)=>{let o=e.getBody(),l=X(bX,e);e.undoManager.ignore(()=>{e.selection.setRng(D2(r,n)),b9(e),NZ(l,o,sg.fromRangeStart(e.selection.getRng())).map(N3).bind(D8(e,t)).each(ee)}),e.nodeChanged()},D6=(e,t)=>{let r=c5(t,e);return r||e},D9=(e,t,r,n)=>{let o=D6(e.getBody(),n.container()),l=X(bX,e),a=NZ(l,o,n),i=a.bind(e=>r?e.fold(K(en.some(N3(e))),en.none,K(en.some(N2(e))),en.none):e.fold(en.none,K(en.some(N2(e))),en.none,K(en.some(N3(e)))));return i.map(D8(e,t)).getOrThunk(()=>{let i=u_(r,o,n),s=i.bind(e=>NZ(l,o,e));return rl(a,s,()=>bZ(l,o,n).bind(t=>D3(t)?en.some(()=>{bK(e,r,rV.fromDom(t))}):en.none())).getOrThunk(()=>s.bind(()=>i.map(o=>()=>{r?D5(e,t,n,o):D5(e,t,o,n)})))})},D4=(e,t,r)=>{if(e.selection.isCollapsed()&&dX(e)){let n=sg.fromRangeStart(e.selection.getRng());return D9(e,t,r,n)}return en.none()},D7=(e,t)=>{let r=hK(t,e);return eC(r,o$).fold(K(r),e=>r.slice(0,e))},Re=e=>1===nl(e),Rt=(e,t,r,n)=>{let o=X(CC,t),l=eu(ep(n,o),e=>e.dom);if(0===l.length)bK(t,e,r);else{let a=Cy(r.dom,l);t.selection.setRng(a.toRange())}},Rr=(e,t)=>{let r=rV.fromDom(e.getBody()),n=rV.fromDom(e.selection.getStart()),o=ep(D7(r,n),Re);return eA(o).bind(r=>{let n=sg.fromRangeStart(e.selection.getRng());return vn(t,n,r.dom)&&!Cx(r)?en.some(()=>Rt(t,e,r,o)):en.none()})},Rn=(e,t)=>e.selection.isCollapsed()?Rr(e,t):en.none(),Ro=(e,t,r)=>j(r)?en.some(()=>{e._selectionOverrides.hideFakeCaret(),bK(e,t,rV.fromDom(r))}):en.none(),Rl=(e,t)=>{let r=t?hI:hU,n=t?f.Forwards:f.Backwards,o=ul(n,e.getBody(),e.selection.getRng());return r(o)?Ro(e,t,o.getNode(!t)):en.from(b2(t,o)).filter(e=>r(e)&&ud(o,e)).bind(r=>Ro(e,t,r.getNode(!t)))},Ra=(e,t)=>{let r=e.selection.getNode();return oB(r)?Ro(e,t,r):en.none()},Ri=(e,t)=>e.selection.isCollapsed()?Rl(e,t):Ra(e,t),Rs=e=>oe(e,e=>oR(e.dom)||oA(e.dom)).exists(e=>oR(e.dom)),Rd=e=>tx(null!=e?e:"").getOr(0),Rc=(e,t)=>{let r=e||oq(t)?"margin":"padding",n="rtl"===nw(t,"direction")?"-right":"-left";return r+n},Ru=(e,t,r,n,o,l)=>{let a=Rc(r,rV.fromDom(l)),i=Rd(e.getStyle(l,a));if("outdent"===t){let s=Math.max(0,i-n);e.setStyle(l,a,s?s+o:"")}else e.setStyle(l,a,i+n+o)},Rm=(e,t)=>ek(t,t=>{let r=Rc(dP(e),t),n=n_(t,r).map(Rd).getOr(0),o=e.dom.getContentEditable(t.dom);return"false"!==o&&n>0}),Rf=e=>{let t=Rh(e);return!e.mode.isReadOnly()&&(t.length>1||Rm(e,t))},Rg=e=>oG(e)||oY(e),Rp=e=>r3(e).exists(Rg),Rh=e=>ep(nU(e.selection.getSelectedBlocks()),e=>!Rg(e)&&!Rp(e)&&Rs(e)),Rb=(e,t)=>{var r,n;let{dom:o}=e,l=dL(e),a=null!==(n=null===(r=/[a-z%]+$/i.exec(l))||void 0===r?void 0:r[0])&&void 0!==n?n:"px",i=Rd(l),s=dP(e);em(Rh(e),e=>{Ru(o,t,s,i,a,e.dom)})},Rv=e=>Rb(e,"indent"),Ry=e=>Rb(e,"outdent"),RC=e=>{if(e.selection.isCollapsed()&&Rf(e)){let t=e.dom,r=e.selection.getRng(),n=sg.fromRangeStart(r),o=t.getParent(r.startContainer,t.isBlock);if(null!==o&&hJ(rV.fromDom(o),n))return en.some(()=>Ry(e))}return en.none()},Rx=(e,t,r)=>eT([RC,NR,Ns,(e,r)=>D4(e,t,r),E0,v0,NO,Ri,E9,Rn],t=>t(e,r)),Rw=(e,t)=>{let r=Rx(e,t,!1);r.fold(()=>{b9(e),vr(e)},ee)},Rk=(e,t)=>{let r=Rx(e,t,!0);r.fold(()=>b4(e),ee)},R_=(e,t)=>{e.addCommand("delete",()=>{Rw(e,t)}),e.addCommand("forwardDelete",()=>{Rk(e,t)})},RS=e=>void 0===e.touches||1!==e.touches.length?en.none():en.some(e.touches[0]),RE=(e,t)=>{let r=Math.abs(e.clientX-t.x),n=Math.abs(e.clientY-t.y);return r>5||n>5},RN=e=>{let t=ib(),r=a4(!1),n=iy(t=>{e.dispatch("longpress",{...t,type:"longpress"}),r.set(!0)},400);e.on("touchstart",e=>{RS(e).each(o=>{n.cancel();let l={x:o.clientX,y:o.clientY,target:e.target};n.throttle(e),r.set(!1),t.set(l)})},!0),e.on("touchmove",o=>{n.cancel(),RS(o).each(n=>{t.on(o=>{RE(n,o)&&(t.clear(),r.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",o=>{n.cancel(),"touchcancel"!==o.type&&t.get().filter(e=>e.target.isEqualNode(o.target)).each(()=>{r.get()?o.preventDefault():e.dispatch("tap",{...o,type:"tap"})})},!0)},RD=(e,t)=>eW(e,t.nodeName),RR=(e,t)=>!!ox(t)||!!ou(t)&&!RD(e.getBlockElements(),t)&&!u1(t)&&!lG(e,t),RA=(e,t,r)=>ec(hW(rV.fromDom(r),rV.fromDom(t)),t=>RD(e,t.dom)),RO=(e,t)=>!!(ox(t)&&(0===t.data.length||/^\s+$/.test(t.data)&&(!t.nextSibling||RD(e,t.nextSibling)))),RT=e=>e.dom.create(dg(e),dp(e)),RB=e=>{let t,r;let n=e.dom,o=e.selection,l=e.schema,a=l.getBlockElements(),i=o.getStart(),s=e.getBody(),d=!1,c=dg(e);if(!i||!ou(i))return;let u=s.nodeName.toLowerCase();if(!l.isValidChild(u,c.toLowerCase())||RA(a,s,i))return;let m=o.getRng(),{startContainer:f,startOffset:g,endContainer:p,endOffset:h}=m,b=pH(e),v=s.firstChild;for(;v;)if(ou(v)&&l$(l,v),RR(l,v)){if(RO(a,v)){r=v,v=v.nextSibling,n.remove(r);continue}t||(t=RT(e),s.insertBefore(t,v),d=!0),r=v,v=v.nextSibling,t.appendChild(r)}else t=null,v=v.nextSibling;d&&b&&(m.setStart(f,g),m.setEnd(p,h),o.setRng(m),e.nodeChanged())},RP=(e,t,r)=>{let n=rV.fromDom(RT(e)),o=o3();nO(n,o),r(t,n);let l=document.createRange();return l.setStartBefore(o.dom),l.setEndBefore(o.dom),l},RL=e=>{e.on("NodeChange",X(RB,e))},RF=e=>t=>-1!==(" "+t.attr("class")+" ").indexOf(e),RM=(e,t,r)=>function(n){let o=arguments,l=o[o.length-2],a=l>0?t.charAt(l-1):"";if('"'===a)return n;if(">"===a){let i=t.lastIndexOf("<",l);if(-1!==i){let s=t.substring(i,l);if(-1!==s.indexOf('contenteditable="false"'))return n}}return'<span class="'+r+'" data-mce-content="'+e.dom.encode(o[0])+'">'+e.dom.encode("string"==typeof o[1]?o[1]:o[0])+"</span>"},RI=(e,t,r)=>{let n=t.length,o=r.content;if("raw"!==r.format){for(;n--;)o=o.replace(t[n],RM(e,o,cN(e)));r.content=o}},RU=e=>{let t="contenteditable",r=" "+rr.trim(cD(e))+" ",n=" "+rr.trim(cN(e))+" ",o=RF(r),l=RF(n),a=cR(e);a.length>0&&e.on("BeforeSetContent",t=>{RI(e,a,t)}),e.parser.addAttributeFilter("class",e=>{let r=e.length;for(;r--;){let n=e[r];o(n)?n.attr(t,"true"):l(n)&&n.attr(t,"false")}}),e.serializer.addAttributeFilter(t,e=>{let r=e.length;for(;r--;){let n=e[r];(o(n)||l(n))&&(a.length>0&&n.attr("data-mce-content")?(n.name="#text",n.type=3,n.raw=!0,n.value=n.attr("data-mce-content")):n.attr(t,null))}})},Rj=e=>ol(rV.fromDom(e.getBody()),"*[data-mce-caret]").map(e=>e.dom).getOrNull(),Rz=(e,t)=>{t.hasAttribute("data-mce-caret")&&(li(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},RH=(e,t)=>{let r=Rj(e);if(r){if("compositionstart"===t.type){t.preventDefault(),t.stopPropagation(),Rz(e,r);return}o7(r)&&(Rz(e,r),e.undoManager.add())}},R$=e=>{e.on("keyup compositionstart",X(RH,e))},Rq=(e,t,r)=>DI(t,e,r,hH,h$,oA),RV=(e,t,r)=>{let n=e=>hH(e)||hj(e),o=e=>h$(e)||hz(e);return DU(t,e,r,n,o,oA)},RW=e=>{let t=e.dom.create(dg(e));return t.innerHTML='<br data-mce-bogus="1">',t},RK=(e,t,r)=>{let n=up(e.getBody()),o=X(us,1===t?n.next:n.prev);if(r.collapsed){let l=e.dom.getParent(r.startContainer,"PRE");if(!l)return;let a=o(sg.fromRangeStart(r));if(!a){let i=rV.fromDom(RW(e));1===t?nR(rV.fromDom(l),i):nD(rV.fromDom(l),i),e.selection.select(i.dom,!0),e.selection.collapse()}}},RG=(e,t)=>{let r=t?f.Forwards:f.Backwards,n=e.selection.getRng();return Rq(r,e,n).orThunk(()=>(RK(e,r,n),en.none()))},RY=(e,t)=>{let r=t?1:-1,n=e.selection.getRng();return RV(r,e,n).orThunk(()=>(RK(e,r,n),en.none()))},RX=(e,t)=>RG(e,t).exists(t=>(DF(e,t),!0)),RQ=(e,t)=>RY(e,t).exists(t=>(DF(e,t),!0)),RJ=(e,t)=>Dz(e,t,t?h$:hH),RZ=(e,t)=>Nd(e,!t).map(r=>{let n=r.toRange(),o=e.selection.getRng();return t?n.setStart(o.startContainer,o.startOffset):n.setEnd(o.endContainer,o.endOffset),n}).exists(t=>(DF(e,t),!0)),R0=e=>ed(["figcaption"],rs(e)),R1=(e,t)=>{let r=X(rQ,t);return oe(rV.fromDom(e.container()),o$,r).filter(R0)},R2=(e,t,r)=>t?Dp(e.dom,r):Dg(e.dom,r),R3=(e,t)=>{let r=rV.fromDom(e.getBody()),n=sg.fromRangeStart(e.selection.getRng());return R1(n,r).exists(()=>{if(!R2(r,t,n))return!1;{let o=RP(e,r,t?nO:nA);return e.selection.setRng(o),!0}})},R8=(e,t)=>!!e.selection.isCollapsed()&&R3(e,t),R5={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},R6=e=>eu(e,e=>({...R5,...e})),R9=e=>eu(e,e=>({...R5,...e})),R4=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,R7=(e,t)=>ew(R6(e),e=>R4(e,t)?[e]:[]),Ae=(e,t)=>ew(R9(e),e=>R4(e,t)?[e]:[]),At=(e,...t)=>()=>e.apply(null,t),Ar=(e,t)=>ey(R7(e,t),e=>e.action()),An=(e,t)=>eT(Ae(e,t),e=>e.action()),Ao=(e,t)=>{let r=t?f.Forwards:f.Backwards,n=e.selection.getRng();return DI(e,r,n,hI,hU,oB).exists(t=>(DF(e,t),!0))},Al=(e,t)=>{let r=e.selection.getRng();return DU(e,t?1:-1,r,hI,hU,oB).exists(t=>(DF(e,t),!0))},Aa=(e,t)=>Dz(e,t,t?hU:hI),Ai=sQ.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),As=e=>Ai.none(e),Ad={...Ai,none:As},Ac=(e,t)=>Au(e,t,er),Au=(e,t,r)=>ew(nt(e),e=>rK(e,t)?r(e)?[e]:[]:Au(e,t,r)),Am=(e,t,r=et)=>{if(r(t))return en.none();if(ed(e,rs(t)))return en.some(t);let n=e=>rK(e,"table")||r(e);return oo(t,e.join(","),n)},Af=(e,t)=>Am(["td","th"],e,t),Ag=e=>Ac(e,"th,td"),Ap=(e,t)=>oa(e,"table",t),Ah=(e,t,r,n,o=er)=>{let l=1===n;if(!l&&r<=0)return Ad.first(e[0]);if(l&&r>=e.length-1)return Ad.last(e[e.length-1]);{let a=r+n,i=e[a];return o(i)?Ad.middle(t,i):Ah(e,t,a,n,o)}},Ab=(e,t)=>Ap(e,t).bind(t=>{let r=Ag(t),n=eC(r,t=>rQ(e,t));return n.map(e=>({index:e,all:r}))}),Av=(e,t,r)=>{let n=Ab(e,r);return n.fold(()=>Ad.none(e),r=>Ah(r.all,e,r.index,1,t))},Ay=(e,t,r)=>{let n=Ab(e,r);return n.fold(()=>Ad.none(),r=>Ah(r.all,e,r.index,-1,t))},AC=e=>oa(e,"[contenteditable]"),Ax=(e,t=!1)=>nb(e)?e.dom.isContentEditable:AC(e).fold(K(t),e=>"true"===Aw(e)),Aw=e=>e.dom.contentEditable,Ak=(e,t)=>({left:e.left-t,top:e.top-t,right:e.right+2*t,bottom:e.bottom+2*t,width:e.width+t,height:e.height+t}),A_=(e,t)=>ew(t,t=>{let r=Ak(iK(t.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:t},{x:r.right,y:e(r),cell:t}]}),AS=(e,t,r)=>eb(e,(e,n)=>e.fold(()=>en.some(n),e=>{let o=Math.sqrt(Math.abs(e.x-t)+Math.abs(e.y-r)),l=Math.sqrt(Math.abs(n.x-t)+Math.abs(n.y-r));return en.some(l<o?n:e)}),en.none()),AE=(e,t,r,n,o)=>{let l=oM(rV.fromDom(r),"td,th,caption").map(e=>e.dom),a=ep(A_(e,l),e=>t(e,o));return AS(a,n,o).map(e=>e.cell)},AN=X(AE,e=>e.bottom,(e,t)=>e.y<t),AD=X(AE,e=>e.top,(e,t)=>e.y>t),AR=(e,t)=>eR(t.getClientRects()).bind(t=>AN(e,t.left,t.top)).bind(e=>Dd(Db(e),t)),AA=(e,t)=>eA(t.getClientRects()).bind(t=>AD(e,t.left,t.top)).bind(e=>Dd(Dh(e),t)),AO=(e,t,r)=>r.breakAt.exists(r=>e(t,r).breakAt.isSome()),AT=e=>e.breakType===g.Wrap&&0===e.positions.length,AB=e=>e.breakType===g.Br&&1===e.positions.length,AP=(e,t,r)=>{let n=e(t,r);return AT(n)||!oN(r.getNode())&&AB(n)?!AO(e,t,n):n.breakAt.isNone()},AL=X(AP,Dc),AF=X(AP,Du),AM=(e,t,r)=>{let n=sg.fromRangeStart(t);return uE(!e,r).exists(e=>e.isEqual(n))},AI=(e,t,r,n)=>{let o=e.selection.getRng();return!!(cX()&&AM(t,o,r))&&(E4(t?1:-1,e,r,!t,!1).each(t=>{DF(e,t)}),!0)},AU=(e,t,r)=>AR(t,r).orThunk(()=>eR(r.getClientRects()).bind(r=>Ds(Dm(e,sg.before(t)),r.left))).getOr(sg.before(t)),Aj=(e,t,r)=>AA(t,r).orThunk(()=>eR(r.getClientRects()).bind(r=>Ds(Df(e,sg.after(t)),r.left))).getOr(sg.after(t)),Az=(e,t)=>{let r=t.getNode(e);return ov(r)?en.some(r):en.none()},AH=(e,t,r)=>{t.undoManager.transact(()=>{let n=RP(t,rV.fromDom(r),e?nR:nD);DF(t,n)})},A$=(e,t,r)=>{let n=t?Az(!0,r):Az(!1,r),o=!1===t;n.fold(()=>DF(e,r.toRange()),n=>uE(o,e.getBody()).filter(e=>e.isEqual(r)).fold(()=>DF(e,r.toRange()),r=>AH(t,e,n)))},Aq=(e,t,r,n)=>{let o=e.selection.getRng(),l=sg.fromRangeStart(o),a=e.getBody();if(!t&&AL(n,l)){let i=AU(a,r,l);return A$(e,t,i),!0}if(!(t&&AF(n,l)))return!1;{let s=Aj(a,r,l);return A$(e,t,s),!0}},AV=(e,t,r)=>en.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(n=>en.from(e.dom.getParent(n,"table")).map(o=>r(e,t,o,n))).getOr(!1),AW=(e,t)=>AV(e,t,AI),AK=(e,t)=>AV(e,t,Aq),AG=e=>{let t=gs.exact(e,0,e,0);return gg(t)},AY=(e,t,r)=>r.fold(en.none,en.none,(e,t)=>p5(t).map(e=>AG(e)),r=>(e.execCommand("mceTableInsertRowAfter"),AX(e,t,r))),AX=(e,t,r)=>AY(e,t,Av(r,Ax)),AQ=(e,t,r)=>AY(e,t,Ay(r,Ax)),AJ=(e,t)=>{let r=["table","li","dl"],n=rV.fromDom(e.getBody()),o=e=>{let t=rs(e);return rQ(e,n)||ed(r,t)},l=e.selection.getRng(),a=rV.fromDom(t?l.endContainer:l.startContainer);return Af(a,o).map(r=>{Ap(r,o).each(t=>{e.model.table.clearSelectedCells(t.dom)}),e.selection.collapse(!t);let n=(t?AX:AQ)(e,o,r);return n.each(t=>{e.selection.setRng(t)}),!0}).getOr(!1)},AZ=(e,t,r)=>{let n=t2.os.isMacOS()||t2.os.isiOS();Ar([{keyCode:fL.RIGHT,action:At(RX,e,!0)},{keyCode:fL.LEFT,action:At(RX,e,!1)},{keyCode:fL.UP,action:At(RQ,e,!1)},{keyCode:fL.DOWN,action:At(RQ,e,!0)},...n?[{keyCode:fL.UP,action:At(RZ,e,!1),metaKey:!0,shiftKey:!0},{keyCode:fL.DOWN,action:At(RZ,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:fL.RIGHT,action:At(AW,e,!0)},{keyCode:fL.LEFT,action:At(AW,e,!1)},{keyCode:fL.UP,action:At(AK,e,!1)},{keyCode:fL.DOWN,action:At(AK,e,!0)},{keyCode:fL.RIGHT,action:At(Ao,e,!0)},{keyCode:fL.LEFT,action:At(Ao,e,!1)},{keyCode:fL.UP,action:At(Al,e,!1)},{keyCode:fL.DOWN,action:At(Al,e,!0)},{keyCode:fL.RIGHT,action:At(DX,e,t,!0)},{keyCode:fL.LEFT,action:At(DX,e,t,!1)},{keyCode:fL.RIGHT,ctrlKey:!n,altKey:n,action:At(DZ,e,t)},{keyCode:fL.LEFT,ctrlKey:!n,altKey:n,action:At(D0,e,t)},{keyCode:fL.UP,action:At(R8,e,!1)},{keyCode:fL.DOWN,action:At(R8,e,!0)}],r).each(e=>{r.preventDefault()})},A0=(e,t)=>{e.on("keydown",r=>{r.isDefaultPrevented()||AZ(e,t,r)})},A1=(e,t)=>({container:e,offset:t}),A2=a5.DOM,A3=e=>t=>e===t?-1:0,A8=e=>t=>e.isBlock(t)||ed(["BR","IMG","HR","INPUT"],t.nodeName)||"false"===e.getContentEditable(t),A5=(e,t,r)=>{if(ox(e)&&t>=0)return en.some(A1(e,t));{let n=iV(A2);return en.from(n.backwards(e,t,A3(e),r)).map(e=>A1(e.container,e.container.data.length))}},A6=(e,t,r)=>{if(ox(e)&&t>=e.length)return en.some(A1(e,t));{let n=iV(A2);return en.from(n.forwards(e,t,A3(e),r)).map(e=>A1(e.container,0))}},A9=(e,t,r)=>{if(!ox(e))return en.none();let n=e.data;if(t>=0&&t<=n.length)return en.some(A1(e,t));{let o=iV(A2);return en.from(o.backwards(e,t,A3(e),r)).bind(e=>{let n=e.container.data;return A9(e.container,t+n.length,r)})}},A4=(e,t,r)=>{if(!ox(e))return en.none();let n=e.data;if(t<=n.length)return en.some(A1(e,t));{let o=iV(A2);return en.from(o.forwards(e,t,A3(e),r)).bind(e=>A4(e.container,t-n.length,r))}},A7=(e,t,r,n,o)=>{let l=iV(e,A8(e));return en.from(l.backwards(t,r,n,o))},Oe=e=>e.collapsed&&ox(e.startContainer),Ot=e=>oF(e.toString().replace(/\u00A0/g," ")),Or=e=>""!==e&&-1!==" \xa0\f\n\r	\v".indexOf(e),On=(e,t)=>e.substring(t.length),Oo=(e,t,r)=>{let n;let o=r.charAt(0);for(n=t-1;n>=0;n--){let l=e.charAt(n);if(Or(l))return en.none();if(o===l&&tu(e,r,n,t))break}return en.some(n)},Ol=(e,t,r,n=0)=>{if(!Oe(t))return en.none();let o={text:"",offset:0},l=(e,t,n)=>(o.text=n+o.text,o.offset+=t,Oo(o.text,o.offset,r).getOr(t)),a=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return A7(e,t.startContainer,t.startOffset,l,a).bind(e=>{let o=t.cloneRange();if(o.setStart(e.container,e.offset),o.setEnd(t.endContainer,t.endOffset),o.collapsed)return en.none();let l=Ot(o),a=l.lastIndexOf(r);return 0!==a||On(l,r).length<n?en.none():en.some({text:On(l,r),range:o,trigger:r})})},Oa=(e,t,r,n=0)=>he(rV.fromDom(t.startContainer)).fold(()=>Ol(e,t,r,n),t=>{let n=e.createRng();n.selectNode(t.dom);let o=Ot(n);return en.some({range:n,text:On(o,r),trigger:r})}),Oi=e=>3===e.nodeType,Os=e=>1===e.nodeType,Od=e=>{if(Oi(e))return A1(e,e.data.length);{let t=e.childNodes;return t.length>0?Od(t[t.length-1]):A1(e,t.length)}},Oc=(e,t)=>{let r=e.childNodes;return r.length>0&&t<r.length?Oc(r[t],0):r.length>0&&Os(e)&&r.length===t?Od(r[r.length-1]):A1(e,t)},Ou=(e,t)=>{var r;let n=null!==(r=e.getParent(t.container,e.isBlock))&&void 0!==r?r:e.getRoot();return A7(e,t.container,t.offset,(e,t)=>0===t?-1:t,n).filter(e=>{let t=e.container.data.charAt(e.offset-1);return!Or(t)}).isSome()},Om=e=>t=>{let r=Oc(t.startContainer,t.startOffset);return!Ou(e,r)},Of=(e,t,r)=>eT(r.triggers,r=>Oa(e,t,r)),Og=(e,t)=>{let r=t(),n=e.selection.getRng();return Of(e.dom,n,r).bind(r=>Op(e,t,r))},Op=(e,t,r,n={})=>{var o;let l=t(),a=e.selection.getRng(),i=null!==(o=a.startContainer.nodeValue)&&void 0!==o?o:"",s=ep(l.lookupByTrigger(r.trigger),t=>r.text.length>=t.minChars&&t.matches.getOrThunk(()=>Om(e.dom))(r.range,i,r.text));if(0===s.length)return en.none();let d=Promise.all(eu(s,e=>{let t=e.fetch(r.text,e.maxResults,n);return t.then(t=>({matchText:r.text,items:t,columns:e.columns,onAction:e.onAction,highlightOn:e.highlightOn}))}));return en.some({lookupData:d,context:r})};(c=h||(h={}))[c.Error=0]="Error",c[c.Value=1]="Value";let Oh=(e,t,r)=>e.stype===h.Error?t(e.serror):r(e.svalue),Ob=e=>{let t=[],r=[];return em(e,e=>{Oh(e,e=>r.push(e),e=>t.push(e))}),{values:t,errors:r}},Ov=(e,t)=>e.stype===h.Error?{stype:h.Error,serror:t(e.serror)}:e,Oy=(e,t)=>e.stype===h.Value?{stype:h.Value,svalue:t(e.svalue)}:e,OC=(e,t)=>e.stype===h.Value?t(e.svalue):e,Ox=(e,t)=>e.stype===h.Error?t(e.serror):e,Ow=e=>({stype:h.Value,svalue:e}),Ok=e=>({stype:h.Error,serror:e}),O_=e=>Oh(e,sY.error,sY.value),OS=e=>e.fold(Ok,Ow),OE={fromResult:OS,toResult:O_,svalue:Ow,partition:Ob,serror:Ok,bind:OC,bindError:Ox,map:Oy,mapError:Ov,fold:Oh},ON=e=>B(e)&&eP(e).length>100?" removed due to size":JSON.stringify(e,null,2),OD=e=>{let t=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:K("... (only showing first ten failures)")}]):e;return eu(t,e=>"Failed path: ("+e.path.join(" > ")+")\n"+e.getErrorInfo())},OR=(e,t)=>OE.serror([{path:e,getErrorInfo:t}]),OA=(e,t,r)=>OR(e,()=>'Could not find valid *required* value for "'+t+'" in '+ON(r)),OO=(e,t)=>OR(e,()=>'Choice schema did not contain choice key: "'+t+'"'),OT=(e,t,r)=>OR(e,()=>'The chosen schema: "'+r+'" did not exist in branches: '+ON(t)),OB=(e,t)=>OR(e,K(t)),OP=(e,t,r,n)=>{let o=eV(r,n);return o.fold(()=>OT(e,r,n),r=>r.extract(e.concat(["branch: "+n]),t))},OL=(e,t)=>{let r=(r,n)=>{let o=eV(n,e);return o.fold(()=>OO(r,e),e=>OP(r,n,t,e))},n=()=>"chooseOn("+e+"). Possible values: "+eP(t);return{extract:r,toString:n}},OF=(e,t)=>{let r=P(e)&&P(t);return r?OI(e,t):t},OM=e=>(...t)=>{if(0===t.length)throw Error("Can't merge zero objects");let r={};for(let n=0;n<t.length;n++){let o=t[n];for(let l in o)eW(o,l)&&(r[l]=e(r[l],o[l]))}return r},OI=OM(OF),OU=OM((e,t)=>t),Oj=()=>({tag:"required",process:{}}),Oz=e=>({tag:"defaultedThunk",process:e}),OH=e=>Oz(K(e)),O$=()=>({tag:"option",process:{}}),Oq=(e,t)=>e.length>0?OE.svalue(OI(t,OU.apply(void 0,e))):OE.svalue(t),OV=e=>V(OE.serror,ex)(e),OW=(e,t)=>{let r=OE.partition(e);return r.errors.length>0?OV(r.errors):Oq(r.values,t)},OK=e=>{let t=OE.partition(e);return t.errors.length>0?OV(t.errors):OE.svalue(t.values)},OG={consolidateObj:OW,consolidateArr:OK},OY=(e,t,r,n)=>({tag:"field",key:e,newKey:t,presence:r,prop:n}),OX=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),OQ=(e,t,r)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return r(e.newKey,e.instantiator)}},OJ=e=>{let t=(t,r)=>OE.bindError(e(r),e=>OB(t,e)),r=K("val");return{extract:t,toString:r}},OZ=OJ(OE.svalue),O0=(e,t,r,n)=>eV(t,r).fold(()=>OA(e,r,t),n),O1=(e,t,r,n)=>{let o=eV(e,t).getOrThunk(()=>r(e));return n(o)},O2=(e,t,r)=>r(eV(e,t)),O3=(e,t,r,n)=>{let o=eV(e,t).map(t=>!0===t?r(e):t);return n(o)},O8=(e,t,r,n,o)=>{let l=e=>o.extract(t.concat([n]),e),a=e=>e.fold(()=>OE.svalue(en.none()),e=>{let r=o.extract(t.concat([n]),e);return OE.map(r,en.some)});switch(e.tag){case"required":return O0(t,r,n,l);case"defaultedThunk":return O1(r,n,e.process,l);case"option":return O2(r,n,a);case"defaultedOptionThunk":return O3(r,n,e.process,a);case"mergeWithThunk":return O1(r,n,K({}),t=>{let n=OI(e.process(r),t);return l(n)})}},O5=(e,t,r)=>{let n={},o=[];for(let l of r)OQ(l,(r,l,a,i)=>{let s=O8(a,e,t,r,i);OE.fold(s,e=>{o.push(...e)},e=>{n[l]=e})},(e,r)=>{n[e]=r(t)});return o.length>0?OE.serror(o):OE.svalue(n)},O6=e=>{let t=(t,r)=>O5(t,r,e),r=()=>{let t=eu(e,e=>OQ(e,(e,t,r,n)=>e+" -> "+n.toString(),(e,t)=>"state("+e+")"));return"obj{\n"+t.join("\n")+"}"};return{extract:t,toString:r}},O9=e=>{let t=(t,r)=>{let n=eu(r,(r,n)=>e.extract(t.concat(["["+n+"]"]),r));return OG.consolidateArr(n)},r=()=>"array("+e.toString()+")";return{extract:t,toString:r}},O4=e=>OJ(t=>e(t).fold(OE.serror,OE.svalue)),O7=(e,t,r)=>{let n=t.extract([e],r);return OE.mapError(n,e=>({input:r,errors:e}))},Te=(e,t,r)=>OE.toResult(O7(e,t,r)),Tt=e=>"Errors: \n"+OD(e.errors).join("\n")+"\n\nInput object: "+ON(e.input),Tr=(e,t)=>OL(e,eM(t,O6)),Tn=K(OZ),To=(e,t)=>OJ(r=>e(r)?OE.svalue(r):OE.serror(`Expected type: ${t} but got: ${typeof r}`)),Tl=To(H,"number"),Ta=To(T,"string"),Ti=To(M,"boolean"),Ts=To(z,"function"),Td=e=>O4(t=>ed(e,t)?sY.value(t):sY.error(`Unsupported value: "${t}", choose one of "${e.join(", ")}".`)),Tc=(e,t)=>OY(e,e,Oj(),t),Tu=e=>Tc(e,Ta),Tm=e=>Tc(e,Ts),Tf=(e,t)=>OY(e,e,O$(),t),Tg=e=>Tf(e,Ta),Tp=(e,t,r)=>OY(e,e,OH(t),r),Th=(e,t)=>Tp(e,t,Tl),Tb=(e,t)=>Tp(e,t,Ta),Tv=(e,t,r)=>Tp(e,t,Td(r)),Ty=(e,t)=>Tp(e,t,Ti),TC=(e,t)=>Tp(e,t,Ts),Tx=Tu("type"),Tw=Tm("fetch"),Tk=Tm("onAction"),T_=TC("onSetup",()=>q),TS=Tg("text"),TE=Tg("icon"),TN=Tg("tooltip"),TD=Tg("label"),TR=Ty("active",!1),TA=Ty("enabled",!0),TO=Ty("primary",!1),TT=e=>Tb("type",e),TB=O6([Tx,Tu("trigger"),Th("minChars",1),OY(a="columns",a,OH(1),Tn()),Th("maxResults",10),Tf("matches",Ts),Tw,Tk,Tp("highlightOn",[],O9(Ta))]),TP=e=>Te("Autocompleter",TB,{trigger:e.ch,...e}),TL=[TA,TN,TE,TS,T_],TF=[TR].concat(TL),TM=[TC("predicate",et),Tv("scope","node",["node","editor"]),Tv("position","selection",["node","selection","line"])],TI=TL.concat([TT("contextformbutton"),TO,Tk,OX("original",G)]),TU=TF.concat([TT("contextformbutton"),TO,Tk,OX("original",G)]),Tj=TL.concat([TT("contextformbutton")]),Tz=TF.concat([TT("contextformtogglebutton")]),TH=Tr("type",{contextformbutton:TI,contextformtogglebutton:TU});O6([TT("contextform"),TC("initValue",K("")),TD,OY(u="commands",u,Oj(),O9(TH)),Tf("launch",Tr("type",{contextformbutton:Tj,contextformtogglebutton:Tz}))].concat(TM));let T$=e=>{let t=e.ui.registry.getAll().popups,r=eM(t,e=>TP(e).fold(e=>{throw Error(Tt(e))},G)),n=eY(e$(r,e=>e.trigger)),o=eq(r),l=e=>ep(o,t=>t.trigger===e);return{dataset:r,triggers:n,lookupByTrigger:l}},Tq=(e,t)=>{let r=iy(t.load,50);e.on("keypress compositionend",e=>{27!==e.which&&r.throttle()}),e.on("keydown",e=>{let n=e.which;8===n?r.throttle():27===n&&t.cancelIfNecessary()}),e.on("remove",r.cancel)},TV=e=>{let t=ib(),r=a4(!1),n=t.isSet,o=()=>{n()&&(_M(e),fO(e),r.set(!1),t.clear())},l=r=>{n()||(_F(e,r.range),t.set({trigger:r.trigger,matchLength:r.text.length}))},a=e6(()=>T$(e)),i=r=>t.get().map(t=>Oa(e.dom,e.selection.getRng(),t.trigger).bind(t=>Op(e,a,t,r))).getOrThunk(()=>Og(e,a)),s=n=>{i(n).fold(o,n=>{l(n.context),n.lookupData.then(l=>{t.get().map(a=>{let i=n.context;a.trigger===i.trigger&&(i.text.length-a.matchLength>=10?o():(t.set({...a,matchLength:i.text.length}),r.get()?fA(e,{lookupData:l}):(r.set(!0),fR(e,{lookupData:l}))))})})})};e.addCommand("mceAutocompleterReload",(e,t)=>{let r=B(t)?t.fetchOptions:{};s(r)}),e.addCommand("mceAutocompleterClose",o),Tq(e,{cancelIfNecessary:o,load:s})},TW=e=>(t,r,n={})=>{let o=t.getBody(),l={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:o,currentTarget:o,eventPhase:Event.AT_TARGET,originalTarget:o,explicitOriginalTarget:o,isTrusted:!1,srcElement:o,cancelable:!1,preventDefault:q,inputType:r},a=aU(new InputEvent(e));return t.dispatch(e,{...a,...l,...n})},TK=TW("input"),TG=TW("beforeinput"),TY=(e,t,r)=>{let n=r.keyCode===fL.BACKSPACE?"deleteContentBackward":"deleteContentForward";An([{keyCode:fL.BACKSPACE,action:At(RC,e)},{keyCode:fL.BACKSPACE,action:At(NR,e,!1)},{keyCode:fL.DELETE,action:At(NR,e,!0)},{keyCode:fL.BACKSPACE,action:At(Ns,e,!1)},{keyCode:fL.DELETE,action:At(Ns,e,!0)},{keyCode:fL.BACKSPACE,action:At(D4,e,t,!1)},{keyCode:fL.DELETE,action:At(D4,e,t,!0)},{keyCode:fL.BACKSPACE,action:At(v0,e,!1)},{keyCode:fL.DELETE,action:At(v0,e,!0)},{keyCode:fL.BACKSPACE,action:At(NO,e,!1)},{keyCode:fL.DELETE,action:At(NO,e,!0)},{keyCode:fL.BACKSPACE,action:At(Ri,e,!1)},{keyCode:fL.DELETE,action:At(Ri,e,!0)},{keyCode:fL.BACKSPACE,action:At(E9,e,!1)},{keyCode:fL.DELETE,action:At(E9,e,!0)},{keyCode:fL.BACKSPACE,action:At(E0,e,!1)},{keyCode:fL.DELETE,action:At(E0,e,!0)},{keyCode:fL.BACKSPACE,action:At(Rn,e,!1)},{keyCode:fL.DELETE,action:At(Rn,e,!0)}],r).each(t=>{r.preventDefault();let o=TG(e,n);o.isDefaultPrevented()||(t(),TK(e,n))})},TX=(e,t)=>{Ar([{keyCode:fL.BACKSPACE,action:At(ND,e)},{keyCode:fL.DELETE,action:At(ND,e)}],t)},TQ=(e,t)=>{e.on("keydown",r=>{r.isDefaultPrevented()||TY(e,t,r)}),e.on("keyup",t=>{t.isDefaultPrevented()||TX(e,t)})},TJ=e=>{for(;e;){if(ou(e)||ox(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},TZ=(e,t)=>{let r=e.dom,n=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){let o=TJ(t.firstChild);o&&/^(UL|OL|DL)$/.test(o.nodeName)&&t.insertBefore(r.doc.createTextNode("\xa0"),t.firstChild)}let l=r.createRng();if(t.normalize(),t.hasChildNodes()){let a;let i=new os(t,t),s=t;for(;a=i.current();){if(ox(a)){l.setStart(a,0),l.setEnd(a,0);break}if(n[a.nodeName.toLowerCase()]){l.setStartBefore(a),l.setEndBefore(a);break}s=a,a=i.next()}a||(l.setStart(s,0),l.setEnd(s,0))}else oN(t)?t.nextSibling&&r.isBlock(t.nextSibling)?(l.setStartBefore(t),l.setEndBefore(t)):(l.setStartAfter(t),l.setEndAfter(t)):(l.setStart(t,0),l.setEnd(t,0));e.selection.setRng(l),g9(e,l)},T0=(e,t)=>{let r;let n=e.getRoot(),o=t;for(;o!==n&&o&&"false"!==e.getContentEditable(o);)"true"===e.getContentEditable(o)&&(r=o),o=o.parentNode;return o!==n?r:n},T1=e=>en.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),T2=e=>T1(e).fold(K(""),e=>e.nodeName.toUpperCase()),T3=e=>T1(e).filter(e=>oY(rV.fromDom(e))).isSome(),T8=(e,t)=>e.firstChild&&e.firstChild.nodeName===t,T5=e=>{var t;return(null===(t=e.parentNode)||void 0===t?void 0:t.firstChild)===e},T6=(e,t)=>{let r=null==e?void 0:e.parentNode;return j(r)&&r.nodeName===t},T9=e=>j(e)&&/^(OL|UL|LI)$/.test(e.nodeName),T4=e=>j(e)&&/^(LI|DT|DD)$/.test(e.nodeName),T7=e=>T9(e)&&T9(e.parentNode),Be=e=>{let t=e.parentNode;return T4(t)?t:e},Bt=(e,t,r)=>{let n=e[r?"firstChild":"lastChild"];for(;n&&!ou(n);)n=n[r?"nextSibling":"previousSibling"];return n===t},Br=(e,t,r,n,o)=>{let l=e.dom,a=e.selection.getRng(),i=r.parentNode;if(r===e.getBody()||!i)return;T7(r)&&(o="LI");let s=t(o);if(Bt(r,n,!0)&&Bt(r,n,!1)){if(T6(r,"LI")){let d=Be(r);l.insertAfter(s,d),T5(r)?l.remove(d):l.remove(r)}else l.replace(s,r)}else if(Bt(r,n,!0))T6(r,"LI")?(l.insertAfter(s,Be(r)),s.appendChild(l.doc.createTextNode(" ")),s.appendChild(r)):i.insertBefore(s,r),l.remove(n);else if(Bt(r,n,!1))l.insertAfter(s,Be(r)),l.remove(n);else{r=Be(r);let c=a.cloneRange();c.setStartAfter(n),c.setEndAfter(r);let u=c.extractContents();"LI"===o&&T8(u,"LI")?(s=u.firstChild,l.insertAfter(u,r)):(l.insertAfter(u,r),l.insertAfter(s,r)),l.remove(n)}TZ(e,s)},Bn=e=>{em(n9(rV.fromDom(e),rf),e=>{let t=e.dom;t.nodeValue=oF(t.data)})},Bo=(e,t)=>{let r=e.dom.getParent(t,"ol,ul,dl");return null!==r&&"false"===e.dom.getContentEditableParent(r)},Bl=(e,t)=>t&&"A"===t.nodeName&&e.isEmpty(t),Ba=e=>{e.innerHTML='<br data-mce-bogus="1">'},Bi=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,Bs=(e,t)=>j(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&"true"!==e.getContentEditable(t),Bd=(e,t,r)=>{var n;let o=[];if(!r)return;let l=r;for(;l=l.firstChild;){if(e.isBlock(l))return;ou(l)&&!t[l.nodeName.toLowerCase()]&&o.push(l)}let a=o.length;for(;a--;)(l=o[a]).hasChildNodes()&&(l.firstChild!==l.lastChild||(null===(n=l.firstChild)||void 0===n?void 0:n.nodeValue)!=="")?Bl(e,l)&&e.remove(l):e.remove(l)},Bc=(e,t,r)=>ox(t)?e?1===r&&"\uFEFF"===t.data.charAt(r-1)?0:r:r===t.data.length-1&&"\uFEFF"===t.data.charAt(r)?t.data.length:r:r,Bu=e=>{let t=e.cloneRange();return t.setStart(e.startContainer,Bc(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,Bc(!1,e.endContainer,e.endOffset)),t},Bm=e=>{let t=e;do ox(t)&&(t.data=t.data.replace(/^[\r\n]+/,"")),t=t.firstChild;while(t)},Bf=(e,t,r)=>{let n=e.dom;en.from(r.style).map(n.parseStyle).each(e=>{let r=nS(rV.fromDom(t)),o={...r,...e};n.setStyles(t,o)});let o=en.from(r.class).map(e=>e.split(/\s+/)),l=en.from(t.className).map(e=>ep(e.split(/\s+/),e=>""!==e));rl(o,l,(e,r)=>{let o=ep(r,t=>!ed(e,t)),l=[...e,...o];n.setAttrib(t,"class",l.join(" "))});let a=["style","class"],i=eH(r,(e,t)=>!ed(a,t));n.setAttribs(t,i)},Bg=(e,t)=>{let r=dg(e);if(r.toLowerCase()===t.tagName.toLowerCase()){let n=dp(e);Bf(e,t,n)}},Bp=(e,t,r,n,o)=>{var l;let a=e.dom,i=null!==(l=T0(a,n))&&void 0!==l?l:a.getRoot(),s=a.getParent(n,a.isBlock);if(!s||!Bs(a,s)){let d,c;if(d=(s=s||i)===e.getBody()||oT(s)?s.nodeName.toLowerCase():s.parentNode?s.parentNode.nodeName.toLowerCase():"",!s.hasChildNodes()){let u=a.create(t);return Bg(e,u),s.appendChild(u),r.setStart(u,0),r.setEnd(u,0),u}let m=n;for(;m&&m.parentNode!==s;)m=m.parentNode;for(;m&&!a.isBlock(m);)c=m,m=m.previousSibling;if(c&&e.schema.isValidChild(d,t.toLowerCase())){let f=c.parentNode,g=a.create(t);for(Bg(e,g),f.insertBefore(g,c),m=c;m&&!a.isBlock(m);){let p=m.nextSibling;g.appendChild(m),m=p}r.setStart(n,o),r.setEnd(n,o)}}return n},Bh=(e,t)=>{t.normalize();let r=t.lastChild;(!r||ou(r)&&/^(left|right)$/gi.test(e.getStyle(r,"float",!0)))&&e.add(t,"br")},Bb=(e,t)=>{let r=dC(e);return!U(t)&&(T(r)?ed(rr.explode(r),t.nodeName.toLowerCase()):r)},Bv=(e,t)=>{let r,n,o,l,a;let i=!1,s=e.dom,d=e.schema,c=d.getNonEmptyElements(),u=e.selection.getRng(),m=dg(e),f=t=>{let n,l=r,a=d.getTextInlineElements(),i=n=t||"TABLE"===o||"HR"===o?s.create(t||m):y.cloneNode(!1);if(!1===dy(e))s.setAttrib(n,"style",null),s.setAttrib(n,"class",null);else do if(a[l.nodeName]){if(uT(l)||u1(l))continue;let c=l.cloneNode(!1);s.setAttrib(c,"id",""),n.hasChildNodes()?(c.appendChild(n.firstChild),n.appendChild(c)):(i=c,n.appendChild(c))}while((l=l.parentNode)&&l!==v);return Bg(e,n),Ba(i),n},g=e=>{let t;let o=Bc(e,r,n);if(ox(r)&&(e?o>0:o<r.data.length))return!1;if(r.parentNode===y&&i&&!e||e&&ou(r)&&r===y.firstChild)return!0;if(Bi(r,"TABLE")||Bi(r,"HR"))return i&&!e||!i&&e;let l=new os(r,y);for(ox(r)&&(e&&0===o?l.prev():e||o!==r.data.length||l.next());t=l.current();){if(ou(t)){if(!t.getAttribute("data-mce-bogus")){let a=t.nodeName.toLowerCase();if(c[a]&&"br"!==a)return!1}}else if(ox(t)&&!lC(t.data))return!1;e?l.prev():l.next()}return!0},p=()=>{let t;return t=/^(H[1-6]|PRE|FIGURE)$/.test(o)&&"HGROUP"!==C?f(m):f(),Bb(e,l)&&Bs(s,l)&&s.isEmpty(y)?t=s.split(l,y):s.insertAfter(t,y),TZ(e,t),t};gN(s,u).each(e=>{u.setStart(e.startContainer,e.startOffset),u.setEnd(e.endContainer,e.endOffset)}),r=u.startContainer,n=u.startOffset;let h=!!(t&&t.shiftKey),b=!!(t&&t.ctrlKey);ou(r)&&r.hasChildNodes()&&(i=n>r.childNodes.length-1,r=r.childNodes[Math.min(n,r.childNodes.length-1)]||r,n=i&&ox(r)?r.data.length:0);let v=T0(s,r);if(!v||Bo(e,r))return;h||(r=Bp(e,m,u,r,n));let y=s.getParent(r,s.isBlock)||s.getRoot();l=j(null==y?void 0:y.parentNode)?s.getParent(y.parentNode,s.isBlock):null,o=y?y.nodeName.toUpperCase():"";let C=l?l.nodeName.toUpperCase():"";if("LI"===C&&!b){let x=l;y=x,l=x.parentNode,o=C}if(/^(LI|DT|DD)$/.test(o)&&ou(l)&&s.isEmpty(y)){Br(e,f,l,y,m);return}if(y===e.getBody())return;let w=y.parentNode;if(o6(y))a=li(y),s.isEmpty(y)&&Ba(y),Bg(e,a),TZ(e,a);else if(g(!1))a=p();else if(g(!0)&&w)a=w.insertBefore(f(),y),TZ(e,Bi(y,"HR")?a:y);else{let k=Bu(u).cloneRange();k.setEndAfter(y);let _=k.extractContents();Bn(_),Bm(_),a=_.firstChild,s.insertAfter(_,y),Bd(s,c,a),Bh(s,y),s.isEmpty(y)&&Ba(y),a.normalize(),s.isEmpty(a)?(s.remove(a),p()):(Bg(e,a),TZ(e,a))}s.setAttrib(a,"id",""),e.dispatch("NewBlock",{newBlock:a})},By={insert:Bv,fakeEventName:"insertParagraph"},BC=(e,t,r)=>{let n;let o=new os(t,r),l=e.getNonEmptyElements();for(;n=o.next();)if(l[n.nodeName.toLowerCase()]||ox(n)&&n.length>0)return!0;return!1},Bx=(e,t,r)=>{let n=e.dom.createRng();r?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),e.selection.setRng(n),g9(e,n)},Bw=(e,t)=>{let r;let n=e.selection,o=e.dom,l=n.getRng(),a=!1;gN(o,l).each(e=>{l.setStart(e.startContainer,e.startOffset),l.setEnd(e.endContainer,e.endOffset)});let i=l.startOffset,s=l.startContainer;if(ou(s)&&s.hasChildNodes()){let d=i>s.childNodes.length-1;s=s.childNodes[Math.min(i,s.childNodes.length-1)]||s,i=d&&ox(s)?s.data.length:0}let c=o.getParent(s,o.isBlock),u=c&&c.parentNode?o.getParent(c.parentNode,o.isBlock):null,m=u?u.nodeName.toUpperCase():"",f=!!(t&&t.ctrlKey);"LI"!==m||f||(c=u),ox(s)&&i>=s.data.length&&!BC(e.schema,s,c||o.getRoot())&&(r=o.create("br"),l.insertNode(r),l.setStartAfter(r),l.setEndAfter(r),a=!0),r=o.create("br"),sv(o,l,r),Bx(e,r,a),e.undoManager.add()},Bk=(e,t)=>{let r=rV.fromTag("br");nD(rV.fromDom(t),r),e.undoManager.add()},B_=(e,t)=>{BE(e.getBody(),t)||nR(rV.fromDom(t),rV.fromTag("br"));let r=rV.fromTag("br");nR(rV.fromDom(t),r),Bx(e,r.dom,!1),e.undoManager.add()},BS=e=>oN(e.getNode()),BE=(e,t)=>!!BS(sg.after(t))||uN(e,sg.after(t)).map(e=>oN(e.getNode())).getOr(!1),BN=e=>e&&"A"===e.nodeName&&"href"in e,BD=e=>e.fold(et,BN,BN,et),BR=e=>{let t=X(bX,e),r=sg.fromRangeStart(e.selection.getRng());return NZ(t,e.getBody(),r).filter(BD)},BA=(e,t)=>{t.fold(q,X(Bk,e),X(B_,e),q)},BO=(e,t)=>{let r=BR(e);r.isSome()?r.each(X(BA,e)):Bw(e,t)},BT={insert:BO,fakeEventName:"insertLineBreak"},BB=(e,t)=>T1(e).filter(e=>t.length>0&&rK(rV.fromDom(e),t)).isSome(),BP=e=>BB(e,db(e)),BL=e=>BB(e,dv(e)),BF=sQ.generate([{br:[]},{block:[]},{none:[]}]),BM=(e,t)=>BL(e),BI=e=>(t,r)=>T3(t)===e,BU=(e,t)=>(r,n)=>{let o=T2(r)===e.toUpperCase();return o===t},Bj=e=>{let t=T0(e.dom,e.selection.getStart());return U(t)},Bz=e=>BU("pre",e),BH=()=>BU("summary",!0),B$=e=>(t,r)=>df(t)===e,Bq=(e,t)=>BP(e),BV=(e,t)=>t,BW=e=>{let t=dg(e),r=T0(e.dom,e.selection.getStart());return j(r)&&e.schema.isValidChild(r.nodeName,t)},BK=(e,t)=>(r,n)=>{let o=eb(e,(e,t)=>e&&t(r,n),!0);return o?en.some(t):en.none()},BG=(e,t)=>N$([BK([BM],BF.none()),BK([Bz(!0),Bj],BF.none()),BK([BH()],BF.br()),BK([Bz(!0),B$(!1),BV],BF.br()),BK([Bz(!0),B$(!1)],BF.block()),BK([Bz(!0),B$(!0),BV],BF.block()),BK([Bz(!0),B$(!0)],BF.br()),BK([BI(!0),BV],BF.br()),BK([BI(!0)],BF.block()),BK([Bq],BF.br()),BK([BV],BF.br()),BK([BW],BF.block())],[e,!!(t&&t.shiftKey)]).getOr(BF.none()),BY=(e,t,r)=>{if(t.selection.isCollapsed()||b6(t),j(r)){let n=TG(t,e.fakeEventName);if(n.isDefaultPrevented())return}e.insert(t,r),j(r)&&TK(t,e.fakeEventName)},BX=(e,t)=>{let r=()=>BY(BT,e,t),n=()=>BY(By,e,t),o=BG(e,t);switch(dh(e)){case"linebreak":o.fold(r,r,q);break;case"block":o.fold(n,n,q);break;case"invert":o.fold(n,r,q);break;default:o.fold(r,n,q)}},BQ=(e,t)=>{t.isDefaultPrevented()||(t.preventDefault(),kZ(e.undoManager),e.undoManager.transact(()=>{BX(e,t)}))},BJ=e=>{e.on("keydown",t=>{t.keyCode===fL.ENTER&&BQ(e,t)})},BZ=(e,t,r)=>{let n=t2.os.isMacOS()||t2.os.isiOS();Ar([{keyCode:fL.END,action:At(RJ,e,!0)},{keyCode:fL.HOME,action:At(RJ,e,!1)},...n?[]:[{keyCode:fL.HOME,action:At(RZ,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:fL.END,action:At(RZ,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:fL.END,action:At(Aa,e,!0)},{keyCode:fL.HOME,action:At(Aa,e,!1)},{keyCode:fL.END,action:At(D1,e,!0,t)},{keyCode:fL.HOME,action:At(D1,e,!1,t)}],r).each(e=>{r.preventDefault()})},B0=(e,t)=>{e.on("keydown",r=>{r.isDefaultPrevented()||BZ(e,t,r)})},B1=e=>{e.on("input",t=>{t.isComposing||b_(e)})},B2=tY(),B3=(e,t,r)=>{Ar([{keyCode:fL.PAGE_UP,action:At(D1,e,!1,t)},{keyCode:fL.PAGE_DOWN,action:At(D1,e,!0,t)}],r)},B8=e=>e.stopImmediatePropagation(),B5=e=>e.keyCode===fL.PAGE_UP||e.keyCode===fL.PAGE_DOWN,B6=(e,t,r)=>{r&&!e.get()?t.on("NodeChange",B8,!0):!r&&e.get()&&t.off("NodeChange",B8),e.set(r)},B9=(e,t)=>{if(B2.os.isMacOS())return;let r=a4(!1);e.on("keydown",t=>{B5(t)&&B6(r,e,!0)}),e.on("keyup",n=>{n.isDefaultPrevented()||B3(e,t,n),B5(n)&&r.get()&&(B6(r,e,!1),e.nodeChanged())})},B4=(e,t)=>{let r=t.container(),n=t.offset();return ox(r)?(r.insertData(n,e),en.some(sg(r,n+e.length))):ua(t).map(r=>{let n=rV.fromText(e);return t.isAtEnd()?nR(r,n):nD(r,n),sg(n.dom,e.length)})},B7=X(B4,"\xa0"),Pe=X(B4," "),Pt=e=>t=>t.fold(t=>uD(e.dom,sg.before(t)),e=>uR(e),e=>uA(e),t=>uN(e.dom,sg.after(t))),Pr=(e,t)=>r=>bu(e,r)?B7(t):Pe(t),Pn=e=>t=>(e.selection.setRng(t.toRange()),e.nodeChanged(),!0),Po=e=>{let t=sg.fromRangeStart(e.selection.getRng()),r=rV.fromDom(e.getBody());if(!e.selection.isCollapsed())return en.none();{let n=X(bX,e),o=sg.fromRangeStart(e.selection.getRng());return NZ(n,e.getBody(),o).bind(Pt(r)).map(n=>()=>Pr(r,t)(n).each(Pn(e)))}},Pl=(e,t)=>{An([{keyCode:fL.SPACEBAR,action:At(Po,e)}],t).each(r=>{t.preventDefault();let n=TG(e,"insertText",{data:" "});n.isDefaultPrevented()||(r(),TK(e,"insertText",{data:" "}))})},Pa=e=>{e.on("keydown",t=>{t.isDefaultPrevented()||Pl(e,t)})},Pi=e=>cF(e)?[{keyCode:fL.TAB,action:At(AJ,e,!0)},{keyCode:fL.TAB,shiftKey:!0,action:At(AJ,e,!1)}]:[],Ps=(e,t)=>{Ar([...Pi(e)],t).each(e=>{t.preventDefault()})},Pd=e=>{e.on("keydown",t=>{t.isDefaultPrevented()||Ps(e,t)})},Pc=e=>{if(e.addShortcut("Meta+P","","mcePrint"),TV(e),_l(e))return a4(null);{let t=DJ(e);return R$(e),A0(e,t),TQ(e,t),BJ(e),Pa(e),B1(e),Pd(e),B0(e,t),B9(e,t),t}};class Pu{constructor(e){let t;this.lastPath=[],this.editor=e;let r=this;"onselectionchange"in e.getDoc()||e.on("NodeChange click mouseup keyup focus",r=>{let n=e.selection.getRng(),o={startContainer:n.startContainer,startOffset:n.startOffset,endContainer:n.endContainer,endOffset:n.endOffset};"nodechange"!==r.type&&gb(o,t)||e.dispatch("SelectionChange"),t=o}),e.on("contextmenu",()=>{e.dispatch("SelectionChange")}),e.on("SelectionChange",()=>{let t=e.selection.getStart(!0);t&&mv(e)&&!r.isSameElementPath(t)&&e.dom.isChildOf(t,e.getBody())&&e.nodeChanged({selectionChange:!0})}),e.on("mouseup",t=>{!t.isDefaultPrevented()&&mv(e)&&("IMG"===e.selection.getNode().nodeName?py.setEditorTimeout(e,()=>{e.nodeChanged()}):e.nodeChanged())})}nodeChanged(e={}){let t;let r=this.editor.selection;if(this.editor.initialized&&r&&!d4(this.editor)&&!this.editor.mode.isReadOnly()){let n=this.editor.getBody();(t=r.getStart(!0)||n).ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(t,n)||(t=n);let o=[];this.editor.dom.getParent(t,e=>e===n||(o.push(e),!1)),this.editor.dispatch("NodeChange",{...e,element:t,parents:o})}}isSameElementPath(e){let t;let r=this.editor,n=e_(r.dom.getParents(e,er,r.getBody()));if(n.length===this.lastPath.length){for(t=n.length;t>=0&&n[t]===this.lastPath[t];t--);if(-1===t)return this.lastPath=n,!0}return this.lastPath=n,!1}}let Pm="x-tinymce/html",Pf=K(Pm),Pg="<!-- "+Pm+" -->",Pp=e=>Pg+e,Ph=e=>e.replace(Pg,""),Pb=e=>-1!==e.indexOf(Pg),Pv=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),Py=(e,t)=>{let r="<"+e,n=e$(t,(e,t)=>t+'="'+ay.encodeAllRaw(e)+'"');return n.length&&(r+=" "+n.join(" ")),r+">"},PC=(e,t,r)=>{let n=e.split(/\n\n/),o=Py(t,r),l="</"+t+">",a=eu(n,e=>e.split(/\n/).join("<br />"));return 1===a.length?a[0]:eu(a,e=>o+e+l).join("")},Px="%MCEPASTEBIN%",Pw=(e,t)=>{let{dom:r,selection:n}=e,o=e.getBody();t.set(n.getRng());let l=r.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},Px);t2.browser.isFirefox()&&r.setStyle(l,"left","rtl"===r.getStyle(o,"direction",!0)?65535:-65535),r.bind(l,"beforedeactivate focusin focusout",e=>{e.stopPropagation()}),l.focus(),n.select(l,!0)},Pk=(e,t)=>{let r=e.dom;if(P_(e)){let n;let o=t.get();for(;n=P_(e);)r.remove(n),r.unbind(n);o&&e.selection.setRng(o)}t.set(null)},P_=e=>e.dom.get("mcepastebin"),PS=e=>j(e)&&"mcepastebin"===e.id,PE=e=>{let t=e.dom,r=(e,r)=>{e.appendChild(r),t.remove(r,!0)},[n,...o]=ep(e.getBody().childNodes,PS);em(o,e=>{r(n,e)});let l=t.select("div[id=mcepastebin]",n);for(let a=l.length-1;a>=0;a--){let i=t.create("div");n.insertBefore(i,l[a]),r(i,l[a])}return n?n.innerHTML:""},PN=e=>e===Px,PD=e=>{let t=a4(null);return{create:()=>Pw(e,t),remove:()=>Pk(e,t),getEl:()=>P_(e),getHtml:()=>PE(e),getLastRng:t.get}},PR=(e,t)=>(rr.each(t,t=>{e=O(t,RegExp)?e.replace(t,""):e.replace(t[0],t[1])}),e),PA=e=>{let t=aB(),r=wZ({},t),n="",o=t.getVoidElements(),l=rr.makeMap("script noscript style textarea video audio iframe object"," "),a=t.getBlockElements(),i=e=>{let r=e.name;if("br"===r){n+="\n";return}if("wbr"!==r){if(o[r]&&(n+=" "),l[r]){n+=" ";return}if(3===e.type&&(n+=e.value),!(e.name in t.getVoidElements())){let s=e.firstChild;if(s)do i(s);while(s=s.next)}a[r]&&e.next&&(n+="\n","p"===r&&(n+="\n"))}};return e=PR(e,[/<!\[[^\]]+\]>/g]),i(r.parse(e)),n},PO=e=>{let t=(e,t,r)=>t||r?"\xa0":" ";return e=PR(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,t],/<br class="Apple-interchange-newline">/g,/<br>$/i])},PT=e=>{let t=e.toLowerCase(),r={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return rr.hasOwn(r,t)?"image/"+r[t]:"image/"+t},PB=(e,t)=>{let r=wZ({},e.schema);r.addNodeFilter("meta",e=>{rr.each(e,e=>{e.remove()})});let n=r.parse(t,{forced_root_block:!1,isRootContent:!0});return hx({validate:!0},e.schema).serialize(n)},PP=(e,t)=>({content:e,cancelled:t}),PL=(e,t,r)=>{let n=e.dom.create("div",{style:"display:none"},t),o=fB(e,n,r);return PP(o.node.innerHTML,o.isDefaultPrevented())},PF=(e,t,r)=>{let n=fT(e,t,r),o=PB(e,n.content);return e.hasEventListeners("PastePostProcess")&&!n.isDefaultPrevented()?PL(e,o,r):PP(o,n.isDefaultPrevented())},PM=(e,t,r)=>PF(e,t,r),PI=(e,t)=>(e.insertContent(t,{merge:cC(e),paste:!0}),!0),PU=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),Pj=(e,t)=>PU(t)&&ec(cL(e),e=>tf(t.toLowerCase(),`.${e.toLowerCase()}`)),Pz=(e,t,r)=>(e.undoManager.extra(()=>{r(e,t)},()=>{e.insertContent('<img src="'+t+'">')}),!0),PH=(e,t,r)=>(e.undoManager.extra(()=>{r(e,t)},()=>{e.execCommand("mceInsertLink",!1,t)}),!0),P$=(e,t,r)=>!!(!e.selection.isCollapsed()&&PU(t))&&PH(e,t,r),Pq=(e,t,r)=>!!Pj(e,t)&&Pz(e,t,r),PV=(e,t)=>{rr.each([P$,Pq,PI],r=>!r(e,t,PI))},PW=(e,t,r)=>{r||!cx(e)?PI(e,t):PV(e,t)},PK=(o=0,()=>"mceclip"+o++),PG=(e,t,r,n)=>{let o=PM(e,t,r);o.cancelled||PW(e,o.content,n)},PY=(e,t,r)=>{let n=r||Pb(t);PG(e,Ph(t),n,!1)},PX=(e,t)=>{let r=e.dom.encode(t).replace(/\r\n/g,"\n"),n=l_(r,ck(e)),o=PC(n,dg(e),dp(e));PG(e,o,!1,!0)},PQ=e=>{let t={};if(e&&e.types)for(let r=0;r<e.types.length;r++){let n=e.types[r];try{t[n]=e.getData(n)}catch(o){t[n]=""}}return t},PJ=(e,t)=>t in e&&e[t].length>0,PZ=e=>PJ(e,"text/html")||PJ(e,"text/plain"),P0=(e,t)=>{let r=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return j(r)?e.dom.encode(r[1]):void 0},P1=(e,t,r,n)=>{let o=PK(),l=dw(e)&&j(r.name),a=l?P0(e,r.name):o,i=l?r.name:void 0,s=t.create(o,r,n,a,i);return t.add(s),s},P2=(e,t)=>{wv(t.uri).each(({data:r,type:n,base64Encoded:o})=>{let l=o?r:btoa(r),a=t.file,i=e.editorUpload.blobCache,s=i.getByData(l,n),d=null!=s?s:P1(e,i,a,l);PY(e,`<img src="${d.blobUri()}">`,!1)})},P3=e=>"paste"===e.type,P8=e=>Promise.all(eu(e,e=>ww(e).then(t=>({file:e,uri:t})))),P5=e=>{let t=cL(e);return e=>tm(e.type,"image/")&&ec(t,t=>PT(t)===e.type)},P6=(e,t)=>{let r=t.items?ew(eO(t.items),e=>"file"===e.kind?[e.getAsFile()]:[]):[],n=t.files?eO(t.files):[];return ep(r.length>0?r:n,P5(e))},P9=(e,t,r)=>{let n=P3(t)?t.clipboardData:t.dataTransfer;if(cp(e)&&n){let o=P6(e,n);if(o.length>0)return t.preventDefault(),P8(o).then(t=>{r&&e.selection.setRng(r),em(t,t=>{P2(e,t)})}),!0}return!1},P4=e=>{var t,r;return t2.os.isAndroid()&&(null===(r=null===(t=e.clipboardData)||void 0===t?void 0:t.items)||void 0===r?void 0:r.length)===0},P7=e=>fL.metaKeyPressed(e)&&86===e.keyCode||e.shiftKey&&45===e.keyCode,Le=(e,t,r,n)=>{let o=PO(r),l=PJ(t,Pf())||Pb(r),a=!l&&Pv(o),i=PU(o);(PN(o)||!o.length||a&&!i)&&(n=!0),(n||i)&&(o=PJ(t,"text/plain")&&a?t["text/plain"]:PA(o)),PN(o)||(n?PX(e,o):PY(e,o,l))},Lt=(e,t,r)=>{let n;let o=()=>t.getLastRng()||e.selection.getRng();e.on("keydown",e=>{P7(e)&&!e.isDefaultPrevented()&&(n=e.shiftKey&&86===e.keyCode)}),e.on("paste",l=>{if(l.isDefaultPrevented()||P4(l))return;let a="text"===r.get()||n;n=!1;let i=PQ(l.clipboardData);!PZ(i)&&P9(e,l,o())||(PJ(i,"text/html")?(l.preventDefault(),Le(e,i,i["text/html"],a)):(t.create(),py.setEditorTimeout(e,()=>{let r=t.getHtml();t.remove(),Le(e,i,r,a)},0)))})},Lr=e=>{let t=e=>tm(e,"webkit-fake-url"),r=e=>tm(e,"data:"),n=e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.paste)===!0};e.parser.addNodeFilter("img",(o,l,a)=>{if(!cp(e)&&n(a))for(let i of o){let s=i.attr("src");T(s)&&!i.attr("data-mce-object")&&s!==t2.transparentSrc&&(t(s)?i.remove():!c_(e)&&r(s)&&i.remove())}})},Ln=(e,t,r)=>{Lt(e,t,r),Lr(e)},Lo=(e,t)=>{"text"===t.get()?(t.set("html"),fP(e,!1)):(t.set("text"),fP(e,!0)),e.focus()},Ll=(e,t)=>{e.addCommand("mceTogglePlainTextPaste",()=>{Lo(e,t)}),e.addCommand("mceInsertClipboardContent",(t,r)=>{r.html&&PY(e,r.html,r.internal),r.text&&PX(e,r.text)})},La=(e,t,r)=>{if(!e)return!1;try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",r),e.setData(Pf(),t),!0}catch(n){return!1}},Li=(e,t,r,n)=>{La(e.clipboardData,t.html,t.text)?(e.preventDefault(),n()):r(t.html,n)},Ls=e=>(t,r)=>{let{dom:n,selection:o}=e,l=n.create("div",{contenteditable:"false","data-mce-bogus":"all"}),a=n.create("div",{contenteditable:"true"},t);n.setStyles(l,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),l.appendChild(a),n.add(e.getBody(),l);let i=o.getRng();a.focus();let s=n.createRng();s.selectNodeContents(a),o.setRng(s),py.setEditorTimeout(e,()=>{o.setRng(i),n.remove(l),r()},0)},Ld=e=>({html:Pp(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),Lc=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),Lu=e=>!e.selection.isCollapsed()||Lc(e),Lm=e=>t=>{!t.isDefaultPrevented()&&Lu(e)&&Li(t,Ld(e),Ls(e),()=>{if(t2.browser.isChromium()||t2.browser.isFirefox()){let t=e.selection.getRng();py.setEditorTimeout(e,()=>{e.selection.setRng(t),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},Lf=e=>t=>{!t.isDefaultPrevented()&&Lu(e)&&Li(t,Ld(e),Ls(e),q)},Lg=e=>{e.on("cut",Lm(e)),e.on("copy",Lf(e))},Lp=(e,t)=>{var r,n;return gA.getCaretRangeFromPoint(null!==(r=t.clientX)&&void 0!==r?r:0,null!==(n=t.clientY)&&void 0!==n?n:0,e.getDoc())},Lh=e=>{let t=e["text/plain"];return!!t&&0===t.indexOf("file://")},Lb=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},Lv=e=>ec(e.files,e=>/^image\//.test(e.type)),Ly=(e,t)=>{cg(e)&&e.on("dragend dragover draggesture dragdrop drop drag",e=>{e.preventDefault(),e.stopPropagation()}),cp(e)||e.on("drop",e=>{let t=e.dataTransfer;t&&Lv(t)&&e.preventDefault()}),e.on("drop",r=>{if(r.isDefaultPrevented()||t.get())return;let n=Lp(e,r);if(U(n))return;let o=PQ(r.dataTransfer),l=PJ(o,Pf());if((!PZ(o)||Lh(o))&&P9(e,r,n))return;let a=o[Pf()],i=a||o["text/html"]||o["text/plain"];i&&(r.preventDefault(),py.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{a&&e.execCommand("Delete"),Lb(e,n);let t=PO(i);o["text/html"]?PY(e,t,l):PX(e,t)})}))}),e.on("dragstart",e=>{t.set(!0)}),e.on("dragover dragend",r=>{cp(e)&&!t.get()&&(r.preventDefault(),Lb(e,Lp(e,r))),"dragend"===r.type&&t.set(!1)})},LC=e=>{let t=t=>r=>{t(e,r)},r=ch(e);z(r)&&e.on("PastePreProcess",t(r));let n=cb(e);z(n)&&e.on("PastePostProcess",t(n))},Lx=(e,t)=>{e.on("PastePreProcess",r=>{r.content=t(e,r.content,r.internal)})},Lw=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,Lk=e=>rr.trim(e).replace(Lw,mn).toLowerCase(),L_=(e,t,r)=>{let n=cv(e);if(r||"all"===n||!cy(e))return t;let o=n?n.split(/[, ]/):[];if(o&&"none"!==n){let l=e.dom,a=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(e,t,r,n)=>{let i=l.parseStyle(l.decode(r)),s={};for(let d=0;d<o.length;d++){let c=i[o[d]],u=c,m=l.getStyle(a,o[d],!0);/color/.test(o[d])&&(u=Lk(u),m=Lk(m)),m!==u&&(s[o[d]]=c)}let f=l.serializeStyle(s,"span");return f?t+' style="'+f+'"'+n:t+n})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(e,t,r,n)=>t+' style="'+r+'"'+n)},LS=e=>{(t2.browser.isChromium()||t2.browser.isSafari())&&Lx(e,L_)},LE=e=>{let t=a4(!1),r=a4(cw(e)?"text":"html"),n=PD(e);LS(e),Ll(e,r),LC(e),e.on("PreInit",()=>{Lg(e),Ly(e,t),Ln(e,n,r)})},LN=e=>{e.on("click",t=>{e.dom.getParent(t.target,"details")&&t.preventDefault()})},LD=e=>{e.parser.addNodeFilter("details",e=>{em(e,e=>{e.attr("data-mce-open",e.attr("open")),e.attr("open","open")})}),e.serializer.addNodeFilter("details",e=>{em(e,e=>{let t=e.attr("data-mce-open");e.attr("open",T(t)?t:null),e.attr("data-mce-open",null)})})},LR=e=>{LN(e),LD(e)},LA=e=>oA(e.dom),LO=e=>oR(e.dom),LT=e=>t=>rQ(rV.fromDom(e),t),LB=(e,t)=>oe(rV.fromDom(e),e=>LO(e)||o$(e),LT(t)).getOr(rV.fromDom(t)).dom,LP=(e,t)=>oe(rV.fromDom(e),LA,LT(t)),LL=(e,t,r)=>{let n=new os(e,t),o=r?n.next.bind(n):n.prev.bind(n),l=e;for(let a=r?e:o();a&&!oN(a);a=o())lm(a)&&(l=a);return l},LF=(e,t)=>{let r=sg.fromRangeStart(e),n=r.getNode(),o=LB(n,t),l=LL(n,o,!1),a=LL(n,o,!0),i=document.createRange();return LP(l,o).fold(()=>{ox(l)?i.setStart(l,0):i.setStartBefore(l)},e=>i.setStartBefore(e.dom)),LP(a,o).fold(()=>{ox(a)?i.setEnd(a,a.data.length):i.setEndAfter(a)},e=>i.setEndAfter(e.dom)),i},LM=e=>{let t=LF(e.selection.getRng(),e.getBody());e.selection.setRng(ym(t))},LI=e=>{e.on("mousedown",t=>{t.detail>=3&&(t.preventDefault(),LM(e))})};(m=b||(b={})).Before="before",m.After="after";let LU=(e,t)=>Math.abs(e.left-t),Lj=(e,t)=>Math.abs(e.right-t),Lz=(e,t)=>e>=t.top&&e<=t.bottom,LH=(e,t)=>e.top<t.bottom&&e.bottom>t.top,L$=(e,t)=>{let r=i2(e,t)/Math.min(e.height,t.height);return LH(e,t)&&r>.5},Lq=(e,t)=>{let r=ep(e,e=>Lz(t,e));return i0(r).fold(()=>[[],e],t=>{let{pass:r,fail:n}=eg(e,e=>L$(e,t));return[r,n]})},LV=(e,t)=>({node:e.node,position:LU(e,t)<Lj(e,t)?b.Before:b.After}),LW=(e,t,r)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),LK=(e,t,r)=>{let n=e=>lm(e.node)?en.some(e):ou(e.node)?LK(eO(e.node.childNodes),t,r):en.none(),o=(e,o)=>{if(e.length>=2){let l=n(e[0]).getOr(e[0]),a=n(e[1]).getOr(e[1]),i=Math.abs(o(l,t,r)-o(a,t,r));if(i<2){if(ox(l.node))return en.some(l);if(ox(a.node))return en.some(a)}}return en.none()},l=(e,l)=>{let a=eN(e,(e,n)=>l(e,t,r)-l(n,t,r));return o(a,l).orThunk(()=>eT(a,n))},[a,i]=Lq(DS(e),r),{pass:s,fail:d}=eg(i,e=>e.top<r);return l(a,LW).orThunk(()=>l(d,i1)).orThunk(()=>l(s,i1))},LG=(e,t,r,n)=>{let o=(t,l)=>{let a=e=>ou(e)&&e.classList.contains("mce-drag-container"),i=ep(t.dom.childNodes,Q(a));return l.fold(()=>LK(i,r,n),e=>{let t=ep(i,t=>t!==e.dom);return LK(t,r,n)}).orThunk(()=>{let r=rQ(t,e)?en.none():r8(t);return r.bind(e=>o(e,en.some(t)))})};return o(t,en.none())},LY=(e,t,r)=>{let n=rV.fromDom(e),o=r0(n),l=rV.fromPoint(o,t,r).filter(e=>rJ(n,e)),a=l.getOr(n);return LG(n,a,t,r)},LX=(e,t,r)=>LY(e,t,r).filter(e=>cJ(e.node)).map(e=>LV(e,t)),LQ=e=>{var t,r;let n=e.getBoundingClientRect(),o=e.ownerDocument,l=o.documentElement,a=o.defaultView;return{top:n.top+(null!==(t=null==a?void 0:a.scrollY)&&void 0!==t?t:0)-l.clientTop,left:n.left+(null!==(r=null==a?void 0:a.scrollX)&&void 0!==r?r:0)-l.clientLeft}},LJ=e=>e.inline?LQ(e.getBody()):{left:0,top:0},LZ=e=>{let t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}},L0=e=>{let t=e.getBody(),r=e.getDoc().documentElement,n={left:t.scrollLeft,top:t.scrollTop},o={left:t.scrollLeft||r.scrollLeft,top:t.scrollTop||r.scrollTop};return e.inline?n:o},L1=(e,t)=>{if(t.target.ownerDocument!==e.getDoc()){let r=LQ(e.getContentAreaContainer()),n=L0(e);return{left:t.pageX-r.left+n.left,top:t.pageY-r.top+n.top}}return{left:t.pageX,top:t.pageY}},L2=(e,t,r)=>({pageX:r.left-e.left+t.left,pageY:r.top-e.top+t.top}),L3=(e,t)=>L2(LJ(e),LZ(e),L1(e,t)),L8=((...e)=>t=>{for(let r=0;r<e.length;r++)if(e[r](t))return!0;return!1})(oA,oR),L5=(e,t)=>oA(t)&&t!==e,L6=(e,t,r)=>!U(t)&&!(t===r||e.dom.isChildOf(t,r))&&!oA(t),L9=e=>{let t=e.cloneNode(!0);return t.removeAttribute("data-mce-selected"),t},L4=(e,t,r,n)=>{let o=e.dom,l=t.cloneNode(!0);o.setStyles(l,{width:r,height:n}),o.setAttrib(l,"data-mce-selected",null);let a=o.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return o.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:r,height:n}),o.setStyles(l,{margin:0,boxSizing:"border-box"}),a.appendChild(l),a},L7=(e,t)=>{e.parentNode!==t&&t.appendChild(e)},Fe=(e,t)=>r=>()=>{let n="left"===e?r.scrollX:r.scrollY;r.scroll({[e]:n+t,behavior:"smooth"})},Ft=Fe("left",-32),Fr=Fe("left",32),Fn=Fe("top",-32),Fo=Fe("top",32),Fl=(e,t,r,n,o,l,a,i,s,d,c,u)=>{let m=0,f=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+r>o&&(m=t.pageX+r-o),t.pageY+n>l&&(f=t.pageY+n-l),e.style.width=r-m+"px",e.style.height=n-f+"px";let g=s.clientHeight,p=s.clientWidth,h=a+s.getBoundingClientRect().top,b=i+s.getBoundingClientRect().left;c.on(e=>{e.intervalId.clear(),e.dragging&&u&&(a+8>=g?e.intervalId.set(Fo(d)):a-8<=0?e.intervalId.set(Fn(d)):i+8>=p?e.intervalId.set(Fr(d)):i-8<=0?e.intervalId.set(Ft(d)):h+16>=window.innerHeight?e.intervalId.set(Fo(window)):h-16<=0?e.intervalId.set(Fn(window)):b+16>=window.innerWidth?e.intervalId.set(Fr(window)):b-16<=0&&e.intervalId.set(Ft(window)))})},Fa=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},Fi=e=>0===e.button,Fs=(e,t)=>({pageX:t.pageX-e.relX,pageY:t.pageY+5}),Fd=(e,t)=>r=>{if(Fi(r)){let n=ey(t.dom.getParents(r.target),L8).getOr(null);if(j(n)&&L5(t.getBody(),n)){let o=t.dom.getPos(n),l=t.getBody(),a=t.getDoc().documentElement;e.set({element:n,dragging:!1,screenX:r.screenX,screenY:r.screenY,maxX:(t.inline?l.scrollWidth:a.offsetWidth)-2,maxY:(t.inline?l.scrollHeight:a.offsetHeight)-2,relX:r.pageX-o.x,relY:r.pageY-o.y,width:n.offsetWidth,height:n.offsetHeight,ghost:L4(t,n,n.offsetWidth,n.offsetHeight),intervalId:ih(100)})}}},Fc=(e,t)=>{let r=iv((e,r)=>{t._selectionOverrides.hideFakeCaret(),LX(t.getBody(),e,r).fold(()=>t.selection.placeCaretAt(e,r),n=>{let o=t._selectionOverrides.showCaret(1,n.node,n.position===b.Before,!1);o?t.selection.setRng(o):t.selection.placeCaretAt(e,r)})},0);return t.on("remove",r.cancel),n=>e.on(o=>{let l=Math.max(Math.abs(n.screenX-o.screenX),Math.abs(n.screenY-o.screenY));if(!o.dragging&&l>10){let a=t.dispatch("dragstart",{target:o.element});if(a.isDefaultPrevented())return;o.dragging=!0,t.focus()}if(o.dragging){let i=n.currentTarget===t.getDoc().documentElement,s=Fs(o,L3(t,n));L7(o.ghost,t.getBody()),Fl(o.ghost,s,o.width,o.height,o.maxX,o.maxY,n.clientY,n.clientX,t.getContentAreaContainer(),t.getWin(),e,i),r.throttle(n.clientX,n.clientY)}})},Fu=e=>{let t=e.getSel();if(!j(t))return null;{let r=t.getRangeAt(0),n=r.startContainer;return ox(n)?n.parentNode:n}},Fm=(e,t)=>r=>{e.on(e=>{if(e.intervalId.clear(),e.dragging){if(L6(t,Fu(t.selection),e.element)){let n=L9(e.element),o=t.dispatch("drop",{clientX:r.clientX,clientY:r.clientY});o.isDefaultPrevented()||t.undoManager.transact(()=>{Fa(e.element),t.insertContent(t.dom.getOuterHTML(n)),t._selectionOverrides.hideFakeCaret()})}t.dispatch("dragend")}}),Fg(e)},Ff=(e,t)=>()=>{e.on(e=>{e.intervalId.clear(),e.dragging&&t.dispatch("dragend")}),Fg(e)},Fg=e=>{e.on(e=>{e.intervalId.clear(),Fa(e.ghost)}),e.clear()},Fp=e=>{let t=ib(),r=a5.DOM,n=document,o=Fd(t,e),l=Fc(t,e),a=Fm(t,e),i=Ff(t,e);e.on("mousedown",o),e.on("mousemove",l),e.on("mouseup",a),r.bind(n,"mousemove",l),r.bind(n,"mouseup",i),e.on("remove",()=>{r.unbind(n,"mousemove",l),r.unbind(n,"mouseup",i)}),e.on("keydown",e=>{e.keyCode===fL.ESC&&i()})},Fh=e=>{let t=t=>{if(!t.isDefaultPrevented()){let r=t.dataTransfer;r&&(ed(r.types,"Files")||r.files.length>0)&&(t.preventDefault(),"drop"===t.type&&Sj(e,"Dropped file type is not supported"))}},r=r=>{pD(e,r.target)&&t(r)},n=()=>{let n=a5.DOM,o=e.dom,l=document,a=e.inline?e.getBody():e.getDoc(),i=["drop","dragover"];em(i,e=>{n.bind(l,e,r),o.bind(a,e,t)}),e.on("remove",()=>{em(i,e=>{n.unbind(l,e,r),o.unbind(a,e,t)})})};e.on("init",()=>{py.setEditorTimeout(e,n,0)})},Fb=e=>{Fp(e),cn(e)&&Fh(e)},Fv=e=>{let t=iv(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){let t=e.selection.getRng();if(t.collapsed){let r=Nr(e,t,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{t.throttle()}),e.on("blur",()=>{t.cancel()})},Fy=e=>{e.on("init",()=>{e.on("focusin",t=>{let r=t.target;if(oB(r)){let n=v1(e.getBody(),r),o=oA(n)?n:r;e.selection.getNode()!==o&&Ne(e,o).each(t=>e.selection.setRng(t))}})})},FC=(e,t)=>v1(e.getBody(),t),Fx=e=>{let t;let r=e.selection,n=e.dom,o=e.getBody(),l=cY(e,o,n.isBlock,()=>pH(e)),a="sel-"+n.uniqueId(),i="data-mce-selected",s=e=>j(e)&&n.hasClass(e,"mce-offscreen-selection"),d=e=>e!==o&&(oA(e)||oB(e))&&n.isChildOf(e,o),c=e=>{e&&r.setRng(e)},u=(t,n,o,a=!0)=>{let i=e.dispatch("ShowCaret",{target:n,direction:t,before:o});return i.isDefaultPrevented()?null:(a&&r.scrollIntoView(n,-1===t),l.show(o,n))},m=e=>{e.hasAttribute("data-mce-caret")&&(li(e),r.scrollIntoView(e))},f=e=>o4(e)||lo(e)||ll(e),g=e=>f(e.startContainer)||f(e.endContainer),p=t=>{let r=e.schema.getVoidElements(),o=n.createRng(),l=t.startContainer,a=t.startOffset,i=t.endContainer,s=t.endOffset;return eW(r,l.nodeName.toLowerCase())?0===a?o.setStartBefore(l):o.setStartAfter(l):o.setStart(l,a),eW(r,i.nodeName.toLowerCase())?0===s?o.setEndBefore(i):o.setEndAfter(i):o.setEnd(i,s),o},h=(t,o)=>{let l=rV.fromDom(e.getBody()),i=e.getDoc(),s=ol(l,"#"+a).getOrThunk(()=>{let e=rV.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',i);return rv(e,"id",a),nO(l,e),e}),d=n.createRng();nL(s),nP(s,[rV.fromText("\xa0",i),rV.fromDom(o),rV.fromText("\xa0",i)]),d.setStart(s.dom.firstChild,1),d.setEnd(s.dom.lastChild,0),nx(s,{top:n.getPos(t,e.getBody()).y+"px"}),g4(s);let c=r.getSel();return c&&(c.removeAllRanges(),c.addRange(d)),d},v=r=>{let o=r.cloneNode(!0),l=e.dispatch("ObjectSelected",{target:r,targetClone:o});if(l.isDefaultPrevented())return null;let a=h(r,l.targetClone),s=rV.fromDom(r);return em(oM(rV.fromDom(e.getBody()),`*[${i}]`),e=>{rQ(s,e)||rk(e,i)}),n.getAttrib(r,i)||r.setAttribute(i,"1"),t=r,w(),a},y=(e,t)=>{if(!e)return null;if(e.collapsed){if(!g(e)){let r=t?1:-1,l=ul(r,o,e),a=l.getNode(!t);if(j(a)){if(cJ(a))return u(r,a,!!t&&!l.isAtEnd(),!1);if(o9(a)&&oA(a.nextSibling)){let i=n.createRng();return i.setStart(a,0),i.setEnd(a,0),i}}let s=l.getNode(t);if(j(s)){if(cJ(s))return u(r,s,!t&&!l.isAtEnd(),!1);if(o9(s)&&oA(s.previousSibling)){let c=n.createRng();return c.setStart(s,1),c.setEnd(s,1),c}}}return null}let m=e.startContainer,f=e.startOffset,p=e.endOffset;if(ox(m)&&0===f&&oA(m.parentNode)&&(m=m.parentNode,f=n.nodeIndex(m),m=m.parentNode),!ou(m))return null;if(p===f+1&&m===e.endContainer){let h=m.childNodes[f];if(d(h))return v(h)}return null},C=()=>{t&&t.removeAttribute(i),ol(rV.fromDom(e.getBody()),"#"+a).each(nF),t=null},x=()=>{l.destroy(),t=null},w=()=>{l.hide()};return _l(e)||(()=>{e.on("click",t=>{let r=FC(e,t.target);r&&oA(r)&&(t.preventDefault(),e.focus())}),e.on("blur NewBlock",C),e.on("ResizeWindow FullscreenStateChanged",l.reposition),e.on("tap",t=>{let r=t.target,n=FC(e,r);oA(n)?(t.preventDefault(),Ne(e,n).each(y)):d(r)&&Ne(e,r).each(y)},!0),e.on("mousedown",t=>{let r=t.target;if(r!==o&&"HTML"!==r.nodeName&&!n.isChildOf(r,o)||!SA(e,t.clientX,t.clientY))return;C(),w();let l=FC(e,r);oA(l)?(t.preventDefault(),Ne(e,l).each(y)):LX(o,t.clientX,t.clientY).each(r=>{t.preventDefault();let n=u(1,r.node,r.position===b.Before,!1);c(n),ou(l)?l.focus():e.getBody().focus()})}),e.on("keypress",e=>{!fL.modifierPressed(e)&&oA(r.getNode())&&e.preventDefault()}),e.on("GetSelectionRange",e=>{let r=e.range;if(t){if(!t.parentNode){t=null;return}(r=r.cloneRange()).selectNode(t),e.range=r}}),e.on("SetSelectionRange",e=>{e.range=p(e.range);let t=y(e.range,e.forward);t&&(e.range=t)});let a=e=>ou(e)&&"mcepastebin"===e.id;e.on("AfterSetSelectionRange",e=>{let t=e.range,r=t.startContainer.parentElement;g(t)||a(r)||w(),s(r)||C()}),Fb(e),Fv(e),Fy(e)})(),{showCaret:u,showBlockCaretContainer:m,hideFakeCaret:w,destroy:x}},Fw=(e,t)=>{let r=t;for(let n=e.previousSibling;ox(n);n=n.previousSibling)r+=n.data.length;return r},Fk=(e,t,r,n,o)=>{if(ox(r)&&(n<0||n>r.data.length))return[];let l=o&&ox(r)?[Fw(r,n)]:[n],a=r;for(;a!==t&&a.parentNode;)l.push(e.nodeIndex(a,o)),a=a.parentNode;return a===t?l.reverse():[]},F_=(e,t,r,n,o,l,a=!1)=>{let i=Fk(e,t,r,n,a),s=Fk(e,t,o,l,a);return{start:i,end:s}},FS=(e,t)=>{let r=t.slice(),n=r.pop();if(!H(n))return en.none();{let o=eb(r,(e,t)=>e.bind(e=>en.from(e.childNodes[t])),en.some(e));return o.bind(e=>ox(e)&&(n<0||n>e.data.length)?en.none():en.some({node:e,offset:n}))}},FE=(e,t)=>FS(e,t.start).bind(({node:r,offset:n})=>FS(e,t.end).map(({node:e,offset:t})=>{let o=document.createRange();return o.setStart(r,n),o.setEnd(e,t),o})),FN=(e,t,r,n=!1)=>F_(e,t,r.startContainer,r.startOffset,r.endContainer,r.endOffset,n),FD=(e,t,r)=>{if(t&&e.isEmpty(t)&&!r(t)){let n=t.parentNode;e.remove(t),FD(e,n,r)}},FR=(e,t,r,n=!0)=>{let o=t.startContainer.parentNode,l=t.endContainer.parentNode;t.deleteContents(),n&&!r(t.startContainer)&&(ox(t.startContainer)&&0===t.startContainer.data.length&&e.remove(t.startContainer),ox(t.endContainer)&&0===t.endContainer.data.length&&e.remove(t.endContainer),FD(e,o,r),o!==l&&FD(e,l,r))},FA=(e,t)=>en.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),FO=(e,t,r)=>{let n=e.dynamicPatternsLookup({text:r,block:t});return{...e,blockPatterns:s2(n).concat(e.blockPatterns),inlinePatterns:s3(n).concat(e.inlinePatterns)}},FT=(e,t,r,n)=>{let o=e.createRng();return o.setStart(t,0),o.setEnd(r,n),o.toString()},FB=(e,t,r)=>{let n=A6(t,0,t);n.each(n=>{let o=n.container;A4(o,r.start.length,t).each(r=>{let n=e.createRng();n.setStart(o,0),n.setEnd(r.container,r.offset),FR(e,n,e=>e===t)})})},FP=(e,t)=>{let r=e.dom,n=t.pattern,o=FE(r.getRoot(),t.range).getOrDie("Unable to resolve path range"),l=(e,t)=>{let r=t.get(e);return L(r)&&eR(r).exists(e=>eW(e,"block"))};return FA(e,o).each(t=>{"block-format"===n.type?l(n.format,e.formatter)&&e.undoManager.transact(()=>{FB(e.dom,t,n),e.formatter.apply(n.format)}):"block-command"===n.type&&e.undoManager.transact(()=>{FB(e.dom,t,n),e.execCommand(n.cmd,!1,n.value)})}),!0},FL=e=>eN(e,(e,t)=>t.start.length-e.start.length),FF=(e,t)=>{let r=FL(e),n=t.replace("\xa0"," ");return ey(r,e=>0===t.indexOf(e.start)||0===n.indexOf(e.start))},FM=(e,t,r,n)=>{var o;let l=e.dom,a=dg(e);if(!l.is(t,a))return[];let i=null!==(o=t.textContent)&&void 0!==o?o:"";return FF(r.blockPatterns,i).map(e=>rr.trim(i).length===e.start.length?[]:[{pattern:e,range:F_(l,l.getRoot(),t,0,t,0,n)}]).getOr([])},FI=(e,t)=>{if(0===t.length)return;let r=e.selection.getBookmark();em(t,t=>FP(e,t)),e.selection.moveToBookmark(r)},FU=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),Fj=(e,t)=>{let r=e.createRng();return r.setStartAfter(t.start),r.setEndBefore(t.end),r},Fz=(e,t,r)=>{let n=FE(e.getRoot(),r).getOrDie("Unable to resolve path range"),o=n.startContainer,l=n.endContainer,a=0===n.endOffset?l:l.splitText(n.endOffset),i=0===n.startOffset?o:o.splitText(n.startOffset),s=i.parentNode,d=a.parentNode;return{prefix:t,end:d.insertBefore(FU(e,t+"-end"),a),start:s.insertBefore(FU(e,t+"-start"),i)}},FH=(e,t,r)=>{FD(e,e.get(t.prefix+"-end"),r),FD(e,e.get(t.prefix+"-start"),r)},F$=e=>0===e.start.length,Fq=e=>(t,r)=>{let n=t.data,o=n.substring(0,r),l=o.lastIndexOf(e.charAt(e.length-1)),a=o.lastIndexOf(e);return -1!==a?a+e.length:-1!==l?l+1:-1},FV=(e,t,r,n)=>{let o=t.start,l=A7(e,n.container,n.offset,Fq(o),r);return l.bind(n=>{var l,a;let i=null!==(a=null===(l=r.textContent)||void 0===l?void 0:l.indexOf(o))&&void 0!==a?a:-1,s=-1!==i&&n.offset>=i+o.length;if(s){let d=e.createRng();return d.setStart(n.container,n.offset-o.length),d.setEnd(n.container,n.offset),en.some(d)}{let c=n.offset-o.length;return A9(n.container,c,r).map(t=>{let r=e.createRng();return r.setStart(t.container,t.offset),r.setEnd(n.container,n.offset),r}).filter(e=>e.toString()===o).orThunk(()=>FV(e,t,r,A1(n.container,0)))}})},FW=(e,t,r,n,o,l=!1)=>{if(0===t.start.length&&!l){let a=e.createRng();return a.setStart(r,n),a.setEnd(r,n),en.some(a)}return A5(r,n,o).bind(r=>{let n=FV(e,t,o,r);return n.bind(e=>{var t;return l&&(e.endContainer===r.container&&e.endOffset===r.offset||0===r.offset&&(null===(t=e.endContainer.textContent)||void 0===t?void 0:t.length)===e.endOffset)?en.none():en.some(e)})})},FK=(e,t,r,n)=>{let o=e.dom,l=o.getRoot(),a=r.pattern,i=r.position.container,s=r.position.offset;return A9(i,s-r.pattern.end.length,t).bind(d=>{let c=F_(o,l,d.container,d.offset,i,s,n);if(F$(a))return en.some({matches:[{pattern:a,startRng:c,endRng:c}],position:d});{let u=FG(e,r.remainingPatterns,d.container,d.offset,t,n),m=u.getOr({matches:[],position:d}),f=m.position,g=FW(o,a,f.container,f.offset,t,u.isNone());return g.map(e=>{let t=FN(o,l,e,n);return{matches:m.matches.concat([{pattern:a,startRng:t,endRng:c}]),position:A1(e.startContainer,e.startOffset)}})}})},FG=(e,t,r,n,o,l)=>{let a=e.dom;return A5(r,n,a.getRoot()).bind(i=>{let s=FT(a,o,r,n);for(let d=0;d<t.length;d++){let c=t[d];if(!tf(s,c.end))continue;let u=t.slice();u.splice(d,1);let m=FK(e,o,{pattern:c,remainingPatterns:u,position:i},l);if(m.isNone()&&n>0)return FG(e,t,r,n-1,o,l);if(m.isSome())return m}return en.none()})},FY=(e,t,r)=>{e.selection.setRng(r),"inline-format"===t.type?em(t.format,t=>{e.formatter.apply(t)}):e.execCommand(t.cmd,!1,t.value)},FX=(e,t,r,n)=>{let o=Fj(e.dom,r);FR(e.dom,o,n),FY(e,t,o)},FQ=(e,t,r,n,o)=>{let l=e.dom,a=Fj(l,n),i=Fj(l,r);FR(l,i,o),FR(l,a,o);let s={prefix:r.prefix,start:r.end,end:n.start},d=Fj(l,s);FY(e,t,d)},FJ=(e,t)=>{let r=iF("mce_textpattern"),n=eh(t,(t,n)=>{let o=Fz(e,r+`_end${t.length}`,n.endRng);return t.concat([{...n,endMarker:o}])},[]);return eh(n,(t,o)=>{let l=n.length-t.length-1,a=F$(o.pattern)?o.endMarker:Fz(e,r+`_start${l}`,o.startRng);return t.concat([{...o,startMarker:a}])},[])},FZ=e=>eN(e,(e,t)=>t.end.length-e.end.length),F0=(e,t)=>{let r=ek(e,e=>ec(t,t=>e.pattern.start===t.pattern.start&&e.pattern.end===t.pattern.end));return e.length===t.length?r?e:t:e.length>t.length?e:t},F1=(e,t,r,n,o,l)=>{let a=FG(e,o.inlinePatterns,r,n,t,l).fold(()=>[],e=>e.matches),i=FG(e,FZ(o.inlinePatterns),r,n,t,l).fold(()=>[],e=>e.matches);return F0(a,i)},F2=(e,t)=>{if(0===t.length)return;let r=e.dom,n=e.selection.getBookmark(),o=FJ(r,t);em(o,t=>{let n=r.getParent(t.startMarker.start,r.isBlock),o=e=>e===n;F$(t.pattern)?FX(e,t.pattern,t.endMarker,o):FQ(e,t.pattern,t.startMarker,t.endMarker,o),FH(r,t.endMarker,o),FH(r,t.startMarker,o)}),e.selection.moveToBookmark(n)},F3=(e,t)=>{let r=e.selection.getRng();return FA(e,r).map(n=>{var o;let l=Math.max(0,r.startOffset),a=FO(t,n,null!==(o=n.textContent)&&void 0!==o?o:""),i=F1(e,n,r.startContainer,l,a,!0),s=FM(e,n,a,!0);return(s.length>0||i.length>0)&&(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{e.insertContent("\uFEFF"),F2(e,i),FI(e,s);let t=e.selection.getRng(),r=A5(t.startContainer,t.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),r.each(t=>{let r=t.container;"\uFEFF"===r.data.charAt(t.offset-1)&&(r.deleteData(t.offset-1,1),FD(e.dom,r.parentNode,t=>t===e.dom.getRoot()))})}),!0)}).getOr(!1)},F8=(e,t)=>{let r=e.selection.getRng();FA(e,r).map(n=>{let o=Math.max(0,r.startOffset-1),l=FT(e.dom,n,r.startContainer,o),a=FO(t,n,l),i=F1(e,n,r.startContainer,o,a,!1);i.length>0&&e.undoManager.transact(()=>{F2(e,i)})})},F5=(e,t,r)=>{for(let n=0;n<e.length;n++)if(r(e[n],t))return!0;return!1},F6=(e,t)=>F5(e,t,(e,t)=>e===t.keyCode&&!fL.modifierPressed(t)),F9=(e,t)=>F5(e,t,(e,t)=>e.charCodeAt(0)===t.charCode),F4=e=>{let t=[",",".",";",":","!","?"],r=[32],n=()=>s8(cS(e),cE(e)),o=()=>cO(e);e.on("keydown",t=>{if(13===t.keyCode&&!fL.modifierPressed(t)&&e.selection.isCollapsed()){let r=n(),l=r.inlinePatterns.length>0||r.blockPatterns.length>0||o();l&&F3(e,r)&&t.preventDefault()}},!0);let l=()=>{if(e.selection.isCollapsed()){let t=n(),r=t.inlinePatterns.length>0||o();r&&F8(e,t)}};e.on("keyup",e=>{F6(r,e)&&l()}),e.on("keypress",r=>{F9(t,r)&&py.setEditorTimeout(e,l)})},F7=e=>{F4(e)},Me=e=>{let t=rr.each,r=fL.BACKSPACE,n=fL.DELETE,o=e.dom,l=e.selection,a=e.parser,i=t2.browser,s=i.isFirefox(),d=i.isChromium()||i.isSafari(),c=t2.deviceType.isiPhone()||t2.deviceType.isiPad(),u=t2.os.isMacOS()||t2.os.isiOS(),m=(t,r)=>{try{e.getDoc().execCommand(t,!1,String(r))}catch(n){}},f=e=>e.isDefaultPrevented(),g=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},p=()=>{e.inline||o.bind(e.getDoc(),"mousedown mouseup",t=>{let r;if(t.target===e.getDoc().documentElement){if(r=l.getRng(),e.getBody().focus(),"mousedown"===t.type){if(o4(r.startContainer))return;l.placeCaretAt(t.clientX,t.clientY)}else l.setRng(r)}})},h=()=>{Range.prototype.getClientRects||e.on("mousedown",t=>{if(!f(t)&&"HTML"===t.target.nodeName){let r=e.getBody();r.blur(),py.setEditorTimeout(e,()=>{r.focus()})}})},b=()=>{let t=ca(e);e.on("click",r=>{let n=r.target;/^(IMG|HR)$/.test(n.nodeName)&&"false"!==o.getContentEditableParent(n)&&(r.preventDefault(),e.selection.select(n),e.nodeChanged()),"A"===n.nodeName&&o.hasClass(n,t)&&0===n.childNodes.length&&(r.preventDefault(),l.select(n))})},v=()=>{e.on("keydown",e=>{if(!f(e)&&e.keyCode===r&&l.isCollapsed()&&0===l.getRng().startOffset){let t=l.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}return!0})},y=()=>{let t=()=>{m("StyleWithCSS",!1),m("enableInlineTableEditing",!1),dz(e)||m("enableObjectResizing",!1)};d7(e)||e.on("BeforeExecCommand mousedown",t)},C=e=>{let t=e.getBody(),r=e.selection.getRng();return r.startContainer===r.endContainer&&r.startContainer===t&&0===r.startOffset&&r.endOffset===t.childNodes.length},x=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},w=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},k=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",t=>{let r;"HTML"===t.target.nodeName&&(r=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(r),e.selection.normalize(),e.nodeChanged())}))},_=()=>{u&&e.on("keydown",t=>{if(fL.metaKeyPressed(t)&&!t.shiftKey&&(37===t.keyCode||39===t.keyCode)){t.preventDefault();let r=e.selection.getSel();r.modify("move",37===t.keyCode?"backward":"forward","lineboundary")}})},S=()=>{e.on("click",e=>{let t=e.target;do if("A"===t.tagName){e.preventDefault();return}while(t=t.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},E=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",e=>{e.preventDefault()})})},N=()=>{if(!s||e.removed)return!1;let t=e.selection.getSel();return!t||!t.rangeCount||0===t.rangeCount};return _l(e)?(d&&(p(),b(),E(),g(),c&&(w(),k(),S())),s&&(h(),y(),x(),_())):(e.on("keydown",t=>{if(f(t)||t.keyCode!==fL.BACKSPACE)return;let r=l.getRng(),n=r.startContainer,a=r.startOffset,i=o.getRoot(),s=n;if(r.collapsed&&0===a){for(;s.parentNode&&s.parentNode.firstChild===s&&s.parentNode!==i;)s=s.parentNode;"BLOCKQUOTE"===s.nodeName&&(e.formatter.toggle("blockquote",void 0,s),(r=o.createRng()).setStart(n,0),r.setEnd(n,0),l.setRng(r))}}),(()=>{let t=e=>{let t=o.create("body"),r=e.cloneContents();return t.appendChild(r),l.serializer.serialize(t,{format:"html"})},a=r=>{let n=t(r),l=o.createRng();l.selectNode(e.getBody());let a=t(l);return n===a};e.on("keydown",t=>{let l=t.keyCode;if(!f(t)&&(l===n||l===r)){let i=e.selection.isCollapsed(),s=e.getBody();if(i&&!o.isEmpty(s)||!i&&!a(e.selection.getRng()))return;t.preventDefault(),e.setContent(""),s.firstChild&&o.isBlock(s.firstChild)?e.selection.setCursorLocation(s.firstChild,0):e.selection.setCursorLocation(s,0),e.nodeChanged()}})})(),t2.windowsPhone||e.on("keyup focusin mouseup",t=>{fL.modifierPressed(t)||C(e)||l.normalize()},!0),d&&(p(),b(),e.on("init",()=>{m("DefaultParagraphSeparator",dg(e))}),E(),v(),a.addNodeFilter("br",e=>{let t=e.length;for(;t--;)"Apple-interchange-newline"===e[t].attr("class")&&e[t].remove()}),c?(w(),k(),S()):g()),s&&(e.on("keydown",t=>{if(!f(t)&&t.keyCode===r&&e.getBody().getElementsByTagName("hr").length&&l.isCollapsed()&&0===l.getRng().startOffset){let n=l.getNode(),a=n.previousSibling;if("HR"===n.nodeName){o.remove(n),t.preventDefault();return}a&&a.nodeName&&"hr"===a.nodeName.toLowerCase()&&(o.remove(a),t.preventDefault())}}),h(),(()=>{let r=()=>{let r=o.getAttribs(l.getStart().cloneNode(!1));return()=>{let n=l.getStart();n!==e.getBody()&&(o.setAttrib(n,"style",null),t(r,e=>{n.setAttributeNode(e.cloneNode(!0))}))}},n=()=>!l.isCollapsed()&&o.getParent(l.getStart(),o.isBlock)!==o.getParent(l.getEnd(),o.isBlock);e.on("keypress",t=>{let o;return!(!f(t)&&(8===t.keyCode||46===t.keyCode)&&n())||(o=r(),e.getDoc().execCommand("delete",!1),o(),t.preventDefault(),!1)}),o.bind(e.getDoc(),"cut",t=>{if(!f(t)&&n()){let o=r();py.setEditorTimeout(e,()=>{o()})}})})(),y(),(()=>{let r=()=>{t(o.select("a:not([data-mce-block])"),e=>{var t;let r=e.parentNode,n=o.getRoot();if((null==r?void 0:r.lastChild)===e){for(;r&&!o.isBlock(r);){if((null===(t=r.parentNode)||void 0===t?void 0:t.lastChild)!==r||r===n)return;r=r.parentNode}o.add(r,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",e=>{("setcontent"===e.type||"mceInsertLink"===e.command)&&r()})})(),x(),_(),v())),{refreshContentEditable:q,isHidden:N}},Mt=a5.DOM,Mr=(e,t)=>{let r=rV.fromDom(e.getBody()),n=nu(nc(r)),o=rV.fromTag("style");rv(o,"type","text/css"),nO(o,rV.fromText(t)),nO(n,o),e.on("remove",()=>{nF(o)})},Mn=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,Mo=e=>eH(e,e=>!1===I(e)),Ml=e=>{let t=e.options.get,r=e.editorUpload.blobCache;return Mo({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_fonts_to_spans:t("convert_fonts_to_spans"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),remove_trailing_brs:t("remove_trailing_brs"),inline_styles:t("inline_styles"),root_name:Mn(e),validate:!0,blob_cache:r,document:e.getDoc()})},Ma=e=>{let t=e.options.get;return Mo({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},Mi=e=>{let t=e.options.get;return{...Ml(e),...Ma(e),...Mo({url_converter:t("url_converter"),url_converter_scope:t("url_converter_scope"),element_format:t("element_format"),entities:t("entities"),entity_encoding:t("entity_encoding"),indent:t("indent"),indent_after:t("indent_after"),indent_before:t("indent_before")})}},Ms=e=>{let t=wZ(Ml(e),e.schema);return t.addAttributeFilter("src,href,style,tabindex",(t,r)=>{let n=e.dom,o="data-mce-"+r,l=t.length;for(;l--;){let a=t[l],i=a.attr(r);if(i&&!a.attr(o)){if(0===i.indexOf("data:")||0===i.indexOf("blob:"))continue;"style"===r?((i=n.serializeStyle(n.parseStyle(i),a.name)).length||(i=null),a.attr(o,i),a.attr(r,i)):"tabindex"===r?(a.attr(o,i),a.attr(r,null)):a.attr(o,e.convertURL(i,r,a.name))}}}),t.addNodeFilter("script",e=>{let t=e.length;for(;t--;){let r=e[t],n=r.attr("type")||"no/type";0!==n.indexOf("mce-")&&r.attr("type","mce-"+n)}}),cA(e)&&t.addNodeFilter("#cdata",t=>{var r;let n=t.length;for(;n--;){let o=t[n];o.type=8,o.name="#comment",o.value="[CDATA["+e.dom.encode(null!==(r=o.value)&&void 0!==r?r:"")+"]]"}}),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",t=>{let r=t.length,n=e.schema.getNonEmptyElements();for(;r--;){let o=t[r];o.isEmpty(n)&&0===o.getAll("br").length&&o.append(new hi("br",1))}}),t},Md=e=>{let t=cu(e);t&&py.setEditorTimeout(e,()=>{let r;(r=!0===t?e:e.editorManager.get(t))&&!r.destroyed&&(r.focus(),r.selection.scrollIntoView())},100)},Mc=e=>{let t=e.dom.getRoot();e.inline||mv(e)&&e.selection.getStart(!0)!==t||uR(t).each(t=>{let r=t.getNode(),n=ov(r)?uR(r).getOr(t):t;e.selection.setRng(n.toRange())})},Mu=e=>{e.bindPendingEventDelegates(),e.initialized=!0,fC(e),e.focus(!0),Mc(e),e.nodeChanged({initial:!0});let t=cd(e);z(t)&&t.call(e,e),Md(e)},Mm=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,Mf=(e,t,r)=>{let n=[Mm(e).loadAll(t)];return e.inline?n:n.concat([e.ui.styleSheetLoader.loadAll(r)])},Mg=e=>{let t=Mm(e),r=dI(e),n=e.contentCSS,o=()=>{t.unloadAll(n),e.inline||e.ui.styleSheetLoader.unloadAll(r)},l=()=>{e.removed?o():e.on("remove",o)};if(e.contentStyles.length>0){let a="";rr.each(e.contentStyles,e=>{a+=e+"\r\n"}),e.dom.addStyle(a)}let i=Promise.all(Mf(e,n,r)).then(l).catch(l),s=dM(e);return s&&Mr(e,s),i},Mp=e=>{let t=e.getDoc(),r=e.getBody();fv(e),cm(e)||(t.body.spellcheck=!1,Mt.setAttrib(r,"spellcheck","false")),e.quirks=Me(e),fy(e);let n=dU(e);void 0!==n&&(r.dir=n);let o=cf(e);o&&e.on("BeforeSetContent",e=>{rr.each(o,t=>{e.content=e.content.replace(t,e=>"<!--mce:protected "+escape(e)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",t=>{e.composing="compositionstart"===t.type})},Mh=e=>{_l(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},Mb=e=>{!0!==e.removed&&(Mh(e),Mu(e))},Mv=e=>{let t=e.getElement(),r=e.getDoc();e.inline&&(Mt.addClass(t,"mce-content-body"),e.contentDocument=r=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);let n=e.getBody();n.disabled=!0,e.readonly=d7(e),e.readonly||(e.inline&&"static"===Mt.getStyle(n,"position",!0)&&(n.style.position="relative"),n.contentEditable="true"),n.disabled=!1,e.editorUpload=Eo(e),e.schema=aB(Ma(e)),e.dom=a5(r,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:dA(e),referrerPolicy:dO(e),onSetAttrib:t=>{e.dispatch("SetAttrib",t)}}),e.parser=Ms(e),e.serializer=St(Mi(e),e),e.selection=_J(e.dom,e.getWin(),e.serializer,e),e.annotator=fs(e),e.formatter=Ey(e),e.undoManager=Ek(e),e._nodeChangeDispatcher=new Pu(e),e._selectionOverrides=Fx(e),RN(e),LR(e),RU(e),_l(e)||(LI(e),F7(e));let o=Pc(e);R_(e,o),RL(e),EO(e),LE(e);let l=_i(e);Mp(e),l.fold(()=>{Mg(e).then(()=>Mb(e))},t=>{e.setProgressState(!0),Mg(e).then(()=>{t().then(t=>{e.setProgressState(!1),Mb(e),_L(e)},t=>{e.notificationManager.open({type:"error",text:String(t)}),Mb(e),_L(e)})})})},My=(e,t)=>{if(e.inline||(e.getElement().style.visibility=e.orgVisibility),t||e.inline)Mv(e);else{let r=e.iframeElement,n=S2(rV.fromDom(r),"load",()=>{n.unbind(),e.contentDocument=r.contentDocument,Mv(e)});if(t2.browser.isFirefox()){let o=e.getDoc();o.open(),o.write(e.iframeHTML),o.close()}else r.srcdoc=e.iframeHTML}},MC=a5.DOM,Mx=(e,t,r,n)=>{let o=rV.fromTag("iframe");return n.each(e=>rv(o,"tabindex",e)),ry(o,r),ry(o,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),rP(o,"tox-edit-area__iframe"),o},Mw=e=>{let t=ds(e)+"<html><head>";dd(e)!==e.documentBaseUrl&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';let r=dc(e),n=du(e),o=e.translate(ci(e));return dm(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+dm(e)+'" />'),t+=`</head><body id="${r}" class="mce-content-body ${n}" data-id="${e.id}" aria-label="${o}"><br></body></html>`},Mk=(e,t)=>{let r=e.translate("Rich Text Area"),n=rx(rV.fromDom(e.getElement()),"tabindex").bind(tx),o=Mx(e.id,r,di(e),n).dom;o.onload=()=>{o.onload=null,e.dispatch("load")},e.contentAreaContainer=t.iframeContainer,e.iframeElement=o,e.iframeHTML=Mw(e),MC.add(t.iframeContainer,o)},M_=(e,t)=>{Mk(e,t),t.editorContainer&&(t.editorContainer.style.display=e.orgDisplay,e.hidden=MC.isHidden(t.editorContainer)),e.getElement().style.display="none",MC.setAttrib(e.id,"aria-hidden","true"),My(e)},MS=a5.DOM,ME=(e,t,r)=>{let n=SL.get(r),o=SL.urls[r]||e.documentBaseUrl.replace(/\/$/,"");if(r=rr.trim(r),n&&-1===rr.inArray(t,r)){if(e.plugins[r])return;try{let l=n(e,o)||{};e.plugins[r]=l,z(l.init)&&(l.init(e,o),t.push(r))}catch(a){SY(e,r,a)}}},MN=e=>e.replace(/^\-/,""),MD=e=>{let t=[];em(ct(e),r=>{ME(e,t,MN(r))})},MR=e=>{let t=rr.trim(d_(e)),r=e.ui.registry.getAll().icons,n={...Sy.get("default").icons,...Sy.get(t).icons};eF(n,(t,n)=>{eW(r,n)||e.ui.registry.addIcon(n,t)})},MA=e=>{let t=dW(e);if(T(t)){let r=SF.get(t);e.theme=r(e,SF.urls[t])||{},z(e.theme.init)&&e.theme.init(e,SF.urls[t]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},MO=e=>{let t=dG(e),r=SC.get(t);e.model=r(e,SC.urls[t])},MT=e=>{let t=e.theme.renderUI;return t?t():MF(e)},MB=e=>{let t=e.getElement(),r=dW(e),n=r(e,t);return n.editorContainer.nodeType&&(n.editorContainer.id=n.editorContainer.id||e.id+"_parent"),n.iframeContainer&&n.iframeContainer.nodeType&&(n.iframeContainer.id=n.iframeContainer.id||e.id+"_iframecontainer"),n.height=n.iframeHeight?n.iframeHeight:t.offsetHeight,n},MP=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),ML=e=>{let t=MS.create("div");return MS.insertAfter(t,e),MP(t,t)},MF=e=>{let t=e.getElement();return e.inline?MP(null):ML(t)},MM=e=>{let t=e.getElement();return(e.orgDisplay=t.style.display,T(dW(e)))?MT(e):z(dW(e))?MB(e):MF(e)},MI=(e,t)=>{let r={show:en.from(t.show).getOr(q),hide:en.from(t.hide).getOr(q),isEnabled:en.from(t.isEnabled).getOr(er),setEnabled:r=>{e.mode.isReadOnly()||en.from(t.setEnabled).each(e=>e(r))}};e.ui={...e.ui,...r}},MU=e=>{e.dispatch("ScriptsLoaded"),MR(e),MA(e),MO(e),MD(e);let t=MM(e);MI(e,en.from(t.api).getOr({})),e.editorContainer=t.editorContainer,S1(e),e.inline?My(e):M_(e,{editorContainer:t.editorContainer,iframeContainer:t.iframeContainer})},Mj=a5.DOM,Mz=e=>"-"===e.charAt(0),MH=(e,t)=>{let r=dT(t),n=dB(t);if(!im.hasCode(r)&&"en"!==r){let o=tv(n)?n:`${t.editorManager.baseURL}/langs/${r}.js`;e.add(o).catch(()=>{SW(t,o,r)})}},M$=(e,t)=>{let r=dW(e);if(T(r)&&!Mz(r)&&!eW(SF.urls,r)){let n=dK(e),o=n?e.documentBaseURI.toAbsolute(n):`themes/${r}/theme${t}.js`;SF.load(r,o).catch(()=>{SK(e,o,r)})}},Mq=(e,t)=>{let r=dG(e);if("plugin"!==r&&!eW(SC.urls,r)){let n=dY(e),o=T(n)?e.documentBaseURI.toAbsolute(n):`models/${r}/model${t}.js`;SC.load(r,o).catch(()=>{SG(e,o,r)})}},MV=e=>en.from(dS(e)).filter(tv).map(e=>({url:e,name:en.none()})),MW=(e,t,r)=>en.from(t).filter(e=>tv(e)&&!Sy.has(e)).map(t=>({url:`${e.editorManager.baseURL}/icons/${t}/icons${r}.js`,name:en.some(t)})),MK=(e,t,r)=>{let n=MW(t,"default",r),o=MV(t).orThunk(()=>MW(t,d_(t),""));em(ro([n,o]),r=>{e.add(r.url).catch(()=>{SV(t,r.url,r.name.getOrUndefined())})})},MG=(e,t)=>{let r=(t,r)=>{SL.load(t,r).catch(()=>{Sq(e,r,t)})};eF(cr(e),(t,n)=>{r(n,t),e.options.set("plugins",ct(e).concat(n))}),em(ct(e),e=>{(e=rr.trim(e))&&!SL.urls[e]&&!Mz(e)&&r(e,`plugins/${e}/plugin${t}.js`)})},MY=e=>{let t=dW(e);return!T(t)||j(SF.get(t))},MX=e=>{let t=dG(e);return j(SC.get(t))},MQ=(e,t)=>{let r=a9.ScriptLoader,n=()=>{!e.removed&&MY(e)&&MX(e)&&MU(e)};M$(e,t),Mq(e,t),MH(r,e),MK(r,e,t),MG(e,t),r.loadQueue().then(n,n)},MJ=(e,t)=>l3.forElement(e,{contentCssCors:ce(t),referrerPolicy:dO(t)}),MZ=e=>{let t=e.id;im.setCode(dT(e));let r=()=>{Mj.unbind(window,"ready",r),e.render()};if(!aK.Event.domLoaded){Mj.bind(window,"ready",r);return}if(!e.getElement())return;let n=rV.fromDom(e.getElement()),o=rS(n);e.on("remove",()=>{ef(n.dom.attributes,e=>rk(n,e.name)),ry(n,o)}),e.ui.styleSheetLoader=MJ(n,e),d2(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");let l=e.getElement().form||Mj.getParent(t,"form");!l||(e.formElement=l,d3(e)&&!oC(e.getElement())&&(Mj.insertAfter(Mj.create("input",{type:"hidden",name:t}),t),e.hasHiddenInput=!0),e.formEventDelegate=t=>{e.dispatch(t.type,t)},Mj.bind(l,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),!d8(e)||l.submit.nodeType||l.submit.length||l._mceOldSubmit||(l._mceOldSubmit=l.submit,l.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),l._mceOldSubmit(l)))),e.windowManager=SI(e),e.notificationManager=SP(e),cP(e)&&e.on("GetContent",e=>{e.save&&(e.content=Mj.encode(e.content))}),d5(e)&&e.on("submit",()=>{e.initialized&&e.save()}),d6(e)&&(e._beforeUnload=()=>{!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),MQ(e,e.suffix)},M0=(e,t)=>({sections:K(e),options:K(t)}),M1=tY().deviceType,M2=M1.isPhone(),M3=M1.isTablet(),M8=e=>{if(U(e))return[];{let t=L(e)?e:e.split(/[ ,]/),r=eu(t,tp);return ep(r,tv)}},M5=(e,t)=>{let r=ez(t,(t,r)=>ed(e,r));return M0(r.t,r.f)},M6=(e,t,r={})=>{let n=e.sections(),o=eV(n,t).getOr({});return rr.extend({},r,o)},M9=(e,t)=>eW(e.sections(),t),M4=(e,t)=>M9(e,t)?e.sections()[t]:{},M7=(e,t)=>{let r={table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:eV(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1};return{...r,...t?{menubar:!1}:{}}},Ie=(e,t)=>{var r;let n=null!==(r=t.external_plugins)&&void 0!==r?r:{};return e&&e.external_plugins?rr.extend({},e.external_plugins,n):n},It=(e,t)=>[...M8(e),...M8(t)],Ir=(e,t,r,n)=>e&&M9(t,"mobile")?n:r,In=(e,t,r,n)=>{let o=M8(r.forced_plugins),l=M8(n.plugins),a=M4(t,"mobile"),i=a.plugins?M8(a.plugins):l,s=Ir(e,t,l,i),d=It(o,s);return rr.extend(n,{forced_plugins:o,plugins:d})},Io=(e,t)=>e&&M9(t,"mobile"),Il=(e,t,r,n,o)=>{var l;let a=e?{mobile:M7(null!==(l=o.mobile)&&void 0!==l?l:{},t)}:{},i=M5(["mobile"],OI(a,o)),s=rr.extend(r,n,i.options(),Io(e,i)?M6(i,"mobile"):{},{external_plugins:Ie(n,i.options())});return In(e,i,n,s)},Ia=(e,t)=>Il(M2||M3,M2,t,e,t),Ii=(e,t)=>_P(e,t),Is=e=>{let t=(t,r)=>{e.formatter.toggle(t,r),e.nodeChanged()},r=r=>()=>{em("left,center,right,justify".split(","),t=>{r!==t&&e.formatter.remove("align"+t)}),"none"!==r&&t("align"+r)};e.editorCommands.addCommands({JustifyLeft:r("left"),JustifyCenter:r("center"),JustifyRight:r("right"),JustifyFull:r("justify"),JustifyNone:r("none")})},Id=e=>{let t=t=>()=>{let r=e.selection,n=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return ec(n,r=>j(e.formatter.matchNode(r,t)))};e.editorCommands.addCommands({JustifyLeft:t("alignleft"),JustifyCenter:t("aligncenter"),JustifyRight:t("alignright"),JustifyFull:t("alignjustify")},"state")},Ic=e=>{Is(e),Id(e)},Iu=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":t=>{let r;let n=e.getDoc();try{n.execCommand(t)}catch(o){r=!0}if("paste"!==t||n.queryCommandEnabled(t)||(r=!0),r||!n.queryCommandSupported(t)){let l=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(t2.os.isMacOS()||t2.os.isiOS())&&(l=l.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:l,type:"error"})}}})},Im=(e,t,r)=>{let n=rV.fromDom(e.getRoot());return r=bm(n,sg.fromRangeStart(t))?r.replace(/^ /,"&nbsp;"):r.replace(/^&nbsp;/," "),r=bg(n,sg.fromRangeEnd(t))?r.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):r.replace(/&nbsp;(<br( \/)?>)?$/," ")},If=e=>{if("string"!=typeof e){let t=rr.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:t}}return{content:e,details:{}}},Ig=(e,t)=>{let r=e.selection,n=e.dom;return/^ | $/.test(t)?Im(n,r.getRng(),t):t},Ip=(e,t)=>{let{content:r,details:n}=If(t);w8(e,{...n,content:Ig(e,r),format:"html",set:!1,selection:!0}).each(t=>{let r=_T(e,t.content,n);w5(e,r,t),e.addVisual()})},Ih=e=>{e.editorCommands.addCommands({mceCleanup:()=>{let t=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(t)},insertImage:(t,r,n)=>{Ip(e,e.dom.createHTML("img",{src:n}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(t,r,n)=>{Ip(e,e.dom.encode(n))},insertHTML:(t,r,n)=>{Ip(e,n)},mceInsertContent:(t,r,n)=>{Ip(e,n)},mceSetContent:(t,r,n)=>{e.setContent(n)},mceReplaceContent:(t,r,n)=>{e.execCommand("mceInsertContent",!1,n.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent("")}})},Ib={"font-size":"size","font-family":"face"},Iv=rh("font"),Iy=(e,t,r)=>{let n=t=>n_(t,e).orThunk(()=>Iv(t)?eV(Ib,e).bind(e=>rx(t,e)):en.none()),o=e=>rQ(rV.fromDom(t),e);return y2(rV.fromDom(r),e=>n(e),o)},IC=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),Ix=(e,t)=>en.from(a5.DOM.getStyle(t,e,!0)),Iw=e=>(t,r)=>en.from(r).map(rV.fromDom).filter(rm).bind(r=>Iy(e,t,r.dom).or(Ix(e,r.dom))).getOr(""),Ik=Iw("font-size"),I_=V(IC,Iw("font-family")),IS=e=>uR(e.getBody()).bind(e=>{let t=e.container();return en.from(ox(t)?t.parentNode:t)}),IE=e=>en.from(e.selection.getRng()).bind(t=>{let r=e.getBody(),n=t.startContainer===r&&0===t.startOffset;return n?en.none():en.from(e.selection.getStart(!0))}),IN=(e,t)=>IE(e).orThunk(X(IS,e)).map(rV.fromDom).filter(rm).bind(t),ID=(e,t)=>IN(e,W(en.some,t)),IR=(e,t)=>{if(!/^[0-9.]+$/.test(t))return t;{let r=parseInt(t,10);if(!(r>=1)||!(r<=7))return t;{let n=cT(e),o=cB(e);return o.length>0?o[r-1]||t:n[r-1]||t}}},IA=e=>{let t=e.split(/\s*,\s*/);return eu(t,e=>-1===e.indexOf(" ")||tm(e,'"')||tm(e,"'")?e:`'${e}'`).join(",")},IO=(e,t)=>{let r=IR(e,t);e.formatter.toggle("fontname",{value:IA(r)}),e.nodeChanged()},IT=e=>ID(e,t=>I_(e.getBody(),t.dom)).getOr(""),IB=(e,t)=>{e.formatter.toggle("fontsize",{value:IR(e,t)}),e.nodeChanged()},IP=e=>ID(e,t=>Ik(e.getBody(),t.dom)).getOr(""),IL=e=>ID(e,t=>{let r=rV.fromDom(e.getBody()),n=y2(t,e=>n_(e,"line-height"),X(rQ,r)),o=()=>{let e=parseFloat(nw(t,"line-height")),r=parseFloat(nw(t,"font-size"));return String(e/r)};return n.getOrThunk(o)}).getOr(""),IF=(e,t)=>{e.formatter.toggle("lineheight",{value:String(t)}),e.nodeChanged()},IM=e=>{let t=(t,r)=>{e.formatter.toggle(t,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":e=>{t(e)},"ForeColor,HiliteColor":(e,r,n)=>{t(e,{value:n})},BackColor:(e,r,n)=>{t("hilitecolor",{value:n})},FontName:(t,r,n)=>{IO(e,n)},FontSize:(t,r,n)=>{IB(e,n)},LineHeight:(t,r,n)=>{IF(e,n)},Lang:(e,r,n)=>{var o;t(e,{value:n.code,customValue:null!==(o=n.customCode)&&void 0!==o?o:null})},RemoveFormat:t=>{e.formatter.remove(t)},mceBlockQuote:()=>{t("blockquote")},FormatBlock:(e,r,n)=>{t(T(n)?n:"p")},mceToggleFormat:(e,r,n)=>{t(n)}})},II=e=>{let t=t=>e.formatter.match(t);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":e=>t(e),mceBlockQuote:()=>t("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>IT(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>IP(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>IL(e))},IU=e=>{IM(e),II(e)},Ij=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},Iz=e=>{e.editorCommands.addCommands({Indent:()=>{Rv(e)},Outdent:()=>{Ry(e)}}),e.editorCommands.addCommands({Outdent:()=>Rf(e)},"state")},IH=e=>{let t=(t,r,n)=>{let o=T(n)?{href:n}:n,l=e.dom.getParent(e.selection.getNode(),"a");B(o)&&T(o.href)&&(o.href=o.href.replace(/ /g,"%20"),l&&o.href||e.formatter.remove("link"),o.href&&e.formatter.apply("link",o,l))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isCollapsed()){let t=e.dom.getParent(e.selection.getStart(),"a");t&&e.dom.remove(t,!0);return}e.formatter.remove("link")},mceInsertLink:t,createLink:t})},I$=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{e.getDoc().execCommand(t);let r=e.dom.getParent(e.selection.getNode(),"ol,ul");if(r){let n=r.parentNode;if(n&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(n.nodeName)){let o=e.selection.getBookmark();e.dom.split(n,r),e.selection.moveToBookmark(o)}}}})},Iq=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{let r=e.dom.getParent(e.selection.getNode(),"ul,ol");return r&&("insertunorderedlist"===t&&"UL"===r.tagName||"insertorderedlist"===t&&"OL"===r.tagName)}},"state")},IV=e=>{I$(e),Iq(e)},IW=e=>{e.editorCommands.addCommands({insertParagraph:()=>{BY(By,e)},mceInsertNewLine:(t,r,n)=>{BX(e,n)},InsertLineBreak:(t,r,n)=>{BY(BT,e)}})},IK=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(t,r,n)=>{let o=0;e.dom.getParent(e.selection.getNode(),t=>!ou(t)||o++!==n||(e.selection.select(t),!1),e.getBody())},mceSelectNode:(t,r,n)=>{e.selection.select(n)},selectAll:()=>{let t=e.dom.getParent(e.selection.getStart(),oR);if(t){let r=e.dom.createRng();r.selectNodeContents(t),e.selection.setRng(r)}}})},IG=e=>{e.editorCommands.addCommands({mceRemoveNode:(t,r,n)=>{let o=null!=n?n:e.selection.getNode();if(o!==e.getBody()){let l=e.selection.getBookmark();e.dom.remove(o,!0),e.selection.moveToBookmark(l)}},mcePrint:()=>{e.getWin().print()},mceFocus:(t,r,n)=>{pW(e,!0===n)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},IY=e=>{Ic(e),Iu(e),Ij(e),IK(e),Ih(e),IH(e),Iz(e),IW(e),IV(e),IU(e),IG(e)},IX=["toggleview"],IQ=e=>ed(IX,e.toLowerCase());class IJ{constructor(e){this.commands={state:{},exec:{},value:{}},this.editor=e}execCommand(e,t=!1,r,n){let o=this.editor,l=e.toLowerCase(),a=null==n?void 0:n.skip_focus;if(o.removed)return!1;"mcefocus"!==l&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(l)||a?pg(o):o.focus());let i=o.dispatch("BeforeExecCommand",{command:e,ui:t,value:r});if(i.isDefaultPrevented())return!1;let s=this.commands.exec[l];return!!z(s)&&(s(l,t,r),o.dispatch("ExecCommand",{command:e,ui:t,value:r}),!0)}queryCommandState(e){if(!IQ(e)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;let t=e.toLowerCase(),r=this.commands.state[t];return!!z(r)&&r(t)}queryCommandValue(e){if(!IQ(e)&&this.editor.quirks.isHidden()||this.editor.removed)return"";let t=e.toLowerCase(),r=this.commands.value[t];return z(r)?r(t):""}addCommands(e,t="exec"){let r=this.commands;eF(e,(e,n)=>{em(n.toLowerCase().split(","),n=>{r[t][n]=e})})}addCommand(e,t,r){let n=e.toLowerCase();this.commands.exec[n]=(e,n,o)=>t.call(null!=r?r:this.editor,n,o)}queryCommandSupported(e){let t=e.toLowerCase();return!!this.commands.exec[t]}addQueryStateHandler(e,t,r){this.commands.state[e.toLowerCase()]=()=>t.call(null!=r?r:this.editor)}addQueryValueHandler(e,t,r){this.commands.value[e.toLowerCase()]=()=>t.call(null!=r?r:this.editor)}}let IZ="data-mce-contenteditable",I0=(e,t,r)=>{rI(e,t)&&!r?rF(e,t):r&&rP(e,t)},I1=(e,t,r)=>{try{e.getDoc().execCommand(t,!1,String(r))}catch(n){}},I2=(e,t)=>{e.dom.contentEditable=t?"true":"false"},I3=e=>{em(oM(e,'*[contenteditable="true"]'),e=>{rv(e,IZ,"true"),I2(e,!1)})},I8=e=>{em(oM(e,`*[${IZ}="true"]`),e=>{rk(e,IZ),I2(e,!0)})},I5=e=>{en.from(e.selection.getNode()).each(e=>{e.removeAttribute("data-mce-selected")})},I6=e=>{e.selection.setRng(e.selection.getRng())},I9=(e,t)=>{let r=rV.fromDom(e.getBody());I0(r,"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),I5(e),e.readonly=!0,I2(r,!1),I3(r)):(e.readonly=!1,I2(r,!0),I8(r),I1(e,"StyleWithCSS",!1),I1(e,"enableInlineTableEditing",!1),I1(e,"enableObjectResizing",!1),p$(e)&&e.focus(),I6(e),e.nodeChanged())},I4=e=>e.readonly,I7=e=>{e.parser.addAttributeFilter("contenteditable",t=>{I4(e)&&em(t,e=>{e.attr(IZ,e.attr("contenteditable")),e.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(IZ,t=>{I4(e)&&em(t,e=>{e.attr("contenteditable",e.attr(IZ))})}),e.serializer.addTempAttr(IZ)},Ue=e=>{e.serializer?I7(e):e.on("PreInit",()=>{I7(e)})},Ut=e=>"click"===e.type,Ur=["copy"],Un=e=>ed(Ur,e.type),Uo=(e,t)=>{let r=t=>rQ(t,rV.fromDom(e.getBody()));return oa(t,"a",r).bind(e=>rx(e,"href"))},Ul=(e,t)=>{if(Ut(t)&&!fL.metaKeyPressed(t)){let r=rV.fromDom(t.target);Uo(e,r).each(r=>{if(t.preventDefault(),/^#/.test(r)){let n=e.dom.select(`${r},[name="${tc(r,"#")}"]`);n.length&&e.selection.scrollIntoView(n[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else Un(t)&&e.dispatch(t.type,t)},Ua=e=>{e.on("ShowCaret",t=>{I4(e)&&t.preventDefault()}),e.on("ObjectSelected",t=>{I4(e)&&t.preventDefault()})},Ui=rr.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class Us{constructor(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||et}static isNative(e){return!!Ui[e.toLowerCase()]}fire(e,t){return this.dispatch(e,t)}dispatch(e,t){let r=e.toLowerCase(),n=aj(r,null!=t?t:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(n);let o=this.bindings[r];if(o)for(let l=0,a=o.length;l<a;l++){let i=o[l];if(!i.removed){if(i.once&&this.off(r,i.func),n.isImmediatePropagationStopped())break;if(!1===i.func.call(this.scope,n)){n.preventDefault();break}}}return n}on(e,t,r,n){if(!1===t&&(t=et),t){let o={func:t,removed:!1};n&&rr.extend(o,n);let l=e.toLowerCase().split(" "),a=l.length;for(;a--;){let i=l[a],s=this.bindings[i];s||(s=[],this.toggleEvent(i,!0)),s=r?[o,...s]:[...s,o],this.bindings[i]=s}}return this}off(e,t){if(e){let r=e.toLowerCase().split(" "),n=r.length;for(;n--;){let o=r[n],l=this.bindings[o];if(!o){eF(this.bindings,(e,t)=>{this.toggleEvent(t,!1),delete this.bindings[t]});break}if(l){if(t){let a=eg(l,e=>e.func===t);l=a.fail,this.bindings[o]=l,em(a.pass,e=>{e.removed=!0})}else l.length=0;l.length||(this.toggleEvent(e,!1),delete this.bindings[o])}}}else eF(this.bindings,(e,t)=>{this.toggleEvent(t,!1)}),this.bindings={};return this}once(e,t,r){return this.on(e,t,r,{once:!0})}has(e){e=e.toLowerCase();let t=this.bindings[e];return!(!t||0===t.length)}}let Ud=e=>(e._eventDispatcher||(e._eventDispatcher=new Us({scope:e,toggleEvent:(t,r)=>{Us.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,r)}})),e._eventDispatcher),Uc={fire(e,t,r){return this.dispatch(e,t,r)},dispatch(e,t,r){if(this.removed&&"remove"!==e&&"detach"!==e)return aj(e.toLowerCase(),null!=t?t:{},this);let n=Ud(this).dispatch(e,t);if(!1!==r&&this.parent){let o=this.parent();for(;o&&!n.isPropagationStopped();)o.dispatch(e,n,!1),o=o.parent?o.parent():void 0}return n},on(e,t,r){return Ud(this).on(e,t,r)},off(e,t){return Ud(this).off(e,t)},once(e,t){return Ud(this).once(e,t)},hasEventListeners(e){return Ud(this).has(e)}},Uu=a5.DOM,Um=(e,t)=>{if("selectionchange"===t)return e.getDoc();if(!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t))return e.getDoc().documentElement;let r=dq(e);return r?(e.eventRoot||(e.eventRoot=Uu.select(r)[0]),e.eventRoot):e.getBody()},Uf=e=>!e.hidden&&!I4(e),Ug=(e,t,r)=>{Uf(e)?e.dispatch(t,r):I4(e)&&Ul(e,r)},Up=(e,r)=>{if(e.delegates||(e.delegates={}),e.delegates[r]||e.removed)return;let n=Um(e,r);if(dq(e)){if(t||(t={},e.editorManager.on("removeEditor",()=>{!e.editorManager.activeEditor&&t&&(eF(t,(t,r)=>{e.dom.unbind(Um(e,r))}),t=null)})),t[r])return;let o=t=>{let n=t.target,o=e.editorManager.get(),l=o.length;for(;l--;){let a=o[l].getBody();(a===n||Uu.isChildOf(n,a))&&Ug(o[l],r,t)}};t[r]=o,Uu.bind(n,r,o)}else{let l=t=>{Ug(e,r,t)};Uu.bind(n,r,l),e.delegates[r]=l}},Uh={...Uc,bindPendingEventDelegates(){let e=this;rr.each(e._pendingNativeEvents,t=>{Up(e,t)})},toggleNativeEvent(e,t){let r=this;"focus"!==e&&"blur"!==e&&!r.removed&&(t?r.initialized?Up(r,e):r._pendingNativeEvents?r._pendingNativeEvents.push(e):r._pendingNativeEvents=[e]:r.initialized&&r.delegates&&(r.dom.unbind(Um(r,e),e,r.delegates[e]),delete r.delegates[e]))},unbindAllNativeEvents(){let e=this,t=e.getBody(),r=e.dom;e.delegates&&(eF(e.delegates,(t,r)=>{e.dom.unbind(Um(e,r),r,t)}),delete e.delegates),!e.inline&&t&&r&&(t.onload=null,r.unbind(e.getWin()),r.unbind(e.getDoc())),r&&(r.unbind(t),r.unbind(e.getContainer()))}},Ub=e=>T(e)?{value:e.split(/[ ,]/),valid:!0}:$(e,T)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},Uv=e=>{let t=(()=>{switch(e){case"array":return L;case"boolean":return M;case"function":return z;case"number":return H;case"object":return B;case"string":return T;case"string[]":return Ub;case"object[]":return e=>$(e,B);case"regexp":return e=>O(e,RegExp);default:return er}})();return r=>Uw(r,t,`The value must be a ${e}.`)},Uy=e=>T(e.processor),UC=(e,t)=>{let r=ty(t.message)?"":`. ${t.message}`;return e+r},Ux=e=>e.valid,Uw=(e,t,r="")=>{let n=t(e);return M(n)?n?{value:e,valid:!0}:{valid:!1,message:r}:n},Uk=(e,t,r)=>{if(!I(t)){let n=Uw(t,r);if(Ux(n))return n.value;console.error(UC(`Invalid default value passed for the "${e}" option`,n))}},U_=(e,t)=>{let r={},n={},o=(e,t,r)=>{let o=Uw(t,r);return Ux(o)?(n[e]=o.value,!0):(console.warn(UC(`Invalid value passed for the ${e} option`,o)),!1)},l=(e,l)=>{let a=Uy(l)?Uv(l.processor):l.processor,i=Uk(e,l.default,a);r[e]={...l,default:i,processor:a};let s=eV(n,e).orThunk(()=>eV(t,e));s.each(t=>o(e,t,a))},a=e=>eW(r,e),i=e=>eV(n,e).orThunk(()=>eV(r,e).map(e=>e.default)).getOrUndefined(),s=(e,t)=>{if(!a(e))return console.warn(`"${e}" is not a registered option. Ensure the option has been registered before setting a value.`),!1;{let n=r[e];return n.immutable?(console.error(`"${e}" is an immutable option and cannot be updated`),!1):o(e,t,n.processor)}},d=e=>{let t=a(e);return t&&delete n[e],t},c=e=>eW(n,e);return{register:l,isRegistered:a,get:i,set:s,unset:d,isSet:c}},US=["design","readonly"],UE=(e,t,r,n)=>{let o=r[t.get()],l=r[n];try{l.activate()}catch(a){console.error(`problem while activating editor mode ${n}:`,a);return}o.deactivate(),o.editorReadOnly!==l.editorReadOnly&&I9(e,l.editorReadOnly),t.set(n),fp(e,n)},UN=(e,t,r,n)=>{if(n!==r.get()){if(!eW(t,n))throw Error(`Editor mode '${n}' is invalid`);e.initialized?UE(e,r,t,n):e.on("init",()=>UE(e,r,t,n))}},UD=(e,t,r)=>{if(ed(US,t))throw Error(`Cannot override default mode ${t}`);return{...e,[t]:{...r,deactivate:()=>{try{r.deactivate()}catch(e){console.error(`problem while deactivating editor mode ${t}:`,e)}}}}},UR=e=>{let t=a4("design"),r=a4({design:{activate:q,deactivate:q,editorReadOnly:!1},readonly:{activate:q,deactivate:q,editorReadOnly:!0}});return Ue(e),Ua(e),{isReadOnly:()=>I4(e),set:n=>UN(e,r.get(),t,n),get:()=>t.get(),register:(e,t)=>{r.set(UD(r.get(),e,t))}}},UA=rr.each,UO=rr.explode,UT={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},UB=rr.makeMap("alt,ctrl,shift,meta,access"),UP=e=>e in UB,UL=e=>{let t;let r={},n=t2.os.isMacOS()||t2.os.isiOS();UA(UO(e.toLowerCase(),"+"),e=>{UP(e)?r[e]=!0:/^[0-9]{2,}$/.test(e)?r.keyCode=parseInt(e,10):(r.charCode=e.charCodeAt(0),r.keyCode=UT[e]||e.toUpperCase().charCodeAt(0))});let o=[r.keyCode];for(t in UB)r[t]?o.push(t):r[t]=!1;return r.id=o.join(","),r.access&&(r.alt=!0,n?r.ctrl=!0:r.shift=!0),r.meta&&(n?r.meta=!0:(r.ctrl=!0,r.meta=!1)),r};class UF{constructor(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;let t=this;e.on("keyup keypress keydown",e=>{(t.hasModifier(e)||t.isFunctionKey(e))&&!e.isDefaultPrevented()&&(UA(t.shortcuts,r=>{t.matchShortcut(e,r)&&(t.pendingPatterns=r.subpatterns.slice(0),"keydown"===e.type&&t.executeShortcutAction(r))}),t.matchShortcut(e,t.pendingPatterns[0])&&(1===t.pendingPatterns.length&&"keydown"===e.type&&t.executeShortcutAction(t.pendingPatterns[0]),t.pendingPatterns.shift()))})}add(e,t,r,n){let o=this,l=o.normalizeCommandFunc(r);return UA(UO(rr.trim(e)),e=>{let r=o.createShortcut(e,t,l,n);o.shortcuts[r.id]=r}),!0}remove(e){let t=this.createShortcut(e);return!!this.shortcuts[t.id]&&(delete this.shortcuts[t.id],!0)}normalizeCommandFunc(e){let t=this;return"string"==typeof e?()=>{t.editor.execCommand(e,!1,null)}:rr.isArray(e)?()=>{t.editor.execCommand(e[0],e[1],e[2])}:e}createShortcut(e,t,r,n){let o=rr.map(UO(e,">"),UL);return o[o.length-1]=rr.extend(o[o.length-1],{func:r,scope:n||this.editor}),rr.extend(o[0],{desc:this.editor.translate(t),subpatterns:o.slice(1)})}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}isFunctionKey(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}matchShortcut(e,t){return!!t&&t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&t.alt===e.altKey&&t.shift===e.shiftKey&&(e.keyCode===t.keyCode||!!e.charCode&&e.charCode===t.charCode)&&(e.preventDefault(),!0)}executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}let UM=()=>{let e={},t={},r={},n={},o={},l={},a={},i={},s=(e,t)=>(r,n)=>{e[r.toLowerCase()]={...n,type:t}},d=(e,t)=>n[e.toLowerCase()]=t;return{addButton:s(e,"button"),addGroupToolbarButton:s(e,"grouptoolbarbutton"),addToggleButton:s(e,"togglebutton"),addMenuButton:s(e,"menubutton"),addSplitButton:s(e,"splitbutton"),addMenuItem:s(t,"menuitem"),addNestedMenuItem:s(t,"nestedmenuitem"),addToggleMenuItem:s(t,"togglemenuitem"),addAutocompleter:s(r,"autocompleter"),addContextMenu:s(o,"contextmenu"),addContextToolbar:s(l,"contexttoolbar"),addContextForm:s(l,"contextform"),addSidebar:s(a,"sidebar"),addView:s(i,"views"),addIcon:d,getAll:()=>({buttons:e,menuItems:t,icons:n,popups:r,contextMenus:o,contextToolbars:l,sidebars:a,views:i})}},UI=()=>{let e=UM();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},UU=a5.DOM,Uj=rr.extend,Uz=rr.each;class UH{constructor(e,t,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,Uj(this,Uh),this.id=e,this.hidden=!1;let n=Ia(r.defaultOptions,t);this.options=U_(this,n),da(this);let o=this.options.get;o("deprecation_warnings")&&Su(t,n);let l=o("suffix");l&&(r.suffix=l),this.suffix=r.suffix;let a=o("base_url");a&&r._setBaseUrl(a),this.baseUri=r.baseURI;let i=dO(this);i&&(a9.ScriptLoader._setReferrerPolicy(i),a5.DOM.styleSheetLoader._setReferrerPolicy(i));let s=ce(this);j(s)&&a5.DOM.styleSheetLoader._setContentCssCors(s),ig.languageLoad=o("language_load"),ig.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new wz(dd(this),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=d2(this),this.hasVisual=co(this),this.shortcuts=new UF(this),this.editorCommands=new IJ(this),IY(this);let d=o("cache_suffix");d&&(t2.cacheSuffix=d.replace(/^[\?\&]+/,"")),this.ui={registry:UI(),styleSheetLoader:void 0,show:q,hide:q,setEnabled:q,isEnabled:er},this.mode=UR(this),r.dispatch("SetupEditor",{editor:this});let c=cs(this);z(c)&&c.call(this,this)}render(){MZ(this)}focus(e){this.execCommand("mceFocus",!1,e)}hasFocus(){return pH(this)}translate(e){return im.translate(e)}getParam(e,t,r){let n=this.options;return n.isRegistered(e)||(j(r)?n.register(e,{processor:r,default:t}):n.register(e,{processor:er,default:t})),n.isSet(e)||I(t)?n.get(e):t}hasPlugin(e,t){let r=ed(ct(this),e);return!!r&&(!t||void 0!==SL.get(e))}nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}addCommand(e,t,r){this.editorCommands.addCommand(e,t,r)}addQueryStateHandler(e,t,r){this.editorCommands.addQueryStateHandler(e,t,r)}addQueryValueHandler(e,t,r){this.editorCommands.addQueryValueHandler(e,t,r)}addShortcut(e,t,r,n){this.shortcuts.add(e,t,r,n)}execCommand(e,t,r,n){return this.editorCommands.execCommand(e,t,r,n)}queryCommandState(e){return this.editorCommands.queryCommandState(e)}queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}show(){let e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable="true":(UU.show(e.getContainer()),UU.hide(e.id)),e.load(),e.dispatch("show"))}hide(){let e=this;e.hidden||(e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(UU.hide(e.getContainer()),UU.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(e,t){this.dispatch("ProgressState",{state:e,time:t})}load(e={}){let t=this.getElement();if(this.removed||!t)return"";{let r={...e,load:!0},n=oC(t)?t.value:t.innerHTML,o=this.setContent(n,r);return r.no_events||this.dispatch("LoadContent",{...r,element:t}),o}}save(e={}){let t=this,r=t.getElement();if(!r||!t.initialized||t.removed)return"";let n={...e,save:!0,element:r},o=t.getContent(n),l={...n,content:o};if(l.no_events||t.dispatch("SaveContent",l),"raw"===l.format&&t.dispatch("RawSaveContent",l),o=l.content,oC(r))r.value=o;else{(e.is_removing||!t.inline)&&(r.innerHTML=o);let a=UU.getParent(t.id,"form");a&&Uz(a.elements,e=>e.name!==t.id||(e.value=o,!1))}return l.element=n.element=r=null,!1!==l.set_dirty&&t.setDirty(!1),o}setContent(e,t){return Sl(this,e,t)}getContent(e){return Sn(this,e)}insertContent(e,t){t&&(e=Uj({content:e},t)),this.execCommand("mceInsertContent",!1,e)}resetContent(e){void 0===e?Sl(this,this.startContent,{format:"raw"}):Sl(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(e){let t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.dispatch("dirty")}getContainer(){let e=this;return e.container||(e.container=e.editorContainer||UU.get(e.id+"_parent")),e.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=UU.get(this.id)),this.targetElm}getWin(){let e=this;if(!e.contentWindow){let t=e.iframeElement;t&&(e.contentWindow=t.contentWindow)}return e.contentWindow}getDoc(){let e=this;if(!e.contentDocument){let t=e.getWin();t&&(e.contentDocument=t.document)}return e.contentDocument}getBody(){var e,t;let r=this.getDoc();return null!==(t=null!==(e=this.bodyElement)&&void 0!==e?e:null==r?void 0:r.body)&&void 0!==t?t:null}convertURL(e,t,r){let n=this.options.get,o=cc(this);return z(o)?o.call(this,e,r,!0,t):!n("convert_urls")||"link"===r||B(r)&&"LINK"===r.nodeName||0===e.indexOf("file:")||0===e.length?e:n("relative_urls")?this.documentBaseURI.toRelative(e):e=this.documentBaseURI.toAbsolute(e,n("remove_script_host"))}addVisual(e){Ii(this,e)}remove(){Sb(this)}destroy(e){Sv(this,e)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}let U$=a5.DOM,Uq=rr.each,UV=!1,UW=[],UK=e=>{let t=e.type;Uq(UJ.get(),r=>{switch(t){case"scroll":r.dispatch("ScrollWindow",e);break;case"resize":r.dispatch("ResizeWindow",e)}})},UG=e=>{if(e!==UV){let t=a5.DOM;e?(t.bind(window,"resize",UK),t.bind(window,"scroll",UK)):(t.unbind(window,"resize",UK),t.unbind(window,"scroll",UK)),UV=e}},UY=e=>{let t=UW;return UW=ep(UW,t=>e!==t),UJ.activeEditor===e&&(UJ.activeEditor=UW.length>0?UW[0]:null),UJ.focusedEditor===e&&(UJ.focusedEditor=null),t.length!==UW.length},UX=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(UY(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},UQ="CSS1Compat"!==document.compatMode,UJ={...Uc,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"3.1",releaseDate:"2022-12-06",i18n:im,activeEditor:null,focusedEditor:null,setup(){let e=this,t="",r="",n=wz.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/"));let o=window.tinymce||window.tinyMCEPreInit;if(o)t=o.base||o.baseURL,r=o.suffix;else{let l=document.getElementsByTagName("script");for(let a=0;a<l.length;a++){let i=l[a].src||"";if(""===i)continue;let s=i.substring(i.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(i)){-1!==s.indexOf(".min")&&(r=".min"),t=i.substring(0,i.lastIndexOf("/"));break}}if(!t&&document.currentScript){let d=document.currentScript.src;-1!==d.indexOf(".min")&&(r=".min"),t=d.substring(0,d.lastIndexOf("/"))}}e.baseURL=new wz(n).toAbsolute(t),e.documentBaseURL=n,e.baseURI=new wz(e.baseURL),e.suffix=r,pT(e)},overrideDefaults(e){let t=e.base_url;t&&this._setBaseUrl(t);let r=e.suffix;r&&(this.suffix=r),this.defaultOptions=e;let n=e.plugin_base_urls;void 0!==n&&eF(n,(e,t)=>{ig.PluginManager.urls[t]=e})},init(e){let t;let r=this,n=rr.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),o=(e,t)=>e.inline&&t.tagName.toLowerCase() in n,l=e=>{let t=e.id;return t||(t=eV(e,"name").filter(e=>!U$.get(e)).getOrThunk(U$.uniqueId),e.setAttribute("id",t)),t},a=t=>{let n=e[t];if(n)return n.apply(r,[])},i=e=>t2.browser.isIE()||t2.browser.isEdge()?(SX("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):UQ?(SX("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):T(e.selector)?U$.select(e.selector):j(e.target)?[e.target]:[],s=e=>{t=e},d=()=>{let t,n=0,c=[],u=(e,o,l)=>{let a=new UH(e,o,r);c.push(a),a.on("init",()=>{++n===t.length&&s(c)}),a.targetElm=a.targetElm||l,a.render()};U$.unbind(window,"ready",d),a("onpageload"),t=eB(i(e)),rr.each(t,e=>{UX(r.get(e.id))}),0===(t=rr.grep(t,e=>!r.get(e.id))).length?s([]):Uq(t,t=>{o(e,t)?SX("Could not initialize inline editor on invalid inline target element",t):u(l(t),e,t)})};return U$.bind(window,"ready",d),new Promise(e=>{t?e(t):s=t=>{e(t)}})},get(e){return 0==arguments.length?UW.slice(0):T(e)?ey(UW,t=>t.id===e).getOr(null):H(e)&&UW[e]?UW[e]:null},add(e){let t=this,n=t.get(e.id);return n===e||(null===n&&UW.push(e),UG(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),r||(r=e=>{let r=t.dispatch("BeforeUnload");if(r.returnValue)return e.preventDefault(),e.returnValue=r.returnValue,r.returnValue},window.addEventListener("beforeunload",r))),e},createEditor(e,t){return this.add(new UH(e,t,this))},remove(e){let t;let n=this;if(!e){for(let o=UW.length-1;o>=0;o--)n.remove(UW[o]);return}if(T(e)){Uq(U$.select(e),e=>{(t=n.get(e.id))&&n.remove(t)});return}return(t=e,F(n.get(t.id)))?null:(UY(t)&&n.dispatch("RemoveEditor",{editor:t}),0===UW.length&&window.removeEventListener("beforeunload",r),t.remove(),UG(UW.length>0),t)},execCommand(e,t,r){var n;let o=B(r)?null!==(n=r.id)&&void 0!==n?n:r.index:r;switch(e){case"mceAddEditor":if(!this.get(o)){let l=r.options;new UH(o,l,this).render()}return!0;case"mceRemoveEditor":{let a=this.get(o);return a&&a.remove(),!0}case"mceToggleEditor":{let i=this.get(o);if(!i)return this.execCommand("mceAddEditor",!1,r),!0;return i.isHidden()?i.show():i.hide(),!0}}return!!this.activeEditor&&this.activeEditor.execCommand(e,t,r)},triggerSave:()=>{Uq(UW,e=>{e.save()})},addI18n:(e,t)=>{im.add(e,t)},translate:e=>im.translate(e),setActive(e){let t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new wz(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new wz(this.baseURL)}};UJ.setup();let UZ=(()=>{let e=ib(),t=e=>({items:e,types:eP(e),getType:t=>eV(e,t).getOrUndefined()}),r=t=>{e.set(t)},n=()=>e.get().getOrUndefined(),o=e.clear;return{FakeClipboardItem:t,write:r,read:n,clear:o}})(),U0=Math.min,U1=Math.max,U2=Math.round,U3=(e,t,r)=>{let n=t.x,o=t.y,l=e.w,a=e.h,i=t.w,s=t.h,d=(r||"").split("");return"b"===d[0]&&(o+=s),"r"===d[1]&&(n+=i),"c"===d[0]&&(o+=U2(s/2)),"c"===d[1]&&(n+=U2(i/2)),"b"===d[3]&&(o-=a),"r"===d[4]&&(n-=l),"c"===d[3]&&(o-=U2(a/2)),"c"===d[4]&&(n-=U2(l/2)),U4(n,o,l,a)},U8=(e,t,r,n)=>{for(let o=0;o<n.length;o++){let l=U3(e,t,n[o]);if(l.x>=r.x&&l.x+l.w<=r.w+r.x&&l.y>=r.y&&l.y+l.h<=r.h+r.y)return n[o]}return null},U5=(e,t,r)=>U4(e.x-t,e.y-r,e.w+2*t,e.h+2*r),U6=(e,t)=>{let r=U1(e.x,t.x),n=U1(e.y,t.y),o=U0(e.x+e.w,t.x+t.w),l=U0(e.y+e.h,t.y+t.h);return o-r<0||l-n<0?null:U4(r,n,o-r,l-n)},U9=(e,t,r)=>{let n=e.x,o=e.y,l=e.x+e.w,a=e.y+e.h,i=t.x+t.w,s=t.y+t.h,d=U1(0,t.x-n),c=U1(0,t.y-o),u=U1(0,l-i),m=U1(0,a-s);return n+=d,o+=c,r&&(l+=d,a+=c,n-=u,o-=m),U4(n,o,(l-=u)-n,(a-=m)-o)},U4=(e,t,r,n)=>({x:e,y:t,w:r,h:n}),U7=e=>U4(e.left,e.top,e.width,e.height),je=(e,t,r=1e3)=>{let n=!1,o=null,l=e=>(...t)=>{n||(n=!0,null!==o&&(clearTimeout(o),o=null),e.apply(null,t))},a=l(e),i=l(t),s=(...e)=>{n||null!==o||(o=setTimeout(()=>i.apply(null,e),r))};return{start:s,resolve:a,reject:i}},jt=(()=>{let e={},t={},r=(r,n)=>{let o=`Script at URL "${n}" failed to load`,l=`Script at URL "${n}" did not call \`tinymce.Resource.add('${r}', data)\` within 1 second`;if(void 0!==e[r])return e[r];{let a=new Promise((e,a)=>{let i=je(e,a);t[r]=i.resolve,a9.ScriptLoader.loadScript(n).then(()=>i.start(l),()=>i.reject(o))});return e[r]=a,a}},n=(r,n)=>{void 0!==t[r]&&(t[r](n),delete t[r]),e[r]=Promise.resolve(n)},o=t=>{delete e[t]};return{load:r,add:n,unload:o}})();try{let jr="__storage_test__";(n=window.localStorage).setItem(jr,jr),n.removeItem(jr)}catch(jn){n=(()=>{let e={},t=[],r={getItem:t=>{let r=e[t];return r||null},setItem:(r,n)=>{t.push(r),e[r]=String(n)},key:e=>t[e],removeItem:r=>{t=t.filter(e=>e===r),delete e[r]},clear:()=>{t=[],e={}},length:0};return Object.defineProperty(r,"length",{get:()=>t.length,configurable:!1,enumerable:!1}),r})()}var jo=n;let jl={geom:{Rect:{inflate:U5,relativePosition:U3,findBestRelativePosition:U8,intersect:U6,clamp:U9,create:U4,fromClientRect:U7}},util:{Delay:py,Tools:rr,VK:fL,URI:wz,EventDispatcher:Us,Observable:Uc,I18n:im,LocalStorage:jo,ImageUploader:En},dom:{EventUtils:aK,TreeWalker:os,TextSeeker:iV,DOMUtils:a5,ScriptLoader:a9,RangeUtils:gA,Serializer:St,StyleSheetLoader:l2,ControlSelection:fz,BookmarkManager:fd,Selection:_J,Event:aK.Event},html:{Styles:aP,Entities:ay,Node:hi,Schema:aB,DomParser:wZ,Writer:hC,Serializer:hx},Env:t2,AddOnManager:ig,Annotator:fs,Formatter:Ey,UndoManager:Ek,EditorCommands:IJ,WindowManager:SI,NotificationManager:SP,EditorObservable:Uh,Shortcuts:UF,Editor:UH,FocusManager:ph,EditorManager:UJ,DOM:a5.DOM,ScriptLoader:a9.ScriptLoader,PluginManager:SL,ThemeManager:SF,ModelManager:SC,IconManager:Sy,Resource:jt,FakeClipboard:UZ,trim:rr.trim,isArray:rr.isArray,is:rr.is,toArray:rr.toArray,makeMap:rr.makeMap,each:rr.each,map:rr.map,grep:rr.grep,inArray:rr.inArray,extend:rr.extend,walk:rr.walk,resolve:rr.resolve,explode:rr.explode,_addCacheSuffix:rr._addCacheSuffix},ja=rr.extend(UJ,jl);window.tinymce=ja,window.tinyMCE=ja,(e=>{if("object"==typeof module)try{module.exports=e}catch(t){}})(ja)}();