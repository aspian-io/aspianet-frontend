!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");let t=(e,t,r)=>{var o;return!!r(e,t.prototype)||(null===(o=e.constructor)||void 0===o?void 0:o.name)===t.name},r=e=>{let r=typeof e;return null===e?"null":"object"===r&&Array.isArray(e)?"array":"object"===r&&t(e,String,(e,t)=>t.isPrototypeOf(e))?"string":r},o=e=>t=>typeof t===e,n=e=>"string"===r(e),l=o("boolean"),i=e=>null==e,a=e=>!i(e),s=o("function"),u=o("number"),d=(e,t)=>r=>e(t(r)),m=()=>!1;class h{constructor(e,t){this.tag=e,this.value=t}static some(e){return new h(!0,e)}static none(){return h.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?h.some(e(this.value)):h.none()}bind(e){return this.tag?e(this.value):h.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:h.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw Error(null!=e?e:"Called getOrDie on None")}static from(e){return a(e)?h.some(e):h.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}h.singletonNone=new h(!1);let c=(e,t)=>{let r=e.length,o=Array(r);for(let n=0;n<r;n++){let l=e[n];o[n]=t(l,n)}return o},g=(e,t)=>{for(let r=0,o=e.length;r<o;r++){let n=e[r];t(n,r)}},f=(e,t)=>{let r=[];for(let o=0,n=e.length;o<n;o++){let l=e[o];t(l,o)&&r.push(l)}return r},v=(e,t)=>{let r=(t||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){let o="HTML does not have a single root node";throw console.error(o,e),Error(o)}return w(r.childNodes[0])},p=(e,t)=>{let r=(t||document).createElement(e);return w(r)},y=(e,t)=>{let r=(t||document).createTextNode(e);return w(r)},w=e=>{if(null==e)throw Error("Node cannot be null or undefined");return{dom:e}},N=(e,t,r)=>h.from(e.dom.elementFromPoint(t,r)).map(w),D={fromHtml:v,fromTag:p,fromText:y,fromDom:w,fromPoint:N},b=(e,t)=>{let r=e.dom;if(1!==r.nodeType)return!1;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw Error("Browser lacks native selectors")};"undefined"!=typeof window?window:Function("return this;")();let S=e=>{let t=e.dom.nodeName;return t.toLowerCase()},T=e=>e.dom.nodeType,A=e=>t=>T(t)===e,C=A(1),E=A(3),M=A(9),L=A(11),O=e=>D.fromDom(e.dom.ownerDocument),k=e=>M(e)?e:O(e),R=e=>h.from(e.dom.parentNode).map(D.fromDom),P=e=>c(e.dom.childNodes,D.fromDom),x=(e,t,r)=>{if(n(r)||l(r)||u(r))e.setAttribute(t,r+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),Error("Attribute value was not simple")},B=(e,t,r)=>{x(e.dom,t,r)},V=(e,t)=>{e.dom.removeAttribute(t)},j=e=>L(e)&&a(e.dom.host),z=s(Element.prototype.attachShadow)&&s(Node.prototype.getRootNode),F=z?e=>D.fromDom(e.dom.getRootNode()):k,H=e=>{let t=F(e);return j(t)?h.some(t):h.none()},I=e=>D.fromDom(e.dom.host),K=e=>{let t=E(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;let r=t.ownerDocument;return H(D.fromDom(t)).fold(()=>r.body.contains(t),d(K,I))},U=(e,t,r)=>{let o=e.dom,n=s(r)?r:m;for(;o.parentNode;){o=o.parentNode;let l=D.fromDom(o);if(t(l))return h.some(l);if(n(l))break}return h.none()},$=(e,t,r)=>U(e,e=>b(e,t),r),q=e=>void 0!==e.style&&s(e.style.getPropertyValue),G=(e,t)=>{let r=e.dom,o=window.getComputedStyle(r),n=o.getPropertyValue(t);return""!==n||K(e)?n:J(r,t)},J=(e,t)=>q(e)?e.style.getPropertyValue(t):"",Q=e=>"rtl"===G(e,"direction")?"rtl":"ltr",W=(e,t)=>f(P(e),t),X=(e,t)=>W(e,e=>b(e,t)),Y=e=>R(e).filter(C),Z=(e,t)=>{let r=t?$(e,"ol,ul"):h.some(e);return r.getOr(e)},_=e=>C(e)&&"li"===S(e),ee=(e,t)=>{let r=e.selection.getSelectedBlocks();r.length>0&&(g(r,e=>{let r=D.fromDom(e),o=_(r),n=Z(r,o),l=Y(n);l.each(e=>{let r=Q(e);if(r!==t?B(n,"dir",t):Q(n)!==t&&V(n,"dir"),o){let l=X(n,"li[dir]");g(l,e=>V(e,"dir"))}})}),e.nodeChanged())},et=e=>{e.addCommand("mceDirectionLTR",()=>{ee(e,"ltr")}),e.addCommand("mceDirectionRTL",()=>{ee(e,"rtl")})},er=(e,t)=>r=>{let o=e=>{let o=D.fromDom(e.element);r.setActive(Q(o)===t)};return e.on("NodeChange",o),()=>e.off("NodeChange",o)},eo=e=>{e.ui.registry.addToggleButton("ltr",{tooltip:"Left to right",icon:"ltr",onAction:()=>e.execCommand("mceDirectionLTR"),onSetup:er(e,"ltr")}),e.ui.registry.addToggleButton("rtl",{tooltip:"Right to left",icon:"rtl",onAction:()=>e.execCommand("mceDirectionRTL"),onSetup:er(e,"rtl")})};e.add("directionality",e=>{et(e),eo(e)})}();