!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");let t=(e,t,r)=>{var n;return!!r(e,t.prototype)||(null===(n=e.constructor)||void 0===n?void 0:n.name)===t.name},r=e=>{let r=typeof e;return null===e?"null":"object"===r&&Array.isArray(e)?"array":"object"===r&&t(e,String,(e,t)=>t.isPrototypeOf(e))?"string":r},n=e=>t=>r(t)===e,l=e=>t=>typeof t===e,o=n("string"),i=n("object"),s=n("array"),a=l("boolean"),d=e=>null==e,m=e=>!d(e),u=l("function"),c=l("number"),p=()=>{},g=(e,t)=>e===t,h=e=>t=>!e(t),f=()=>!1;class y{constructor(e,t){this.tag=e,this.value=t}static some(e){return new y(!0,e)}static none(){return y.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?y.some(e(this.value)):y.none()}bind(e){return this.tag?e(this.value):y.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:y.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw Error(null!=e?e:"Called getOrDie on None")}static from(e){return m(e)?y.some(e):y.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}y.singletonNone=new y(!1);let v=Array.prototype.slice,C=Array.prototype.indexOf,b=Array.prototype.push,S=(e,t)=>C.call(e,t),N=(e,t)=>S(e,t)>-1,L=(e,t)=>{for(let r=0,n=e.length;r<n;r++){let n=e[r];if(t(n,r))return!0}return!1},D=(e,t)=>{let r=e.length,n=Array(r);for(let l=0;l<r;l++){let r=e[l];n[l]=t(r,l)}return n},T=(e,t)=>{for(let r=0,n=e.length;r<n;r++){let n=e[r];t(n,r)}},O=(e,t)=>{let r=[];for(let n=0,l=e.length;n<l;n++){let l=e[n];t(l,n)&&r.push(l)}return r},k=(e,t)=>{if(0===e.length)return[];{let r=t(e[0]),n=[],l=[];for(let o=0,i=e.length;o<i;o++){let i=e[o],s=t(i);s!==r&&(n.push(l),l=[]),r=s,l.push(i)}return 0!==l.length&&n.push(l),n}},A=(e,t,r)=>(T(e,(e,n)=>{r=t(r,e,n)}),r),x=(e,t,r)=>{for(let n=0,l=e.length;n<l;n++){let l=e[n];if(t(l,n))return y.some(l);if(r(l,n))break}return y.none()},E=(e,t)=>x(e,t,f),B=e=>{let t=[];for(let r=0,n=e.length;r<n;++r){if(!s(e[r]))throw Error("Arr.flatten item "+r+" was not an array, input: "+e);b.apply(t,e[r])}return t},w=(e,t)=>B(D(e,t)),I=e=>{let t=v.call(e,0);return t.reverse(),t},M=(e,t)=>t>=0&&t<e.length?y.some(e[t]):y.none(),P=e=>M(e,0),R=e=>M(e,e.length-1),U=(e,t)=>{let r=[],n=u(t)?e=>L(r,r=>t(r,e)):e=>N(r,e);for(let t=0,l=e.length;t<l;t++){let l=e[t];n(l)||r.push(l)}return r},$=(e,t,r=g)=>e.exists(e=>r(e,t)),_=(e,t,r=g)=>F(e,t,r).getOr(e.isNone()&&t.isNone()),F=(e,t,r)=>e.isSome()&&t.isSome()?y.some(r(e.getOrDie(),t.getOrDie())):y.none(),H=(e,t)=>{let r=(t||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){let t="HTML does not have a single root node";throw console.error(t,e),Error(t)}return K(r.childNodes[0])},V=(e,t)=>{let r=(t||document).createElement(e);return K(r)},j=(e,t)=>{let r=(t||document).createTextNode(e);return K(r)},K=e=>{if(null==e)throw Error("Node cannot be null or undefined");return{dom:e}},z=(e,t,r)=>y.from(e.dom.elementFromPoint(t,r)).map(K),Q={fromHtml:H,fromTag:V,fromText:j,fromDom:K,fromPoint:z},q=(e,t)=>{let r=e.dom;if(1!==r.nodeType)return!1;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw Error("Browser lacks native selectors")},W=(e,t)=>e.dom===t.dom,Z=(e,t)=>{let r=e.dom,n=t.dom;return r!==n&&r.contains(n)};var G=(e,t,r,n,l)=>e(r,n)?y.some(r):u(l)&&l(r)?y.none():t(r,n,l);"undefined"!=typeof window?window:Function("return this;")();let J=e=>{let t=e.dom.nodeName;return t.toLowerCase()},X=e=>e.dom.nodeType,Y=e=>1===X(e),ee=e=>t=>Y(t)&&J(t)===e,et=e=>y.from(e.dom.parentNode).map(Q.fromDom),er=e=>y.from(e.dom.parentElement).map(Q.fromDom),en=e=>y.from(e.dom.nextSibling).map(Q.fromDom),el=e=>D(e.dom.childNodes,Q.fromDom),eo=(e,t)=>{let r=e.dom.childNodes;return y.from(r[t]).map(Q.fromDom)},ei=e=>eo(e,0),es=e=>eo(e,e.dom.childNodes.length-1),ea=(e,t,r)=>{let n=e.dom,l=u(r)?r:f;for(;n.parentNode;){n=n.parentNode;let e=Q.fromDom(n);if(t(e))return y.some(e);if(l(e))break}return y.none()},ed=(e,t,r)=>{let n=(e,t)=>t(e);return G(n,ea,e,t,r)},em=(e,t)=>{let r=et(e);r.each(r=>{r.dom.insertBefore(t.dom,e.dom)})},eu=(e,t)=>{let r=en(e);r.fold(()=>{let r=et(e);r.each(e=>{ec(e,t)})},e=>{em(e,t)})},ec=(e,t)=>{e.dom.appendChild(t.dom)},ep=(e,t)=>{T(t,t=>{em(e,t)})},eg=(e,t)=>{T(t,t=>{ec(e,t)})},eh=e=>{e.dom.textContent="",T(el(e),e=>{ef(e)})},ef=e=>{let t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)};var ey=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),ev=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),eC=tinymce.util.Tools.resolve("tinymce.util.VK");let eb=e=>D(e,Q.fromDom),eS=Object.keys,eN=(e,t)=>{let r=eS(e);for(let n=0,l=r.length;n<l;n++){let l=r[n],o=e[l];t(o,l)}},eL=e=>(t,r)=>{e[r]=t},eD=(e,t,r,n)=>{eN(e,(e,l)=>{(t(e,l)?r:n)(e,l)})},eT=(e,t)=>{let r={};return eD(e,t,eL(r),p),r},eO=(e,t,r)=>{if(o(r)||a(r)||c(r))e.setAttribute(t,r+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),Error("Attribute value was not simple")},ek=(e,t)=>{let r=e.dom;eN(t,(e,t)=>{eO(r,t,e)})},eA=e=>A(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}),ex=(e,t)=>Q.fromDom(e.dom.cloneNode(t)),eE=e=>ex(e,!0),eB=(e,t)=>{let r=Q.fromTag(t),n=eA(e);return ek(r,n),r},ew=(e,t)=>{let r=eB(e,t);eu(e,r);let n=el(e);return eg(r,n),ef(e),r};var eI=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),eM=tinymce.util.Tools.resolve("tinymce.util.Tools");let eP=e=>t=>m(t)&&t.nodeName.toLowerCase()===e,eR=e=>t=>m(t)&&e.test(t.nodeName),eU=e=>m(e)&&3===e.nodeType,e$=e=>m(e)&&1===e.nodeType,e_=eR(/^(OL|UL|DL)$/),eF=eR(/^(OL|UL)$/),eH=eP("ol"),eV=eR(/^(LI|DT|DD)$/),ej=eR(/^(DT|DD)$/),eK=eR(/^(TH|TD)$/),ez=eP("br"),eQ=e=>{var t;return(null===(t=e.parentNode)||void 0===t?void 0:t.firstChild)===e},eq=(e,t)=>m(t)&&t.nodeName in e.schema.getTextBlockElements(),eW=(e,t)=>m(e)&&e.nodeName in t,eZ=(e,t)=>m(t)&&t.nodeName in e.schema.getVoidElements(),eG=(e,t)=>!!ez(t)&&e.isBlock(t.nextSibling)&&!ez(t.previousSibling),eJ=(e,t,r)=>{let n=e.isEmpty(t);return(!r||!(e.select("span[data-mce-type=bookmark]",t).length>0))&&n},eX=(e,t)=>e.isChildOf(t,e.getRoot()),eY=e=>t=>t.options.get(e),e0=e=>{let t=e.options.register;t("lists_indent_on_tab",{processor:"boolean",default:!0})},e1=eY("lists_indent_on_tab"),e2=eY("forced_root_block"),e6=eY("forced_root_block_attrs"),e3=(e,t)=>{let r,n;let l=e.dom,o=e.schema.getBlockElements(),i=l.createFragment(),s=e2(e),a=e6(e),d=!1;for(n=l.create(s,a),eW(t.firstChild,o)||i.appendChild(n);r=t.firstChild;){let e=r.nodeName;d||"SPAN"===e&&"bookmark"===r.getAttribute("data-mce-type")||(d=!0),eW(r,o)?(i.appendChild(r),n=null):(n||(n=l.create(s,a),i.appendChild(n)),n.appendChild(r))}return!d&&n&&n.appendChild(l.create("br",{"data-mce-bogus":"1"})),i},e4=eI.DOM,e5=(e,t,r)=>{let n=e4.select('span[data-mce-type="bookmark"]',t),l=e3(e,r),o=e4.createRng();o.setStartAfter(r),o.setEndAfter(t);let i=o.extractContents();for(let t=i.firstChild;t;t=t.firstChild)if("LI"===t.nodeName&&e.dom.isEmpty(t)){e4.remove(t);break}e.dom.isEmpty(i)||e4.insertAfter(i,t),e4.insertAfter(l,t);let s=r.parentElement;s&&eJ(e.dom,s)&&(e=>{let t=e.parentNode;t&&eM.each(n,e=>{t.insertBefore(e,r.parentNode)}),e4.remove(e)})(s),e4.remove(r),eJ(e.dom,t)&&e4.remove(t)},e9=ee("dd"),e7=ee("dt"),e8=(e,t)=>{e9(t)?ew(t,"dt"):e7(t)&&er(t).each(r=>e5(e,r.dom,t.dom))},te=e=>{e7(e)&&ew(e,"dd")},tt=(e,t,r)=>{"Indent"===t?T(r,te):T(r,t=>e8(e,t))},tr=(e,t)=>{if(eU(e))return{container:e,offset:t};let r=ey.getNode(e,t);return eU(r)?{container:r,offset:t>=e.childNodes.length?r.data.length:0}:r.previousSibling&&eU(r.previousSibling)?{container:r.previousSibling,offset:r.previousSibling.data.length}:r.nextSibling&&eU(r.nextSibling)?{container:r.nextSibling,offset:0}:{container:e,offset:t}},tn=e=>{let t=e.cloneRange(),r=tr(e.startContainer,e.startOffset);t.setStart(r.container,r.offset);let n=tr(e.endContainer,e.endOffset);return t.setEnd(n.container,n.offset),t},tl=["OL","UL","DL"],to=tl.join(","),ti=(e,t)=>{let r=t||e.selection.getStart(!0);return e.dom.getParent(r,to,th(e,r))},ts=(e,t)=>m(e)&&1===t.length&&t[0]===e,ta=e=>O(e.querySelectorAll(to),e_),td=e=>{let t=ti(e),r=e.selection.getSelectedBlocks();return ts(t,r)?ta(t):O(r,e=>e_(e)&&t!==e)},tm=(e,t)=>{let r=eM.map(t,t=>{let r=e.dom.getParent(t,"li,dd,dt",th(e,t));return r||t});return U(r)},tu=e=>{let t=e.selection.getSelectedBlocks();return O(tm(e,t),eV)},tc=e=>O(tu(e),ej),tp=(e,t)=>{let r=e.dom.getParents(t,"TD,TH");return r.length>0?r[0]:e.getBody()},tg=(e,t)=>!e_(t)&&!eV(t)&&L(tl,r=>e.isValidChild(t.nodeName,r)),th=(e,t)=>{let r=e.dom.getParents(t,e.dom.isBlock),n=E(r,t=>tg(e.schema,t));return n.getOr(e.getBody())},tf=(e,t)=>{let r=e.dom.getParents(t,"ol,ul",th(e,t));return R(r)},ty=e=>{let t=tf(e,e.selection.getStart()),r=O(e.selection.getSelectedBlocks(),eF);return t.toArray().concat(r)},tv=e=>{let t=ty(e);return tC(e,t)},tC=(e,t)=>{let r=D(t,t=>tf(e,t).getOr(t));return U(r)},tb=e=>/\btox\-/.test(e.className),tS=(e,t)=>x(e,e_,eK).exists(e=>e.nodeName===t&&!tb(e)),tN=(e,t)=>null!==t&&!e.dom.isEditable(t),tL=e=>{let t=ti(e);return tN(e,t)},tD=(e,t)=>{let r=e.dom.getParent(t,"ol,ul,dl");return tN(e,r)},tT=e=>L(e.selection.getSelectedBlocks(),h(e.dom.isEditable)),tO=(e,t)=>{let r=e.selection.getNode();return t({parents:e.dom.getParents(r),element:r}),e.on("NodeChange",t),()=>e.off("NodeChange",t)},tk=(e,t)=>{let r=(t||document).createDocumentFragment();return T(e,e=>{r.appendChild(e.dom)}),Q.fromDom(r)},tA=(e,t,r)=>e.dispatch("ListMutation",{action:t,element:r}),tx=e=>e.replace(/^\s+|\s+$/g,""),tE=e=>e.length>0,tB=e=>!tE(e),tw=e=>void 0!==e.style&&u(e.style.getPropertyValue),tI=(e,t,r)=>{if(!o(r))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",r,":: Element ",e),Error("CSS value must be a string: "+r);tw(e)&&e.style.setProperty(t,r)},tM=(e,t,r)=>{let n=e.dom;tI(n,t,r)},tP=(e,t)=>{ec(e.item,t.list)},tR=e=>{for(let t=1;t<e.length;t++)tP(e[t-1],e[t])},tU=(e,t)=>{F(R(e),P(t),tP)},t$=(e,t)=>{let r={list:Q.fromTag(t,e),item:Q.fromTag("li",e)};return ec(r.list,r.item),r},t_=(e,t,r)=>{let n=[];for(let l=0;l<r;l++)n.push(t$(e,t.listType));return n},tF=(e,t)=>{for(let t=0;t<e.length-1;t++)tM(e[t].item,"list-style-type","none");R(e).each(e=>{ek(e.list,t.listAttributes),ek(e.item,t.itemAttributes),eg(e.item,t.content)})},tH=(e,t)=>{J(e.list)!==t.listType&&(e.list=ew(e.list,t.listType)),ek(e.list,t.listAttributes)},tV=(e,t,r)=>{let n=Q.fromTag("li",e);return ek(n,t),eg(n,r),n},tj=(e,t)=>{ec(e.list,t),e.item=t},tK=(e,t,r)=>{let n=t.slice(0,r.depth);return R(n).each(t=>{let n=tV(e,r.itemAttributes,r.content);tj(t,n),tH(t,r)}),n},tz=(e,t,r)=>{let n=t_(e,r,r.depth-t.length);return tR(n),tF(n,r),tU(t,n),t.concat(n)},tQ=(e,t)=>{let r=A(t,(t,r)=>r.depth>t.length?tz(e,t,r):tK(e,t,r),[]);return P(r).map(e=>e.list)},tq=e=>q(e,"OL,UL"),tW=e=>ei(e).exists(tq),tZ=e=>es(e).exists(tq),tG=e=>e.depth>0,tJ=e=>e.isSelected,tX=e=>{let t=el(e),r=tZ(e)?t.slice(0,-1):t;return D(r,eE)},tY=(e,t,r)=>et(e).filter(Y).map(n=>({depth:t,dirty:!1,isSelected:r,content:tX(e),itemAttributes:eA(e),listAttributes:eA(n),listType:J(n)})),t0=(e,t)=>{switch(e){case"Indent":t.depth++;break;case"Outdent":t.depth--;break;case"Flatten":t.depth=0}t.dirty=!0},t1=(e,t)=>{e.listType=t.listType,e.listAttributes={...t.listAttributes}},t2=e=>{e.listAttributes=eT(e.listAttributes,(e,t)=>"start"!==t)},t6=(e,t)=>{let r=e[t].depth,n=e=>e.depth===r&&!e.dirty,l=e=>e.depth<r;return x(I(e.slice(0,t)),n,l).orThunk(()=>x(e.slice(t+1),n,l))},t3=e=>(T(e,(t,r)=>{t6(e,r).fold(()=>{t.dirty&&t2(t)},e=>t1(t,e))}),e),t4=e=>{let t=e,r=e=>{t=e};return{get:()=>t,set:r}},t5=(e,t,r,n)=>ei(n).filter(tq).fold(()=>{t.each(e=>{W(e.start,n)&&r.set(!0)});let l=tY(n,e,r.get());t.each(e=>{W(e.end,n)&&r.set(!1)});let o=es(n).filter(tq).map(n=>t9(e,t,r,n)).getOr([]);return l.toArray().concat(o)},n=>t9(e,t,r,n)),t9=(e,t,r,n)=>w(el(n),n=>{let l=tq(n)?t9:t5;return l(e+1,t,r,n)}),t7=(e,t)=>{let r=t4(!1);return D(e,e=>({sourceList:e,entries:t9(0,t,r,e)}))},t8=(e,t)=>{let r=t3(t);return D(r,t=>{let r=tk(t.content);return Q.fromDom(e3(e,r.dom))})},re=(e,t)=>{let r=t3(t);return tQ(e.contentDocument,r).toArray()},rt=(e,t)=>w(k(t,tG),t=>{let r=P(t).exists(tG);return r?re(e,t):t8(e,t)}),rr=(e,t)=>{T(O(e,tJ),e=>t0(t,e))},rn=e=>{let t=D(tu(e),Q.fromDom);return F(E(t,h(tW)),E(I(t),h(tW)),(e,t)=>({start:e,end:t}))},rl=(e,t,r)=>{let n=t7(t,rn(e));T(n,t=>{rr(t.entries,r);let n=rt(e,t.entries);T(n,t=>{tA(e,"Indent"===r?"IndentList":"OutdentList",t.dom)}),ep(t.sourceList,n),ef(t.sourceList)})},ro=(e,t)=>{let r=eb(tv(e)),n=eb(tc(e)),l=!1;if(r.length||n.length){let o=e.selection.getBookmark();rl(e,r,t),tt(e,t,n),e.selection.moveToBookmark(o),e.selection.setRng(tn(e.selection.getRng())),e.nodeChanged(),l=!0}return l},ri=(e,t)=>!tL(e)&&ro(e,t),rs=e=>ri(e,"Indent"),ra=e=>ri(e,"Outdent"),rd=e=>ri(e,"Flatten"),rm=e=>"\uFEFF"===e;var ru=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");let rc=eI.DOM,rp=e=>{let t={},r=r=>{let n=e[r?"startContainer":"endContainer"],l=e[r?"startOffset":"endOffset"];if(e$(n)){let e=rc.create("span",{"data-mce-type":"bookmark"});n.hasChildNodes()?(l=Math.min(l,n.childNodes.length-1),r?n.insertBefore(e,n.childNodes[l]):rc.insertAfter(e,n.childNodes[l])):n.appendChild(e),n=e,l=0}t[r?"startContainer":"endContainer"]=n,t[r?"startOffset":"endOffset"]=l};return r(!0),e.collapsed||r(),t},rg=e=>{let t=t=>{let r=e[t?"startContainer":"endContainer"],n=e[t?"startOffset":"endOffset"];if(r){if(e$(r)&&r.parentNode){let e=r;n=(e=>{var t;let r=null===(t=e.parentNode)||void 0===t?void 0:t.firstChild,n=0;for(;r;){if(r===e)return n;(!e$(r)||"bookmark"!==r.getAttribute("data-mce-type"))&&n++,r=r.nextSibling}return -1})(r),r=r.parentNode,rc.remove(e),!r.hasChildNodes()&&rc.isBlock(r)&&r.appendChild(rc.create("br"))}e[t?"startContainer":"endContainer"]=r,e[t?"startOffset":"endOffset"]=n}};t(!0),t();let r=rc.createRng();return r.setStart(e.startContainer,e.startOffset),e.endContainer&&r.setEnd(e.endContainer,e.endOffset),tn(r)},rh=e=>{switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},rf=(e,t,r)=>{let n=r["list-style-type"]?r["list-style-type"]:null;e.setStyle(t,"list-style-type",n)},ry=(e,t)=>{eM.each(t,(t,r)=>{e.setAttribute(r,t)})},rv=(e,t,r)=>{ry(t,r["list-attributes"]),eM.each(e.select("li",t),e=>{ry(e,r["list-item-attributes"])})},rC=(e,t,r)=>{rf(e,t,r),rv(e,t,r)},rb=(e,t,r)=>{eM.each(r,r=>e.setStyle(t,r,""))},rS=(e,t)=>m(t)&&!eW(t,e.schema.getBlockElements()),rN=(e,t,r,n)=>{let l=t[r?"startContainer":"endContainer"],o=t[r?"startOffset":"endOffset"];e$(l)&&(l=l.childNodes[Math.min(o,l.childNodes.length-1)]||l),!r&&ez(l.nextSibling)&&(l=l.nextSibling);let i=(t,r)=>{var l;let o;let i=new ev(t,n),s=r?"next":"prev";for(;o=i[s]();)if(!(eZ(e,o)||rm(o.textContent)||(null===(l=o.textContent)||void 0===l?void 0:l.length)===0))return y.some(o);return y.none()};if(r&&eU(l)){if(rm(l.textContent))l=i(l,!1).getOr(l);else for(null!==l.parentNode&&rS(e,l.parentNode)&&(l=l.parentNode);null!==l.previousSibling&&(rS(e,l.previousSibling)||eU(l.previousSibling));)l=l.previousSibling}if(!r&&eU(l)){if(rm(l.textContent))l=i(l,!0).getOr(l);else for(null!==l.parentNode&&rS(e,l.parentNode)&&(l=l.parentNode);null!==l.nextSibling&&(rS(e,l.nextSibling)||eU(l.nextSibling));)l=l.nextSibling}for(;l.parentNode!==n;){let t=l.parentNode;if(eq(e,l)||/^(TD|TH)$/.test(t.nodeName))break;l=t}return l},rL=(e,t,r)=>{let n;let l=[],o=e.dom,i=rN(e,t,!0,r),s=rN(e,t,!1,r),a=[];for(let e=i;e&&(a.push(e),e!==s);e=e.nextSibling);return eM.each(a,t=>{var i;if(eq(e,t)){l.push(t),n=null;return}if(o.isBlock(t)||ez(t)){ez(t)&&o.remove(t),n=null;return}let s=t.nextSibling;if(ru.isBookmarkNode(t)&&(e_(s)||eq(e,s)||!s&&t.parentNode===r)){n=null;return}n||(n=o.create("p"),null===(i=t.parentNode)||void 0===i||i.insertBefore(n,t),l.push(n)),n.appendChild(t)}),l},rD=(e,t,r)=>{let n=e.getStyle(t,"list-style-type"),l=r?r["list-style-type"]:"";return n===(l=null===l?"":l)},rT=(e,t,r)=>{let n=e.selection.getRng(),l="LI",o=th(e,e.selection.getStart(!0)),i=e.dom;if("false"===i.getContentEditable(e.selection.getNode()))return;"DL"===(t=t.toUpperCase())&&(l="DT");let s=rp(n),a=rL(e,n,o);eM.each(a,n=>{let o;let s=n.previousSibling,a=n.parentNode;eV(a)||(s&&e_(s)&&s.nodeName===t&&rD(i,s,r)?(o=s,n=i.rename(n,l),s.appendChild(n)):(o=i.create(t),a.insertBefore(o,n),o.appendChild(n),n=i.rename(n,l)),rb(i,n,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),rC(i,o,r),rE(e.dom,o))}),e.selection.setRng(rg(s))},rO=(e,t)=>e_(e)&&e.nodeName===(null==t?void 0:t.nodeName),rk=(e,t,r)=>{let n=e.getStyle(t,"list-style-type",!0),l=e.getStyle(r,"list-style-type",!0);return n===l},rA=(e,t)=>e.className===t.className,rx=(e,t,r)=>rO(t,r)&&rk(e,t,r)&&rA(t,r),rE=(e,t)=>{let r;let n=t.nextSibling;if(rx(e,t,n)){let l=n;for(;r=l.firstChild;)t.appendChild(r);e.remove(l)}if(n=t.previousSibling,rx(e,t,n)){let l=n;for(;r=l.lastChild;)t.insertBefore(r,t.firstChild);e.remove(l)}},rB=(e,t,r,n)=>{if(t.nodeName!==r){let l=e.dom.rename(t,r);rC(e.dom,l,n),tA(e,rh(r),l)}else rC(e.dom,t,n),tA(e,rh(r),t)},rw=(e,t,r,n,l)=>{let o=e_(t);if(o&&t.nodeName===n&&!rI(l))rd(e);else{rT(e,n,l);let i=rp(e.selection.getRng()),s=o?[t,...r]:r;eM.each(s,t=>{rB(e,t,n,l)}),e.selection.setRng(rg(i))}},rI=e=>"list-style-type"in e,rM=(e,t,r,n)=>{if(t!==e.getBody()){if(t){if(t.nodeName!==r||rI(n)||tb(t)){let l=rp(e.selection.getRng());rC(e.dom,t,n);let o=e.dom.rename(t,r);rE(e.dom,o),e.selection.setRng(rg(l)),rT(e,r,n),tA(e,rh(r),o)}else rd(e)}else rT(e,r,n),tA(e,rh(r),t)}},rP=(e,t,r)=>{let n=ti(e);if(tD(e,n)||tT(e))return;let l=td(e),o=i(r)?r:{};l.length>0?rw(e,n,l,t,o):rM(e,n,t,o)},rR=eI.DOM,rU=(e,t)=>{let r=t.parentElement;if(r&&"LI"===r.nodeName&&r.firstChild===t){let n=r.previousSibling;n&&"LI"===n.nodeName?(n.appendChild(t),eJ(e,r)&&rR.remove(r)):rR.setStyle(r,"listStyleType","none")}if(e_(r)){let e=r.previousSibling;e&&"LI"===e.nodeName&&e.appendChild(t)}},r$=(e,t)=>{let r=eM.grep(e.select("ol,ul",t));eM.each(r,t=>{rU(e,t)})},r_=(e,t,r,n)=>{let l=t.startContainer,o=t.startOffset;if(eU(l)&&(r?o<l.data.length:o>0))return l;let i=e.schema.getNonEmptyElements();e$(l)&&(l=ey.getNode(l,o));let s=new ev(l,n);r&&eG(e.dom,l)&&s.next();let a=r?s.next.bind(s):s.prev2.bind(s);for(;l=a();)if("LI"===l.nodeName&&!l.hasChildNodes()||i[l.nodeName]||eU(l)&&l.data.length>0)return l;return null},rF=(e,t)=>{let r=t.childNodes;return 1===r.length&&!e_(r[0])&&e.isBlock(r[0])},rH=(e,t)=>{rF(e,t)&&e.remove(t.firstChild,!0)},rV=(e,t,r)=>{let n;let l=rF(e,r)?r.firstChild:r;if(rH(e,t),!eJ(e,t,!0))for(;n=t.firstChild;)l.appendChild(n)},rj=(e,t,r)=>{let n;let l=t.parentNode;if(!eX(e,t)||!eX(e,r))return;e_(r.lastChild)&&(n=r.lastChild),l===r.lastChild&&ez(l.previousSibling)&&e.remove(l.previousSibling);let o=r.lastChild;o&&ez(o)&&t.hasChildNodes()&&e.remove(o),eJ(e,r,!0)&&eh(Q.fromDom(r)),rV(e,t,r),n&&r.appendChild(n);let i=Z(Q.fromDom(r),Q.fromDom(t)),s=i?e.getParents(t,e_,r):[];e.remove(t),T(s,t=>{eJ(e,t)&&t!==e.getRoot()&&e.remove(t)})},rK=(e,t,r)=>{eh(Q.fromDom(r)),rj(e.dom,t,r),e.selection.setCursorLocation(r,0)},rz=(e,t,r,n)=>{let l=e.dom;if(l.isEmpty(n))rK(e,r,n);else{let o=rp(t);rj(l,r,n),e.selection.setRng(rg(o))}},rQ=(e,t,r,n)=>{let l=rp(t);rj(e.dom,r,n);let o=rg(l);e.selection.setRng(o)},rq=(e,t)=>{let r=e.dom,n=e.selection,l=n.getStart(),o=tp(e,l),i=r.getParent(n.getStart(),"LI",o);if(i){let l=i.parentElement;if(l===e.getBody()&&eJ(r,l))return!0;let s=tn(n.getRng()),a=r.getParent(r_(e,s,t,o),"LI",o);if(a&&a!==i)return e.undoManager.transact(()=>{t?rz(e,s,a,i):eQ(i)?ra(e):rQ(e,s,i,a)}),!0;if(!a&&!t&&0===s.startOffset&&0===s.endOffset)return e.undoManager.transact(()=>{rd(e)}),!0}return!1},rW=(e,t,r)=>{let n=e.getParent(t.parentNode,e.isBlock,r);e.remove(t),n&&e.isEmpty(n)&&e.remove(n)},rZ=(e,t)=>{let r=e.dom,n=e.selection.getStart(),l=tp(e,n),o=r.getParent(n,r.isBlock,l);if(o&&r.isEmpty(o)){let n=tn(e.selection.getRng()),i=r.getParent(r_(e,n,t,l),"LI",l);if(i){let s=e=>N(["td","th","caption"],J(e)),a=e=>e.dom===l,d=ed(Q.fromDom(i),s,a),m=ed(Q.fromDom(n.startContainer),s,a);return!!_(d,m,W)&&(e.undoManager.transact(()=>{rW(r,o,l),rE(r,i.parentNode),e.selection.select(i,!0),e.selection.collapse(t)}),!0)}}return!1},rG=(e,t)=>rq(e,t)||rZ(e,t),rJ=e=>{let t=e.selection.getStart(),r=tp(e,t),n=e.dom.getParent(t,"LI,DT,DD",r);return n||tu(e).length>0},rX=e=>!!rJ(e)&&(e.undoManager.transact(()=>{e.execCommand("Delete"),r$(e.dom,e.getBody())}),!0),rY=(e,t)=>{let r=e.selection;return!tD(e,r.getNode())&&(r.isCollapsed()?rG(e,t):rX(e))},r0=e=>{e.on("ExecCommand",t=>{let r=t.command.toLowerCase();("delete"===r||"forwarddelete"===r)&&rJ(e)&&r$(e.dom,e.getBody())}),e.on("keydown",t=>{t.keyCode===eC.BACKSPACE?rY(e,!1)&&t.preventDefault():t.keyCode===eC.DELETE&&rY(e,!0)&&t.preventDefault()})},r1=e=>({backspaceDelete:t=>{rY(e,t)}}),r2=(e,t)=>{let r=ti(e);null===r||tD(e,r)||e.undoManager.transact(()=>{i(t.styles)&&e.dom.setStyles(r,t.styles),i(t.attrs)&&eN(t.attrs,(t,n)=>e.dom.setAttrib(r,n,t))})},r6=e=>{let t=I(tx(e).split("")),r=D(t,(e,t)=>{let r=e.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,t)*r});return A(r,(e,t)=>e+t,0)},r3=e=>{if(--e<0)return"";{let t=e%26,r=Math.floor(e/26),n=r3(r),l=String.fromCharCode(65+t);return n+l}},r4=e=>/^[A-Z]+$/.test(e),r5=e=>/^[a-z]+$/.test(e),r9=e=>/^[0-9]+$/.test(e),r7=e=>r9(e)?2:r4(e)?0:r5(e)?1:tB(e)?3:4,r8=e=>{switch(r7(e)){case 2:return y.some({listStyleType:y.none(),start:e});case 0:return y.some({listStyleType:y.some("upper-alpha"),start:r6(e).toString()});case 1:return y.some({listStyleType:y.some("lower-alpha"),start:r6(e).toString()});case 3:return y.some({listStyleType:y.none(),start:""});case 4:return y.none()}},ne=e=>{let t=parseInt(e.start,10);return $(e.listStyleType,"upper-alpha")?r3(t):$(e.listStyleType,"lower-alpha")?r3(t).toLowerCase():e.start},nt=e=>{let t=ti(e);!eH(t)||tD(e,t)||e.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:ne({start:e.dom.getAttrib(t,"start","1"),listStyleType:y.from(e.dom.getStyle(t,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:t=>{let r=t.getData();r8(r.start).each(t=>{e.execCommand("mceListUpdate",!1,{attrs:{start:"1"===t.start?"":t.start},styles:{"list-style-type":t.listStyleType.getOr("")}})}),t.close()}})},nr=(e,t)=>()=>{let r=ti(e);return m(r)&&r.nodeName===t},nn=e=>{e.addCommand("mceListProps",()=>{nt(e)})},nl=e=>{e.on("BeforeExecCommand",t=>{let r=t.command.toLowerCase();"indent"===r?rs(e):"outdent"===r&&ra(e)}),e.addCommand("InsertUnorderedList",(t,r)=>{rP(e,"UL",r)}),e.addCommand("InsertOrderedList",(t,r)=>{rP(e,"OL",r)}),e.addCommand("InsertDefinitionList",(t,r)=>{rP(e,"DL",r)}),e.addCommand("RemoveList",()=>{rd(e)}),nn(e),e.addCommand("mceListUpdate",(t,r)=>{i(r)&&r2(e,r)}),e.addQueryStateHandler("InsertUnorderedList",nr(e,"UL")),e.addQueryStateHandler("InsertOrderedList",nr(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",nr(e,"DL"))};var no=tinymce.util.Tools.resolve("tinymce.html.Node");let ni=e=>3===e.type,ns=e=>0===e.length,na=e=>{let t=(t,r)=>{let n=no.create("li");T(t,e=>n.append(e)),r?e.insert(n,r,!0):e.append(n)},r=(e,r)=>ni(r)?[...e,r]:ns(e)||ni(r)?e:(t(e,r),[]),n=A(e.children(),r,[]);ns(n)||t(n)},nd=e=>{e.on("PreInit",()=>{let{parser:t}=e;t.addNodeFilter("ul,ol",e=>T(e,na))})},nm=e=>{e.on("keydown",t=>{t.keyCode!==eC.TAB||eC.metaKeyPressed(t)||e.undoManager.transact(()=>{(t.shiftKey?ra(e):rs(e))&&t.preventDefault()})})},nu=e=>{e1(e)&&nm(e),r0(e)},nc=(e,t)=>r=>{let n=n=>{r.setActive(tS(n.parents,t)),r.setEnabled(!tD(e,n.element))};return tO(e,n)},np=e=>{let t=t=>()=>e.execCommand(t);e.hasPlugin("advlist")||(e.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:t("InsertOrderedList"),onSetup:nc(e,"OL")}),e.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:t("InsertUnorderedList"),onSetup:nc(e,"UL")}))},ng=(e,t)=>r=>{let n=n=>r.setEnabled(tS(n.parents,t)&&!tD(e,n.element));return tO(e,n)},nh=e=>{let t={text:"List properties...",icon:"ordered-list",onAction:()=>e.execCommand("mceListProps"),onSetup:ng(e,"OL")};e.ui.registry.addMenuItem("listprops",t),e.ui.registry.addContextMenu("lists",{update:t=>{let r=ti(e,t);return eH(r)?["listprops"]:[]}})};e.add("lists",e=>(e0(e),nd(e),e.hasPlugin("rtc",!0)?nn(e):(nu(e),nl(e)),np(e),nh(e),r1(e)))}();