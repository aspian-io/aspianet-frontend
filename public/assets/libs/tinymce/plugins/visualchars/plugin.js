!function(){"use strict";let e;let t=e=>{let t=e,r=e=>{t=e};return{get:()=>t,set:r}};var r=tinymce.util.Tools.resolve("tinymce.PluginManager");let o=e=>{let t=()=>e.get();return{isEnabled:t}},n=(e,t)=>e.dispatch("VisualChars",{state:t}),l=(e,t,r)=>{var o;return!!r(e,t.prototype)||(null===(o=e.constructor)||void 0===o?void 0:o.name)===t.name},s=e=>{let t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&l(e,String,(e,t)=>t.isPrototypeOf(e))?"string":t},a=e=>t=>s(t)===e,i=e=>t=>typeof t===e,u=a("string"),d=a("object"),c=e=>null===e,m=i("boolean"),h=e=>null==e,g=e=>!h(e),v=i("number");class f{constructor(e,t){this.tag=e,this.value=t}static some(e){return new f(!0,e)}static none(){return f.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?f.some(e(this.value)):f.none()}bind(e){return this.tag?e(this.value):f.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:f.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw Error(null!=e?e:"Called getOrDie on None")}static from(e){return g(e)?f.some(e):f.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}f.singletonNone=new f(!1);let p=(e,t)=>{let r=e.length,o=Array(r);for(let n=0;n<r;n++){let r=e[n];o[n]=t(r,n)}return o},y=(e,t)=>{for(let r=0,o=e.length;r<o;r++){let o=e[r];t(o,r)}},b=(e,t)=>{let r=[];for(let o=0,n=e.length;o<n;o++){let n=e[o];t(n,o)&&r.push(n)}return r},w=Object.keys,N=(e,t)=>{let r=w(e);for(let o=0,n=r.length;o<n;o++){let n=r[o],l=e[n];t(l,n)}},T="undefined"!=typeof window?window:Function("return this;")(),k=(e,t)=>{let r=null!=t?t:T;for(let t=0;t<e.length&&null!=r;++t)r=r[e[t]];return r},E=(e,t)=>{let r=e.split(".");return k(r,t)},A=(e,t)=>E(e,t),C=(e,t)=>{let r=A(e,t);if(null==r)throw Error(e+" not available on this browser");return r},O=Object.getPrototypeOf,L=e=>C("HTMLElement",e),V=e=>{let t=E("ownerDocument.defaultView",e);return d(e)&&(L(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(O(e).constructor.name))},j=e=>e.dom.nodeType,x=e=>e.dom.nodeValue,B=e=>t=>j(t)===e,D=e=>S(e)&&V(e.dom),S=B(1),M=B(3),P=(e,t,r)=>{if(u(r)||m(r)||v(r))e.setAttribute(t,r+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),Error("Attribute value was not simple")},H=(e,t,r)=>{P(e.dom,t,r)},_=(e,t)=>{let r=e.dom.getAttribute(t);return null===r?void 0:r},F=(e,t)=>{e.dom.removeAttribute(t)},I=(e,t)=>{let r=_(e,t);return void 0===r||""===r?[]:r.split(" ")},$=(e,t,r)=>{let o=I(e,t),n=o.concat([r]);return H(e,t,n.join(" ")),!0},K=(e,t,r)=>{let o=b(I(e,t),e=>e!==r);return o.length>0?H(e,t,o.join(" ")):F(e,t),!1},R=e=>void 0!==e.dom.classList,U=e=>I(e,"class"),q=(e,t)=>$(e,"class",t),z=(e,t)=>K(e,"class",t),G=(e,t)=>{R(e)?e.dom.classList.add(t):q(e,t)},J=e=>{let t=R(e)?e.dom.classList:U(e);0===t.length&&F(e,"class")},Q=(e,t)=>{if(R(e)){let r=e.dom.classList;r.remove(t)}else z(e,t);J(e)},W=(e,t)=>{let r=(t||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){let t="HTML does not have a single root node";throw console.error(t,e),Error(t)}return Z(r.childNodes[0])},X=(e,t)=>{let r=(t||document).createElement(e);return Z(r)},Y=(e,t)=>{let r=(t||document).createTextNode(e);return Z(r)},Z=e=>{if(null==e)throw Error("Node cannot be null or undefined");return{dom:e}},ee=(e,t,r)=>f.from(e.dom.elementFromPoint(t,r)).map(Z),et={fromHtml:W,fromTag:X,fromText:Y,fromDom:Z,fromPoint:ee},er={"\xa0":"nbsp","\xad":"shy"},eo=(e,t)=>{let r="";return N(e,(e,t)=>{r+=t}),RegExp("["+r+"]",t?"g":"")},en=eo(er),el=eo(er,!0),es=(e="",N(er,t=>{e&&(e+=","),e+="span.mce-"+t}),e),ea="mce-nbsp",ei=e=>e.dom.contentEditable,eu=e=>'<span data-mce-bogus="1" class="mce-'+er[e]+'">'+e+"</span>",ed=e=>"span"===e.nodeName.toLowerCase()&&e.classList.contains("mce-nbsp-wrap"),ec=e=>{let t=x(e);return M(e)&&u(t)&&en.test(t)},em=e=>D(e)&&"false"===ei(e),eh=(e,t)=>{if(D(e)&&!ed(e.dom)){let t=ei(e);if("true"===t)return!0;if("false"===t)return!1}return t},eg=(e,t,r)=>{let o=[],n=e.dom,l=p(n.childNodes,et.fromDom),s=e=>ed(e.dom)||!em(e);return y(l,e=>{r&&s(e)&&t(e)&&(o=o.concat([e])),o=o.concat(eg(e,t,eh(e,r)))}),o},ev=(e,t)=>{for(;e.parentNode;){if(e.parentNode===t)return t;e=e.parentNode}},ef=e=>e.replace(el,eu),ep=(e,t)=>{let r=e.dom,o=eg(et.fromDom(t),ec,e.dom.isEditable(t));y(o,t=>{var o;let n=t.dom.parentNode;if(ed(n))G(et.fromDom(n),ea);else{let n;let l=ef(r.encode(null!==(o=x(t))&&void 0!==o?o:"")),s=r.create("div",{},l);for(;n=s.lastChild;)r.insertAfter(n,t.dom);e.dom.remove(t.dom)}})},ey=(e,t)=>{let r=e.dom.select(es,t);y(r,t=>{ed(t)?Q(et.fromDom(t),ea):e.dom.remove(t,!0)})},eb=e=>{let t=e.getBody(),r=e.selection.getBookmark(),o=ev(e.selection.getNode(),t);ey(e,o=void 0!==o?o:t),ep(e,o),e.selection.moveToBookmark(r)},ew=(e,t)=>{n(e,t.get());let r=e.getBody();!0===t.get()?ep(e,r):ey(e,r)},eN=(e,t)=>{t.set(!t.get());let r=e.selection.getBookmark();ew(e,t),e.selection.moveToBookmark(r)},eT=(e,t)=>{e.addCommand("mceVisualChars",()=>{eN(e,t)})},ek=e=>{let t=e.options.register;t("visualchars_default_state",{processor:"boolean",default:!1})},eE=e=>e.options.get("visualchars_default_state"),eA=(e,t)=>{e.on("init",()=>{ew(e,t)})},eC=(e,t)=>{let r=null,o=()=>{c(r)||(clearTimeout(r),r=null)},n=(...o)=>{c(r)&&(r=setTimeout(()=>{r=null,e.apply(null,o)},t))};return{cancel:o,throttle:n}},eO=(e,t)=>{let r=eC(()=>{eb(e)},300);e.on("keydown",o=>{!0===t.get()&&(13===o.keyCode?eb(e):r.throttle())}),e.on("remove",r.cancel)},eL=(e,t)=>r=>{r.setActive(t.get());let o=e=>r.setActive(e.state);return e.on("VisualChars",o),()=>e.off("VisualChars",o)},eV=(e,t)=>{let r=()=>e.execCommand("mceVisualChars");e.ui.registry.addToggleButton("visualchars",{tooltip:"Show invisible characters",icon:"visualchars",onAction:r,onSetup:eL(e,t)}),e.ui.registry.addToggleMenuItem("visualchars",{text:"Show invisible characters",icon:"visualchars",onAction:r,onSetup:eL(e,t)})};r.add("visualchars",e=>{ek(e);let r=t(eE(e));return eT(e,r),eV(e,r),eO(e,r),eA(e,r),o(r)})}();