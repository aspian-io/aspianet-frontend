!function(){"use strict";let e,t;let r=e=>{let t=e,r=e=>{t=e};return{get:()=>t,set:r}};var n,o=tinymce.util.Tools.resolve("tinymce.PluginManager");let l=e=>({isFullscreen:()=>null!==e.get()}),i=(e,t,r)=>{var n;return!!r(e,t.prototype)||(null===(n=e.constructor)||void 0===n?void 0:n.name)===t.name},s=e=>{let t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&i(e,String,(e,t)=>t.isPrototypeOf(e))?"string":t},a=e=>t=>s(t)===e,u=e=>t=>typeof t===e,d=e=>t=>e===t,m=a("string"),c=a("array"),h=d(null),f=u("boolean"),g=d(void 0),p=e=>null==e,v=e=>!p(e),w=u("function"),b=u("number"),y=()=>{},S=(e,t)=>(...r)=>e(t.apply(null,r)),x=(e,t)=>r=>e(t(r)),E=e=>()=>e,F=E(!1),O=E(!0);class T{constructor(e,t){this.tag=e,this.value=t}static some(e){return new T(!0,e)}static none(){return T.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?T.some(e(this.value)):T.none()}bind(e){return this.tag?e(this.value):T.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:T.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw Error(null!=e?e:"Called getOrDie on None")}static from(e){return v(e)?T.some(e):T.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}T.singletonNone=new T(!1);let k=e=>{let t=r(T.none()),n=()=>t.get().each(e),o=()=>{n(),t.set(T.none())},l=()=>t.get().isSome(),i=()=>t.get(),s=e=>{n(),t.set(T.some(e))};return{clear:o,isSet:l,get:i,set:s}},C=()=>k(e=>e.unbind()),D=()=>{let e=k(y),t=t=>e.get().each(t);return{...e,on:t}},A=(e,t)=>{let r=null,n=()=>{h(r)||(clearTimeout(r),r=null)},o=(...n)=>{h(r)&&(r=setTimeout(()=>{r=null,e.apply(null,n)},t))};return{cancel:n,throttle:o}},R=Array.prototype.push,N=(e,t)=>{let r=e.length,n=Array(r);for(let o=0;o<r;o++){let l=e[o];n[o]=t(l,o)}return n},L=(e,t)=>{for(let r=0,n=e.length;r<n;r++){let o=e[r];t(o,r)}},M=(e,t)=>{let r=[];for(let n=0,o=e.length;n<o;n++){let l=e[n];t(l,n)&&r.push(l)}return r},P=(e,t,r)=>{for(let n=0,o=e.length;n<o;n++){let l=e[n];if(t(l,n))return T.some(l);if(r(l,n))break}return T.none()},H=(e,t)=>P(e,t,F),W=e=>{let t=[];for(let r=0,n=e.length;r<n;++r){if(!c(e[r]))throw Error("Arr.flatten item "+r+" was not an array, input: "+e);R.apply(t,e[r])}return t},q=(e,t)=>W(N(e,t)),I=(e,t)=>t>=0&&t<e.length?T.some(e[t]):T.none(),B=e=>I(e,0),V=(e,t)=>{for(let r=0;r<e.length;r++){let n=t(e[r],r);if(n.isSome())return n}return T.none()},_=Object.keys,j=(e,t)=>{let r=_(e);for(let n=0,o=r.length;n<o;n++){let l=r[n],i=e[l];t(i,l)}},z=(e,t,r=0,n)=>{let o=e.indexOf(t,r);return -1!==o&&(!!g(n)||o+t.length<=n)},$=e=>void 0!==e.style&&w(e.style.getPropertyValue),U=(e,t)=>{let r=t||document,n=r.createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){let o="HTML does not have a single root node";throw console.error(o,e),Error(o)}return Y(n.childNodes[0])},K=(e,t)=>{let r=t||document,n=r.createElement(e);return Y(n)},X=(e,t)=>{let r=t||document,n=r.createTextNode(e);return Y(n)},Y=e=>{if(null==e)throw Error("Node cannot be null or undefined");return{dom:e}},G=(e,t,r)=>T.from(e.dom.elementFromPoint(t,r)).map(Y),J={fromHtml:U,fromTag:K,fromText:X,fromDom:Y,fromPoint:G};"undefined"!=typeof window?window:Function("return this;")();let Q=e=>e.dom.nodeType,Z=e=>t=>Q(t)===e,ee=Z(1),et=Z(3),er=Z(9),en=Z(11),eo=(e,t)=>{let r=e.dom;if(1!==r.nodeType)return!1;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw Error("Browser lacks native selectors")},el=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,ei=(e,t)=>{let r=void 0===t?document:t.dom;return el(r)?[]:N(r.querySelectorAll(e),J.fromDom)},es=(e,t)=>e.dom===t.dom,ea=e=>J.fromDom(e.dom.ownerDocument),eu=e=>er(e)?e:ea(e),ed=e=>T.from(e.dom.parentNode).map(J.fromDom),em=(e,t)=>{let r=w(t)?t:F,n=e.dom,o=[];for(;null!==n.parentNode&&void 0!==n.parentNode;){let l=n.parentNode,i=J.fromDom(l);if(o.push(i),!0===r(i))break;n=l}return o},ec=e=>{let t=t=>M(t,t=>!es(e,t));return ed(e).map(eh).map(t).getOr([])},eh=e=>N(e.dom.childNodes,J.fromDom),ef=e=>en(e)&&v(e.dom.host),eg=w(Element.prototype.attachShadow)&&w(Node.prototype.getRootNode),ep=E(eg),ev=eg?e=>J.fromDom(e.dom.getRootNode()):eu,ew=e=>{let t=ev(e);return ef(t)?T.some(t):T.none()},eb=e=>J.fromDom(e.dom.host),ey=e=>{if(ep()&&v(e.target)){let t=J.fromDom(e.target);if(ee(t)&&eS(t)&&e.composed&&e.composedPath){let r=e.composedPath();if(r)return B(r)}}return T.from(e.target)},eS=e=>v(e.dom.shadowRoot),ex=e=>{let t=et(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;let r=t.ownerDocument;return ew(J.fromDom(t)).fold(()=>r.body.contains(t),x(ex,eb))},eE=e=>{let t=e.dom.body;if(null==t)throw Error("Body is not available yet");return J.fromDom(t)},eF=(e,t,r)=>{if(m(r)||f(r)||b(r))e.setAttribute(t,r+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),Error("Attribute value was not simple")},eO=(e,t,r)=>{eF(e.dom,t,r)},eT=(e,t)=>{let r=e.dom.getAttribute(t);return null===r?void 0:r},ek=(e,t)=>{e.dom.removeAttribute(t)},eC=(e,t,r)=>{if(!m(r))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",r,":: Element ",e),Error("CSS value must be a string: "+r);$(e)&&e.style.setProperty(t,r)},eD=(e,t)=>{let r=e.dom;j(t,(e,t)=>{eC(r,t,e)})},eA=(e,t)=>{let r=e.dom,n=window.getComputedStyle(r),o=n.getPropertyValue(t);return""!==o||ex(e)?o:eR(r,t)},eR=(e,t)=>$(e)?e.style.getPropertyValue(t):"",eN=(e,t,r,n,o,l,i)=>({target:e,x:t,y:r,stop:n,prevent:o,kill:l,raw:i}),eL=e=>{let t=J.fromDom(ey(e).getOr(e.target)),r=()=>e.stopPropagation(),n=()=>e.preventDefault(),o=S(n,r);return eN(t,e.clientX,e.clientY,r,n,o,e)},eM=(e,t)=>r=>{e(r)&&t(eL(r))},eP=(e,t,r,n,o)=>{let l=eM(r,n);return e.dom.addEventListener(t,l,o),{unbind:function(e,...t){return(...r)=>{let n=t.concat(r);return e.apply(null,n)}}(eW,e,t,l,o)}},eH=(e,t,r,n)=>eP(e,t,r,n,!1),eW=(e,t,r,n)=>{e.dom.removeEventListener(t,r,n)},eq=(e,t,r)=>eH(e,t,O,r),eI=(e,t,r,n)=>{let o=e.isiOS()&&!0===/ipad/i.test(r),l=e.isiOS()&&!o,i=e.isiOS()||e.isAndroid(),s=i||n("(pointer:coarse)"),a=o||!l&&i&&n("(min-device-width:768px)"),u=l||i&&!a,d=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(r);return{isiPad:E(o),isiPhone:E(l),isTablet:E(a),isPhone:E(u),isTouch:E(s),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:E(d),isDesktop:E(!u&&!a&&!d)}},eB=(e,t)=>{for(let r=0;r<e.length;r++){let n=e[r];if(n.test(t))return n}},eV=(e,t)=>{let r=eB(e,t);if(!r)return{major:0,minor:0};let n=e=>Number(t.replace(r,"$"+e));return ez(n(1),n(2))},e_=(e,t)=>{let r=String(t).toLowerCase();return 0===e.length?ej():eV(e,r)},ej=()=>ez(0,0),ez=(e,t)=>({major:e,minor:t}),e$={nu:ez,detect:e_,unknown:ej},eU=(e,t)=>V(t.brands,t=>{let r=t.brand.toLowerCase();return H(e,e=>{var t;return r===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())}).map(e=>({current:e.name,version:e$.nu(parseInt(t.version,10),0)}))}),eK=(e,t)=>{let r=String(t).toLowerCase();return H(e,e=>e.search(r))},eX=(e,t)=>eK(e,t).map(e=>{let r=e$.detect(e.versionRegexes,t);return{current:e.name,version:r}}),eY=(e,t)=>eK(e,t).map(e=>{let r=e$.detect(e.versionRegexes,t);return{current:e.name,version:r}}),eG=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,eJ=e=>t=>z(t,e),eQ=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>z(e,"edge/")&&z(e,"chrome")&&z(e,"safari")&&z(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,eG],search:e=>z(e,"chrome")&&!z(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>z(e,"msie")||z(e,"trident")},{name:"Opera",versionRegexes:[eG,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:eJ("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:eJ("firefox")},{name:"Safari",versionRegexes:[eG,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(z(e,"safari")||z(e,"mobile/"))&&z(e,"applewebkit")}],eZ=[{name:"Windows",search:eJ("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>z(e,"iphone")||z(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:eJ("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:eJ("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:eJ("linux"),versionRegexes:[]},{name:"Solaris",search:eJ("sunos"),versionRegexes:[]},{name:"FreeBSD",search:eJ("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:eJ("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],e0={browsers:E(eQ),oses:E(eZ)},e9="Edge",e1="Chromium",e5="Opera",e2="Firefox",e3="Safari",e6=()=>e7({current:void 0,version:e$.unknown()}),e7=e=>{let t=e.current,r=e.version,n=e=>()=>t===e;return{current:t,version:r,isEdge:n(e9),isChromium:n(e1),isIE:n("IE"),isOpera:n(e5),isFirefox:n(e2),isSafari:n(e3)}},e8={unknown:e6,nu:e7,edge:E(e9),chromium:E(e1),ie:E("IE"),opera:E(e5),firefox:E(e2),safari:E(e3)},e4="Windows",te="Android",tt="Linux",tr="macOS",tn="Solaris",to="FreeBSD",tl="ChromeOS",ti=()=>ts({current:void 0,version:e$.unknown()}),ts=e=>{let t=e.current,r=e.version,n=e=>()=>t===e;return{current:t,version:r,isWindows:n(e4),isiOS:n("iOS"),isAndroid:n(te),isMacOS:n(tr),isLinux:n(tt),isSolaris:n(tn),isFreeBSD:n(to),isChromeOS:n(tl)}},ta={unknown:ti,nu:ts,windows:E(e4),ios:E("iOS"),android:E(te),linux:E(tt),macos:E(tr),solaris:E(tn),freebsd:E(to),chromeos:E(tl)},tu=(e,t,r)=>{let n=e0.browsers(),o=e0.oses(),l=t.bind(e=>eU(n,e)).orThunk(()=>eX(n,e)).fold(e8.unknown,e8.nu),i=eY(o,e).fold(ta.unknown,ta.nu),s=eI(i,l,e,r);return{browser:l,os:i,deviceType:s}},td={detect:tu},tm=e=>window.matchMedia(e).matches,tc=(n=()=>td.detect(navigator.userAgent,T.from(navigator.userAgentData),tm),t=!1,(...r)=>(t||(t=!0,e=n.apply(null,r)),e)),th=()=>tc(),tf=(e,t)=>{let r=(r,n)=>tf(e+r,t+n);return{left:e,top:t,translate:r}},tg=e=>{let t=void 0!==e?e.dom:document,r=t.body.scrollLeft||t.documentElement.scrollLeft,n=t.body.scrollTop||t.documentElement.scrollTop;return tf(r,n)},tp=e=>{let t=void 0===e?window:e;return th().browser.isFirefox()?T.none():T.from(t.visualViewport)},tv=(e,t,r,n)=>({x:e,y:t,width:r,height:n,right:e+r,bottom:t+n}),tw=e=>{let t=void 0===e?window:e,r=t.document,n=tg(J.fromDom(r));return tp(t).fold(()=>{let e=t.document.documentElement,r=e.clientWidth,o=e.clientHeight;return tv(n.left,n.top,r,o)},e=>tv(Math.max(e.pageLeft,n.left),Math.max(e.pageTop,n.top),e.width,e.height))},tb=(e,t,r)=>tp(r).map(r=>{let n=e=>t(eL(e));return r.addEventListener(e,n),{unbind:()=>r.removeEventListener(e,n)}}).getOrThunk(()=>({unbind:y}));var ty=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),tS=tinymce.util.Tools.resolve("tinymce.Env");let tx=(e,t)=>{e.dispatch("FullscreenStateChanged",{state:t}),e.dispatch("ResizeEditor")},tE=e=>{let t=e.options.register;t("fullscreen_native",{processor:"boolean",default:!1})},tF=e=>e.options.get("fullscreen_native"),tO=e=>{let t=J.fromDom(e.getElement());return ew(t).map(eb).getOrThunk(()=>eE(ea(t)))},tT=e=>void 0!==e.fullscreenElement?e.fullscreenElement:void 0!==e.msFullscreenElement?e.msFullscreenElement:void 0!==e.webkitFullscreenElement?e.webkitFullscreenElement:null,tk=()=>void 0!==document.fullscreenElement?"fullscreenchange":void 0!==document.msFullscreenElement?"MSFullscreenChange":void 0!==document.webkitFullscreenElement?"webkitfullscreenchange":"fullscreenchange",tC=e=>{let t=e.dom;t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullScreen&&t.webkitRequestFullScreen()},tD=e=>{let t=e.dom;t.exitFullscreen?t.exitFullscreen():t.msExitFullscreen?t.msExitFullscreen():t.webkitCancelFullScreen&&t.webkitCancelFullScreen()},tA=e=>e.dom===tT(ea(e).dom),tR=(e,t,r)=>M(em(e,r),t),tN=(e,t)=>M(ec(e),t),tL=e=>ei(e),tM=(e,t,r)=>tR(e,e=>eo(e,t),r),tP=(e,t)=>tN(e,e=>eo(e,t)),tH="data-ephox-mobile-fullscreen-style",tW="position:absolute!important;",tq="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",tI=tS.os.isAndroid(),tB=e=>{let t=eA(e,"background-color");return void 0!==t&&""!==t?"background-color:"+t+"!important":"background-color:rgb(255,255,255)!important;"},tV=(e,t,r)=>{let n=e=>tP(e,"*:not(.tox-silver-sink)"),o=t=>r=>{let n=eT(r,"style"),o=void 0===n?"no-styles":n.trim();o!==t&&(eO(r,tH,o),eD(r,e.parseStyle(t)))},l=tM(t,"*"),i=q(l,n),s=tB(r);L(i,o("display:none!important;")),L(l,o(tW+tq+s)),o((!0===tI?"":tW)+tq+s)(t)},t_=e=>{let t=tL("["+tH+"]");L(t,t=>{let r=eT(t,tH);r&&"no-styles"!==r?eD(t,e.parseStyle(r)):ek(t,"style"),ek(t,tH)})},tj=ty.DOM,tz=()=>tw(window),t$=e=>window.scrollTo(e.x,e.y),tU=tp().fold(()=>({bind:y,unbind:y}),e=>{let t=D(),r=C(),n=C(),o=()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0},l=()=>{window.requestAnimationFrame(()=>{t.on(t=>eD(t,{top:e.offsetTop+"px",left:e.offsetLeft+"px",height:e.height+"px",width:e.width+"px"}))})},i=A(()=>{o(),l()},50),s=e=>{t.set(e),i.throttle(),r.set(tb("resize",i.throttle)),n.set(tb("scroll",i.throttle))},a=()=>{t.on(()=>{r.clear(),n.clear()}),t.clear()};return{bind:s,unbind:a}}),tK=(e,t)=>{let r=document.body,n=document.documentElement,o=e.getContainer(),l=J.fromDom(o),i=tO(e),s=t.get(),a=J.fromDom(e.getBody()),u=tS.deviceType.isTouch(),d=o.style,m=e.iframeElement,c=null==m?void 0:m.style,h=e=>{e(r,"tox-fullscreen"),e(n,"tox-fullscreen"),e(o,"tox-fullscreen"),ew(l).map(e=>eb(e).dom).each(t=>{e(t,"tox-fullscreen"),e(t,"tox-shadowhost")})},f=()=>{u&&t_(e.dom),h(tj.removeClass),tU.unbind(),T.from(t.get()).each(e=>e.fullscreenChangeHandler.unbind())};if(s)s.fullscreenChangeHandler.unbind(),tF(e)&&tA(i)&&tD(ea(i)),c.width=s.iframeWidth,c.height=s.iframeHeight,d.width=s.containerWidth,d.height=s.containerHeight,d.top=s.containerTop,d.left=s.containerLeft,f(),t$(s.scrollPos),t.set(null),tx(e,!1),e.off("remove",f);else{let g=eq(ea(i),tk(),r=>{tF(e)&&!tA(i)&&null!==t.get()&&tK(e,t)}),p={scrollPos:tz(),containerWidth:d.width,containerHeight:d.height,containerTop:d.top,containerLeft:d.left,iframeWidth:c.width,iframeHeight:c.height,fullscreenChangeHandler:g};u&&tV(e.dom,l,a),c.width=c.height="100%",d.width=d.height="",h(tj.addClass),tU.bind(l),e.on("remove",f),t.set(p),tF(e)&&tC(i),tx(e,!0)}},tX=(e,t)=>{e.addCommand("mceFullScreen",()=>{tK(e,t)})},tY=(e,t)=>r=>{r.setActive(null!==t.get());let n=e=>r.setActive(e.state);return e.on("FullscreenStateChanged",n),()=>e.off("FullscreenStateChanged",n)},tG=(e,t)=>{let r=()=>e.execCommand("mceFullScreen");e.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:r,onSetup:tY(e,t)}),e.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:r,onSetup:tY(e,t)})};o.add("fullscreen",e=>{let t=r(null);return e.inline||(tE(e),tX(e,t),tG(e,t),e.addShortcut("Meta+Shift+F","","mceFullScreen")),l(t)})}();