!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.ModelManager");let t=(e,t,r)=>{var l;return!!r(e,t.prototype)||(null===(l=e.constructor)||void 0===l?void 0:l.name)===t.name},r=e=>{let r=typeof e;return null===e?"null":"object"===r&&Array.isArray(e)?"array":"object"===r&&t(e,String,(e,t)=>t.isPrototypeOf(e))?"string":r},l=e=>t=>r(t)===e,o=e=>t=>typeof t===e,n=e=>t=>e===t,s=l("string"),a=l("object"),i=l("array"),m=n(null),d=o("boolean"),c=n(void 0),u=e=>null==e,f=e=>!u(e),g=o("function"),h=o("number"),p=()=>{},b=(e,t)=>(...r)=>e(t.apply(null,r)),w=(e,t)=>r=>e(t(r)),v=e=>()=>e,y=e=>e,x=(e,t)=>e===t;function C(e,...t){return(...r)=>{let l=t.concat(r);return e.apply(null,l)}}let T=e=>t=>!e(t),S=e=>()=>{throw Error(e)},D=e=>e(),R=v(!1),O=v(!0);class k{constructor(e,t){this.tag=e,this.value=t}static some(e){return new k(!0,e)}static none(){return k.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?k.some(e(this.value)):k.none()}bind(e){return this.tag?e(this.value):k.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:k.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw Error(null!=e?e:"Called getOrDie on None")}static from(e){return f(e)?k.some(e):k.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}k.singletonNone=new k(!1);let E=Array.prototype.slice,A=Array.prototype.indexOf,B=Array.prototype.push,N=(e,t)=>A.call(e,t),z=(e,t)=>N(e,t)>-1,j=(e,t)=>{for(let r=0,l=e.length;r<l;r++){let l=e[r];if(t(l,r))return!0}return!1},_=(e,t)=>{let r=[];for(let l=0;l<e;l++)r.push(t(l));return r},L=(e,t)=>{let r=e.length,l=Array(r);for(let o=0;o<r;o++){let r=e[o];l[o]=t(r,o)}return l},M=(e,t)=>{for(let r=0,l=e.length;r<l;r++){let l=e[r];t(l,r)}},W=(e,t)=>{for(let r=e.length-1;r>=0;r--){let l=e[r];t(l,r)}},I=(e,t)=>{let r=[],l=[];for(let o=0,n=e.length;o<n;o++){let n=e[o],s=t(n,o)?r:l;s.push(n)}return{pass:r,fail:l}},P=(e,t)=>{let r=[];for(let l=0,o=e.length;l<o;l++){let o=e[l];t(o,l)&&r.push(o)}return r},F=(e,t,r)=>(W(e,(e,l)=>{r=t(r,e,l)}),r),H=(e,t,r)=>(M(e,(e,l)=>{r=t(r,e,l)}),r),$=(e,t,r)=>{for(let l=0,o=e.length;l<o;l++){let o=e[l];if(t(o,l))return k.some(o);if(r(o,l))break}return k.none()},V=(e,t)=>$(e,t,R),q=(e,t)=>{for(let r=0,l=e.length;r<l;r++){let l=e[r];if(t(l,r))return k.some(r)}return k.none()},U=e=>{let t=[];for(let r=0,l=e.length;r<l;++r){if(!i(e[r]))throw Error("Arr.flatten item "+r+" was not an array, input: "+e);B.apply(t,e[r])}return t},G=(e,t)=>U(L(e,t)),K=(e,t)=>{for(let r=0,l=e.length;r<l;++r){let l=e[r];if(!0!==t(l,r))return!1}return!0},Y=e=>{let t=E.call(e,0);return t.reverse(),t},J=(e,t)=>{let r={};for(let l=0,o=e.length;l<o;l++){let o=e[l];r[String(o)]=t(o,l)}return r},Q=(e,t)=>{let r=E.call(e,0);return r.sort(t),r},X=(e,t)=>t>=0&&t<e.length?k.some(e[t]):k.none(),Z=e=>X(e,0),ee=e=>X(e,e.length-1),et=(e,t)=>{for(let r=0;r<e.length;r++){let l=t(e[r],r);if(l.isSome())return l}return k.none()},er=Object.keys,el=Object.hasOwnProperty,eo=(e,t)=>{let r=er(e);for(let l=0,o=r.length;l<o;l++){let o=r[l],n=e[o];t(n,o)}},en=(e,t)=>es(e,(e,r)=>({k:r,v:t(e,r)})),es=(e,t)=>{let r={};return eo(e,(e,l)=>{let o=t(e,l);r[o.k]=o.v}),r},ea=e=>(t,r)=>{e[r]=t},ei=(e,t,r,l)=>{eo(e,(e,o)=>{(t(e,o)?r:l)(e,o)})},em=(e,t)=>{let r={};return ei(e,t,ea(r),p),r},ed=(e,t)=>{let r=[];return eo(e,(e,l)=>{r.push(t(e,l))}),r},ec=e=>ed(e,y),eu=(e,t)=>ef(e,t)?k.from(e[t]):k.none(),ef=(e,t)=>el.call(e,t),eg=(e,t)=>ef(e,t)&&void 0!==e[t]&&null!==e[t],eh=e=>{for(let t in e)if(el.call(e,t))return!1;return!0},ep="undefined"!=typeof window?window:Function("return this;")(),eb=(e,t)=>{let r=null!=t?t:ep;for(let t=0;t<e.length&&null!=r;++t)r=r[e[t]];return r},ew=(e,t)=>{let r=e.split(".");return eb(r,t)},ev=(e,t)=>ew(e,t),ey=(e,t)=>{let r=ev(e,t);if(null==r)throw Error(e+" not available on this browser");return r},ex=Object.getPrototypeOf,eC=e=>ey("HTMLElement",e),eT=e=>{let t=ew("ownerDocument.defaultView",e);return a(e)&&(eC(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(ex(e).constructor.name))},eS=e=>{let t=e.dom.nodeName;return t.toLowerCase()},eD=e=>e.dom.nodeType,eR=e=>t=>eD(t)===e,eO=e=>8===eD(e)||"#comment"===eS(e),ek=e=>eE(e)&&eT(e.dom),eE=eR(1),eA=eR(3),eB=eR(9),eN=eR(11),ez=e=>t=>eE(t)&&eS(t)===e,ej=(e,t,r)=>{if(s(r)||d(r)||h(r))e.setAttribute(t,r+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),Error("Attribute value was not simple")},e_=(e,t,r)=>{ej(e.dom,t,r)},eL=(e,t)=>{let r=e.dom;eo(t,(e,t)=>{ej(r,t,e)})},eM=(e,t)=>{eo(t,(t,r)=>{t.fold(()=>{eP(e,r)},t=>{ej(e.dom,r,t)})})},eW=(e,t)=>{let r=e.dom.getAttribute(t);return null===r?void 0:r},eI=(e,t)=>k.from(eW(e,t)),eP=(e,t)=>{e.dom.removeAttribute(t)},eF=e=>H(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}),eH=(e,t)=>{let r=(t||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){let t="HTML does not have a single root node";throw console.error(t,e),Error(t)}return eq(r.childNodes[0])},e$=(e,t)=>{let r=(t||document).createElement(e);return eq(r)},eV=(e,t)=>{let r=(t||document).createTextNode(e);return eq(r)},eq=e=>{if(null==e)throw Error("Node cannot be null or undefined");return{dom:e}},eU=(e,t,r)=>k.from(e.dom.elementFromPoint(t,r)).map(eq),eG={fromHtml:eH,fromTag:e$,fromText:eV,fromDom:eq,fromPoint:eU},eK=(e,t)=>{let r=e.dom;if(1!==r.nodeType)return!1;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw Error("Browser lacks native selectors")},eY=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,eJ=(e,t)=>{let r=void 0===t?document:t.dom;return eY(r)?[]:L(r.querySelectorAll(e),eG.fromDom)},eQ=(e,t)=>{let r=void 0===t?document:t.dom;return eY(r)?k.none():k.from(r.querySelector(e)).map(eG.fromDom)},eX=(e,t)=>e.dom===t.dom,eZ=(e,t)=>{let r=e.dom,l=t.dom;return r!==l&&r.contains(l)},e0=e=>eG.fromDom(e.dom.ownerDocument),e1=e=>eB(e)?e:e0(e),e9=e=>eG.fromDom(e1(e).dom.documentElement),e3=e=>eG.fromDom(e1(e).dom.defaultView),e2=e=>k.from(e.dom.parentNode).map(eG.fromDom),e5=e=>k.from(e.dom.parentElement).map(eG.fromDom),e7=(e,t)=>{let r=g(t)?t:R,l=e.dom,o=[];for(;null!==l.parentNode&&void 0!==l.parentNode;){let e=l.parentNode,t=eG.fromDom(e);if(o.push(t),!0===r(t))break;l=e}return o},e4=e=>k.from(e.dom.previousSibling).map(eG.fromDom),e6=e=>k.from(e.dom.nextSibling).map(eG.fromDom),e8=e=>L(e.dom.childNodes,eG.fromDom),te=(e,t)=>{let r=e.dom.childNodes;return k.from(r[t]).map(eG.fromDom)},tt=e=>te(e,0),tr=(e,t)=>{let r=e2(e);r.each(r=>{r.dom.insertBefore(t.dom,e.dom)})},tl=(e,t)=>{let r=e6(e);r.fold(()=>{let r=e2(e);r.each(e=>{tn(e,t)})},e=>{tr(e,t)})},to=(e,t)=>{let r=tt(e);r.fold(()=>{tn(e,t)},r=>{e.dom.insertBefore(t.dom,r.dom)})},tn=(e,t)=>{e.dom.appendChild(t.dom)},ts=(e,t,r)=>{te(e,r).fold(()=>{tn(e,t)},e=>{tr(e,t)})},ta=(e,t)=>{tr(e,t),tn(t,e)},ti=(e,t)=>{M(t,(r,l)=>{let o=0===l?e:t[l-1];tl(o,r)})},tm=(e,t)=>{M(t,t=>{tn(e,t)})},td=e=>{e.dom.textContent="",M(e8(e),e=>{tc(e)})},tc=e=>{let t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},tu=e=>{let t=e8(e);t.length>0&&ti(e,t),tc(e)},tf=(e,t)=>eG.fromDom(e.dom.cloneNode(t)),tg=e=>tf(e,!1),th=e=>tf(e,!0),tp=(e,t)=>{let r=eG.fromTag(t),l=eF(e);return eL(r,l),r},tb=(e,t)=>{let r=tp(e,t),l=e8(th(e));return tm(r,l),r},tw=(e,t)=>{let r=tp(e,t);tl(e,r);let l=e8(e);return tm(r,l),tc(e),r},tv=["tfoot","thead","tbody","colgroup"],ty=e=>z(tv,e),tx=(e,t)=>({rows:e,columns:t}),tC=(e,t)=>({row:e,column:t}),tT=(e,t,r)=>({element:e,rowspan:t,colspan:r}),tS=(e,t,r,l)=>({element:e,rowspan:t,colspan:r,isNew:l}),tD=(e,t,r,l,o,n)=>({element:e,rowspan:t,colspan:r,row:l,column:o,isLocked:n}),tR=(e,t,r)=>({element:e,cells:t,section:r}),tO=(e,t,r,l)=>({element:e,cells:t,section:r,isNew:l}),tk=(e,t,r)=>({element:e,isNew:t,isLocked:r}),tE=(e,t,r,l)=>({element:e,cells:t,section:r,isNew:l}),tA=(e,t,r,l)=>({startRow:e,startCol:t,finishRow:r,finishCol:l}),tB=(e,t,r)=>({element:e,colspan:t,column:r}),tN=(e,t)=>({element:e,columns:t}),tz=e=>eN(e)&&f(e.dom.host),tj=g(Element.prototype.attachShadow)&&g(Node.prototype.getRootNode),t_=v(tj),tL=tj?e=>eG.fromDom(e.dom.getRootNode()):e1,tM=e=>{let t=tL(e);return tz(t)?k.some(t):k.none()},tW=e=>eG.fromDom(e.dom.host),tI=e=>{if(t_()&&f(e.target)){let t=eG.fromDom(e.target);if(eE(t)&&tP(t)&&e.composed&&e.composedPath){let t=e.composedPath();if(t)return Z(t)}}return k.from(e.target)},tP=e=>f(e.dom.shadowRoot),tF=e=>{let t=eA(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;let r=t.ownerDocument;return tM(eG.fromDom(t)).fold(()=>r.body.contains(t),w(tF,tW))},tH=()=>t$(eG.fromDom(document)),t$=e=>{let t=e.dom.body;if(null==t)throw Error("Body is not available yet");return eG.fromDom(t)},tV=(e,t,r)=>P(e7(e,r),t),tq=(e,t)=>P(e8(e),t),tU=(e,t)=>{let r=[];return M(e8(e),e=>{t(e)&&(r=r.concat([e])),r=r.concat(tU(e,t))}),r},tG=(e,t,r)=>tV(e,e=>eK(e,t),r),tK=(e,t)=>tq(e,e=>eK(e,t)),tY=(e,t)=>eJ(t,e);var tJ=(e,t,r,l,o)=>e(r,l)?k.some(r):g(o)&&o(r)?k.none():t(r,l,o);let tQ=(e,t,r)=>{let l=e.dom,o=g(r)?r:R;for(;l.parentNode;){l=l.parentNode;let e=eG.fromDom(l);if(t(e))return k.some(e);if(o(e))break}return k.none()},tX=(e,t,r)=>{let l=(e,t)=>t(e);return tJ(l,tQ,e,t,r)},tZ=(e,t)=>{let r=e=>t(eG.fromDom(e)),l=V(e.dom.childNodes,r);return l.map(eG.fromDom)},t0=(e,t)=>{let r=e=>{for(let l=0;l<e.childNodes.length;l++){let o=eG.fromDom(e.childNodes[l]);if(t(o))return k.some(o);let n=r(e.childNodes[l]);if(n.isSome())return n}return k.none()};return r(e.dom)},t1=(e,t,r)=>tQ(e,e=>eK(e,t),r),t9=(e,t)=>tZ(e,e=>eK(e,t)),t3=(e,t)=>eQ(t,e),t2=(e,t,r)=>{let l=(e,t)=>eK(e,t);return tJ(l,t1,e,t,r)},t5=(e,t,r=x)=>e.exists(e=>r(e,t)),t7=e=>{let t=[],r=e=>{t.push(e)};for(let t=0;t<e.length;t++)e[t].each(r);return t},t4=(e,t)=>null!=e?t(e):k.none(),t6=(e,t)=>e?k.some(t):k.none(),t8=(e,t,r)=>""===t||e.length>=t.length&&e.substr(r,r+t.length)===t,re=(e,t,r=0,l)=>{let o=e.indexOf(t,r);return -1!==o&&(!!c(l)||o+t.length<=l)},rt=(e,t)=>t8(e,t,0),rr=(e,t)=>t8(e,t,e.length-t.length),rl=e=>e.replace(/^\s+|\s+$/g,""),ro=e=>e.length>0,rn=e=>{let t=parseFloat(e);return isNaN(t)?k.none():k.some(t)},rs=e=>void 0!==e.style&&g(e.style.getPropertyValue),ra=(e,t,r)=>{if(!s(r))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",r,":: Element ",e),Error("CSS value must be a string: "+r);rs(e)&&e.style.setProperty(t,r)},ri=(e,t)=>{rs(e)&&e.style.removeProperty(t)},rm=(e,t,r)=>{let l=e.dom;ra(l,t,r)},rd=(e,t)=>{let r=e.dom;eo(t,(e,t)=>{ra(r,t,e)})},rc=(e,t)=>{let r=e.dom,l=window.getComputedStyle(r),o=l.getPropertyValue(t);return""!==o||tF(e)?o:ru(r,t)},ru=(e,t)=>rs(e)?e.style.getPropertyValue(t):"",rf=(e,t)=>{let r=e.dom,l=ru(r,t);return k.from(l).filter(e=>e.length>0)},rg=(e,t)=>{let r=e.dom;ri(r,t),t5(eI(e,"style").map(rl),"")&&eP(e,"style")},rh=(e,t)=>{let r=e.dom,l=t.dom;rs(r)&&rs(l)&&(l.style.cssText=r.style.cssText)},rp=(e,t,r=0)=>eI(e,t).map(e=>parseInt(e,10)).getOr(r),rb=(e,t)=>rp(e,t,1),rw=e=>ez("col")(e)?rp(e,"span",1)>1:rb(e,"colspan")>1,rv=e=>rb(e,"rowspan")>1,ry=(e,t)=>parseInt(rc(e,t),10),rx=v(10),rC=v(10),rT=(e,t)=>rS(e,t,O),rS=(e,t,r)=>G(e8(e),e=>eK(e,t)?r(e)?[e]:[]:rS(e,t,r)),rD=(e,t,r=R)=>{if(r(t))return k.none();if(z(e,eS(t)))return k.some(t);let l=e=>eK(e,"table")||r(e);return t1(t,e.join(","),l)},rR=(e,t)=>rD(["td","th"],e,t),rO=e=>rT(e,"th,td"),rk=e=>eK(e,"colgroup")?tK(e,"col"):G(rB(e),e=>tK(e,"col")),rE=(e,t)=>t2(e,"table",t),rA=e=>rT(e,"tr"),rB=e=>rE(e).fold(v([]),e=>tK(e,"colgroup")),rN=(e,t)=>L(e,e=>{if("colgroup"===eS(e)){let t=L(rk(e),e=>{let t=rp(e,"span",1);return tT(e,1,t)});return tR(e,t,"colgroup")}{let r=L(rO(e),e=>{let t=rp(e,"rowspan",1),r=rp(e,"colspan",1);return tT(e,t,r)});return tR(e,r,t(e))}}),rz=e=>e2(e).map(e=>{let t=eS(e);return ty(t)?t:"tbody"}).getOr("tbody"),rj=e=>{let t=rA(e),r=rB(e),l=[...r,...t];return rN(l,rz)},r_=(e,t)=>rN(e,()=>t),rL=e=>{let t,r=!1;return(...l)=>(r||(r=!0,t=e.apply(null,l)),t)},rM=(e,t,r,l)=>{let o=e.isiOS()&&!0===/ipad/i.test(r),n=e.isiOS()&&!o,s=e.isiOS()||e.isAndroid(),a=s||l("(pointer:coarse)"),i=o||!n&&s&&l("(min-device-width:768px)"),m=n||s&&!i,d=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(r);return{isiPad:v(o),isiPhone:v(n),isTablet:v(i),isPhone:v(m),isTouch:v(a),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:v(d),isDesktop:v(!m&&!i&&!d)}},rW=(e,t)=>{for(let r=0;r<e.length;r++){let l=e[r];if(l.test(t))return l}},rI=(e,t)=>{let r=rW(e,t);if(!r)return{major:0,minor:0};let l=e=>Number(t.replace(r,"$"+e));return rH(l(1),l(2))},rP=(e,t)=>{let r=String(t).toLowerCase();return 0===e.length?rF():rI(e,r)},rF=()=>rH(0,0),rH=(e,t)=>({major:e,minor:t}),r$={nu:rH,detect:rP,unknown:rF},rV=(e,t)=>et(t.brands,t=>{let r=t.brand.toLowerCase();return V(e,e=>{var t;return r===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())}).map(e=>({current:e.name,version:r$.nu(parseInt(t.version,10),0)}))}),rq=(e,t)=>{let r=String(t).toLowerCase();return V(e,e=>e.search(r))},rU=(e,t)=>rq(e,t).map(e=>{let r=r$.detect(e.versionRegexes,t);return{current:e.name,version:r}}),rG=(e,t)=>rq(e,t).map(e=>{let r=r$.detect(e.versionRegexes,t);return{current:e.name,version:r}}),rK=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,rY=e=>t=>re(t,e),rJ=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>re(e,"edge/")&&re(e,"chrome")&&re(e,"safari")&&re(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,rK],search:e=>re(e,"chrome")&&!re(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>re(e,"msie")||re(e,"trident")},{name:"Opera",versionRegexes:[rK,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:rY("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:rY("firefox")},{name:"Safari",versionRegexes:[rK,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(re(e,"safari")||re(e,"mobile/"))&&re(e,"applewebkit")}],rQ=[{name:"Windows",search:rY("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>re(e,"iphone")||re(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:rY("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:rY("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:rY("linux"),versionRegexes:[]},{name:"Solaris",search:rY("sunos"),versionRegexes:[]},{name:"FreeBSD",search:rY("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:rY("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],rX={browsers:v(rJ),oses:v(rQ)},rZ="Edge",r0="Chromium",r1="Opera",r9="Firefox",r3="Safari",r2=()=>r5({current:void 0,version:r$.unknown()}),r5=e=>{let t=e.current,r=e.version,l=e=>()=>t===e;return{current:t,version:r,isEdge:l(rZ),isChromium:l(r0),isIE:l("IE"),isOpera:l(r1),isFirefox:l(r9),isSafari:l(r3)}},r7={unknown:r2,nu:r5,edge:v(rZ),chromium:v(r0),ie:v("IE"),opera:v(r1),firefox:v(r9),safari:v(r3)},r4="Windows",r6="Android",r8="Linux",le="macOS",lt="Solaris",lr="FreeBSD",ll="ChromeOS",lo=()=>ln({current:void 0,version:r$.unknown()}),ln=e=>{let t=e.current,r=e.version,l=e=>()=>t===e;return{current:t,version:r,isWindows:l(r4),isiOS:l("iOS"),isAndroid:l(r6),isMacOS:l(le),isLinux:l(r8),isSolaris:l(lt),isFreeBSD:l(lr),isChromeOS:l(ll)}},ls={unknown:lo,nu:ln,windows:v(r4),ios:v("iOS"),android:v(r6),linux:v(r8),macos:v(le),solaris:v(lt),freebsd:v(lr),chromeos:v(ll)},la=(e,t,r)=>{let l=rX.browsers(),o=rX.oses(),n=t.bind(e=>rV(l,e)).orThunk(()=>rU(l,e)).fold(r7.unknown,r7.nu),s=rG(o,e).fold(ls.unknown,ls.nu),a=rM(s,n,e,r);return{browser:n,os:s,deviceType:a}},li={detect:la},lm=e=>window.matchMedia(e).matches,ld=rL(()=>li.detect(navigator.userAgent,k.from(navigator.userAgentData),lm)),lc=()=>ld(),lu=(e,t)=>{let r=(t,r)=>{if(!h(r)&&!r.match(/^[0-9]+$/))throw Error(e+".set accepts only positive integer values. Value was "+r);let l=t.dom;rs(l)&&(l.style[e]=r+"px")},l=r=>{let l=t(r);if(l<=0||null===l){let t=rc(r,e);return parseFloat(t)||0}return l},o=(e,t)=>H(t,(t,r)=>{let l=rc(e,r),o=void 0===l?0:parseInt(l,10);return isNaN(o)?t:t+o},0),n=(e,t,r)=>{let l=o(e,r);return t>l?t-l:0};return{set:r,get:l,getOuter:l,aggregate:o,max:n}},lf=(e,t)=>rn(e).getOr(t),lg=(e,t,r)=>lf(rc(e,t),r),lh=(e,t,r,l)=>{let o=lg(e,`padding-${r}`,0),n=lg(e,`padding-${l}`,0),s=lg(e,`border-${r}-width`,0),a=lg(e,`border-${l}-width`,0);return t-o-n-s-a},lp=(e,t)=>{let r=e.dom,l=r.getBoundingClientRect().width||r.offsetWidth;return"border-box"===t?l:lh(e,l,"left","right")},lb=e=>lg(e,"height",e.dom.offsetHeight),lw=e=>lg(e,"width",e.dom.offsetWidth),lv=e=>lp(e,"content-box"),ly=lu("width",e=>e.dom.offsetWidth),lx=e=>ly.get(e),lC=e=>ly.getOuter(e),lT=(e,t,r)=>{let l=e.cells,o=l.slice(0,t),n=l.slice(t),s=o.concat(r).concat(n);return lR(e,s)},lS=(e,t,r)=>lT(e,t,[r]),lD=(e,t,r)=>{let l=e.cells;l[t]=r},lR=(e,t)=>tE(e.element,t,e.section,e.isNew),lO=(e,t)=>{let r=e.cells,l=L(r,t);return tE(e.element,l,e.section,e.isNew)},lk=(e,t)=>e.cells[t],lE=(e,t)=>lk(e,t).element,lA=e=>e.cells.length,lB=e=>{let t=I(e,e=>"colgroup"===e.section);return{rows:t.fail,cols:t.pass}},lN=(e,t,r)=>{let l=L(e.cells,r);return tE(t(e.element),l,e.section,!0)},lz="data-snooker-locked-cols",lj=e=>eI(e,lz).bind(e=>k.from(e.match(/\d+/g))).map(e=>J(e,O)),l_=e=>{let t=H(lB(e).rows,(e,t)=>(M(t.cells,(t,r)=>{t.isLocked&&(e[r]=!0)}),e),{}),r=ed(t,(e,t)=>parseInt(t,10));return Q(r)},lL=(e,t)=>e+","+t,lM=(e,t,r)=>k.from(e.access[lL(t,r)]),lW=(e,t,r)=>{let l=lI(e,e=>r(t,e.element));return l.length>0?k.some(l[0]):k.none()},lI=(e,t)=>{let r=G(e.all,e=>e.cells);return P(r,t)},lP=e=>{let t={},r=0;return M(e.cells,e=>{let l=e.colspan;_(l,o=>{let n=r+o;t[n]=tB(e.element,l,n)}),r+=l}),t},lF=e=>{let t={},r=[],l=Z(e).map(e=>e.element).bind(rE),o=l.bind(lj).getOr({}),n=0,s=0,a=0,{pass:i,fail:m}=I(e,e=>"colgroup"===e.section);M(m,e=>{let l=[];M(e.cells,e=>{let r=0;for(;void 0!==t[lL(a,r)];)r++;let n=eg(o,r.toString()),i=tD(e.element,e.rowspan,e.colspan,a,r,n);for(let l=0;l<e.colspan;l++)for(let o=0;o<e.rowspan;o++){let e=a+o,n=r+l,m=lL(e,n);t[m]=i,s=Math.max(s,n+1)}l.push(i)}),n++,r.push(tR(e.element,l,e.section)),a++});let{columns:d,colgroups:c}=ee(i).map(e=>{let t=lP(e),r=tN(e.element,ec(t));return{colgroups:[r],columns:t}}).getOrThunk(()=>({colgroups:[],columns:{}})),u=tx(n,s);return{grid:u,access:t,all:r,columns:d,colgroups:c}},lH=e=>{let t=rj(e);return lF(t)},l$=e=>G(e.all,e=>e.cells),lV=e=>ec(e.columns),lq=(e,t)=>k.from(e.columns[t]),lU={fromTable:lH,generate:lF,getAt:lM,findItem:lW,filterItems:lI,justCells:l$,justColumns:lV,hasColumns:e=>er(e.columns).length>0,getColumnAt:lq},lG=(e,t=O)=>{let r=e.grid,l=_(r.columns,y),o=_(r.rows,y);return L(l,r=>{let l=()=>G(o,t=>lU.getAt(e,t,r).filter(e=>e.column===r).toArray()),n=e=>1===e.colspan&&t(e.element),s=()=>lU.getAt(e,0,r);return lK(l,n,s)})},lK=(e,t,r)=>{let l=e(),o=V(l,t),n=o.orThunk(()=>k.from(l[0]).orThunk(r));return n.map(e=>e.element)},lY=e=>{let t=e.grid,r=_(t.rows,y),l=_(t.columns,y);return L(r,t=>{let r=()=>G(l,r=>lU.getAt(e,t,r).filter(e=>e.row===t).fold(v([]),e=>[e])),o=()=>lU.getAt(e,t,0);return lK(r,e=>1===e.rowspan,o)})},lJ=(e,t)=>{if(t<0||t>=e.length-1)return k.none();let r=e[t].fold(()=>{let r=Y(e.slice(0,t));return et(r,(e,t)=>e.map(e=>({value:e,delta:t+1})))},e=>k.some({value:e,delta:0})),l=e[t+1].fold(()=>{let r=e.slice(t+1);return et(r,(e,t)=>e.map(e=>({value:e,delta:t+1})))},e=>k.some({value:e,delta:1}));return r.bind(e=>l.map(t=>{let r=t.delta+e.delta;return Math.abs(t.value-e.value)/r}))},lQ=(e,t)=>r=>"rtl"===lX(r)?t:e,lX=e=>"rtl"===rc(e,"direction")?"rtl":"ltr",lZ=lu("height",e=>{let t=e.dom;return tF(e)?t.getBoundingClientRect().height:t.offsetHeight}),l0=e=>lZ.get(e),l1=e=>lZ.getOuter(e),l9=(e,t)=>{let r=(r,l)=>l9(e+r,t+l);return{left:e,top:t,translate:r}},l3=e=>{let t=e.getBoundingClientRect();return l9(t.left,t.top)},l2=(e,t)=>void 0!==e?e:void 0!==t?t:0,l5=e=>{let t=e.dom.ownerDocument,r=t.body,l=t.defaultView,o=t.documentElement;if(r===e.dom)return l9(r.offsetLeft,r.offsetTop);let n=l2(null==l?void 0:l.pageYOffset,o.scrollTop),s=l2(null==l?void 0:l.pageXOffset,o.scrollLeft),a=l2(o.clientTop,r.clientTop),i=l2(o.clientLeft,r.clientLeft);return l7(e).translate(s-i,n-a)},l7=e=>{let t=e.dom,r=t.ownerDocument,l=r.body;return l===t?l9(l.offsetLeft,l.offsetTop):tF(e)?l3(t):l9(0,0)},l4=(e,t)=>({row:e,y:t}),l6=(e,t)=>({col:e,x:t}),l8=e=>{let t=l5(e);return t.left+lC(e)},oe=e=>l5(e).left,ot=(e,t)=>l6(e,oe(t)),or=(e,t)=>l6(e,l8(t)),ol=e=>l5(e).top,oo=(e,t)=>l4(e,ol(t)),on=(e,t)=>l4(e,ol(t)+l1(t)),os=(e,t,r)=>{if(0===r.length)return[];let l=L(r.slice(1),(t,r)=>t.map(t=>e(r,t))),o=r[r.length-1].map(e=>t(r.length-1,e));return l.concat([o])},oa={delta:y,positions:e=>os(oo,on,e),edge:ol},oi=lQ({delta:y,edge:oe,positions:e=>os(ot,or,e)},{delta:e=>-e,edge:l8,positions:e=>os(or,ot,e)}),om={delta:(e,t)=>oi(t).delta(e,t),positions:(e,t)=>oi(t).positions(e,t),edge:e=>oi(e).edge(e)},od={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},oc=(()=>{let e="[0-9]+",t="[eE][+-]?"+e,r=e=>`(?:${e})?`,l=["Infinity",e+"\\."+r(e)+r(t),"\\."+e+r(t),e+r(t)].join("|"),o=`[+-]?(?:${l})`;return RegExp(`^(${o})(.*)$`)})(),ou=(e,t)=>j(t,t=>j(od[t],t=>e===t)),of=(e,t)=>{let r=k.from(oc.exec(e));return r.bind(e=>{let r=Number(e[1]),l=e[2];return ou(l,t)?k.some({value:r,unit:l}):k.none()})},og=/(\d+(\.\d+)?)%/,oh=/(\d+(\.\d+)?)px|em/,op=ez("col"),ob=(e,t,r)=>{let l=e5(e).getOrThunk(()=>t$(e0(e)));return t(e)/r(l)*100},ow=(e,t)=>{rm(e,"width",t+"px")},ov=(e,t)=>{rm(e,"width",t+"%")},oy=(e,t)=>{rm(e,"height",t+"px")},ox=e=>lb(e)+"px",oC=(e,t,r,l)=>{let o=rE(e).map(e=>{let l=r(e);return Math.floor(t/100*l)}).getOr(t);return l(e,o),o},oT=(e,t,r,l)=>{let o=parseFloat(e);return rr(e,"%")&&"table"!==eS(t)?oC(t,o,r,l):o},oS=e=>{let t=ox(e);return t?oT(t,e,l0,oy):l0(e)},oD=(e,t,r)=>{let l=r(e),o=rb(e,t);return l/o},oR=(e,t)=>rf(e,t).orThunk(()=>eI(e,t).map(e=>e+"px")),oO=e=>oR(e,"width"),ok=e=>oR(e,"height"),oE=e=>ob(e,lx,lv),oA=e=>op(e)?lx(e):lw(e),oB=e=>oD(e,"rowspan",oS),oN=e=>{let t=oO(e);return t.bind(e=>of(e,["fixed","relative","empty"]))},oz=(e,t,r)=>{rm(e,"width",t+r)},oj=e=>lx(e)+"px",o_=e=>ob(e,lx,lv)+"%",oL=e=>oO(e).exists(e=>og.test(e)),oM=e=>oO(e).exists(e=>oh.test(e)),oW=e=>oO(e).isNone(),oI=v(og),oP=ez("col"),oF=e=>oO(e).getOrThunk(()=>oA(e)+"px"),oH=e=>ok(e).getOrThunk(()=>oB(e)+"px"),o$=e=>L(lU.justColumns(e),e=>k.from(e.element)),oV=e=>{let t=lc().browser,r=t.isChromium()||t.isFirefox();return!oP(e)||r},oq=(e,t,r,l,o,n)=>e.filter(l).fold(()=>n(lJ(r,t)),e=>o(e)),oU=(e,t,r,l)=>{let o=lG(e),n=lU.hasColumns(e)?o$(e):o,s=[k.some(om.edge(t))].concat(L(om.positions(o,t),e=>e.map(e=>e.x))),a=T(rw);return L(n,(e,t)=>oq(e,t,s,a,e=>{if(oV(e))return r(e);{let e=t4(o[t],y);return oq(e,t,s,a,e=>l(k.some(lx(e))),l)}},l))},oG=e=>e.map(e=>e+"px").getOr(""),oK=(e,t)=>oU(e,t,oF,oG),oY=(e,t,r)=>oU(e,t,oE,e=>e.fold(()=>r.minCellWidth(),e=>e/r.pixelWidth()*100)),oJ=(e,t,r)=>oU(e,t,oA,e=>e.getOrThunk(r.minCellWidth)),oQ=(e,t,r,l,o)=>{let n=lY(e),s=[k.some(r.edge(t))].concat(L(r.positions(n,t),e=>e.map(e=>e.y)));return L(n,(e,t)=>oq(e,t,s,T(rv),l,o))},oX=(e,t,r)=>oQ(e,t,r,oB,e=>e.getOrThunk(rC)),oZ=(e,t,r)=>oQ(e,t,r,oH,oG),o0=(e,t)=>()=>tF(e)?t(e):parseFloat(rf(e,"width").getOr("0")),o1=e=>{let t=o0(e,lx),r=v(0),l=(t,r)=>oJ(t,e,r);return{width:t,pixelWidth:t,getWidths:l,getCellDelta:r,singleColumnWidth:v([0]),minCellWidth:r,setElementWidth:p,adjustTableWidth:p,isRelative:!0,label:"none"}},o9=e=>{let t=o0(e,e=>parseFloat(o_(e))),r=o0(e,lx),l=e=>e/r()*100,o=(e,t)=>[100-e],n=()=>rx()/r()*100,s=r=>{let l=t();ov(e,l+r/100*l)},a=(t,r)=>oY(t,e,r);return{width:t,pixelWidth:r,getWidths:a,getCellDelta:l,singleColumnWidth:o,minCellWidth:n,setElementWidth:ov,adjustTableWidth:s,isRelative:!0,label:"percent"}},o3=e=>{let t=o0(e,lx),r=(e,t)=>{let r=Math.max(rx(),e+t);return[r-e]},l=r=>{let l=t()+r;ow(e,l)},o=(t,r)=>oJ(t,e,r);return{width:t,pixelWidth:t,getWidths:o,getCellDelta:y,singleColumnWidth:r,minCellWidth:rx,setElementWidth:ow,adjustTableWidth:l,isRelative:!1,label:"pixel"}},o2=(e,t)=>{let r=oI().exec(t);return null!==r?o9(e):o3(e)},o5=e=>{let t=oO(e);return t.fold(()=>o1(e),t=>o2(e,t))},o7={getTableSize:o5,pixelSize:o3,percentageSize:o9,noneSize:o1},o4=(e,t,r,l,o,n)=>({minRow:e,minCol:t,maxRow:r,maxCol:l,allCells:o,selectedCells:n}),o6=(e,t)=>{let r=e.grid.columns,l=e.grid.rows,o=l,n=r,s=0,a=0,i=[],m=[];return eo(e.access,e=>{if(i.push(e),t(e)){m.push(e);let t=e.row,r=t+e.rowspan-1,l=e.column,i=l+e.colspan-1;t<o?o=t:r>s&&(s=r),l<n?n=l:i>a&&(a=i)}}),o4(o,n,s,a,i,m)},o8=(e,t,r)=>{let l=e[r].element,o=eG.fromTag("td");tn(o,eG.fromTag("br")),(t?tn:to)(l,o)},ne=(e,t,r,l)=>{let o=P(e,e=>"colgroup"!==e.section),n=t.grid.columns,s=t.grid.rows;for(let e=0;e<s;e++){let s=!1;for(let a=0;a<n;a++)if(!(e<r.minRow||e>r.maxRow||a<r.minCol||a>r.maxCol)){let r=lU.getAt(t,e,a).filter(l).isNone();r?o8(o,s,e):s=!0}}},nt=(e,t,r,l)=>{eo(r.columns,e=>{(e.column<t.minCol||e.column>t.maxCol)&&tc(e.element)});let o=P(rT(e,"tr"),e=>0===e.dom.childElementCount);M(o,tc),(t.minCol===t.maxCol||t.minRow===t.maxRow)&&M(rT(e,"th,td"),e=>{eP(e,"rowspan"),eP(e,"colspan")}),eP(e,lz),eP(e,"data-snooker-col-series");let n=o7.getTableSize(e);n.adjustTableWidth(l)},nr=(e,t,r,l)=>{if(0===l.minCol&&t.grid.columns===l.maxCol+1)return 0;let o=oJ(t,e,r),n=H(o,(e,t)=>e+t,0),s=H(o.slice(l.minCol,l.maxCol+1),(e,t)=>e+t,0),a=s/n*r.pixelWidth(),i=a-r.pixelWidth();return r.getCellDelta(i)},nl=(e,t)=>{let r=e=>eK(e.element,t),l=th(e),o=rj(l),n=o7.getTableSize(e),s=lU.generate(o),a=o6(s,r),i="th:not("+t+"),td:not("+t+")",m=rS(l,"th,td",e=>eK(e,i));M(m,tc),ne(o,s,a,r);let d=lU.fromTable(e),c=nr(e,d,n,a);return nt(l,a,s,c),l},no=((e,t)=>{let r=r=>{if(!e(r))throw Error("Can only get "+t+" value of a "+t+" node");return l(r).getOr("")},l=t=>e(t)?k.from(t.dom.nodeValue):k.none(),o=(r,l)=>{if(!e(r))throw Error("Can only set raw "+t+" value of a "+t+" node");r.dom.nodeValue=l};return{get:r,getOption:l,set:o}})(eA,"text"),nn=e=>no.get(e),ns=e=>no.getOption(e),na=(e,t)=>no.set(e,t),ni=e=>"img"===eS(e)?1:ns(e).fold(()=>e8(e).length,e=>e.length),nm=e=>ns(e).filter(e=>0!==e.trim().length||e.indexOf("\xa0")>-1).isSome(),nd=e=>ek(e)&&"false"===eW(e,"contenteditable"),nc=["img","br"],nu=e=>{let t=nm(e);return t||z(nc,eS(e))||nd(e)},nf=e=>t0(e,nu),ng=e=>nh(e,nu),nh=(e,t)=>{let r=e=>{let l=e8(e);for(let e=l.length-1;e>=0;e--){let o=l[e];if(t(o))return k.some(o);let n=r(o);if(n.isSome())return n}return k.none()};return r(e)},np={scope:["row","col"]},nb=e=>()=>{let t=eG.fromTag("td",e.dom);return tn(t,eG.fromTag("br",e.dom)),t},nw=e=>()=>eG.fromTag("col",e.dom),nv=e=>()=>eG.fromTag("colgroup",e.dom),ny=e=>()=>eG.fromTag("tr",e.dom),nx=(e,t,r)=>{let l=tb(e,t);return eo(r,(e,t)=>{null===e?eP(l,t):e_(l,t,e)}),l},nC=e=>e,nT=(e,t,r)=>{let l=nf(e);return l.map(l=>{let o=r.join(","),n=tG(l,o,t=>eX(t,e));return F(n,(e,t)=>{let r=tg(t);return tn(e,r),r},t)}).getOr(t)},nS=(e,t)=>{eo(np,(r,l)=>eI(e,l).filter(e=>z(r,e)).each(e=>e_(t,l,e)))},nD=(e,t,r)=>{let l=(e,t)=>{rh(e.element,t),rg(t,"height"),1!==e.colspan&&rg(t,"width")},o=o=>{let n=eG.fromTag(eS(o.element),t.dom),s=r.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),a=s.length>0?nT(o.element,n,s):n;return tn(a,eG.fromTag("br")),l(o,n),nS(o.element,n),e(o.element,n),n},n=r=>{let o=eG.fromTag(eS(r.element),t.dom);return l(r,o),e(r.element,o),o};return{col:n,colgroup:nv(t),row:ny(t),cell:o,replace:nx,colGap:nw(t),gap:nb(t)}},nR=e=>({col:nw(e),colgroup:nv(e),row:ny(e),cell:nb(e),replace:nC,colGap:nw(e),gap:nb(e)}),nO=(e,t)=>{let r=(t||document).createElement("div");return r.innerHTML=e,e8(eG.fromDom(r))},nk=e=>L(e,eG.fromDom),nE=e=>t2(e,"[contenteditable]"),nA=(e,t=!1)=>tF(e)?e.dom.isContentEditable:nE(e).fold(v(t),e=>"true"===nB(e)),nB=e=>e.dom.contentEditable,nN=e=>eG.fromDom(e.getBody()),nz=e=>t=>eX(t,nN(e)),nj=e=>{eP(e,"data-mce-style");let t=e=>eP(e,"data-mce-style");M(rO(e),t),M(rk(e),t),M(rA(e),t)},n_=e=>eG.fromDom(e.selection.getStart()),nL=e=>e.getBoundingClientRect().width,nM=e=>e.getBoundingClientRect().height,nW=(e,t)=>{let r=e.dom.getStyle(t,"width")||e.dom.getAttrib(t,"width");return k.from(r).filter(ro)},nI=e=>/^(\d+(\.\d+)?)%$/.test(e),nP=e=>/^(\d+(\.\d+)?)px$/.test(e),nF=e=>tX(e,ez("table")).exists(nA),nH=(e,t)=>{let r=t.column,l=t.column+t.colspan-1,o=t.row,n=t.row+t.rowspan-1;return r<=e.finishCol&&l>=e.startCol&&o<=e.finishRow&&n>=e.startRow},n$=(e,t)=>t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow,nV=(e,t)=>{let r=!0,l=C(n$,t);for(let o=t.startRow;o<=t.finishRow;o++)for(let n=t.startCol;n<=t.finishCol;n++)r=r&&lU.getAt(e,o,n).exists(l);return r?k.some(t):k.none()},nq=(e,t)=>tA(Math.min(e.row,t.row),Math.min(e.column,t.column),Math.max(e.row+e.rowspan-1,t.row+t.rowspan-1),Math.max(e.column+e.colspan-1,t.column+t.colspan-1)),nU=(e,t,r)=>{let l=lU.findItem(e,t,eX),o=lU.findItem(e,r,eX);return l.bind(e=>o.map(t=>nq(e,t)))},nG=(e,t,r)=>nU(e,t,r).bind(t=>nV(e,t)),nK=(e,t,r,l)=>lU.findItem(e,t,eX).bind(t=>{let o=r>0?t.row+t.rowspan-1:t.row,n=l>0?t.column+t.colspan-1:t.column,s=lU.getAt(e,o+r,n+l);return s.map(e=>e.element)}),nY=(e,t,r)=>nU(e,t,r).map(t=>{let r=lU.filterItems(e,C(nH,t));return L(r,e=>e.element)}),nJ=(e,t)=>{let r=(e,t)=>eZ(t,e);return lU.findItem(e,t,r).map(e=>e.element)},nQ=(e,t,r)=>rE(e).bind(l=>{let o=n1(l);return nK(o,e,t,r)}),nX=(e,t,r)=>{let l=n1(e);return nY(l,t,r)},nZ=(e,t,r,l,o)=>{let n=n1(e),s=eX(e,r)?k.some(t):nJ(n,t),a=eX(e,o)?k.some(l):nJ(n,l);return s.bind(e=>a.bind(t=>nY(n,e,t)))},n0=(e,t,r)=>{let l=n1(e);return nG(l,t,r)},n1=lU.fromTable;var n9=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],n3=()=>{let e=e=>eG.fromDom(e.dom.cloneNode(!1)),t=e=>!!eE(e)&&("body"===eS(e)||z(n9,eS(e))),r=e=>!!eE(e)&&z(["br","img","hr","input"],eS(e)),l=e=>eE(e)&&"false"===eW(e,"contenteditable"),o=(e,t)=>e.dom.compareDocumentPosition(t.dom),n=(e,t)=>{let r=eF(e);eL(t,r)},s=e=>{let t=eS(e);return z(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],t)},a=e=>eE(e)?eI(e,"lang"):k.none();return{up:v({selector:t1,closest:t2,predicate:tQ,all:e7}),down:v({selector:tY,predicate:tU}),styles:v({get:rc,getRaw:rf,set:rm,remove:rg}),attrs:v({get:eW,set:e_,remove:eP,copyTo:n}),insert:v({before:tr,after:tl,afterAll:ti,append:tn,appendAll:tm,prepend:to,wrap:ta}),remove:v({unwrap:tu,remove:tc}),create:v({nu:eG.fromTag,clone:e,text:eG.fromText}),query:v({comparePosition:o,prevSibling:e4,nextSibling:e6}),property:v({children:e8,name:eS,parent:e2,document:e=>e1(e).dom,isText:eA,isComment:eO,isElement:eE,isSpecial:s,getLanguage:a,getText:nn,setText:na,isBoundary:t,isEmptyTag:r,isNonEditable:l}),eq:eX,is:eK}};let n2=(e,t,r,l)=>{let o=r[0],n=r.slice(1);return l(e,t,o,n)},n5=(e,t,r)=>r.length>0?n2(e,t,r,n7):k.none(),n7=(e,t,r,l)=>{let o=t(e,r);return F(l,(r,l)=>{let o=t(e,l);return n4(e,r,o)},o)},n4=(e,t,r)=>t.bind(t=>r.filter(C(e.eq,t))),n6=(e,t)=>C(e.eq,t),n8=(e,t,r,l=R)=>{let o=[t].concat(e.up().all(t)),n=[r].concat(e.up().all(r)),s=e=>{let t=q(e,l);return t.fold(()=>e,t=>e.slice(0,t+1))},a=s(o),i=s(n),m=V(a,t=>j(i,n6(e,t)));return{firstpath:a,secondpath:i,shared:m}},se=n3(),st=(e,t)=>n5(se,(t,r)=>e(r),t),sr=(e,t,r)=>n8(se,e,t,r),sl=e=>t1(e,"table"),so=(e,t,r)=>{let l=e=>t=>void 0!==r&&r(t)||eX(t,e);return eX(e,t)?k.some({boxes:k.some([e]),start:e,finish:t}):sl(e).bind(o=>sl(t).bind(n=>{if(eX(o,n))return k.some({boxes:nX(o,e,t),start:e,finish:t});if(eZ(o,n)){let r=tG(t,"td,th",l(o)),s=r.length>0?r[r.length-1]:t;return k.some({boxes:nZ(o,e,o,t,n),start:e,finish:s})}if(!eZ(n,o))return sr(e,t).shared.bind(s=>t2(s,"table",r).bind(r=>{let s=tG(t,"td,th",l(r)),a=s.length>0?s[s.length-1]:t,i=tG(e,"td,th",l(r)),m=i.length>0?i[i.length-1]:e;return k.some({boxes:nZ(r,e,o,t,n),start:m,finish:a})}));{let r=tG(e,"td,th",l(n)),s=r.length>0?r[r.length-1]:e;return k.some({boxes:nZ(n,e,o,t,n),start:e,finish:s})}}))},sn=(e,t)=>{let r=tY(e,t);return r.length>0?k.some(r):k.none()},ss=(e,t)=>V(e,e=>eK(e,t)),sa=(e,t,r)=>t3(e,t).bind(t=>t3(e,r).bind(e=>st(sl,[t,e]).map(r=>({first:t,last:e,table:r})))),si=(e,t)=>t1(e,"table").bind(r=>t3(r,t).bind(t=>so(t,e).bind(e=>e.boxes.map(t=>({boxes:t,start:e.start,finish:e.finish}))))),sm=(e,t,r,l,o)=>ss(e,o).bind(e=>nQ(e,t,r).bind(e=>si(e,l))),sd=(e,t)=>sn(e,t),sc=(e,t,r)=>sa(e,t,r).bind(t=>{let r=t=>eX(e,t),l="thead,tfoot,tbody,table",o=t1(t.first,l,r),n=t1(t.last,l,r);return o.bind(e=>n.bind(r=>eX(e,r)?n0(t.table,t.first,t.last):k.none()))}),su=e=>{let t=(e,t)=>eI(e,t).exists(e=>parseInt(e,10)>1),r=e=>t(e,"rowspan")||t(e,"colspan");return e.length>0&&K(e,r)?k.some(e):k.none()},sf=(e,t,r)=>t.length<=1?k.none():sc(e,r.firstSelectedSelector,r.lastSelectedSelector).map(e=>({bounds:e,cells:t})),sg="data-mce-selected",sh="data-mce-first-selected",sp="data-mce-last-selected",sb="["+sg+"]",sw={selected:sg,selectedSelector:"td["+sg+"],th["+sg+"]",firstSelected:sh,firstSelectedSelector:"td["+sh+"],th["+sh+"]",lastSelected:sp,lastSelectedSelector:"td["+sp+"],th["+sp+"]"},sv=(e,t,r)=>({element:r,mergable:sf(t,e,sw),unmergable:su(e),selection:y(e)}),sy=(e,t,r)=>({element:e,clipboard:t,generators:r}),sx=(e,t,r,l)=>({selection:y(e),clipboard:r,generators:l}),sC=e=>rE(e).bind(e=>sd(e,sw.firstSelectedSelector)).fold(v(e),e=>e[0]),sT=e=>(t,r)=>{let l=eS(t),o="col"===l||"colgroup"===l?sC(t):t;return t2(o,e,r)},sS=sT("th,td,caption"),sD=sT("th,td"),sR=e=>nk(e.model.table.getSelectedCells()),sO=e=>P(sR(e),e=>eK(e,sw.selectedSelector)),sk=e=>rE(e[0]).map(e=>{let t=nl(e,sb);return nj(t),[t]}),sE=(e,t)=>L(t,t=>e.selection.serializer.serialize(t.dom,{})).join(""),sA=e=>L(e,e=>e.dom.innerText).join(""),sB=(e,t)=>{e.on("BeforeGetContent",t=>{if(!0===t.selection){let r=sO(e);r.length>=1&&(t.preventDefault(),sk(r).each(r=>{t.content="text"===t.format?sA(r):sE(e,r)}))}}),e.on("BeforeSetContent",r=>{if(!0===r.selection&&!0===r.paste){let l=sR(e);Z(l).each(l=>{rE(l).each(o=>{let n=P(nO(r.content),e=>"meta"!==eS(e)),s=ez("table");if(1===n.length&&s(n[0])){r.preventDefault();let s=eG.fromDom(e.getDoc()),a=nR(s),i=sy(l,n[0],a);t.pasteCells(o,i).each(()=>{e.focus()})}})})}})},sN=(e,t)=>({element:e,offset:t}),sz=(e,t,r)=>e.property().isText(t)&&0===e.property().getText(t).trim().length||e.property().isComment(t)?r(t).bind(t=>sz(e,t,r).orThunk(()=>k.some(t))):k.none(),sj=(e,t)=>{if(e.property().isText(t))return e.property().getText(t).length;let r=e.property().children(t);return r.length},s_=(e,t)=>{let r=sz(e,t,e.query().prevSibling).getOr(t);if(e.property().isText(r))return sN(r,sj(e,r));let l=e.property().children(r);return l.length>0?s_(e,l[l.length-1]):sN(r,sj(e,r))},sL=n3(),sM=e=>s_(sL,e),sW=(e,t)=>{if(!rw(e)){let r=oN(e);r.each(r=>{let l=r.value/2;oz(e,l,r.unit),oz(t,l,r.unit)})}},sI=e=>L(e,v(0)),sP=(e,t,r,l,o)=>o(e.slice(0,t)).concat(l).concat(o(e.slice(r))),sF=e=>(t,r,l,o)=>{if(!e(l))return l;{let e=Math.max(o,t[r]-Math.abs(l)),n=Math.abs(e-t[r]);return l>=0?n:-n}},sH=sF(e=>e<0),s$=sF(O),sV=()=>{let e=(e,t,r,l,o)=>{let n=sH(e,t,l,o);return sP(e,t,r+1,[n,0],sI)},t=(e,t,r,l)=>{let o=(100+r)/100,n=Math.max(l,(e[t]+r)/o);return L(e,(e,r)=>(r===t?n:e/o)-e)},r=(r,l,o,n,s,a)=>a?t(r,l,n,s):e(r,l,o,n,s),l=(e,t,l,o,n,s,a)=>r(e,l,o,n,s,a),o=(e,t)=>e(t),n=(e,r,l,o,n,s)=>{if(s)return t(e,l,o,n);{let t=sH(e,l,o,n);return sI(e.slice(0,l)).concat([t])}},s=(e,t,r,l)=>{if(!l)return{delta:r,newSizes:e};{let l=(t+r)/t,o=L(e,e=>e/l);return{delta:100*l-100,newSizes:o}}};return{resizeTable:o,clampTableDelta:sH,calcLeftEdgeDeltas:r,calcMiddleDeltas:l,calcRightEdgeDeltas:n,calcRedestributedWidths:s}},sq=()=>{let e=(e,t,r,l,o)=>{let n=s$(e,l>=0?r:t,l,o);return sP(e,t,r+1,[n,-n],sI)},t=(t,r,l,o,n,s)=>e(t,l,o,n,s),r=(e,t,r)=>{r&&e(t)},l=(e,t,r,l,o,n)=>{if(n)return sI(e);{let t=l/e.length;return L(e,v(t))}},o=(e,t,r,l,o)=>{if(!o)return sH(e,t,r,l);if(r>=0)return r;{let t=H(e,(e,t)=>e+t-l,0);return Math.max(-t,r)}},n=(e,t,r,l)=>({delta:0,newSizes:e});return{resizeTable:r,clampTableDelta:o,calcLeftEdgeDeltas:e,calcMiddleDeltas:t,calcRightEdgeDeltas:l,calcRedestributedWidths:n}},sU=e=>{let t=lU.fromTable(e);return t.grid},sG=ez("th"),sK=e=>K(e,e=>sG(e.element)),sY=(e,t)=>e&&t?"sectionCells":e?"section":"cells",sJ=e=>{let t="thead"===e.section,r=t5(sQ(e.cells),"th");return"tfoot"===e.section?{type:"footer"}:t||r?{type:"header",subType:sY(t,r)}:{type:"body"}},sQ=e=>{let t=P(e,e=>sG(e.element));return 0===t.length?k.some("td"):t.length===e.length?k.some("th"):k.none()},sX=e=>{let t=L(e,e=>sJ(e).type),r=z(t,"header"),l=z(t,"footer");if(!r&&!l)return k.some("body");{let e=z(t,"body");return!r||e||l?r||e||!l?k.none():k.some("footer"):k.some("header")}},sZ=e=>et(e.all,e=>{let t=sJ(e);return"header"===t.type?k.from(t.subType):k.none()}),s0=(e,t,r)=>tk(r(e.element,t),!0,e.isLocked),s1=(e,t)=>e.section!==t?tE(e.element,e.cells,t,e.isNew):e,s9=()=>({transformRow:s1,transformCell:(e,t,r)=>{let l=r(e.element,t),o="td"!==eS(l)?tw(l,"td"):l;return tk(o,e.isNew,e.isLocked)}}),s3=()=>({transformRow:s1,transformCell:s0}),s2=()=>({transformRow:(e,t)=>s1(e,"thead"===t?"tbody":t),transformCell:s0}),s5=()=>({transformRow:y,transformCell:s0}),s7=(e,t)=>{let r=lU.fromTable(e),l=sZ(r).getOr(t);switch(l){case"section":return s9();case"sectionCells":return s3();case"cells":return s2()}},s4={getTableSectionType:s7,section:s9,sectionCells:s3,cells:s2,fallback:s5},s6=(e,t,r,l)=>{r===l?eP(e,t):e_(e,t,r)},s8=(e,t,r)=>{ee(tK(e,t)).fold(()=>to(e,r),e=>tl(e,r))},ae=(e,t)=>{let r=t9(e,t).getOrThunk(()=>{let r=eG.fromTag(t,e0(e).dom);return"thead"===t?s8(e,"caption,colgroup",r):"colgroup"===t?s8(e,"caption",r):tn(e,r),r});return td(r),r},at=(e,t)=>{let r=[],l=[],o=e=>L(e,e=>{e.isNew&&r.push(e.element);let t=e.element;return td(t),M(e.cells,e=>{e.isNew&&l.push(e.element),s6(e.element,"colspan",e.colspan,1),s6(e.element,"rowspan",e.rowspan,1),tn(t,e.element)}),t}),n=e=>G(e,e=>L(e.cells,e=>(s6(e.element,"span",e.colspan,1),e.element))),s=(t,r)=>{let l=ae(e,r),s=("colgroup"===r?n:o)(t);tm(l,s)},a=t=>{t9(e,t).each(tc)},i=(e,t)=>{e.length>0?s(e,t):a(t)},m=[],d=[],c=[],u=[];return M(t,e=>{switch(e.section){case"thead":m.push(e);break;case"tbody":d.push(e);break;case"tfoot":c.push(e);break;case"colgroup":u.push(e)}}),i(u,"colgroup"),i(m,"thead"),i(d,"tbody"),i(c,"tfoot"),{newRows:r,newCells:l}},ar=e=>L(e,e=>{let t=tg(e.element);return M(e.cells,e=>{let r=th(e.element);s6(r,"colspan",e.colspan,1),s6(r,"rowspan",e.rowspan,1),tn(t,r)}),t}),al=(e,t)=>L(e,e=>lk(e,t)),ao=(e,t)=>e[t],an=(e,t)=>{if(0===e.length)return 0;let r=e[0],l=q(e,e=>!t(r.element,e.element));return l.getOr(e.length)},as=(e,t,r,l)=>{let o=ao(e,t),n="colgroup"===o.section,s=an(o.cells.slice(r),l),a=n?1:an(al(e.slice(t),r),l);return{colspan:s,rowspan:a}},aa=(e,t)=>{let r=L(e,e=>L(e.cells,R)),l=(e,t,l,o)=>{for(let n=e;n<e+l;n++)for(let e=t;e<t+o;e++)r[n][e]=!0};return L(e,(o,n)=>{let s=G(o.cells,(o,s)=>{if(!1!==r[n][s])return[];{let r=as(e,n,s,t);return l(n,s,r.rowspan,r.colspan),[tS(o.element,r.rowspan,r.colspan,o.isNew)]}});return tO(o.element,s,o.section,o.isNew)})},ai=(e,t,r)=>{let l=[];M(e.colgroups,o=>{let n=[];for(let l=0;l<e.grid.columns;l++){let o=lU.getColumnAt(e,l).map(e=>tk(e.element,r,!1)).getOrThunk(()=>tk(t.colGap(),!0,!1));n.push(o)}l.push(tE(o.element,n,"colgroup",r))});for(let o=0;o<e.grid.rows;o++){let n=[];for(let l=0;l<e.grid.columns;l++){let s=lU.getAt(e,o,l).map(e=>tk(e.element,r,e.isLocked)).getOrThunk(()=>tk(t.gap(),!0,!1));n.push(s)}let s=e.all[o],a=tE(s.element,n,s.section,r);l.push(a)}return l},am=(e,t)=>ai(e,t,!1),ad=e=>aa(e,eX),ac=(e,t)=>et(e.all,e=>V(e.cells,e=>eX(t,e.element))),au=(e,t,r)=>{let l=L(t.selection,t=>rR(t).bind(t=>ac(e,t)).filter(r)),o=t7(l);return t6(o.length>0,o)},af=(e,t,r,l,o)=>(n,s,a,i)=>{let m=lU.fromTable(n),d=k.from(null==i?void 0:i.section).getOrThunk(s4.fallback),c=t(m,s).map(t=>{let r=am(m,a),l=e(r,t,eX,o(a),d),n=l_(l.grid),s=ad(l.grid);return{info:t,grid:s,cursor:l.cursor,lockedColumns:n}});return c.bind(e=>{let t=at(n,e.grid),o=k.from(null==i?void 0:i.sizing).getOrThunk(()=>o7.getTableSize(n)),s=k.from(null==i?void 0:i.resize).getOrThunk(sq);return r(n,e.grid,e.info,{sizing:o,resize:s,section:d}),l(n),eP(n,lz),e.lockedColumns.length>0&&e_(n,lz,e.lockedColumns.join(",")),k.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})})},ag=(e,t)=>rR(t.element).bind(r=>ac(e,r).map(e=>{let r={...e,generators:t.generators,clipboard:t.clipboard};return r})),ah=(e,t)=>au(e,t,O).map(e=>({cells:e,generators:t.generators,clipboard:t.clipboard})),ap=(e,t)=>t.mergable,ab=(e,t)=>t.unmergable,aw=(e,t)=>au(e,t,O),av=(e,t)=>au(e,t,e=>!e.isLocked),ay=(e,t)=>ac(e,t).exists(e=>!e.isLocked),ax=(e,t)=>K(t,t=>ay(e,t)),aC=(e,t)=>ap(e,t).filter(t=>ax(e,t.cells)),aT=(e,t)=>ab(e,t).filter(t=>ax(e,t)),aS=(e,t,r,l)=>{let o=lB(e).rows;if(0===o.length)return e;for(let e=t.startRow;e<=t.finishRow;e++)for(let r=t.startCol;r<=t.finishCol;r++){let t=o[e],n=lk(t,r).isLocked;lD(t,r,tk(l(),!1,n))}return e},aD=(e,t,r,l)=>{let o=lB(e).rows,n=!0;for(let e=0;e<o.length;e++)for(let s=0;s<lA(o[0]);s++){let a=o[e],i=lk(a,s),m=i.element,d=r(m,t);d&&!n?lD(a,s,tk(l(),!0,i.isLocked)):d&&(n=!1)}return e},aR=(e,t)=>H(e,(e,r)=>j(e,e=>t(e.element,r.element))?e:e.concat([r]),[]),aO=(e,t,r,l)=>(t>0&&t<e[0].cells.length&&M(e,e=>{let o=e.cells[t-1],n=0,s=l();for(;e.cells.length>t+n&&r(o.element,e.cells[t+n].element);)lD(e,t+n,tk(s,!0,e.cells[t+n].isLocked)),n++}),e),ak=(e,t,r,l)=>{let o=lB(e).rows;if(t>0&&t<o.length){let e=o[t-1].cells,n=aR(e,r);M(n,e=>{let n=k.none();for(let s=t;s<o.length;s++)for(let t=0;t<lA(o[0]);t++){let a=o[s],i=lk(a,t),m=r(i.element,e.element);m&&(n.isNone()&&(n=k.some(l())),n.each(e=>{lD(a,t,tk(e,!0,i.isLocked))}))}})}return e},aE=e=>{let t=t=>t(e),r=v(e),l={tag:!0,inner:e,fold:(t,r)=>r(e),isValue:O,isError:R,map:t=>aN.value(t(e)),mapError:()=>l,bind:t,exists:t,forall:t,getOr:r,or:()=>l,getOrThunk:r,orThunk:()=>l,getOrDie:r,each:t=>{t(e)},toOptional:()=>k.some(e)};return l},aA=e=>{let t={tag:!1,inner:e,fold:(t,r)=>t(e),isValue:R,isError:O,map:()=>t,mapError:t=>aN.error(t(e)),bind:()=>t,exists:R,forall:O,getOr:y,or:y,getOrThunk:D,orThunk:D,getOrDie:S(String(e)),each:p,toOptional:k.none};return t},aB=(e,t)=>e.fold(()=>aA(t),aE),aN={value:aE,error:aA,fromOption:aB},az=(e,t,r)=>{if(e.row>=t.length||e.column>lA(t[0]))return aN.error("invalid start address out of table bounds, row: "+e.row+", column: "+e.column);let l=t.slice(e.row),o=l[0].cells.slice(e.column),n=lA(r[0]),s=r.length;return aN.value({rowDelta:l.length-s,colDelta:o.length-n})},aj=(e,t)=>{let r=lA(e[0]),l=lA(t[0]);return{rowDelta:0,colDelta:r-l}},a_=(e,t)=>{let r=e.length,l=t.length;return{rowDelta:r-l,colDelta:0}},aL=(e,t,r,l)=>{let o="colgroup"===t.section?r.col:r.cell;return _(e,e=>tk(o(),!0,l(e)))},aM=(e,t,r,l)=>{let o=e[e.length-1];return e.concat(_(t,()=>{let e="colgroup"===o.section?r.colgroup:r.row,t=lN(o,e,y),n=aL(t.cells.length,t,r,e=>ef(l,e.toString()));return lR(t,n)}))},aW=(e,t,r,l)=>L(e,e=>{let o=aL(t,e,r,R);return lT(e,l,o)}),aI=(e,t,r)=>L(e,e=>H(r,(r,l)=>{let o=aL(1,e,t,O)[0];return lS(r,l,o)},e)),aP=(e,t,r)=>{let l=t.colDelta<0?aW:y,o=t.rowDelta<0?aM:y,n=l_(e),s=lA(e[0]),a=j(n,e=>e===s-1),i=l(e,Math.abs(t.colDelta),r,a?s-1:s),m=l_(i);return o(i,Math.abs(t.rowDelta),r,J(m,O))},aF=(e,t,r,l)=>{let o=lk(e[t],r),n=C(l,o.element),s=e[t];return e.length>1&&lA(s)>1&&(r>0&&n(lE(s,r-1))||r<s.cells.length-1&&n(lE(s,r+1))||t>0&&n(lE(e[t-1],r))||t<e.length-1&&n(lE(e[t+1],r)))},aH=(e,t,r,l,o,n)=>{let s=e.row,a=e.column,i=r.length,m=lA(r[0]),d=s+i,c=a+m+n.length,u=J(n,O);for(let e=s;e<d;e++){let n=0;for(let i=a;i<c;i++){if(u[i]){n++;continue}aF(t,e,i,o)&&aD(t,lE(t[e],i),o,l.cell);let m=i-a-n,d=lk(r[e-s],m),c=d.element,f=l.replace(c);lD(t[e],i,tk(f,!0,d.isLocked))}}return t},a$=(e,t,r)=>{let l=lA(t[0]),o=lB(t).cols.length+e.row,n=_(l-e.column,t=>t+e.column),s=V(n,e=>K(r,t=>t!==e)).getOr(l-1);return{row:o,column:s}},aV=(e,t,r)=>P(r,r=>r>=e.column&&r<=lA(t[0])+e.column),aq=(e,t,r,l,o)=>{let n=l_(t),s=a$(e,t,n),a=lB(r).rows,i=aV(s,a,n),m=az(s,t,a);return m.map(e=>{let r={...e,colDelta:e.colDelta-i.length},n=aP(t,r,l),m=l_(n),d=aV(s,a,m);return aH(s,n,a,l,o,d)})},aU=(e,t,r,l,o)=>{aO(t,e,o,l.cell);let n=a_(r,t),s=aP(r,n,l),a=a_(t,s),i=aP(t,a,l);return L(i,(t,r)=>lT(t,e,s[r].cells))},aG=(e,t,r,l,o)=>{ak(t,e,o,l.cell);let n=l_(t),s=aj(t,r),a={...s,colDelta:s.colDelta-n.length},i=aP(t,a,l),{cols:m,rows:d}=lB(i),c=l_(i),u=aj(r,t),f={...u,colDelta:u.colDelta+c.length},g=aI(r,l,c),h=aP(g,f,l);return[...m,...d.slice(0,e),...h,...d.slice(e,d.length)]},aK=(e,t,r,l)=>lN(e,e=>l(e,r),t),aY=(e,t,r,l,o)=>{let{rows:n,cols:s}=lB(e),a=n.slice(0,t),i=n.slice(t),m=aK(n[r],(e,r)=>{let s=t>0&&t<n.length&&l(lE(n[t-1],r),lE(n[t],r)),a=s?lk(n[t],r):tk(o(e.element,l),!0,e.isLocked);return a},l,o);return[...s,...a,m,...i]},aJ=(e,t,r,l,o,n,s)=>{if("colgroup"!==r&&l)return lk(e,t);{let t=lk(e,o);return tk(s(t.element,n),!0,!1)}},aQ=(e,t,r,l,o)=>L(e,e=>{let n=t>0&&t<lA(e)&&l(lE(e,t-1),lE(e,t)),s=aJ(e,t,e.section,n,r,l,o);return lS(e,t,s)}),aX=(e,t)=>G(e,e=>{let r=e.cells,l=F(t,(e,t)=>t>=0&&t<e.length?e.slice(0,t).concat(e.slice(t+1)):e,r);return l.length>0?[tE(e.element,l,e.section,e.isNew)]:[]}),aZ=(e,t,r)=>{let{rows:l,cols:o}=lB(e);return[...o,...l.slice(0,t),...l.slice(r+1)]},a0=(e,t,r,l)=>void 0!==lE(e[t],r)&&t>0&&l(lE(e[t-1],r),lE(e[t],r)),a1=(e,t,r)=>t>0&&r(lE(e,t-1),lE(e,t)),a9=(e,t,r,l)=>a0(e,t,r,l)||a1(e[t],r,l),a3=(e,t)=>{let r=K(t,y)&&sK(e.cells);return r?O:(e,r,l)=>{let o=eS(e.element);return!("th"===o&&t[l])}},a2=(e,t)=>{let r=K(t,y)&&sK(e);return r?O:(e,r,l)=>{let o=eS(e.element);return!("th"===o&&t[r])}},a5=(e,t,r,l)=>{let o=e=>"row"===e?rv(t):rw(t),n=e=>o(e)?`${e}group`:e;return e?sG(t)?n(r):null:l&&sG(t)?n("row"===r?"col":"row"):null},a7=(e,t)=>(r,l,o)=>k.some(a5(e,r.element,"col",t[o])),a4=(e,t)=>(r,l)=>k.some(a5(e,r.element,"row",t[l])),a6=(e,t,r)=>tk(r(e.element,t),!0,e.isLocked),a8=(e,t,r,l,o,n,s)=>{let a=e=>j(t,t=>r(e.element,t.element));return L(e,(e,t)=>lO(e,(e,i)=>{if(!a(e))return e;{let a=s(e,t,i)?o(e,r,l):e;return n(a,t,i).each(e=>{eM(a.element,{scope:k.from(e)})}),a}}))},ie=(e,t,r)=>G(e,(l,o)=>a9(e,o,t,r)?[]:[lk(l,t)]),it=(e,t,r)=>{let l=e[t];return G(l.cells,(l,o)=>a9(e,t,o,r)?[]:[l])},ir=(e,t,r,l,o)=>{let n=lB(e).rows,s=G(t,e=>ie(n,e,l)),a=L(n,e=>sK(e.cells)),i=a2(s,a),m=a4(r,a);return a8(e,s,l,o,a6,m,i)},il=(e,t,r,l,o,n,s)=>{let{cols:a,rows:i}=lB(e),m=i[t[0]],d=G(t,e=>it(i,e,o)),c=L(m.cells,(e,t)=>sK(ie(i,t,o))),u=[...i];M(t,e=>{u[e]=s.transformRow(i[e],r)});let f=[...a,...u],g=a3(m,c),h=a7(l,c);return a8(f,d,o,n,s.transformCell,h,g)},io=(e,t,r,l)=>{let o=lB(e).rows,n=L(t,e=>lk(o[e.row],e.column));return a8(e,n,r,l,a6,k.none,O)},is=e=>{if(!i(e))throw Error("cases must be an array");if(0===e.length)throw Error("there must be at least one case");let t=[],r={};return M(e,(l,o)=>{let n=er(l);if(1!==n.length)throw Error("one and only one name per case");let s=n[0],a=l[s];if(void 0!==r[s])throw Error("duplicate key detected:"+s);if("cata"===s)throw Error("cannot have a case named cata (sorry)");if(!i(a))throw Error("case arguments must be an array");t.push(s),r[s]=(...r)=>{let l=r.length;if(l!==a.length)throw Error("Wrong number of arguments to case "+s+". Expected "+a.length+" ("+a+"), got "+l);let n=e=>{let l=er(e);if(t.length!==l.length)throw Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+l.join(","));let o=K(t,e=>z(l,e));if(!o)throw Error("Not all branches were specified when using match. Specified: "+l.join(", ")+"\nRequired: "+t.join(", "));return e[s].apply(null,r)};return{fold:(...t)=>{if(t.length!==e.length)throw Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);let l=t[o];return l.apply(null,r)},match:n,log:e=>{console.log(e,{constructors:t,constructor:s,params:r})}}}}),r},ia={generate:is},ii=ia.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),im={...ii},id=(e,t)=>0===e.length?im.none():1===e.length?im.only(0):0===t?im.left(0,1):t===e.length-1?im.right(t-1,t):t>0&&t<e.length-1?im.middle(t-1,t,t+1):im.none(),ic=(e,t,r,l,o)=>{let n=e.slice(0),s=id(e,t),a=v(L(n,v(0))),i=e=>l.singleColumnWidth(n[e],r),m=(e,t)=>o.calcLeftEdgeDeltas(n,e,t,r,l.minCellWidth(),l.isRelative),d=(e,t,s)=>o.calcMiddleDeltas(n,e,t,s,r,l.minCellWidth(),l.isRelative),c=(e,t)=>o.calcRightEdgeDeltas(n,e,t,r,l.minCellWidth(),l.isRelative);return s.fold(a,i,m,d,c)},iu=(e,t,r)=>{let l=0;for(let o=e;o<t;o++)l+=void 0!==r[o]?r[o]:0;return l},ig=(e,t)=>{let r=lU.justCells(e);return L(r,e=>{let r=iu(e.column,e.column+e.colspan,t);return{element:e.element,width:r,colspan:e.colspan}})},ih=(e,t)=>{let r=lU.justColumns(e);return L(r,(e,r)=>({element:e.element,width:t[r],colspan:e.colspan}))},ip=(e,t)=>{let r=lU.justCells(e);return L(r,e=>{let r=iu(e.row,e.row+e.rowspan,t);return{element:e.element,height:r,rowspan:e.rowspan}})},ib=(e,t)=>L(e.all,(e,r)=>({element:e.element,height:t[r]})),iw=e=>F(e,(e,t)=>e+t,0),iv=(e,t)=>lU.hasColumns(e)?ih(e,t):ig(e,t),iy=(e,t,r)=>{let l=iv(e,t);M(l,e=>{r.setElementWidth(e.element,e.width)})},ix=(e,t,r,l,o)=>{let n=lU.fromTable(e),s=o.getCellDelta(t),a=o.getWidths(n,o),i=r===n.grid.columns-1,m=l.clampTableDelta(a,r,s,o.minCellWidth(),i),d=ic(a,r,m,o,l),c=L(d,(e,t)=>e+a[t]);iy(n,c,o),l.resizeTable(o.adjustTableWidth,m,i)},iC=(e,t,r,l)=>{let o=lU.fromTable(e),n=oX(o,e,l),s=L(n,(e,l)=>r===l?Math.max(t+e,rC()):e),a=ip(o,s),i=ib(o,s);M(i,e=>{oy(e.element,e.height)}),M(a,e=>{oy(e.element,e.height)});let m=iw(s);oy(e,m)},iT=(e,t,r,l,o)=>{let n=lU.generate(t),s=l.getWidths(n,l),a=l.pixelWidth(),{newSizes:i,delta:m}=o.calcRedestributedWidths(s,a,r.pixelDelta,l.isRelative);iy(n,i,l),l.adjustTableWidth(m)},iS=(e,t,r,l)=>{let o=lU.generate(t),n=l.getWidths(o,l);iy(o,n,l)},iD=e=>{let t=(e,t)=>{let r=j(e,e=>e.column===t.column);return r?e:e.concat([t])};return H(e,t,[]).sort((e,t)=>e.column-t.column)},iR=ez("col"),iO=ez("colgroup"),ik=e=>"tr"===eS(e)||iO(e),iE=e=>{let t=rp(e,"colspan",1),r=rp(e,"rowspan",1);return{element:e,colspan:t,rowspan:r}},iA=(e,t=iE)=>{let r=t=>iR(t.element)?e.col(t):e.cell(t),l=t=>iO(t.element)?e.colgroup(t):e.row(t),o=e=>{if(ik(e))return l({element:e});{let l=r(t(e));return n=k.some({item:e,replacement:l}),l}},n=k.none(),s=(e,t)=>n.fold(()=>o(e),r=>t(e,r.item)?r.replacement:o(e));return{getOrInit:s}},iB=e=>t=>{let r=[],l=(e,t)=>V(r,r=>t(r.item,e)),o=l=>{let o=t.replace(l,e,"td"===e?{scope:null}:{});return r.push({item:l,sub:o}),o},n=(e,t)=>ik(e)||iR(e)?e:l(e,t).fold(()=>o(e),r=>t(e,r.item)?r.sub:o(e));return{replaceOrInit:n}},iN=e=>eI(e,"scope").map(e=>e.substr(0,3)),iz=e=>{let t=t=>{let r=iN(t);return r.each(e=>e_(t,"scope",e)),()=>{let l=e.cell({element:t,colspan:1,rowspan:1});return rg(l,"width"),rg(t,"width"),r.each(e=>e_(l,"scope",e)),l}},r=e=>(rg(e[0],"width"),(()=>{let t=t7(L(e,iN));if(0===t.length)return k.none();{let e=t[0],r=["row","col"],l=j(t,t=>t!==e&&z(r,t));return l?k.none():k.from(e)}})().fold(()=>eP(e[0],"scope"),t=>e_(e[0],"scope",t+"group")),v(e[0]));return{unmerge:t,merge:r}},ij={modification:iA,transform:iB,merging:iz},i_=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],iL=(e,t)=>{let r=e.property().name(t);return z(["ol","ul"],r)},iM=(e,t)=>{let r=e.property().name(t);return z(i_,r)},iW=(e,t)=>z(["br","img","hr","input"],e.property().name(t)),iI=n3(),iP=e=>iM(iI,e),iF=e=>iL(iI,e),iH=e=>iW(iI,e),i$=e=>{let t=ez("br"),r=e=>K(e,e=>t(e)||eA(e)&&0===nn(e).trim().length),l=e=>"li"===eS(e)||tQ(e,iF).isSome(),o=e=>e6(e).map(e=>!!iP(e)||!!iH(e)&&"img"!==eS(e)).getOr(!1),n=e=>ng(e).bind(r=>{let n=o(r);return e2(r).map(o=>!0===n||l(o)||t(r)||iP(o)&&!eX(e,o)?[]:[eG.fromTag("br")])}).getOr([]),s=(()=>{let t=G(e,e=>{let t=e8(e);return r(t)?[]:t.concat(n(e))});return 0===t.length?[eG.fromTag("br")]:t})();td(e[0]),tm(e[0],s)},iV=e=>nA(e,!0),iq=e=>{let t=rO(e);0===t.length&&tc(e)},iU=(e,t)=>({grid:e,cursor:t}),iG=e=>et(e,e=>et(e.cells,e=>{let t=e.element;return t6(iV(t),t)})),iK=(e,t,r)=>{var l,o;let n=lB(e).rows;return k.from(null===(o=null===(l=n[t])||void 0===l?void 0:l.cells[r])||void 0===o?void 0:o.element).filter(iV).orThunk(()=>iG(n))},iY=(e,t,r)=>{let l=iK(e,t,r);return iU(e,l)},iJ=e=>{let t=(e,t)=>{let r=j(e,e=>e.row===t.row);return r?e:e.concat([t])};return H(e,t,[]).sort((e,t)=>e.row-t.row)},iQ=(e,t,r,l)=>{let o=t[0].row,n=iJ(t),s=F(n,(e,t)=>{let n=aY(e.grid,o,t.row+e.delta,r,l.getOrInit);return{grid:n,delta:e.delta+1}},{grid:e,delta:0}).grid;return iY(s,o,t[0].column)},iX=(e,t,r,l)=>{let o=iJ(t),n=o[o.length-1],s=n.row+n.rowspan,a=F(o,(e,t)=>aY(e,s,t.row,r,l.getOrInit),e);return iY(a,s,t[0].column)},iZ=(e,t,r,l)=>{let o=t.details,n=iD(o),s=n[0].column,a=F(n,(e,t)=>{let o=aQ(e.grid,s,t.column+e.delta,r,l.getOrInit);return{grid:o,delta:e.delta+1}},{grid:e,delta:0}).grid;return iY(a,o[0].row,s)},i0=(e,t,r,l)=>{let o=t.details,n=o[o.length-1],s=n.column+n.colspan,a=iD(o),i=F(a,(e,t)=>aQ(e,s,t.column,r,l.getOrInit),e);return iY(i,o[0].row,s)},i1=(e,t,r,l)=>{let o=iD(t),n=L(o,e=>e.column),s=ir(e,n,!0,r,l.replaceOrInit);return iY(s,t[0].row,t[0].column)},i9=(e,t,r,l)=>{let o=io(e,t,r,l.replaceOrInit);return iY(o,t[0].row,t[0].column)},i3=(e,t,r,l)=>{let o=iD(t),n=L(o,e=>e.column),s=ir(e,n,!1,r,l.replaceOrInit);return iY(s,t[0].row,t[0].column)},i2=(e,t,r,l)=>{let o=io(e,t,r,l.replaceOrInit);return iY(o,t[0].row,t[0].column)},i5=(e,t)=>(r,l,o,n,s)=>{let a=iJ(l),i=L(a,e=>e.row),m=il(r,i,e,t,o,n.replaceOrInit,s);return iY(m,l[0].row,l[0].column)},i7=i5("thead",!0),i4=i5("tbody",!1),i6=i5("tfoot",!1),i8=(e,t,r,l)=>{let o=iD(t.details),n=aX(e,L(o,e=>e.column)),s=n.length>0?n[0].cells.length-1:0;return iY(n,o[0].row,Math.min(o[0].column,s))},me=(e,t,r,l)=>{let o=iJ(t),n=aZ(e,o[0].row,o[o.length-1].row),s=n.length>0?n.length-1:0;return iY(n,Math.min(t[0].row,s),t[0].column)},mt=(e,t,r,l)=>{let o=t.cells;i$(o);let n=aS(e,t.bounds,r,l.merge(o));return iU(n,k.from(o[0]))},mr=(e,t,r,l)=>{let o=(e,t)=>aD(e,t,r,l.unmerge(t)),n=F(t,o,e);return iU(n,k.from(t[0]))},ml=(e,t,r,l)=>{let o=((e,t)=>{let r=lU.fromTable(e);return ai(r,t,!0)})(t.clipboard,t.generators),n=tC(t.row,t.column),s=aq(n,e,o,t.generators,r);return s.fold(()=>iU(e,k.some(t.element)),e=>iY(e,t.row,t.column))},mo=(e,t,r)=>{let l=r_(e,r.section),o=lU.generate(l);return ai(o,t,!0)},mn=(e,t,r,l)=>{let o=lB(e).rows,n=t.cells[0].column,s=o[t.cells[0].row],a=mo(t.clipboard,t.generators,s),i=aU(n,e,a,t.generators,r);return iY(i,t.cells[0].row,t.cells[0].column)},ms=(e,t,r,l)=>{let o=lB(e).rows,n=t.cells[t.cells.length-1].column+t.cells[t.cells.length-1].colspan,s=o[t.cells[0].row],a=mo(t.clipboard,t.generators,s),i=aU(n,e,a,t.generators,r);return iY(i,t.cells[0].row,t.cells[0].column)},ma=(e,t,r,l)=>{let o=lB(e).rows,n=t.cells[0].row,s=o[n],a=mo(t.clipboard,t.generators,s),i=aG(n,e,a,t.generators,r);return iY(i,t.cells[0].row,t.cells[0].column)},mi=(e,t,r,l)=>{let o=lB(e).rows,n=t.cells[t.cells.length-1].row+t.cells[t.cells.length-1].rowspan,s=o[t.cells[0].row],a=mo(t.clipboard,t.generators,s),i=aG(n,e,a,t.generators,r);return iY(i,t.cells[0].row,t.cells[0].column)},mm=(e,t)=>{let r=lU.fromTable(e),l=aw(r,t);return l.bind(e=>{let t=e[e.length-1],l=e[0].column,o=t.column+t.colspan,n=U(L(r.all,e=>P(e.cells,e=>e.column>=l&&e.column<o)));return sQ(n)}).getOr("")},md=(e,t)=>{let r=lU.fromTable(e),l=aw(r,t);return l.bind(sQ).getOr("")},mc=(e,t)=>{let r=lU.fromTable(e),l=aw(r,t);return l.bind(e=>{let t=e[e.length-1],l=e[0].row,o=t.row+t.rowspan,n=r.all.slice(l,o);return sX(n)}).getOr("")},mu=(e,t,r,l)=>iS(e,t,r,l.sizing),mf=(e,t,r,l)=>iT(e,t,r,l.sizing,l.resize),mg=(e,t)=>j(t,e=>0===e.column&&e.isLocked),mh=(e,t)=>j(t,t=>t.column+t.colspan>=e.grid.columns&&t.isLocked),mp=(e,t)=>{let r=lG(e),l=iD(t);return H(l,(e,t)=>{let l=r[t.column],o=l.map(lC).getOr(0);return e+o},0)},mb=e=>(t,r)=>aw(t,r).filter(r=>!(e?mg:mh)(t,r)).map(e=>({details:e,pixelDelta:mp(t,e)})),mw=(e,t)=>av(e,t).map(t=>({details:t,pixelDelta:-mp(e,t)})),mv=e=>(t,r)=>ah(t,r).filter(r=>!(e?mg:mh)(t,r.cells)),my=ij.transform("th"),mx=ij.transform("td"),mC=af(iQ,aw,p,p,ij.modification),mT=af(iX,aw,p,p,ij.modification),mS=af(iZ,mb(!0),mf,p,ij.modification),mD=af(i0,mb(!1),mf,p,ij.modification),mR=af(i8,mw,mf,iq,ij.modification),mO=af(me,aw,p,iq,ij.modification),mk=af(i1,av,p,p,my),mE=af(i3,av,p,p,mx),mA=af(i7,av,p,p,my),mB=af(i4,av,p,p,mx),mN=af(i6,av,p,p,mx),mz=af(i9,av,p,p,my),mj=af(i2,av,p,p,mx),m_=af(mt,aC,mu,p,ij.merging),mL=af(mr,aT,mu,p,ij.merging),mM=af(ml,ag,mu,p,ij.modification),mW=af(mn,mv(!0),p,p,ij.modification),mI=af(ms,mv(!1),p,p,ij.modification),mP=af(ma,ah,p,p,ij.modification),mF=af(mi,ah,p,p,ij.modification),mH=(e,t)=>e.dispatch("NewRow",{node:t}),m$=(e,t)=>e.dispatch("NewCell",{node:t}),mV=(e,t,r)=>{e.dispatch("TableModified",{...r,table:t})},mq=(e,t,r,l,o)=>{e.dispatch("TableSelectionChange",{cells:t,start:r,finish:l,otherCells:o})},mU=e=>{e.dispatch("TableSelectionClear")},mG=(e,t,r,l,o)=>{e.dispatch("ObjectResizeStart",{target:t,width:r,height:l,origin:o})},mK=(e,t,r,l,o)=>{e.dispatch("ObjectResized",{target:t,width:r,height:l,origin:o})},mY={structure:!1,style:!0},mJ={structure:!0,style:!1},mQ={structure:!0,style:!0},mX=e=>t=>t.options.get(e),mZ="100%",m0=e=>{var t;let r=e.dom,l=null!==(t=r.getParent(e.selection.getStart(),r.isBlock))&&void 0!==t?t:e.getBody();return lv(eG.fromDom(l))+"px"},m1=(e,t)=>dl(e)||!ds(e)?t:dr(e)?{...t,width:m0(e)}:{...t,width:mZ},m9=(e,t)=>dl(e)||ds(e)?t:dr(e)?{...t,width:m0(e)}:{...t,width:mZ},m3=e=>{let t=e.options.register;t("table_clone_elements",{processor:"string[]"}),t("table_use_colgroups",{processor:"boolean",default:!0}),t("table_header_type",{processor:e=>{let t=z(["section","cells","sectionCells","auto"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),t("table_sizing_mode",{processor:"string",default:"auto"}),t("table_default_attributes",{processor:"object",default:{border:"1"}}),t("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),t("table_column_resizing",{processor:e=>{let t=z(["preservetable","resizetable"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),t("table_resize_bars",{processor:"boolean",default:!0}),t("table_style_by_css",{processor:"boolean",default:!0})},m2=e=>k.from(e.options.get("table_clone_elements")),m5=e=>{let t=e.options.get("object_resizing");return z(t.split(","),"table")},m7=mX("table_header_type"),m4=mX("table_column_resizing"),m6=e=>"preservetable"===m4(e),m8=e=>"resizetable"===m4(e),de=mX("table_sizing_mode"),dt=e=>"relative"===de(e),dr=e=>"fixed"===de(e),dl=e=>"responsive"===de(e),dn=mX("table_resize_bars"),ds=mX("table_style_by_css"),da=e=>{let t=e.options,r=t.get("table_default_attributes");return t.isSet("table_default_attributes")?r:m9(e,r)},di=e=>{let t=e.options,r=t.get("table_default_styles");return t.isSet("table_default_styles")?r:m1(e,r)},dm=mX("table_use_colgroups"),dd=(e,t)=>dt(e)?o7.percentageSize(t):dr(e)?o7.pixelSize(t):o7.getTableSize(t),dc=(e,t,r)=>{let l=e=>"table"===eS(nN(e)),o=t=>!l(e)||sU(t).rows>1,n=t=>!l(e)||sU(t).columns>1,s=m2(e),a=m8(e)?p:sW,i=t=>{switch(m7(e)){case"section":return s4.section();case"sectionCells":return s4.sectionCells();case"cells":return s4.cells();default:return s4.getTableSectionType(t,"section")}},m=(t,l)=>l.cursor.fold(()=>{let l=rO(t);return Z(l).filter(tF).map(l=>{r.clearSelectedCells(t.dom);let o=e.dom.createRng();return o.selectNode(l.dom),e.selection.setRng(o),e_(l,"data-mce-selected","1"),o})},l=>{let o=sM(l),n=e.dom.createRng();return n.setStart(o.element.dom,o.offset),n.setEnd(o.element.dom,o.offset),e.selection.setRng(n),r.clearSelectedCells(t.dom),k.some(n)}),d=(r,l,o,n)=>(a,d,c=!1)=>{nj(a);let u=eG.fromDom(e.getDoc()),f=nD(o,u,s),g={sizing:dd(e,a),resize:m8(e)?sV():sq(),section:i(a)};return l(a)?r(a,d,f,g).bind(r=>{t.refresh(a.dom),M(r.newRows,t=>{mH(e,t.dom)}),M(r.newCells,t=>{m$(e,t.dom)});let l=m(a,r);return tF(a)&&(nj(a),c||mV(e,a.dom,n)),l.map(e=>({rng:e,effect:n}))}):k.none()},c=d(mO,o,p,mJ),u=d(mR,n,p,mJ),f=d(mC,O,p,mJ),g=d(mT,O,p,mJ),h=d(mS,O,a,mJ),b=d(mD,O,a,mJ),w=d(m_,O,p,mJ),v=d(mL,O,p,mJ),y=d(mW,O,p,mJ),x=d(mI,O,p,mJ),C=d(mP,O,p,mJ),T=d(mF,O,p,mJ),S=d(mM,O,p,mQ),D=d(mz,O,p,mJ),R=d(mj,O,p,mJ),E=d(mk,O,p,mJ),A=d(mE,O,p,mJ),B=d(mA,O,p,mJ),N=d(mB,O,p,mJ),z=d(mN,O,p,mJ);return{deleteRow:c,deleteColumn:u,insertRowsBefore:f,insertRowsAfter:g,insertColumnsBefore:h,insertColumnsAfter:b,mergeCells:w,unmergeCells:v,pasteColsBefore:y,pasteColsAfter:x,pasteRowsBefore:C,pasteRowsAfter:T,pasteCells:S,makeCellsHeader:D,unmakeCellsHeader:R,makeColumnsHeader:E,unmakeColumnsHeader:A,makeRowsHeader:B,makeRowsBody:N,makeRowsFooter:z,getTableRowType:mc,getTableCellType:md,getTableColType:mm}},du=(e,t,r)=>{let l=rp(e,t,1);1===r||l<=1?eP(e,t):e_(e,t,Math.min(r,l))},df=(e,t)=>r=>{let l=r.column+r.colspan-1,o=r.column;return l>=e&&o<t},dg=(e,t,r)=>{if(!lU.hasColumns(e))return[];{let l=P(lU.justColumns(e),df(t,r)),o=L(l,e=>{let l=th(e.element);return du(l,"span",r-t),l}),n=eG.fromTag("colgroup");return tm(n,o),[n]}},dh=(e,t,r)=>L(e.all,e=>{let l=P(e.cells,df(t,r)),o=L(l,e=>{let l=th(e.element);return du(l,"colspan",r-t),l}),n=eG.fromTag("tr");return tm(n,o),n}),dp=(e,t)=>{let r=lU.fromTable(e),l=av(r,t);return l.map(e=>{let t=e[e.length-1],l=e[0].column,o=t.column+t.colspan,n=dg(r,l,o),s=dh(r,l,o);return[...n,...s]})},db=(e,t,r)=>{let l=lU.fromTable(e),o=aw(l,t);return o.bind(e=>{let t=ai(l,r,!1),o=lB(t).rows,n=o.slice(e[0].row,e[e.length-1].row+e[e.length-1].rowspan),s=G(n,e=>{let t=P(e.cells,e=>!e.isLocked);return t.length>0?[{...e,cells:t}]:[]}),a=ad(s);return t6(a.length>0,a)}).map(e=>ar(e))},dw=ia.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),dv=(e,t,r)=>{let l=r.substring(0,r.length-e.length),o=parseFloat(l);return l===o.toString()?t(o):dw.invalid(r)},dy=e=>rr(e,"%")?dv("%",dw.percent,e):rr(e,"px")?dv("px",dw.pixels,e):dw.invalid(e),dx={...dw,from:dy},dC=(e,t)=>L(e,e=>{let r=dx.from(e);return r.fold(()=>e,e=>e/t*100+"%",e=>e+"%")}),dT=(e,t,r)=>{let l=r/t;return L(e,e=>{let t=dx.from(e);return t.fold(()=>e,e=>e*l+"px",e=>e/100*r+"px")})},dS=(e,t)=>{let r=e.fold(()=>v(""),e=>v(e/t+"px"),()=>v(100/t+"%"));return _(t,r)},dD=(e,t,r)=>e.fold(()=>t,e=>dT(t,r,e),e=>dC(t,r)),dR=(e,t,r)=>{let l=dx.from(r),o=K(e,e=>"0px"===e)?dS(l,e.length):dD(l,e,t);return dA(o)},dO=(e,t)=>0===e.length?t:F(e,(e,t)=>dx.from(t).fold(v(0),y,y)+e,0),dk=(e,t)=>{let r=Math.floor(e);return{value:r+t,remainder:e-r}},dE=(e,t)=>dx.from(e).fold(v(e),e=>e+t+"px",e=>e+t+"%"),dA=e=>{if(0===e.length)return e;let t=F(e,(e,t)=>{let r=dx.from(t).fold(()=>({value:t,remainder:0}),e=>dk(e,"px"),e=>({value:e+"%",remainder:0}));return{output:[r.value].concat(e.output),remainder:e.remainder+r.remainder}},{output:[],remainder:0}),r=t.output;return r.slice(0,r.length-1).concat([dE(r[r.length-1],Math.round(t.remainder))])},dB=dx.from,dN=(e,t,r)=>{M(t,t=>{let l=e.slice(t.column,t.colspan+t.column),o=dO(l,rx());rm(t.element,"width",o+r)})},dz=(e,t,r)=>{M(t,(t,l)=>{let o=dO([e[l]],rx());rm(t.element,"width",o+r)})},dj=(e,t,r,l)=>{M(r,t=>{let r=e.slice(t.row,t.rowspan+t.row),o=dO(r,rC());rm(t.element,"height",o+l)}),M(t,(t,r)=>{rm(t.element,"height",e[r])})},d_=e=>dB(e).fold(v("px"),v("px"),v("%")),dL=(e,t,r)=>{let l=lU.fromTable(e),o=l.all,n=lU.justCells(l),s=lU.justColumns(l);t.each(t=>{let r=d_(t),o=lx(e),a=oK(l,e),i=dR(a,o,t);lU.hasColumns(l)?dz(i,s,r):dN(i,n,r),rm(e,"width",t)}),r.each(t=>{let r=d_(t),s=l0(e),a=oZ(l,e,oa),i=dR(a,s,t);dj(i,o,n,r),rm(e,"height",t)})},dM=e=>{eP(e,"width")},dW=e=>{let t=o_(e);dL(e,k.some(t),k.none()),dM(e)},dI=e=>{let t=oj(e);dL(e,k.some(t),k.none()),dM(e)},dP=e=>{rg(e,"width");let t=rk(e),r=t.length>0?t:rO(e);M(r,e=>{rg(e,"width"),dM(e)}),dM(e)},dF={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},dH=()=>eG.fromTag("th"),d$=()=>eG.fromTag("td"),dV=()=>eG.fromTag("col"),dq=(e,t,r,l)=>{let o=eG.fromTag("tr");for(let n=0;n<e;n++){let e=l<t||n<r?dH():d$();n<r&&e_(e,"scope","row"),l<t&&e_(e,"scope","col"),tn(e,eG.fromTag("br")),tn(o,e)}return o},dU=e=>{let t=eG.fromTag("colgroup");return _(e,()=>tn(t,dV())),t},dG=(e,t,r,l)=>_(e,e=>dq(t,r,l,e)),dK=(e,t,r,l,o,n=dF)=>{let s=eG.fromTag("table"),a="cells"!==o;rd(s,n.styles),eL(s,n.attributes),n.colGroups&&tn(s,dU(t));let i=Math.min(e,r);if(a&&r>0){let e=eG.fromTag("thead");tn(s,e);let n=dG(r,t,"sectionCells"===o?i:0,l);tm(e,n)}let m=eG.fromTag("tbody");tn(s,m);let d=dG(a?e-i:e,t,a?0:r,l);return tm(m,d),s},dY=e=>e.dom.innerHTML,dJ=e=>{let t=eG.fromTag("div"),r=eG.fromDom(e.dom.cloneNode(!0));return tn(t,r),dY(t)},dQ=(e,t)=>{e.selection.select(t.dom,!0),e.selection.collapse(!0)},dX=(e,t)=>{t3(t,"td,th").each(C(dQ,e))},dZ=(e,t)=>{M(tY(t,"tr"),t=>{mH(e,t.dom),M(tY(t,"th,td"),t=>{m$(e,t.dom)})})},d0=e=>s(e)&&-1!==e.indexOf("%"),d1=(e,t,r,l,o)=>{let n=di(e),s={styles:n,attributes:da(e),colGroups:dm(e)};return e.undoManager.ignore(()=>{let n=dK(r,t,o,l,m7(e),s);e_(n,"data-mce-id","__mce");let a=dJ(n);e.insertContent(a),e.addVisual()}),t3(nN(e),'table[data-mce-id="__mce"]').map(t=>(dr(e)?dI(t):dl(e)?dP(t):(dt(e)||d0(n.width))&&dW(t),nj(t),eP(t,"data-mce-id"),dZ(e,t),dX(e,t),t.dom)).getOrNull()},d9=(e,t,r,l={})=>{let o=e=>h(e)&&e>0;if(!(o(t)&&o(r)))return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null;{let o=l.headerRows||0,n=l.headerColumns||0;return d1(e,r,t,n,o)}};var d3=tinymce.util.Tools.resolve("tinymce.FakeClipboard");let d2="x-tinymce/dom-table-",d5=d2+"rows",d7=d2+"columns",d4=e=>{let t=d3.FakeClipboardItem(e);d3.write([t])},d6=e=>{var t;let r=null!==(t=d3.read())&&void 0!==t?t:[];return et(r,t=>k.from(t.getType(e)))},d8=e=>{d6(e).isSome()&&d3.clear()},ce=e=>{e.fold(cr,e=>d4({[d5]:e}))},ct=()=>d6(d5),cr=()=>d8(d5),cl=e=>{e.fold(cn,e=>d4({[d7]:e}))},co=()=>d6(d7),cn=()=>d8(d7),cs=e=>sS(n_(e),nz(e)).filter(nF),ca=e=>sD(n_(e),nz(e)).filter(nF),ci=(e,t)=>{let r=nz(e),l=()=>cs(e).each(t=>{rE(t,r).filter(T(r)).each(t=>{let r=eG.fromText("");if(tl(t,r),tc(t),e.dom.isEmpty(e.getBody()))e.setContent(""),e.selection.setCursorLocation();else{let t=e.dom.createRng();t.setStart(r.dom,0),t.setEnd(r.dom,0),e.selection.setRng(t),e.nodeChanged()}})}),o=t=>cs(e).each(l=>{let o=dl(e)||dr(e)||dt(e);o||rE(l,r).each(r=>{"relative"!==t||oL(r)?"fixed"!==t||oM(r)?"responsive"!==t||oW(r)||dP(r):dI(r):dW(r),nj(r),mV(e,r.dom,mJ)})}),n=e=>rE(e,r),i=t=>ca(e).bind(e=>n(e).map(r=>t(r,e))),m=(t,r)=>{i(t=>{e.formatter.toggle("tableclass",{value:r},t.dom),mV(e,t.dom,mY)})},d=(t,r)=>{i(t=>{let l=sR(e),o=K(l,t=>e.formatter.match("tablecellclass",{value:r},t.dom)),n=o?e.formatter.remove:e.formatter.apply;M(l,e=>n("tablecellclass",{value:r},e.dom)),mV(e,t.dom,mY)})},c=()=>{cs(e).each(t=>{rE(t,r).each(r=>{t9(r,"caption").fold(()=>{let t=eG.fromTag("caption");tn(t,eG.fromText("Caption")),ts(r,t,0),e.selection.setCursorLocation(t.dom,0)},l=>{ez("caption")(t)&&eQ("td",r).each(t=>e.selection.setCursorLocation(t.dom,0)),tc(l)}),mV(e,r.dom,mJ)})})},u=t=>{e.focus()},f=(t,r=!1)=>i((l,o)=>{let n=sv(sR(e),l,o);t(l,n,r).each(u)}),g=()=>i((t,r)=>{let l=sv(sR(e),t,r),o=nD(p,eG.fromDom(e.getDoc()),k.none());return db(t,l,o)}),h=()=>i((t,r)=>{let l=sv(sR(e),t,r);return dp(t,l)}),b=(t,r)=>r().each(r=>{let l=L(r,e=>th(e));i((r,o)=>{let n=nR(eG.fromDom(e.getDoc())),s=sx(sR(e),o,l,n);t(r,s).each(u)})}),w=e=>(t,r)=>eu(r,"type").each(t=>{f(e(t),r.no_events)});eo({mceTableSplitCells:()=>f(t.unmergeCells),mceTableMergeCells:()=>f(t.mergeCells),mceTableInsertRowBefore:()=>f(t.insertRowsBefore),mceTableInsertRowAfter:()=>f(t.insertRowsAfter),mceTableInsertColBefore:()=>f(t.insertColumnsBefore),mceTableInsertColAfter:()=>f(t.insertColumnsAfter),mceTableDeleteCol:()=>f(t.deleteColumn),mceTableDeleteRow:()=>f(t.deleteRow),mceTableCutCol:()=>h().each(e=>{cl(e),f(t.deleteColumn)}),mceTableCutRow:()=>g().each(e=>{ce(e),f(t.deleteRow)}),mceTableCopyCol:()=>h().each(e=>cl(e)),mceTableCopyRow:()=>g().each(e=>ce(e)),mceTablePasteColBefore:()=>b(t.pasteColsBefore,co),mceTablePasteColAfter:()=>b(t.pasteColsAfter,co),mceTablePasteRowBefore:()=>b(t.pasteRowsBefore,ct),mceTablePasteRowAfter:()=>b(t.pasteRowsAfter,ct),mceTableDelete:l,mceTableCellToggleClass:d,mceTableToggleClass:m,mceTableToggleCaption:c,mceTableSizingMode:(e,t)=>o(t),mceTableCellType:w(e=>"th"===e?t.makeCellsHeader:t.unmakeCellsHeader),mceTableColType:w(e=>"th"===e?t.makeColumnsHeader:t.unmakeColumnsHeader),mceTableRowType:w(e=>{switch(e){case"header":return t.makeRowsHeader;case"footer":return t.makeRowsFooter;default:return t.makeRowsBody}})},(t,r)=>e.addCommand(r,t)),e.addCommand("mceInsertTable",(t,r)=>{d9(e,r.rows,r.columns,r.options)}),e.addCommand("mceTableApplyCellStyle",(t,r)=>{let l=e=>"tablecell"+e.toLowerCase().replace("-","");if(!a(r))return;let o=P(sR(e),nF);if(0===o.length)return;let i=em(r,(t,r)=>e.formatter.has(l(r))&&s(t));eh(i)||(eo(i,(t,r)=>{let n=l(r);M(o,r=>{""===t?e.formatter.remove(n,{value:null},r.dom,!0):e.formatter.apply(n,{value:t},r.dom)})}),n(o[0]).each(t=>mV(e,t.dom,mY)))})},cm=(e,t)=>{let r=nz(e),l=t=>sD(n_(e)).bind(l=>rE(l,r).map(r=>{let o=sv(sR(e),r,l);return t(r,o)})).getOr("");eo({mceTableRowType:()=>l(t.getTableRowType),mceTableCellType:()=>l(t.getTableCellType),mceTableColType:()=>l(t.getTableColType)},(t,r)=>e.addQueryValueHandler(r,t))},cd=ia.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),cc=(e,t,r,l)=>e.fold(t,r,l),cu=e=>e.fold(y,y,y),cf=cd.before,cg=cd.on,ch=cd.after,cp={before:cf,on:cg,after:ch,cata:cc,getStart:cu},cb=(e,t)=>({selection:e,kill:t}),cw={create:cb},cv=(e,t)=>{let r=e.document.createRange();return r.selectNode(t.dom),r},cy=(e,t)=>{let r=e.document.createRange();return cx(r,t),r},cx=(e,t)=>e.selectNodeContents(t.dom),cC=(e,t)=>{t.fold(t=>{e.setStartBefore(t.dom)},(t,r)=>{e.setStart(t.dom,r)},t=>{e.setStartAfter(t.dom)})},cT=(e,t)=>{t.fold(t=>{e.setEndBefore(t.dom)},(t,r)=>{e.setEnd(t.dom,r)},t=>{e.setEndAfter(t.dom)})},cS=(e,t,r)=>{let l=e.document.createRange();return cC(l,t),cT(l,r),l},cD=(e,t,r,l,o)=>{let n=e.document.createRange();return n.setStart(t.dom,r),n.setEnd(l.dom,o),n},cR=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}),cO=e=>{let t=e.getClientRects(),r=t.length>0?t[0]:e.getBoundingClientRect();return r.width>0||r.height>0?k.some(r).map(cR):k.none()},ck=ia.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),cE=(e,t,r)=>t(eG.fromDom(r.startContainer),r.startOffset,eG.fromDom(r.endContainer),r.endOffset),cA=(e,t)=>t.match({domRange:e=>({ltr:v(e),rtl:k.none}),relative:(t,r)=>({ltr:rL(()=>cS(e,t,r)),rtl:rL(()=>k.some(cS(e,r,t)))}),exact:(t,r,l,o)=>({ltr:rL(()=>cD(e,t,r,l,o)),rtl:rL(()=>k.some(cD(e,l,o,t,r)))})}),cB=(e,t)=>{let r=t.ltr();if(!r.collapsed)return cE(e,ck.ltr,r);{let l=t.rtl().filter(e=>!1===e.collapsed);return l.map(e=>ck.rtl(eG.fromDom(e.endContainer),e.endOffset,eG.fromDom(e.startContainer),e.startOffset)).getOrThunk(()=>cE(e,ck.ltr,r))}},cN=(e,t)=>{let r=cA(e,t);return cB(e,r)},cz=(e,t)=>{let r=cN(e,t);return r.match({ltr:(t,r,l,o)=>{let n=e.document.createRange();return n.setStart(t.dom,r),n.setEnd(l.dom,o),n},rtl:(t,r,l,o)=>{let n=e.document.createRange();return n.setStart(l.dom,o),n.setEnd(t.dom,r),n}})};ck.ltr,ck.rtl;let cj=(e,t,r,l)=>({start:e,soffset:t,finish:r,foffset:l}),c_={create:cj},cL=(e,t,r,l)=>({start:cp.on(e,t),finish:cp.on(r,l)}),cM={create:cL},cW=(e,t)=>{let r=cz(e,t);return c_.create(eG.fromDom(r.startContainer),r.startOffset,eG.fromDom(r.endContainer),r.endOffset)},cI=cM.create,cP=(e,t,r,l,o,n,s)=>eX(r,o)&&l===n?k.none():t2(r,"td,th",t).bind(r=>t2(o,"td,th",t).bind(l=>cF(e,t,r,l,s))),cF=(e,t,r,l,o)=>eX(r,l)?k.none():so(r,l,t).bind(t=>{let l=t.boxes.getOr([]);return l.length>1?(o(e,l,t.start,t.finish),k.some(cw.create(k.some(cI(r,0,r,ni(r))),!0))):k.none()}),cH=(e,t,r,l,o)=>{let n=e=>(o.clearBeforeUpdate(r),o.selectRange(r,e.boxes,e.start,e.finish),e.boxes);return sm(l,e,t,o.firstSelectedSelector,o.lastSelectedSelector).map(n)},c$=(e,t)=>({item:e,mode:t}),cV=(e,t,r,l=cq)=>e.property().parent(t).map(e=>c$(e,l)),cq=(e,t,r,l=cU)=>r.sibling(e,t).map(e=>c$(e,l)),cU=(e,t,r,l=cU)=>{let o=e.property().children(t),n=r.first(o);return n.map(e=>c$(e,l))},cG=[{current:cV,next:cq,fallback:k.none()},{current:cq,next:cU,fallback:k.some(cV)},{current:cU,next:cU,fallback:k.some(cq)}],cK=(e,t,r,l,o=cG)=>{let n=V(o,e=>e.current===r);return n.bind(r=>r.current(e,t,l,r.next).orThunk(()=>r.fallback.bind(r=>cK(e,t,r,l))))},cY=()=>{let e=(e,t)=>e.query().prevSibling(t),t=e=>e.length>0?k.some(e[e.length-1]):k.none();return{sibling:e,first:t}},cJ=()=>{let e=(e,t)=>e.query().nextSibling(t),t=e=>e.length>0?k.some(e[0]):k.none();return{sibling:e,first:t}},cQ={left:cY,right:cJ},cX=(e,t,r,l,o,n)=>{let s=cK(e,t,l,o);return s.bind(t=>n(t.item)?k.none():r(t.item)?k.some(t.item):cX(e,t.item,r,t.mode,o,n))},cZ=(e,t,r,l)=>cX(e,t,r,cq,cQ.left(),l),c0=(e,t,r,l)=>cX(e,t,r,cq,cQ.right(),l),c1=e=>t=>0===e.property().children(t).length,c9=(e,t,r)=>c2(e,t,c1(e),r),c3=(e,t,r)=>c5(e,t,c1(e),r),c2=cZ,c5=c0,c7=n3(),c4=(e,t)=>c9(c7,e,t),c6=(e,t)=>c3(c7,e,t),c8=(e,t,r)=>c2(c7,e,t,r),ue=(e,t,r)=>c5(c7,e,t,r),ut=(e,t,r)=>tQ(e,t,r).isSome(),ur=ia.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),ul=(e,t,r)=>{let l=e.getRect(t),o=e.getRect(r);return o.right>l.left&&o.left<l.right},uo=e=>t2(e,"tr"),un=(e,t,r,l,o,n,s)=>t2(l,"td,th",s).bind(r=>t2(t,"td,th",s).map(t=>eX(r,t)?eX(l,r)&&ni(r)===o?n(t):ur.none("in same cell"):st(uo,[r,t]).fold(()=>ul(e,t,r)?ur.success():n(t),e=>n(t)))).getOr(ur.none("default")),us=(e,t,r,l,o)=>e.fold(t,r,l,o),ua={...ur,verify:un,cata:us},ui=(e,t,r,l)=>({parent:e,children:t,element:r,index:l}),um=e=>e2(e).bind(t=>{let r=e8(t);return ud(r,e).map(l=>ui(t,r,e,l))}),ud=(e,t)=>q(e,C(eX,t)),uc=ez("br"),uu=(e,t,r)=>t(e,r).bind(e=>eA(e)&&0===nn(e).trim().length?uu(e,t,r):k.some(e)),uf=(e,t,r)=>r.traverse(t).orThunk(()=>uu(t,r.gather,e)).map(r.relative),ug=(e,t)=>te(e,t).filter(uc).orThunk(()=>te(e,t-1).filter(uc)),uh=(e,t,r,l)=>ug(t,r).bind(t=>l.traverse(t).fold(()=>uu(t,l.gather,e).map(l.relative),e=>um(e).map(e=>cp.on(e.parent,e.index)))),up=(e,t,r,l)=>{let o=uc(t)?uf(e,t,l):uh(e,t,r,l);return o.map(e=>({start:e,finish:e}))},ub=e=>ua.cata(e,e=>k.none(),()=>k.none(),e=>k.some(sN(e,0)),e=>k.some(sN(e,ni(e)))),uw=(e,t)=>({left:e.left,top:e.top+t,right:e.right,bottom:e.bottom+t}),uv=(e,t)=>({left:e.left,top:e.top-t,right:e.right,bottom:e.bottom-t}),uy=(e,t,r)=>({left:e.left+t,top:e.top+r,right:e.right+t,bottom:e.bottom+r}),ux=(e,t,r)=>r>=0&&r<ni(t)?e.getRangedRect(t,r,t,r+1):r>0?e.getRangedRect(t,r-1,t,r):k.none(),uC=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom}),uT=(e,t)=>k.some(e.getRect(t)),uS=(e,t,r)=>eE(t)?uT(e,t).map(uC):eA(t)?ux(e,t,r).map(uC):k.none(),uD=(e,t)=>eE(t)?uT(e,t).map(uC):eA(t)?e.getRangedRect(t,0,t,ni(t)).map(uC):k.none(),uR=ia.generate([{none:[]},{retry:["caret"]}]),uO=(e,t)=>e.left<t.left||1>Math.abs(t.right-e.left)||e.left>t.right,uk=(e,t,r)=>tX(t,iP).fold(R,t=>uD(e,t).exists(e=>uO(r,e))),uE=(e,t,r,l,o)=>{let n=uw(o,5);return 1>Math.abs(r.bottom-l.bottom)||r.top>o.bottom?uR.retry(n):r.top===o.bottom?uR.retry(uw(o,1)):uk(e,t,o)?uR.retry(uy(n,5,0)):uR.none()},uA=(e,t,r,l,o)=>{let n=uv(o,5);return 1>Math.abs(r.top-l.top)||r.bottom<o.top?uR.retry(n):r.bottom===o.top?uR.retry(uv(o,1)):uk(e,t,o)?uR.retry(uy(n,5,0)):uR.none()},uB=(e,t,r)=>e.elementFromPoint(t,r).filter(e=>"table"===eS(e)).isSome(),uN=(e,t,r,l,o)=>uz(e,t,r,t.move(l,5),o),uz=(e,t,r,l,o)=>0===o?k.some(l):uB(e,l.left,t.point(l))?uN(e,t,r,l,o-1):e.situsFromPoint(l.left,t.point(l)).bind(n=>n.start.fold(k.none,n=>uD(e,n).bind(s=>t.adjuster(e,n,s,r,l).fold(k.none,l=>uz(e,t,r,l,o-1))).orThunk(()=>k.some(l)),k.none)),uj=(e,t,r)=>e.point(t)>r.getInnerHeight()?k.some(e.point(t)-r.getInnerHeight()):0>e.point(t)?k.some(-e.point(t)):k.none(),u_=(e,t,r)=>{let l=e.move(r,5),o=uz(t,e,r,l,100).getOr(l);return uj(e,o,t).fold(()=>t.situsFromPoint(o.left,e.point(o)),r=>(t.scrollBy(0,r),t.situsFromPoint(o.left,e.point(o)-r)))},uL={tryUp:C(u_,{point:e=>e.top,adjuster:uA,move:uv,gather:c4}),tryDown:C(u_,{point:e=>e.bottom,adjuster:uE,move:uw,gather:c6}),getJumpSize:v(5)},uM=(e,t,r)=>e.getSelection().bind(l=>up(t,l.finish,l.foffset,r).fold(()=>k.some(sN(l.finish,l.foffset)),o=>{let n=e.fromSitus(o),s=ua.verify(e,l.finish,l.foffset,n.finish,n.foffset,r.failure,t);return ub(s)})),uW=(e,t,r,l,o,n)=>0===n?k.none():uF(e,t,r,l,o).bind(s=>{let a=e.fromSitus(s),i=ua.verify(e,r,l,a.finish,a.foffset,o.failure,t);return ua.cata(i,()=>k.none(),()=>k.some(s),s=>eX(r,s)&&0===l?uI(e,r,l,uv,o):uW(e,t,s,0,o,n-1),s=>eX(r,s)&&l===ni(s)?uI(e,r,l,uw,o):uW(e,t,s,ni(s),o,n-1))}),uI=(e,t,r,l,o)=>uS(e,t,r).bind(t=>uP(e,o,l(t,uL.getJumpSize()))),uP=(e,t,r)=>{let l=lc().browser;return l.isChromium()||l.isSafari()||l.isFirefox()?t.retry(e,r):k.none()},uF=(e,t,r,l,o)=>uS(e,r,l).bind(t=>uP(e,o,t)),uH=(e,t,r)=>uM(e,t,r).bind(l=>uW(e,t,l.element,l.offset,r,20).map(e.fromSitus)),u$=(e,t)=>ut(e,e=>e2(e).exists(e=>eX(e,t))),uV=(e,t,r,l,o)=>t2(l,"td,th",t).bind(l=>t2(l,"table",t).bind(n=>u$(o,n)?uH(e,t,r).bind(e=>t2(e.finish,"td,th",t).map(t=>({start:l,finish:t,range:e}))):k.none())),uq=(e,t,r,l,o,n)=>n(l,t).orThunk(()=>uV(e,t,r,l,o).map(e=>{let t=e.range;return cw.create(k.some(cI(t.start,t.soffset,t.finish,t.foffset)),!0)})),uU=(e,t)=>t2(e,"tr",t).bind(e=>t2(e,"table",t).bind(r=>{let l=tY(r,"tr");return eX(e,l[0])?c8(r,e=>ng(e).isSome(),t).map(e=>{let t=ni(e);return cw.create(k.some(cI(e,t,e,t)),!0)}):k.none()})),uG=(e,t)=>t2(e,"tr",t).bind(e=>t2(e,"table",t).bind(r=>{let l=tY(r,"tr");return eX(e,l[l.length-1])?ue(r,e=>nf(e).isSome(),t).map(e=>cw.create(k.some(cI(e,0,e,0)),!0)):k.none()})),uK=(e,t,r,l,o,n,s)=>uV(e,r,l,o,n).bind(e=>cF(t,r,e.start,e.finish,s)),uY=e=>{let t=e,r=e=>{t=e};return{get:()=>t,set:r}},uJ=e=>{let t=uY(k.none()),r=()=>t.get().each(e),l=()=>{r(),t.set(k.none())},o=()=>t.get().isSome(),n=()=>t.get(),s=e=>{r(),t.set(k.some(e))};return{clear:l,isSet:o,get:n,set:s}},uQ=()=>{let e=uJ(p),t=t=>e.get().each(t);return{...e,on:t}},uX=(e,t)=>t2(e,"td,th",t),uZ=e=>e5(e).exists(nA),u0=(e,t,r,l)=>{let o=uQ(),n=o.clear,s=n=>{o.on(o=>{l.clearBeforeUpdate(t),uX(n.target,r).each(s=>{so(o,s,r).each(r=>{let o=r.boxes.getOr([]);if(1===o.length){let r=o[0],s="false"===nB(r),a=t5(nE(n.target),r,eX);s&&a&&(l.selectRange(t,o,r,r),e.selectContents(r))}else o.length>1&&(l.selectRange(t,o,r.start,r.finish),e.selectContents(s))})})})},a=e=>{l.clear(t),uX(e.target,r).filter(uZ).each(o.set)},i=e=>{s(e)},m=e=>{s(e),n()};return{clearstate:n,mousedown:a,mouseover:i,mouseup:m}},u1={traverse:e6,gather:c6,relative:cp.before,retry:uL.tryDown,failure:ua.failedDown},u9={traverse:e4,gather:c4,relative:cp.before,retry:uL.tryUp,failure:ua.failedUp},u3=e=>t=>t===e,u2=u3(38),u5=u3(40),u7=e=>e>=37&&e<=40,u4={isBackward:u3(37),isForward:u3(39)},u6={isBackward:u3(39),isForward:u3(37)},u8=e=>{let t=void 0!==e?e.dom:document,r=t.body.scrollLeft||t.documentElement.scrollLeft,l=t.body.scrollTop||t.documentElement.scrollTop;return l9(r,l)},fe=(e,t,r)=>{let l=void 0!==r?r.dom:document,o=l.defaultView;o&&o.scrollBy(e,t)},ft=ia.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),fr=e=>ft.exact(e.start,e.soffset,e.finish,e.foffset),fl=e=>e.match({domRange:e=>eG.fromDom(e.startContainer),relative:(e,t)=>cp.getStart(e),exact:(e,t,r,l)=>e}),fo=ft.domRange,fn=ft.relative,fs=ft.exact,fa=e=>{let t=fl(e);return e3(t)},fi=c_.create,fm={domRange:fo,relative:fn,exact:fs,exactFromRange:fr,getWin:fa,range:fi},fd=(e,t,r)=>{var l,o;return k.from(null===(o=(l=e.dom).caretPositionFromPoint)||void 0===o?void 0:o.call(l,t,r)).bind(t=>{if(null===t.offsetNode)return k.none();let r=e.dom.createRange();return r.setStart(t.offsetNode,t.offset),r.collapse(),k.some(r)})},fc=(e,t,r)=>{var l,o;return k.from(null===(o=(l=e.dom).caretRangeFromPoint)||void 0===o?void 0:o.call(l,t,r))},fu=document.caretPositionFromPoint?fd:document.caretRangeFromPoint?fc:k.none,ff=(e,t,r)=>{let l=eG.fromDom(e.document);return fu(l,t,r).map(e=>c_.create(eG.fromDom(e.startContainer),e.startOffset,eG.fromDom(e.endContainer),e.endOffset))},fg=(e,t)=>{let r=eS(e);return"input"===r?cp.after(e):z(["br","img"],r)?0===t?cp.before(e):cp.after(e):cp.on(e,t)},fh=(e,t)=>{let r=e.fold(cp.before,fg,cp.after),l=t.fold(cp.before,fg,cp.after);return fm.relative(r,l)},fp=(e,t,r,l)=>{let o=fg(e,t),n=fg(r,l);return fm.relative(o,n)},fb=(e,t,r,l)=>{let o=e0(e),n=o.dom.createRange();return n.setStart(e.dom,t),n.setEnd(r.dom,l),n},fw=(e,t,r,l)=>{let o=fb(e,t,r,l),n=eX(e,r)&&t===l;return o.collapsed&&!n},fv=e=>k.from(e.getSelection()),fy=(e,t)=>{fv(e).each(e=>{e.removeAllRanges(),e.addRange(t)})},fx=(e,t,r,l,o)=>{let n=cD(e,t,r,l,o);fy(e,n)},fC=(e,t,r,l,o,n)=>{t.collapse(r.dom,l),t.extend(o.dom,n)},fT=(e,t)=>cN(e,t).match({ltr:(t,r,l,o)=>{fx(e,t,r,l,o)},rtl:(t,r,l,o)=>{fv(e).each(n=>{if(n.setBaseAndExtent)n.setBaseAndExtent(t.dom,r,l.dom,o);else if(n.extend)try{fC(e,n,t,r,l,o)}catch(n){fx(e,l,o,t,r)}else fx(e,l,o,t,r)})}}),fS=(e,t,r,l,o)=>{let n=fp(t,r,l,o);fT(e,n)},fD=(e,t,r)=>{let l=fh(t,r);fT(e,l)},fR=e=>{if(!(e.rangeCount>0))return k.none();{let t=e.getRangeAt(0),r=e.getRangeAt(e.rangeCount-1);return k.some(c_.create(eG.fromDom(t.startContainer),t.startOffset,eG.fromDom(r.endContainer),r.endOffset))}},fO=e=>{if(null===e.anchorNode||null===e.focusNode)return fR(e);{let t=eG.fromDom(e.anchorNode),r=eG.fromDom(e.focusNode);return fw(t,e.anchorOffset,r,e.focusOffset)?k.some(c_.create(t,e.anchorOffset,r,e.focusOffset)):fR(e)}},fk=(e,t,r=!0)=>{let l=(r?cy:cv)(e,t);fy(e,l)},fE=e=>fv(e).filter(e=>e.rangeCount>0).bind(fO),fA=e=>fE(e).map(e=>fm.exact(e.start,e.soffset,e.finish,e.foffset)),fB=(e,t)=>{let r=cz(e,t);return cO(r)},fN=(e,t,r)=>ff(e,t,r),fz=e=>{fv(e).each(e=>e.removeAllRanges())},fj=e=>{let t=(t,r)=>eG.fromPoint(eG.fromDom(e.document),t,r),r=e=>e.dom.getBoundingClientRect(),l=(t,r,l,o)=>{let n=fm.exact(t,r,l,o);return fB(e,n)},o=()=>fA(e).map(t=>cW(e,t)),n=t=>{let r=fm.relative(t.start,t.finish);return cW(e,r)},s=(t,r)=>fN(e,t,r).map(e=>cM.create(e.start,e.soffset,e.finish,e.foffset)),a=()=>{fz(e)},i=(t=!1)=>{fA(e).each(r=>r.fold(e=>e.collapse(t),(r,l)=>{let o=t?r:l;fD(e,o,o)},(r,l,o,n)=>{let s=t?r:o,a=t?l:n;fS(e,s,a,s,a)}))},m=t=>{fk(e,t,!1)},d=t=>{fk(e,t)},c=t=>{fS(e,t.start,t.soffset,t.finish,t.foffset)},u=(t,r)=>{fD(e,t,r)},f=()=>{let t=u8(eG.fromDom(e.document));return t.top},g=(t,r)=>{fe(t,r,eG.fromDom(e.document))};return{elementFromPoint:t,getRect:r,getRangedRect:l,getSelection:o,fromSitus:n,situsFromPoint:s,clearSelection:a,collapseSelection:i,setSelection:c,setRelativeSelection:u,selectNode:m,selectContents:d,getInnerHeight:()=>e.innerHeight,getScrollY:f,scrollBy:g}},f_=(e,t)=>({rows:e,cols:t}),fL=(e,t,r,l)=>{let o=fj(e),n=u0(o,t,r,l);return{clearstate:n.clearstate,mousedown:n.mousedown,mouseover:n.mouseover,mouseup:n.mouseup}},fM=e=>tX(e,ek).exists(nA),fW=(e,t)=>fM(e)||fM(t),fI=(e,t,r,l)=>{let o=fj(e),n=()=>(l.clear(t),k.none()),s=(e,s,a,i,m,d)=>{let c=e.raw,u=c.which,f=!0===c.shiftKey,g=sn(t,l.selectedSelector).fold(()=>(u7(u)&&!f&&l.clearBeforeUpdate(t),u7(u)&&f&&!fW(s,i))?k.none:u5(u)&&f?C(uK,o,t,r,u1,i,s,l.selectRange):u2(u)&&f?C(uK,o,t,r,u9,i,s,l.selectRange):u5(u)?C(uq,o,r,u1,i,s,uG):u2(u)?C(uq,o,r,u9,i,s,uU):k.none,e=>{let r=r=>()=>{let n=et(r,r=>cH(r.rows,r.cols,t,e,l));return n.fold(()=>sa(t,l.firstSelectedSelector,l.lastSelectedSelector).map(e=>{let r=u5(u)||d.isForward(u)?cp.after:cp.before;return o.setRelativeSelection(cp.on(e.first,0),r(e.table)),l.clear(t),cw.create(k.none(),!0)}),e=>k.some(cw.create(k.none(),!0)))};return u7(u)&&f&&!fW(s,i)?k.none:u5(u)&&f?r([f_(1,0)]):u2(u)&&f?r([f_(-1,0)]):d.isBackward(u)&&f?r([f_(0,-1),f_(-1,0)]):d.isForward(u)&&f?r([f_(0,1),f_(1,0)]):u7(u)&&!f?n:k.none});return g()},a=(e,o,n,s,a)=>sn(t,l.selectedSelector).fold(()=>{let i=e.raw,m=i.which,d=!0===i.shiftKey;return d&&u7(m)&&fW(o,s)?cP(t,r,o,n,s,a,l.selectRange):k.none()},k.none);return{keydown:s,keyup:a}},fP=(e,t,r,l)=>{let o=fj(e);return(e,n)=>{l.clearBeforeUpdate(t),so(e,n,r).each(e=>{let r=e.boxes.getOr([]);l.selectRange(t,r,e.start,e.finish),o.selectContents(n),o.collapseSelection()})}},fF=(e,t)=>{let r=eW(e,t);return void 0===r||""===r?[]:r.split(" ")},fH=(e,t,r)=>{let l=fF(e,t),o=l.concat([r]);return e_(e,t,o.join(" ")),!0},f$=(e,t,r)=>{let l=P(fF(e,t),e=>e!==r);return l.length>0?e_(e,t,l.join(" ")):eP(e,t),!1},fV=e=>void 0!==e.dom.classList,fq=e=>fF(e,"class"),fU=(e,t)=>fH(e,"class",t),fG=(e,t)=>f$(e,"class",t),fK=(e,t)=>{fV(e)?e.dom.classList.add(t):fU(e,t)},fY=e=>{let t=fV(e)?e.dom.classList:fq(e);0===t.length&&eP(e,"class")},fJ=(e,t)=>{if(fV(e)){let r=e.dom.classList;r.remove(t)}else fG(e,t);fY(e)},fQ=(e,t)=>fV(e)&&e.dom.classList.contains(t),fX=(e,t)=>{M(t,t=>{fJ(e,t)})},fZ=e=>t=>{fK(t,e)},f0=e=>t=>{fX(t,e)},f1=e=>{let t=fZ(e.selected),r=f0([e.selected,e.lastSelected,e.firstSelected]),l=t=>{let l=tY(t,e.selectedSelector);M(l,r)},o=(r,o,n,s)=>{l(r),M(o,t),fK(n,e.firstSelected),fK(s,e.lastSelected)};return{clearBeforeUpdate:l,clear:l,selectRange:o,selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}},f9=(e,t,r)=>{let l=t=>{eP(t,e.selected),eP(t,e.firstSelected),eP(t,e.lastSelected)},o=t=>{e_(t,e.selected,"1")},n=e=>{s(e),r()},s=t=>{let r=tY(t,`${e.selectedSelector},${e.firstSelectedSelector},${e.lastSelectedSelector}`);M(r,l)},a=(r,l,s,a)=>{n(r),M(l,o),e_(s,e.firstSelected,"1"),e_(a,e.lastSelected,"1"),t(l,s,a)};return{clearBeforeUpdate:s,clear:n,selectRange:a,selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}},f3={byClass:f1,byAttr:f9},f2=(e,t,r,l)=>{switch(e.tag){case"none":return t();case"single":return l(e.element);case"multiple":return r(e.elements)}},f5=()=>({tag:"none"}),f7=e=>({tag:"multiple",elements:e}),f4=e=>({tag:"single",element:e}),f6=(e,t,r)=>{let l=()=>sd(e(),r).fold(()=>t().fold(f5,f4),f7);return{get:l}},f8=(e,t)=>{let r=e.slice(0,t[t.length-1].row+1),l=ad(r);return G(l,e=>{let r=e.cells.slice(0,t[t.length-1].column+1);return L(r,e=>e.element)})},ge=(e,t)=>{let r=e.slice(t[0].row+t[0].rowspan-1,e.length),l=ad(r);return G(l,e=>{let r=e.cells.slice(t[0].column+t[0].colspan-1,e.cells.length);return L(r,e=>e.element)})},gt=(e,t,r)=>{let l=lU.fromTable(e),o=aw(l,t);return o.map(e=>{let t=ai(l,r,!1),{rows:o}=lB(t),n=f8(o,e),s=ge(o,e);return{upOrLeftCells:n,downOrRightCells:s}})},gr=(e,t,r,l,o,n,s)=>({target:e,x:t,y:r,stop:l,prevent:o,kill:n,raw:s}),gl=e=>{let t=eG.fromDom(tI(e).getOr(e.target)),r=()=>e.stopPropagation(),l=()=>e.preventDefault(),o=b(l,r);return gr(t,e.clientX,e.clientY,r,l,o,e)},go=(e,t)=>r=>{e(r)&&t(gl(r))},gn=(e,t,r,l,o)=>{let n=go(r,l);return e.dom.addEventListener(t,n,o),{unbind:C(ga,e,t,n,o)}},gs=(e,t,r,l)=>gn(e,t,r,l,!1),ga=(e,t,r,l)=>{e.dom.removeEventListener(t,r,l)},gi=(e,t,r)=>gs(e,t,O,r),gm=e=>!fQ(eG.fromDom(e.target),"ephox-snooker-resizer-bar"),gd=(e,t)=>{let r=f6(()=>eG.fromDom(e.getBody()),()=>sD(n_(e),nz(e)),sw.selectedSelector),l=(t,r,l)=>{let o=rE(r);o.each(o=>{let n=m2(e),s=nD(p,eG.fromDom(e.getDoc()),n),a=sR(e),i=gt(o,{selection:a},s);mq(e,t,r,l,i)})},o=()=>mU(e),n=f3.byAttr(sw,l,o);e.on("init",r=>{let l=e.getWin(),o=nN(e),s=nz(e),a=()=>{let t=e.selection,r=eG.fromDom(t.getStart()),l=eG.fromDom(t.getEnd()),s=st(rE,[r,l]);s.fold(()=>n.clear(o),p)},i=fL(l,o,s,n),m=fI(l,o,s,n),d=fP(l,o,s,n),c=e=>!0===e.raw.shiftKey;e.on("TableSelectorChange",e=>d(e.start,e.finish));let u=(t,r)=>{c(t)&&(r.kill&&t.kill(),r.selection.each(t=>{let r=fm.relative(t.start,t.finish),o=cz(l,r);e.selection.setRng(o)}))},f=t=>{let r=gl(t);if(r.raw.shiftKey&&u7(r.raw.which)){let t=e.selection.getRng(),l=eG.fromDom(t.startContainer),o=eG.fromDom(t.endContainer);m.keyup(r,l,t.startOffset,o,t.endOffset).each(e=>{u(r,e)})}},g=r=>{let l=gl(r);t.hide();let o=e.selection.getRng(),n=eG.fromDom(o.startContainer),s=eG.fromDom(o.endContainer),a=lQ(u4,u6)(eG.fromDom(e.selection.getStart()));m.keydown(l,n,o.startOffset,s,o.endOffset,a).each(e=>{u(l,e)}),t.show()},h=e=>0===e.button,b=e=>void 0===e.buttons||(1&e.buttons)!=0,w=e=>{i.clearstate()},v=e=>{h(e)&&gm(e)&&i.mousedown(gl(e))},y=e=>{b(e)&&gm(e)&&i.mouseover(gl(e))},x=e=>{h(e)&&gm(e)&&i.mouseup(gl(e))},C=(()=>{let e=uY(eG.fromDom(o)),t=uY(0),r=r=>{let l=eG.fromDom(r.target);if(ez("td")(l)||ez("th")(l)){let o=e.get(),n=t.get();eX(o,l)&&r.timeStamp-n<300&&(r.preventDefault(),d(l,l))}e.set(l),t.set(r.timeStamp)};return{touchEnd:r}})();e.on("dragstart",w),e.on("mousedown",v),e.on("mouseover",y),e.on("mouseup",x),e.on("touchend",C.touchEnd),e.on("keyup",f),e.on("keydown",g),e.on("NodeChange",a)}),e.on("PreInit",()=>{e.serializer.addTempAttr(sw.firstSelected),e.serializer.addTempAttr(sw.lastSelected)});let s=e=>n.clear(eG.fromDom(e)),a=()=>f2(r.get(),v([]),e=>L(e,e=>e.dom),e=>[e.dom]);return{getSelectedCells:a,clearSelectedCells:s}},gc=e=>{let t=[],r=e=>{if(void 0===e)throw Error("Event bind error: undefined handler");t.push(e)},l=e=>{t=P(t,t=>t!==e)},o=(...r)=>{let l={};M(e,(e,t)=>{l[e]=r[t]}),M(t,e=>{e(l)})};return{bind:r,unbind:l,trigger:o}},gu=e=>{let t=en(e,e=>({bind:e.bind,unbind:e.unbind})),r=en(e,e=>e.trigger);return{registry:t,trigger:r}},gf=(e,t)=>{let r=null,l=()=>{m(r)||(clearTimeout(r),r=null)},o=(...o)=>{l(),r=setTimeout(()=>{r=null,e.apply(null,o)},t)};return{cancel:l,throttle:o}},gg=e=>e.slice(0).sort(),gh=(e,t)=>{throw Error("All required keys ("+gg(e).join(", ")+") were not specified. Specified keys were: "+gg(t).join(", ")+".")},gp=e=>{throw Error("Unsupported keys for object: "+gg(e).join(", "))},gb=(e,t)=>{if(!i(t))throw Error("The "+e+" fields must be an array. Was: "+t+".");M(t,t=>{if(!s(t))throw Error("The value "+t+" in the "+e+" fields was not a string.")})},gw=(e,t)=>{throw Error("All values need to be of type: "+t+". Keys ("+gg(e).join(", ")+") were not.")},gv=e=>{let t=gg(e),r=V(t,(e,r)=>r<t.length-1&&e===t[r+1]);r.each(e=>{throw Error("The field: "+e+" occurs more than once in the combined fields: ["+t.join(", ")+"].")})},gy=(e,t)=>gx(e,t,{validate:g,label:"function"}),gx=(e,t,r)=>{if(0===t.length)throw Error("You must specify at least one required field.");return gb("required",t),gv(t),l=>{let o=er(l),n=K(t,e=>z(o,e));n||gh(t,o),e(t,o);let s=P(t,e=>!r.validate(l[e],e));return s.length>0&&gw(s,r.label),l}},gC=(e,t)=>{let r=P(t,t=>!z(e,t));r.length>0&&gp(r)},gT=e=>gy(gC,e),gS=gT(["compare","extract","mutate","sink"]),gD=gT(["element","start","stop","destroy"]),gR=gT(["forceDrop","drop","move","delayDrop"]),gO=()=>{let e=k.none(),t=()=>{e=k.none()},r=(t,r)=>{let l=e.map(e=>t.compare(e,r));return e=k.some(r),l},l=(e,t)=>{let l=t.extract(e);l.each(e=>{let l=r(t,e);l.each(e=>{o.trigger.move(e)})})},o=gu({move:gc(["info"])});return{onEvent:l,reset:t,events:o.registry}},gk=()=>{let e=gu({move:gc(["info"])});return{onEvent:p,reset:p,events:e.registry}},gE=()=>{let e=gk(),t=gO(),r=e,l=()=>{r.reset(),r=t},o=()=>{r.reset(),r=e},n=(e,t)=>{r.onEvent(e,t)};return{on:l,off:o,isOn:()=>r===t,onEvent:n,events:t.events}},gA=(e,t,r)=>{let l=!1,o=gu({start:gc([]),stop:gc([])}),n=gE(),s=()=>{f.stop(),n.isOn()&&(n.off(),o.trigger.stop())},a=gf(s,200),i=e=>{f.start(e),n.on(),o.trigger.start()},m=e=>{a.cancel(),n.onEvent(e,t)};n.events.move.bind(r=>{t.mutate(e,r.info)});let d=()=>{l=!0},c=()=>{l=!1},u=e=>(...t)=>{l&&e.apply(null,t)},f=t.sink(gR({forceDrop:s,drop:u(s),move:u(m),delayDrop:u(a.throttle)}),r),g=()=>{f.destroy()};return{element:f.element,go:i,on:d,off:c,isActive:()=>l,destroy:g,events:o.registry}},gB=e=>{let t=e.replace(/\./g,"-");return{resolve:e=>t+"-"+e}},gN=gB("ephox-dragster"),gz=gN.resolve,gj=e=>{let t={layerClass:gz("blocker"),...e},r=eG.fromTag("div");e_(r,"role","presentation"),rd(r,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),fK(r,gz("blocker")),fK(r,t.layerClass);let l=v(r),o=()=>{tc(r)};return{element:l,destroy:o}},g_=(e,t)=>l9(t.left-e.left,t.top-e.top),gL=e=>k.some(l9(e.x,e.y)),gM=(e,t)=>{e.mutate(t.left,t.top)},gW=(e,t)=>{let r=gj(t),l=gi(r.element(),"mousedown",e.forceDrop),o=gi(r.element(),"mouseup",e.drop),n=gi(r.element(),"mousemove",e.move),s=gi(r.element(),"mouseout",e.delayDrop),a=()=>{r.destroy(),o.unbind(),n.unbind(),s.unbind(),l.unbind()},i=e=>{tn(e,r.element())},m=()=>{tc(r.element())};return gD({element:r.element,start:i,stop:m,destroy:a})};var gI=gS({compare:g_,extract:gL,sink:gW,mutate:gM});let gP=(e,t={})=>{var r;let l=null!==(r=t.mode)&&void 0!==r?r:gI;return gA(e,l,t)},gF=gB("ephox-snooker"),gH=gF.resolve,g$=()=>{let e=gu({drag:gc(["xDelta","yDelta"])}),t=(t,r)=>{e.trigger.drag(t,r)};return{mutate:t,events:e.registry}},gV=()=>{let e=gu({drag:gc(["xDelta","yDelta","target"])}),t=k.none(),r=g$();r.events.drag.bind(r=>{t.each(t=>{e.trigger.drag(r.xDelta,r.yDelta,t)})});let l=e=>{t=k.some(e)};return{assign:l,get:()=>t,mutate:r.mutate,events:e.registry}},gq=(e,t,r,l,o)=>{let n=eG.fromTag("div");return rd(n,{position:"absolute",left:t-l/2+"px",top:r+"px",height:o+"px",width:l+"px"}),eL(n,{"data-column":e,role:"presentation"}),n},gU=(e,t,r,l,o)=>{let n=eG.fromTag("div");return rd(n,{position:"absolute",left:t+"px",top:r-o/2+"px",height:o+"px",width:l+"px"}),eL(n,{"data-row":e,role:"presentation"}),n},gG=gH("resizer-bar"),gK=gH("resizer-rows"),gY=gH("resizer-cols"),gJ=(e,t)=>G(e.all,(e,r)=>t(e.element)?[r]:[]),gQ=(e,t)=>{let r=[];return _(e.grid.columns,l=>{let o=lU.getColumnAt(e,l).map(e=>e.element);o.forall(t)&&r.push(l)}),P(r,r=>{let l=lU.filterItems(e,e=>e.column===r);return K(l,e=>t(e.element))})},gX=e=>{let t=tY(e.parent(),"."+gG);M(t,tc)},gZ=(e,t,r)=>{let l=e.origin();M(t,t=>{t.each(t=>{let o=r(l,t);fK(o,gG),tn(e.parent(),o)})})},g0=(e,t,r,l)=>{gZ(e,t,(e,t)=>{let o=gq(t.col,t.x-e.left,r.top-e.top,7,l);return fK(o,gY),o})},g1=(e,t,r,l)=>{gZ(e,t,(e,t)=>{let o=gU(t.row,r.left-e.left,t.y-e.top,l,7);return fK(o,gK),o})},g9=(e,t,r,l,o)=>{let n=l5(r),s=t.isResizable,a=l.length>0?oa.positions(l,r):[],i=a.length>0?gJ(e,s):[],m=P(a,(e,t)=>j(i,e=>t===e));g1(t,m,n,lC(r));let d=o.length>0?om.positions(o,r):[],c=d.length>0?gQ(e,s):[],u=P(d,(e,t)=>j(c,e=>t===e));g0(t,u,n,l1(r))},g3=(e,t)=>{if(gX(e),e.isResizable(t)){let r=lU.fromTable(t),l=lY(r),o=lG(r);g9(r,e,t,l,o)}},g2=(e,t)=>{let r=tY(e.parent(),"."+gG);M(r,t)},g5=e=>{g2(e,e=>{rm(e,"display","none")})},g7=e=>{g2(e,e=>{rm(e,"display","block")})},g4=e=>fQ(e,gK),g6=e=>fQ(e,gY),g8=gH("resizer-bar-dragging"),he=e=>{let t=gV(),r=gP(t,{}),l=k.none(),o=(e,t)=>k.from(eW(e,t));t.events.drag.bind(e=>{o(e.target,"data-row").each(t=>{let r=ry(e.target,"top");rm(e.target,"top",r+e.yDelta+"px")}),o(e.target,"data-column").each(t=>{let r=ry(e.target,"left");rm(e.target,"left",r+e.xDelta+"px")})});let n=(e,t)=>{let r=ry(e,t),l=rp(e,"data-initial-"+t,0);return r-l};r.events.stop.bind(()=>{t.get().each(t=>{l.each(r=>{o(t,"data-row").each(e=>{let l=n(t,"top");eP(t,"data-initial-top"),f.trigger.adjustHeight(r,l,parseInt(e,10))}),o(t,"data-column").each(e=>{let l=n(t,"left");eP(t,"data-initial-left"),f.trigger.adjustWidth(r,l,parseInt(e,10))}),g3(e,r)})})});let s=(l,o)=>{f.trigger.startAdjust(),t.assign(l),e_(l,"data-initial-"+o,ry(l,o)),fK(l,g8),rm(l,"opacity","0.2"),r.go(e.parent())},a=gi(e.parent(),"mousedown",e=>{g4(e.target)&&s(e.target,"top"),g6(e.target)&&s(e.target,"left")}),i=t=>eX(t,e.view()),m=e=>t2(e,"table",i).filter(nA),d=gi(e.view(),"mouseover",t=>{m(t.target).fold(()=>{tF(t.target)&&gX(e)},t=>{r.isActive()&&(l=k.some(t),g3(e,t))})}),c=()=>{a.unbind(),d.unbind(),r.destroy(),gX(e)},u=t=>{g3(e,t)},f=gu({adjustHeight:gc(["table","delta","row"]),adjustWidth:gc(["table","delta","column"]),startAdjust:gc([])});return{destroy:c,refresh:u,on:r.on,off:r.off,hideBars:C(g5,e),showBars:C(g7,e),events:f.registry}},ht=(e,t,r)=>{let l=he(e),o=gu({beforeResize:gc(["table","type"]),afterResize:gc(["table","type"]),startDrag:gc([])});return l.events.adjustHeight.bind(e=>{let t=e.table;o.trigger.beforeResize(t,"row");let r=oa.delta(e.delta,t);iC(t,r,e.row,oa),o.trigger.afterResize(t,"row")}),l.events.startAdjust.bind(e=>{o.trigger.startDrag()}),l.events.adjustWidth.bind(e=>{let l=e.table;o.trigger.beforeResize(l,"col");let n=om.delta(e.delta,l),s=r(l);ix(l,n,e.column,t,s),o.trigger.afterResize(l,"col")}),{on:l.on,off:l.off,refreshBars:l.refresh,hideBars:l.hideBars,showBars:l.showBars,destroy:l.destroy,events:o.registry}},hr={create:ht},hl=(e,t)=>{let r=eB(e)?e9(e):e;return{parent:v(r),view:v(e),origin:v(l9(0,0)),isResizable:t}},ho=(e,t,r)=>{let l=()=>l5(t);return{parent:v(t),view:v(e),origin:l,isResizable:r}},hn=(e,t,r)=>({parent:v(t),view:v(e),origin:v(l9(0,0)),isResizable:r}),hs={only:hl,detached:ho,body:hn},ha=()=>{let e=eG.fromTag("div");return rd(e,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),tn(tH(),e),e},hi=(e,t)=>e.inline?hs.body(eG.fromDom(e.getBody()),ha(),t):hs.only(eG.fromDom(e.getDoc()),t),hm=(e,t)=>{e.inline&&tc(t.parent())},hd=e=>f(e)&&"TABLE"===e.nodeName,hc="bar-",hu=e=>"false"!==eW(e,"data-mce-resize"),hf=e=>{let t=lU.fromTable(e);lU.hasColumns(t)||M(rO(e),e=>{let t=rc(e,"width");rm(e,"width",t),eP(e,"width")})},hg=e=>{let t,r;let l=uQ(),o=uQ(),n=uQ(),s=t=>dd(e,t),a=()=>m6(e)?sq():sV(),i=e=>sU(e).columns,m=(l,o,n)=>{let m=rr(o,"e");if(""===r&&dW(l),n!==t&&""!==r){rm(l,"width",r);let o=a(),d=s(l),c=m6(e)||m?i(l)-1:0;ix(l,n-t,c,o,d)}else if(nI(r)){let e=parseFloat(r.replace("%","")),o=n*e/t;rm(l,"width",o+"%")}nP(r)&&hf(l)},d=()=>{o.on(e=>{e.destroy()}),n.on(t=>{hm(e,t)})};e.on("init",()=>{let t=hi(e,hu);if(n.set(t),m5(e)&&dn(e)){let r=a(),n=hr.create(t,r,s);n.on(),n.events.startDrag.bind(t=>{l.set(e.selection.getRng())}),n.events.beforeResize.bind(t=>{let r=t.table.dom;mG(e,r,nL(r),nM(r),hc+t.type)}),n.events.afterResize.bind(t=>{let r=t.table,o=r.dom;nj(r),l.on(t=>{e.selection.setRng(t),e.focus()}),mK(e,o,nL(o),nM(o),hc+t.type),e.undoManager.add()}),o.set(n)}}),e.on("ObjectResizeStart",l=>{let o=l.target;if(hd(o)){let n=eG.fromDom(o);M(e.dom.select(".mce-clonedresizable"),t=>{e.dom.addClass(t,"mce-"+m4(e)+"-columns")}),!oM(n)&&dr(e)?dI(n):!oL(n)&&dt(e)&&dW(n),oW(n)&&rt(l.origin,hc)&&dW(n),t=l.width,r=dl(e)?"":nW(e,o).getOr("")}}),e.on("ObjectResized",t=>{let r=t.target;if(hd(r)){let l=eG.fromDom(r),o=t.origin;rt(o,"corner-")&&m(l,o,t.width),nj(l),mV(e,l.dom,mY)}}),e.on("SwitchMode",()=>{o.on(t=>{e.mode.isReadOnly()?t.hideBars():t.showBars()})}),e.on("dragstart dragend",e=>{o.on(t=>{"dragstart"===e.type?(t.hideBars(),t.off()):(t.on(),t.showBars())})}),e.on("remove",()=>{d()});let c=e=>{o.on(t=>t.refreshBars(eG.fromDom(e)))},u=()=>{o.on(e=>e.hideBars())},f=()=>{o.on(e=>e.showBars())};return{refresh:c,hide:u,show:f}},hh=e=>{m3(e);let t=hg(e),r=gd(e,t),l=dc(e,t,r);return ci(e,l),cm(e,l),sB(e,l),{getSelectedCells:r.getSelectedCells,clearSelectedCells:r.clearSelectedCells}},hp=e=>{let t=hh(e);return{table:t}};e.add("dom",hp)}();