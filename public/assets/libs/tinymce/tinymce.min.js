!function(){"use strict";let e,t,r,n;var o,a,l,i,s,d,c,u,m,f,g=function(e){if(null===e)return"null";if(void 0===e)return"undefined";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t},p=function(e){return{eq:e}},h=p(function(e,t){return e===t}),b=function(e){return p(function(t,r){if(t.length!==r.length)return!1;for(var n=t.length,o=0;o<n;o++)if(!e.eq(t[o],r[o]))return!1;return!0})},v=function(e){return p(function(t,r){var n,o,a=Object.keys(t),l=Object.keys(r);if(!(n=b(h),o=function(e){return Array.prototype.slice.call(e).sort(void 0)},p(function(e,t){return n.eq(o(e),o(t))})).eq(a,l))return!1;for(var i=a.length,s=0;s<i;s++){var d=a[s];if(!e.eq(t[d],r[d]))return!1}return!0})},y=p(function(e,t){if(e===t)return!0;var r=g(e);return r===g(t)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(r)?e===t:"array"===r?b(y).eq(e,t):"object"===r&&v(y).eq(e,t))});let C=Object.getPrototypeOf,x=(e,t,r)=>{var n;return!!r(e,t.prototype)||(null===(n=e.constructor)||void 0===n?void 0:n.name)===t.name},w=e=>t=>(e=>{let t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&x(e,String,(e,t)=>t.isPrototypeOf(e))?"string":t})(t)===e,E=e=>t=>typeof t===e,k=e=>t=>e===t,S=(e,t)=>N(e)&&x(e,t,(e,t)=>C(e)===t),_=w("string"),N=w("object"),R=e=>S(e,Object),A=w("array"),O=k(null),T=E("boolean"),B=k(void 0),D=e=>null==e,P=e=>!D(e),L=E("function"),M=E("number"),F=(e,t)=>{if(A(e)){for(let r=0,n=e.length;r<n;++r)if(!t(e[r]))return!1;return!0}return!1},I=()=>{},U=(e,t)=>(...r)=>e(t.apply(null,r)),z=(e,t)=>r=>e(t(r)),j=e=>()=>e,H=e=>e,$=(e,t)=>e===t;function V(e,...t){return(...r)=>{let n=t.concat(r);return e.apply(null,n)}}let q=e=>t=>!e(t),W=e=>()=>{throw Error(e)},K=e=>e(),G=e=>{e()},Y=j(!1),X=j(!0);class Q{constructor(e,t){this.tag=e,this.value=t}static some(e){return new Q(!0,e)}static none(){return Q.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?Q.some(e(this.value)):Q.none()}bind(e){return this.tag?e(this.value):Q.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:Q.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw Error(null!=e?e:"Called getOrDie on None")}static from(e){return P(e)?Q.some(e):Q.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Q.singletonNone=new Q(!1);let J=Array.prototype.slice,Z=Array.prototype.indexOf,ee=Array.prototype.push,et=(e,t)=>Z.call(e,t),er=(e,t)=>et(e,t)>-1,en=(e,t)=>{for(let r=0,n=e.length;r<n;r++)if(t(e[r],r))return!0;return!1},eo=(e,t)=>{let r=e.length,n=Array(r);for(let o=0;o<r;o++){let r=e[o];n[o]=t(r,o)}return n},ea=(e,t)=>{for(let r=0,n=e.length;r<n;r++)t(e[r],r)},el=(e,t)=>{for(let r=e.length-1;r>=0;r--)t(e[r],r)},ei=(e,t)=>{let r=[],n=[];for(let o=0,a=e.length;o<a;o++){let a=e[o];(t(a,o)?r:n).push(a)}return{pass:r,fail:n}},es=(e,t)=>{let r=[];for(let n=0,o=e.length;n<o;n++){let o=e[n];t(o,n)&&r.push(o)}return r},ed=(e,t,r)=>(el(e,(e,n)=>{r=t(r,e,n)}),r),ec=(e,t,r)=>(ea(e,(e,n)=>{r=t(r,e,n)}),r),eu=(e,t,r)=>{for(let n=0,o=e.length;n<o;n++){let o=e[n];if(t(o,n))return Q.some(o);if(r(o,n))break}return Q.none()},em=(e,t)=>eu(e,t,Y),ef=(e,t)=>{for(let r=0,n=e.length;r<n;r++)if(t(e[r],r))return Q.some(r);return Q.none()},eg=e=>{let t=[];for(let r=0,n=e.length;r<n;++r){if(!A(e[r]))throw Error("Arr.flatten item "+r+" was not an array, input: "+e);ee.apply(t,e[r])}return t},ep=(e,t)=>eg(eo(e,t)),eh=(e,t)=>{for(let r=0,n=e.length;r<n;++r)if(!0!==t(e[r],r))return!1;return!0},eb=e=>{let t=J.call(e,0);return t.reverse(),t},ev=(e,t)=>es(e,e=>!er(t,e)),ey=(e,t)=>{let r={};for(let n=0,o=e.length;n<o;n++){let o=e[n];r[String(o)]=t(o,n)}return r},eC=(e,t)=>{let r=J.call(e,0);return r.sort(t),r},ex=(e,t)=>t>=0&&t<e.length?Q.some(e[t]):Q.none(),ew=e=>ex(e,0),eE=e=>ex(e,e.length-1),ek=L(Array.from)?Array.from:e=>J.call(e),eS=(e,t)=>{for(let r=0;r<e.length;r++){let n=t(e[r],r);if(n.isSome())return n}return Q.none()},e_=Object.keys,eN=Object.hasOwnProperty,eR=(e,t)=>{let r=e_(e);for(let n=0,o=r.length;n<o;n++){let o=r[n];t(e[o],o)}},eA=(e,t)=>eO(e,(e,r)=>({k:r,v:t(e,r)})),eO=(e,t)=>{let r={};return eR(e,(e,n)=>{let o=t(e,n);r[o.k]=o.v}),r},eT=e=>(t,r)=>{e[r]=t},eB=(e,t,r,n)=>{eR(e,(e,o)=>{(t(e,o)?r:n)(e,o)})},eD=(e,t)=>{let r={};return eB(e,t,eT(r),I),r},eP=(e,t)=>{let r=[];return eR(e,(e,n)=>{r.push(t(e,n))}),r},eL=e=>eP(e,H),eM=(e,t)=>eF(e,t)?Q.from(e[t]):Q.none(),eF=(e,t)=>eN.call(e,t),eI=(e,t)=>eF(e,t)&&void 0!==e[t]&&null!==e[t],eU=e=>{let t={};return ea(e,e=>{t[e]={}}),e_(t)},ez=e=>void 0!==e.length,ej=Array.isArray,eH=(e,t,r)=>{if(!e)return!1;if(r=r||e,ez(e)){for(let n=0,o=e.length;n<o;n++)if(!1===t.call(r,e[n],n,e))return!1}else for(let n in e)if(eF(e,n)&&!1===t.call(r,e[n],n,e))return!1;return!0},e$=(e,t)=>{let r=[];return eH(e,(n,o)=>{r.push(t(n,o,e))}),r},eV=(e,t)=>{let r=[];return eH(e,(n,o)=>{t&&!t(n,o,e)||r.push(n)}),r},eq=(e,t,r,n)=>{let o=B(r)?e[0]:r;for(let r=0;r<e.length;r++)o=t.call(n,o,e[r],r);return o},eW=(e,t,r)=>{for(let n=0,o=e.length;n<o;n++)if(t.call(r,e[n],n,e))return n;return -1},eK=e=>e[e.length-1],eG=e=>{let t,r=!1;return(...n)=>(r||(r=!0,t=e.apply(null,n)),t)},eY=()=>eX(0,0),eX=(e,t)=>({major:e,minor:t}),eQ={nu:eX,detect:(e,t)=>{let r=String(t).toLowerCase();return 0===e.length?eY():((e,t)=>{let r=((e,t)=>{for(let r=0;r<e.length;r++){let n=e[r];if(n.test(t))return n}})(e,t);if(!r)return{major:0,minor:0};let n=e=>Number(t.replace(r,"$"+e));return eX(n(1),n(2))})(e,r)},unknown:eY},eJ=(e,t)=>{let r=String(t).toLowerCase();return em(e,e=>e.search(r))},eZ=(e,t,r)=>""===t||e.length>=t.length&&e.substr(r,r+t.length)===t,e0=(e,t)=>{var r;return e2(e,t)?(r=t.length,e.substring(r)):e},e1=(e,t,r=0,n)=>{let o=e.indexOf(t,r);return -1!==o&&(!!B(n)||o+t.length<=n)},e2=(e,t)=>eZ(e,t,0),e3=(e,t)=>eZ(e,t,e.length-t.length),e8=e=>t=>t.replace(e,""),e5=e8(/^\s+|\s+$/g),e6=e8(/^\s+/g),e9=e8(/\s+$/g),e4=e=>e.length>0,e7=e=>!e4(e),te=(e,t=10)=>{let r=parseInt(e,t);return isNaN(r)?Q.none():Q.some(r)},tt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,tr=e=>t=>e1(t,e),tn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>e1(e,"edge/")&&e1(e,"chrome")&&e1(e,"safari")&&e1(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,tt],search:e=>e1(e,"chrome")&&!e1(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>e1(e,"msie")||e1(e,"trident")},{name:"Opera",versionRegexes:[tt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:tr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:tr("firefox")},{name:"Safari",versionRegexes:[tt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(e1(e,"safari")||e1(e,"mobile/"))&&e1(e,"applewebkit")}],to=[{name:"Windows",search:tr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>e1(e,"iphone")||e1(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:tr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:tr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:tr("linux"),versionRegexes:[]},{name:"Solaris",search:tr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:tr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:tr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ta={browsers:j(tn),oses:j(to)},tl="Edge",ti="Chromium",ts="Opera",td="Firefox",tc="Safari",tu=e=>{let t=e.current,r=e.version,n=e=>()=>t===e;return{current:t,version:r,isEdge:n(tl),isChromium:n(ti),isIE:n("IE"),isOpera:n(ts),isFirefox:n(td),isSafari:n(tc)}},tm=()=>tu({current:void 0,version:eQ.unknown()}),tf=(j(tl),j(ti),j("IE"),j(ts),j(td),j(tc),"Windows"),tg="Android",tp="Linux",th="macOS",tb="Solaris",tv="FreeBSD",ty="ChromeOS",tC=e=>{let t=e.current,r=e.version,n=e=>()=>t===e;return{current:t,version:r,isWindows:n(tf),isiOS:n("iOS"),isAndroid:n(tg),isMacOS:n(th),isLinux:n(tp),isSolaris:n(tb),isFreeBSD:n(tv),isChromeOS:n(ty)}},tx=()=>tC({current:void 0,version:eQ.unknown()}),tw=(j(tf),j("iOS"),j(tg),j(tp),j(th),j(tb),j(tv),j(ty),e=>window.matchMedia(e).matches),tE=eG(()=>((e,t,r)=>{let n=ta.browsers(),o=ta.oses(),a=t.bind(e=>eS(e.brands,e=>{let t=e.brand.toLowerCase();return em(n,e=>{var r;return t===(null===(r=e.brand)||void 0===r?void 0:r.toLowerCase())}).map(t=>({current:t.name,version:eQ.nu(parseInt(e.version,10),0)}))})).orThunk(()=>eJ(n,e).map(t=>{let r=eQ.detect(t.versionRegexes,e);return{current:t.name,version:r}})).fold(tm,tu),l=eJ(o,e).map(t=>{let r=eQ.detect(t.versionRegexes,e);return{current:t.name,version:r}}).fold(tx,tC),i=((e,t,r,n)=>{let o=e.isiOS()&&!0===/ipad/i.test(r),a=e.isiOS()&&!o,l=e.isiOS()||e.isAndroid(),i=l||n("(pointer:coarse)"),s=o||!a&&l&&n("(min-device-width:768px)"),d=a||l&&!s,c=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(r);return{isiPad:j(o),isiPhone:j(a),isTablet:j(s),isPhone:j(d),isTouch:j(i),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:j(c),isDesktop:j(!d&&!s&&!c)}})(l,a,e,r);return{browser:a,os:l,deviceType:i}})(navigator.userAgent,Q.from(navigator.userAgentData),tw)),tk=()=>tE(),tS=navigator.userAgent,t_=tk(),tN=t_.browser,tR=t_.os,tA=t_.deviceType,tO=-1!==tS.indexOf("Windows Phone"),tT={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:tN.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!tN.isIE(),windowsPhone:tO,browser:{current:tN.current,version:tN.version,isChromium:tN.isChromium,isEdge:tN.isEdge,isFirefox:tN.isFirefox,isIE:tN.isIE,isOpera:tN.isOpera,isSafari:tN.isSafari},os:{current:tR.current,version:tR.version,isAndroid:tR.isAndroid,isChromeOS:tR.isChromeOS,isFreeBSD:tR.isFreeBSD,isiOS:tR.isiOS,isLinux:tR.isLinux,isMacOS:tR.isMacOS,isSolaris:tR.isSolaris,isWindows:tR.isWindows},deviceType:{isDesktop:tA.isDesktop,isiPad:tA.isiPad,isiPhone:tA.isiPhone,isPhone:tA.isPhone,isTablet:tA.isTablet,isTouch:tA.isTouch,isWebView:tA.isWebView}},tB=/^\s*|\s*$/g,tD=e=>D(e)?"":(""+e).replace(tB,""),tP=function(e,t,r,n){n=n||this,e&&(r&&(e=e[r]),eH(e,(e,o)=>!1!==t.call(n,e,o,r)&&(tP(e,t,r,n),!0)))},tL={trim:tD,isArray:ej,is:(e,t)=>t?!("array"!==t||!ej(e))||typeof e===t:void 0!==e,toArray:e=>{if(ej(e))return e;{let t=[];for(let r=0,n=e.length;r<n;r++)t[r]=e[r];return t}},makeMap:(e,t,r={})=>{let n=_(e)?e.split(t||","):e||[],o=n.length;for(;o--;)r[n[o]]={};return r},each:eH,map:e$,grep:eV,inArray:(e,t)=>{if(e){for(let r=0,n=e.length;r<n;r++)if(e[r]===t)return r}return -1},hasOwn:eF,extend:(e,...t)=>{for(let r=0;r<t.length;r++){let n=t[r];for(let t in n)if(eF(n,t)){let r=n[t];void 0!==r&&(e[t]=r)}}return e},walk:tP,resolve:(e,t=window)=>{let r=e.split(".");for(let e=0,n=r.length;e<n&&(t=t[r[e]]);e++);return t},explode:(e,t)=>A(e)?e:""===e?[]:e$(e.split(t||","),tD),_addCacheSuffix:e=>{let t=tT.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}},tM=(e,t,r=$)=>e.exists(e=>r(e,t)),tF=(e,t,r)=>e.isSome()&&t.isSome()?Q.some(r(e.getOrDie(),t.getOrDie())):Q.none(),tI=(e,t)=>e?Q.some(t):Q.none(),tU="undefined"!=typeof window?window:Function("return this;")(),tz=(e,t)=>((e,t)=>{let r=null!=t?t:tU;for(let t=0;t<e.length&&null!=r;++t)r=r[e[t]];return r})(e.split("."),t),tj=Object.getPrototypeOf,tH=e=>{let t=tz("ownerDocument.defaultView",e);return N(e)&&(((e,t)=>{let r=tz(e,t);if(null==r)throw Error(e+" not available on this browser");return r})("HTMLElement",t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(tj(e).constructor.name))},t$=e=>e.dom.nodeName.toLowerCase(),tV=e=>e.dom.nodeType,tq=e=>t=>tV(t)===e,tW=tq(1),tK=tq(3),tG=tq(9),tY=tq(11),tX=e=>t=>tW(t)&&t$(t)===e,tQ=(e,t,r)=>{if(!(_(r)||T(r)||M(r)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),Error("Attribute value was not simple");e.setAttribute(t,r+"")},tJ=(e,t,r)=>{tQ(e.dom,t,r)},tZ=(e,t)=>{let r=e.dom;eR(t,(e,t)=>{tQ(r,t,e)})},t0=(e,t)=>{let r=e.dom.getAttribute(t);return null===r?void 0:r},t1=(e,t)=>Q.from(t0(e,t)),t2=(e,t)=>{let r=e.dom;return!(!r||!r.hasAttribute)&&r.hasAttribute(t)},t3=(e,t)=>{e.dom.removeAttribute(t)},t8=e=>ec(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}),t5=(e,t)=>{let r=t0(e,t);return void 0===r||""===r?[]:r.split(" ")},t6=e=>void 0!==e.dom.classList,t9=e=>t5(e,"class"),t4=(e,t)=>((e,t,r)=>{let n=t5(e,t).concat([r]);return tJ(e,t,n.join(" ")),!0})(e,"class",t),t7=(e,t)=>((e,t,r)=>{let n=es(t5(e,t),e=>e!==r);return n.length>0?tJ(e,t,n.join(" ")):t3(e,t),!1})(e,"class",t),re=(e,t)=>{t6(e)?e.dom.classList.add(t):t4(e,t)},rt=e=>{0===(t6(e)?e.dom.classList:t9(e)).length&&t3(e,"class")},rr=(e,t)=>{t6(e)?e.dom.classList.remove(t):t7(e,t),rt(e)},rn=(e,t)=>t6(e)&&e.dom.classList.contains(t),ro=e=>{if(null==e)throw Error("Node cannot be null or undefined");return{dom:e}},ra=(e,t)=>{let r=(t||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){let t="HTML does not have a single root node";throw console.error(t,e),Error(t)}return ro(r.childNodes[0])},rl=(e,t)=>{let r=(t||document).createElement(e);return ro(r)},ri=(e,t)=>{let r=(t||document).createTextNode(e);return ro(r)},rs=(e,t,r)=>Q.from(e.dom.elementFromPoint(t,r)).map(ro),rd=(e,t)=>{let r=[],n=e=>(r.push(e),t(e)),o=t(e);do o=o.bind(n);while(o.isSome());return r},rc=(e,t)=>{let r=e.dom;if(1!==r.nodeType)return!1;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw Error("Browser lacks native selectors")},ru=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,rm=(e,t)=>e.dom===t.dom,rf=(e,t)=>{let r=e.dom,n=t.dom;return r!==n&&r.contains(n)},rg=e=>ro(e.dom.ownerDocument),rp=e=>tG(e)?e:rg(e),rh=e=>ro(rp(e).dom.defaultView),rb=e=>Q.from(e.dom.parentNode).map(ro),rv=e=>Q.from(e.dom.parentElement).map(ro),ry=(e,t)=>{let r=L(t)?t:Y,n=e.dom,o=[];for(;null!==n.parentNode&&void 0!==n.parentNode;){let e=n.parentNode,t=ro(e);if(o.push(t),!0===r(t))break;n=e}return o},rC=e=>Q.from(e.dom.previousSibling).map(ro),rx=e=>Q.from(e.dom.nextSibling).map(ro),rw=e=>eb(rd(e,rC)),rE=e=>rd(e,rx),rk=e=>eo(e.dom.childNodes,ro),rS=(e,t)=>{let r=e.dom.childNodes;return Q.from(r[t]).map(ro)},r_=e=>rS(e,0),rN=e=>rS(e,e.dom.childNodes.length-1),rR=e=>e.dom.childNodes.length,rA=e=>tY(e)&&P(e.dom.host),rO=L(Element.prototype.attachShadow)&&L(Node.prototype.getRootNode),rT=j(rO),rB=rO?e=>ro(e.dom.getRootNode()):rp,rD=e=>rA(e)?e:(e=>{let t=e.dom.head;if(null==t)throw Error("Head is not available yet");return ro(t)})(rp(e)),rP=e=>ro(e.dom.host),rL=e=>{if(rT()&&P(e.target)){let t=ro(e.target);if(tW(t)&&rM(t)&&e.composed&&e.composedPath){let t=e.composedPath();if(t)return ew(t)}}return Q.from(e.target)},rM=e=>P(e.dom.shadowRoot),rF=e=>{let t=tK(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;let r=t.ownerDocument;return(e=>{let t=rB(e);return rA(t)?Q.some(t):Q.none()})(ro(t)).fold(()=>r.body.contains(t),z(rF,rP))};var rI=(e,t,r,n,o)=>e(r,n)?Q.some(r):L(o)&&o(r)?Q.none():t(r,n,o);let rU=(e,t,r)=>{let n=e.dom,o=L(r)?r:Y;for(;n.parentNode;){n=n.parentNode;let e=ro(n);if(t(e))return Q.some(e);if(o(e))break}return Q.none()},rz=(e,t,r)=>rI((e,t)=>t(e),rU,e,t,r),rj=(e,t,r)=>rU(e,e=>rc(e,t),r),rH=(e,t)=>((e,t)=>{let r=void 0===t?document:t.dom;return ru(r)?Q.none():Q.from(r.querySelector(e)).map(ro)})(t,e),r$=(e,t,r)=>rI((e,t)=>rc(e,t),rj,e,t,r),rV=(e,t=!1)=>rF(e)?e.dom.isContentEditable:r$(e,"[contenteditable]").fold(j(t),e=>"true"===rq(e)),rq=e=>e.dom.contentEditable,rW=e=>void 0!==e.style&&L(e.style.getPropertyValue),rK=(e,t,r)=>{if(!_(r))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",r,":: Element ",e),Error("CSS value must be a string: "+r);rW(e)&&e.style.setProperty(t,r)},rG=(e,t,r)=>{let n=e.dom;rK(n,t,r)},rY=(e,t)=>{let r=e.dom;eR(t,(e,t)=>{rK(r,t,e)})},rX=(e,t)=>{let r=e.dom,n=window.getComputedStyle(r).getPropertyValue(t);return""!==n||rF(e)?n:rQ(r,t)},rQ=(e,t)=>rW(e)?e.style.getPropertyValue(t):"",rJ=(e,t)=>{let r=e.dom,n=rQ(r,t);return Q.from(n).filter(e=>e.length>0)},rZ=e=>{let t={},r=e.dom;if(rW(r))for(let e=0;e<r.style.length;e++){let n=r.style.item(e);t[n]=r.style[n]}return t},r0=(e,t)=>{var r;rW(r=e.dom)&&r.style.removeProperty(t),tM(t1(e,"style").map(e5),"")&&t3(e,"style")},r1=(e,t)=>{rb(e).each(r=>{r.dom.insertBefore(t.dom,e.dom)})},r2=(e,t)=>{rx(e).fold(()=>{rb(e).each(e=>{r8(e,t)})},e=>{r1(e,t)})},r3=(e,t)=>{r_(e).fold(()=>{r8(e,t)},r=>{e.dom.insertBefore(t.dom,r.dom)})},r8=(e,t)=>{e.dom.appendChild(t.dom)},r5=(e,t)=>{r1(e,t),r8(t,e)},r6=(e,t)=>{ea(t,t=>{r8(e,t)})},r9=e=>{e.dom.textContent="",ea(rk(e),e=>{r4(e)})},r4=e=>{let t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},r7=e=>{let t=rk(e);t.length>0&&ea(t,(r,n)=>{let o=0===n?e:t[n-1];r2(o,r)}),r4(e)},ne=e=>eo(e,ro),nt=e=>e.dom.innerHTML,nr=(e,t)=>{let r=rg(e).dom,n=ro(r.createDocumentFragment()),o=((e,t)=>{let r=(t||document).createElement("div");return r.innerHTML=e,rk(ro(r))})(t,r);r6(n,o),r9(e),r8(e,n)},nn=(e,t,r,n)=>((e,t,r,n,o)=>{let a=e=>{r(e)&&n((e=>{let t=ro(rL(e).getOr(e.target)),r=()=>e.stopPropagation(),n=()=>e.preventDefault(),o=U(n,r);return{target:t,x:e.clientX,y:e.clientY,stop:r,prevent:n,kill:o,raw:e}})(e))};return e.dom.addEventListener(t,a,!1),{unbind:V(no,e,t,a,!1)}})(e,t,r,n),no=(e,t,r,n)=>{e.dom.removeEventListener(t,r,n)},na=(e,t)=>({left:e,top:t,translate:(r,n)=>na(e+r,t+n)}),nl=(e,t)=>void 0!==e?e:void 0!==t?t:0,ni=e=>{let t=e.dom,r=t.ownerDocument.body;return r===t?na(r.offsetLeft,r.offsetTop):rF(e)?(e=>{let t=e.getBoundingClientRect();return na(t.left,t.top)})(t):na(0,0)},ns=e=>{let t=void 0!==e?e.dom:document,r=t.body.scrollLeft||t.documentElement.scrollLeft,n=t.body.scrollTop||t.documentElement.scrollTop;return na(r,n)},nd=(e,t,r)=>{let n=(void 0!==r?r.dom:document).defaultView;n&&n.scrollTo(e,t)},nc=(e,t)=>{tk().browser.isSafari()&&L(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},nu=(e,t,r,n)=>({x:e,y:t,width:r,height:n,right:e+r,bottom:t+n}),nm=e=>{let t=void 0===e?window:e,r=t.document,n=ns(ro(r));return(e=>{let t=void 0===e?window:e;return tk().browser.isFirefox()?Q.none():Q.from(t.visualViewport)})(t).fold(()=>{let e=t.document.documentElement,r=e.clientWidth,o=e.clientHeight;return nu(n.left,n.top,r,o)},e=>nu(Math.max(e.pageLeft,n.left),Math.max(e.pageTop,n.top),e.width,e.height))},nf=(e,t)=>{let r=[];return ea(rk(e),e=>{t(e)&&(r=r.concat([e])),r=r.concat(nf(e,t))}),r},ng=(e,t)=>((e,t)=>{let r=void 0===t?document:t.dom;return ru(r)?[]:eo(r.querySelectorAll(e),ro)})(t,e),np=(e,t,r)=>rj(e,t,r).isSome();class nh{constructor(e,t){this.node=e,this.rootNode=t,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node}prev(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node}prev2(e){return this.node=this.findPreviousNode(this.node,e),this.node}findSibling(e,t,r,n){if(e){if(!n&&e[t])return e[t];if(e!==this.rootNode){let t=e[r];if(t)return t;for(let n=e.parentNode;n&&n!==this.rootNode;n=n.parentNode)if(t=n[r])return t}}}findPreviousNode(e,t){if(e){let r=e.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!t){for(let e=r.lastChild;e;e=e.lastChild)if(!e.lastChild)return e}return r}let n=e.parentNode;if(n&&n!==this.rootNode)return n}}}let nb=e=>t=>!!t&&t.nodeType===e,nv=e=>!!e&&!Object.getPrototypeOf(e),ny=nb(1),nC=e=>{let t=e.toLowerCase();return e=>P(e)&&e.nodeName.toLowerCase()===t},nx=e=>{let t=e.map(e=>e.toLowerCase());return e=>{if(e&&e.nodeName){let r=e.nodeName.toLowerCase();return er(t,r)}return!1}},nw=(e,t)=>{let r=t.toLowerCase().split(" ");return t=>{if(ny(t)){let n=t.ownerDocument.defaultView;if(n)for(let o=0;o<r.length;o++){let a=n.getComputedStyle(t,null);if((a?a.getPropertyValue(e):null)===r[o])return!0}}return!1}},nE=e=>t=>ny(t)&&t.hasAttribute(e),nk=e=>ny(e)&&e.hasAttribute("data-mce-bogus"),nS=e=>ny(e)&&"TABLE"===e.tagName,n_=e=>t=>!!ny(t)&&(t.contentEditable===e||t.getAttribute("data-mce-contenteditable")===e),nN=nx(["textarea","input"]),nR=nb(3),nA=nb(4),nO=nb(7),nT=nb(8),nB=nb(9),nD=nb(11),nP=nC("br"),nL=nC("img"),nM=n_("true"),nF=n_("false"),nI=nx(["td","th"]),nU=nx(["td","th","caption"]),nz=nx(["video","audio","object","embed"]),nj=nC("li"),nH=e=>"\uFEFF"===e,n$=((e,t)=>{let r=t=>e(t)?Q.from(t.dom.nodeValue):Q.none();return{get:t=>{if(!e(t))throw Error("Can only get text value of a text node");return r(t).getOr("")},getOption:r,set:(t,r)=>{if(!e(t))throw Error("Can only set raw text value of a text node");t.dom.nodeValue=r}}})(tK),nV=e=>n$.get(e),nq=e=>n$.getOption(e),nW=["pre"].concat(["h1","h2","h3","h4","h5","h6"]),nK=e=>{let t;return r=>eF(t=t||ey(e,X),t$(r))},nG=nK(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),nY=e=>tW(e)&&!nG(e),nX=e=>tW(e)&&"br"===t$(e),nQ=nK(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),nJ=nK(["ul","ol","dl"]),nZ=nK(["li","dd","dt"]),n0=nK(["thead","tbody","tfoot"]),n1=nK(["td","th"]),n2=nK(["pre","script","textarea","style"]),n3=nK(nW),n8=e=>n3(e)||nY(e),n5=()=>{let e=rl("br");return tJ(e,"data-mce-bogus","1"),e},n6=e=>{r9(e),r8(e,n5())},n9=e=>{rN(e).each(t=>{rC(t).each(r=>{nG(e)&&nX(t)&&nG(r)&&r4(t)})})},n4=e=>e.replace(/\uFEFF/g,""),n7=e=>(nR(e)&&(e=e.parentNode),ny(e)&&e.hasAttribute("data-mce-caret")),oe=e=>nR(e)&&nH(e.data),ot=e=>n7(e)||oe(e),or=e=>e.firstChild!==e.lastChild||!nP(e.firstChild),on=e=>{let t=e.container();return!!nR(t)&&("\uFEFF"===t.data.charAt(e.offset())||e.isAtStart()&&oe(t.previousSibling))},oo=e=>{let t=e.container();return!!nR(t)&&("\uFEFF"===t.data.charAt(e.offset()-1)||e.isAtEnd()&&oe(t.nextSibling))},oa=e=>nR(e)&&"\uFEFF"===e.data[0],ol=e=>nR(e)&&"\uFEFF"===e.data[e.data.length-1],oi=e=>e&&e.hasAttribute("data-mce-caret")?((e=>{var t;let r=e.getElementsByTagName("br"),n=r[r.length-1];nk(n)&&(null===(t=n.parentNode)||void 0===t||t.removeChild(n))})(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,os=e=>n7(e.startContainer),od=nx(["script","style","textarea"]),oc=nx(["img","input","textarea","hr","iframe","video","audio","object","embed"]),ou=nx(["table"]),om=e=>!ot(e)&&(nR(e)?!od(e.parentNode):oc(e)||nP(e)||ou(e)||of(e)),of=e=>!(ny(e)&&"true"===e.getAttribute("unselectable"))&&nF(e),og=(e,t)=>om(e)&&((e,t)=>{for(let r=e.parentNode;r&&r!==t;r=r.parentNode){if(of(r))return!1;if(nM(r))break}return!0})(e,t),op=/^[ \t\r\n]*$/,oh=e=>op.test(e),ob=e=>"\n"===e||"\r"===e,ov=(e,t=4,r=!0,n=!0)=>{let o=t<=0?"":Array(t+1).join(" "),a=e.replace(/\t/g,o),l=ec(a,(e,t)=>{var o;return -1!==" \f	\v".indexOf(t)||"\xa0"===t?e.pcIsSpace||""===e.str&&r||e.str.length===a.length-1&&n||(o=e.str.length+1)<a.length&&o>=0&&ob(a[o])?{pcIsSpace:!1,str:e.str+"\xa0"}:{pcIsSpace:!0,str:e.str+" "}:{pcIsSpace:ob(t),str:e.str+t}},{pcIsSpace:!1,str:""});return l.str},oy=(e,t)=>om(e)&&(!(nR(e)&&oh(e.data))||!!((e,t)=>{let r=ro(t),n=ro(e);return np(n,"pre,code",V(rm,r))})(e,t))||ny(e)&&"A"===e.nodeName&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id"))||oC(e),oC=nE("data-mce-bookmark"),ox=nE("data-mce-bogus"),ow=e=>ny(e)&&"all"===e.getAttribute("data-mce-bogus"),oE=(e,t=!0)=>((e,t)=>{let r=0;if(oy(e,e))return!1;{let n=e.firstChild;if(!n)return!0;let o=new nh(n,e);do{if(t){if(ow(n)){n=o.next(!0);continue}if(ox(n)){n=o.next();continue}}if(nP(n))r++,n=o.next();else{if(oy(n,e))return!1;n=o.next()}}while(n);return r<=1}})(e.dom,t),ok="data-mce-block",oS=e=>es(e_(e),e=>!/[A-Z]/.test(e)).join(","),o_=(e,t)=>P(t.querySelector(e))?(t.setAttribute(ok,"true"),"inline-boundary"===t.getAttribute("data-mce-selected")&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(ok),!1),oN=(e,t)=>{let r=oS(e.getTransparentElements()),n=oS(e.getBlockElements());return es(t.querySelectorAll(r),e=>o_(n,e))},oR=(e,t)=>{var r;let n=t?"lastChild":"firstChild";for(let t=e[n];t;t=t[n])if(oE(ro(t)))return void(null===(r=t.parentNode)||void 0===r||r.removeChild(t))},oA=(e,t,r)=>{let n=e.getBlockElements(),o=ro(t),a=e=>t$(e) in n,l=e=>rm(e,o);ea(ne(r),t=>{rU(t,a,l).each(r=>{let n=es(rk(t),t=>a(t)&&!e.isValidChild(t$(r),t$(t)));if(n.length>0){let t=rv(r);ea(n,e=>{rU(e,a,l).each(t=>{((e,t)=>{let r=document.createRange(),n=e.parentNode;if(n){r.setStartBefore(e),r.setEndBefore(t);let o=r.extractContents();oR(o,!0),r.setStartAfter(t),r.setEndAfter(e);let a=r.extractContents();oR(a,!1),oE(ro(o))||n.insertBefore(o,e),oE(ro(t))||n.insertBefore(t,e),oE(ro(a))||n.insertBefore(a,e),n.removeChild(e)}})(t.dom,e.dom)})}),t.each(t=>oN(e,t.dom))}})})},oO=(e,t)=>{let r=oN(e,t);oA(e,t,r),ea([...r,...oL(e,t)?[t]:[]],t=>ea(ng(ro(t),t.nodeName.toLowerCase()),t=>{oM(e,t.dom)&&r7(t)}))},oT=(e,t)=>{if(oP(e,t)){let r=oS(e.getBlockElements());o_(r,t)}},oB=e=>e.hasAttribute(ok),oD=(e,t)=>eF(e.getTransparentElements(),t),oP=(e,t)=>ny(t)&&oD(e,t.nodeName),oL=(e,t)=>oP(e,t)&&oB(t),oM=(e,t)=>oP(e,t)&&!oB(t),oF=(e,t)=>1===t.type&&oD(e,t.name)&&B(t.attr(ok)),oI=tk().browser,oU=e=>em(e,tW),oz=(e,t)=>e.children&&er(e.children,t),oj=(e,t={})=>{let r=0,n={},o=ro(e),a=rp(o),l=e=>new Promise((l,i)=>{let s;let d=tL._addCacheSuffix(e),c=eM(n,d).getOrThunk(()=>({id:"mce-u"+r++,passed:[],failed:[],count:0}));n[d]=c,c.count++;let u=(e,t)=>{ea(e,G),c.status=t,c.passed=[],c.failed=[],s&&(s.onload=null,s.onerror=null,s=null)},m=()=>u(c.passed,2),f=()=>u(c.failed,3);if(l&&c.passed.push(l),i&&c.failed.push(i),1===c.status)return;if(2===c.status)return void m();if(3===c.status)return void f();c.status=1;let g=rl("link",a.dom);tZ(g,{rel:"stylesheet",type:"text/css",id:c.id}),t.contentCssCors&&tJ(g,"crossOrigin","anonymous"),t.referrerPolicy&&tJ(g,"referrerpolicy",t.referrerPolicy),(s=g.dom).onload=m,s.onerror=f,r8(rD(o),g),tJ(g,"href",d)}),i=e=>{let t=tL._addCacheSuffix(e);eM(n,t).each(e=>{0==--e.count&&(delete n[t],(e=>{let t=rD(o);rH(t,"#"+e).each(r4)})(e.id))})};return{load:l,loadAll:e=>Promise.allSettled(eo(e,e=>l(e).then(j(e)))).then(e=>{let t=ei(e,e=>"fulfilled"===e.status);return t.fail.length>0?Promise.reject(eo(t.fail,e=>e.reason)):eo(t.pass,e=>e.value)}),unload:i,unloadAll:e=>{ea(e,e=>{i(e)})},_setReferrerPolicy:e=>{t.referrerPolicy=e},_setContentCssCors:e=>{t.contentCssCors=e}}},oH=(()=>{let e=new WeakMap;return{forElement:(t,r)=>{let n=rB(t).dom;return Q.from(e.get(n)).getOrThunk(()=>{let t=oj(n,r);return e.set(n,t),t})}}})(),o$=(e,t)=>P(e)&&(oy(e,t)||nY(ro(e))),oV=e=>"span"===e.nodeName.toLowerCase()&&"bookmark"===e.getAttribute("data-mce-type"),oq=(e,t,r)=>{var n;let o=r||t;if(ny(t)&&oV(t))return t;let a=t.childNodes;for(let t=a.length-1;t>=0;t--)oq(e,a[t],o);if(ny(t)){let e=t.childNodes;1===e.length&&oV(e[0])&&(null===(n=t.parentNode)||void 0===n||n.insertBefore(e[0],t))}return nD(t)||nB(t)||oy(t,o)||ny(t)&&t.childNodes.length>0||nR(t)&&t.data.length>0&&((e,t)=>{let r=new nh(e,t).prev(!1),n=new nh(e,t).next(!1),o=B(r)||o$(r,t),a=B(n)||o$(n,t);return o&&a})(t,o)||e.remove(t),t},oW=tL.makeMap,oK=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,oG=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,oY=/[<>&\"\']/g,oX=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,oQ={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},oJ={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},oZ={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},o0=(e,t)=>{let r={};if(e){let n=e.split(",");t=t||10;for(let e=0;e<n.length;e+=2){let o=String.fromCharCode(parseInt(n[e],t));if(!oJ[o]){let t="&"+n[e+1]+";";r[o]=t,r[t]=o}}return r}},o1=o0("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),o2=(e,t)=>e.replace(t?oK:oG,e=>oJ[e]||e),o3=(e,t)=>e.replace(t?oK:oG,e=>e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":oJ[e]||"&#"+e.charCodeAt(0)+";"),o8=(e,t,r)=>{let n=r||o1;return e.replace(t?oK:oG,e=>oJ[e]||n[e]||e)},o5={encodeRaw:o2,encodeAllRaw:e=>(""+e).replace(oY,e=>oJ[e]||e),encodeNumeric:o3,encodeNamed:o8,getEncodeFunc:(e,t)=>{let r=o0(t)||o1,n=oW(e.replace(/\+/g,","));return n.named&&n.numeric?(e,t)=>e.replace(t?oK:oG,e=>void 0!==oJ[e]?oJ[e]:void 0!==r[e]?r[e]:e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";"):n.named?t?(e,t)=>o8(e,t,r):o8:n.numeric?o3:o2},decode:e=>e.replace(oX,(e,t)=>t?(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))>65535?String.fromCharCode(55296+((t-=65536)>>10),56320+(1023&t)):oQ[t]||String.fromCharCode(t):oZ[e]||o1[e]||(e=>{let t=rl("div").dom;return t.innerHTML=e,t.textContent||t.innerText||e})(e))},o6={},o9={},o4={},o7=tL.makeMap,ae=tL.each,at=tL.extend,ar=tL.explode,an=tL.inArray,ao=(e,t)=>(e=tL.trim(e))?e.split(t||" "):[],aa=(e,t={})=>{let r=o7(e," ",o7(e.toUpperCase()," "));return at(r,t)},al=e=>aa("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),ai=(e,t)=>{if(e){let r={};return _(e)&&(e={"*":e}),ae(e,(e,n)=>{r[n]=r[n.toUpperCase()]="map"===t?o7(e,/[, ]/):ar(e,/[, ]/)}),r}},as=(e={})=>{var t;let r={},n={},o=[],a={},l={},i=(t,r,n)=>{let o=e[t];if(o)return o7(o,/[, ]/,o7(o.toUpperCase(),/[, ]/));{let e=o9[t];return e||(e=aa(r,n),o9[t]=e),e}},s=null!==(t=e.schema)&&void 0!==t?t:"html5",d=(e=>{let t,r,n,o;let a={},l=(e,r="",n="")=>{let o=ao(n),l=ao(e),i=l.length;for(;i--;){let e=ao([t,r].join(" "));a[l[i]]={attributes:ey(e,()=>({})),attributesOrder:e,children:ey(o,j(o4))}}},i=(e,t)=>{let r=ao(e),n=ao(t),o=r.length;for(;o--;){let e=a[r[o]];for(let t=0,r=n.length;t<r;t++)e.attributes[n[t]]={},e.attributesOrder.push(n[t])}};if(o6[e])return o6[e];if(t="id accesskey class dir lang style tabindex title role",r="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",n="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==e&&(t+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",r+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",n+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==e){t+=" xml:lang";let e="acronym applet basefont big font strike tt";n=[n,e].join(" "),ae(ao(e),e=>{l(e,"",n)});let a="center dir isindex noframes";o=[r=[r,a].join(" "),n].join(" "),ae(ao(a),e=>{l(e,"",o)})}return o=o||[r,n].join(" "),l("html","manifest","head body"),l("head","","base command link meta noscript script style title"),l("title hr noscript br"),l("base","href target"),l("link","href rel media hreflang type sizes hreflang"),l("meta","name http-equiv content charset"),l("style","media type scoped"),l("script","src async defer type charset"),l("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",o),l("address dt dd div caption","",o),l("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",n),l("blockquote","cite",o),l("ol","reversed start type","li"),l("ul","","li"),l("li","value",o),l("dl","","dt dd"),l("a","href target rel media hreflang type",o),l("q","cite",n),l("ins del","cite datetime",o),l("img","src sizes srcset alt usemap ismap width height"),l("iframe","src name width height",o),l("embed","src type width height"),l("object","data type typemustmatch name usemap form width height",[o,"param"].join(" ")),l("param","name value"),l("map","name",[o,"area"].join(" ")),l("area","alt coords shape href target rel media hreflang type"),l("table","border","caption colgroup thead tfoot tbody tr"+("html4"===e?" col":"")),l("colgroup","span","col"),l("col","span"),l("tbody thead tfoot","","tr"),l("tr","","td th"),l("td","colspan rowspan headers",o),l("th","colspan rowspan headers scope abbr",o),l("form","accept-charset action autocomplete enctype method name novalidate target",o),l("fieldset","disabled form name",[o,"legend"].join(" ")),l("label","form for",n),l("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),l("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===e?o:n),l("select","disabled form multiple name required size","option optgroup"),l("optgroup","disabled label","option"),l("option","disabled label selected value"),l("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),l("menu","type label",[o,"li"].join(" ")),l("noscript","",o),"html4"!==e&&(l("wbr"),l("ruby","",[n,"rt rp"].join(" ")),l("figcaption","",o),l("mark rt rp summary bdi","",n),l("canvas","width height",o),l("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[o,"track source"].join(" ")),l("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[o,"track source"].join(" ")),l("picture","","img source"),l("source","src srcset type media sizes"),l("track","kind src srclang label default"),l("datalist","",[n,"option"].join(" ")),l("article section nav aside main header footer","",o),l("hgroup","","h1 h2 h3 h4 h5 h6"),l("figure","",[o,"figcaption"].join(" ")),l("time","datetime",n),l("dialog","open",o),l("command","type label icon disabled checked radiogroup command"),l("output","for form name",n),l("progress","value max",n),l("meter","value min max low high optimum",n),l("details","open",[o,"summary"].join(" ")),l("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==e&&(i("script","language xml:space"),i("style","xml:space"),i("object","declare classid code codebase codetype archive standby align border hspace vspace"),i("embed","align name hspace vspace"),i("param","valuetype type"),i("a","charset name rev shape coords"),i("br","clear"),i("applet","codebase archive code object alt name width height align hspace vspace"),i("img","name longdesc align border hspace vspace"),i("iframe","longdesc frameborder marginwidth marginheight scrolling align"),i("font basefont","size color face"),i("input","usemap align"),i("select"),i("textarea"),i("h1 h2 h3 h4 h5 h6 div p legend caption","align"),i("ul","type compact"),i("li","type"),i("ol dl menu dir","compact"),i("pre","width xml:space"),i("hr","align noshade size width"),i("isindex","prompt"),i("table","summary width frame rules cellspacing cellpadding align bgcolor"),i("col","width align char charoff valign"),i("colgroup","width align char charoff valign"),i("thead","align char charoff valign"),i("tr","align char charoff valign bgcolor"),i("th","axis align char charoff valign nowrap bgcolor width height"),i("form","accept"),i("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),i("tfoot","align char charoff valign"),i("tbody","align char charoff valign"),i("area","nohref"),i("body","background bgcolor text link vlink alink")),"html4"!==e&&(i("input button select textarea","autofocus"),i("input textarea","placeholder"),i("a","download"),i("link script img","crossorigin"),i("img","loading"),i("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==e&&ea([a.video,a.audio],e=>{delete e.children.audio,delete e.children.video}),ae(ao("a form meter progress dfn"),e=>{a[e]&&delete a[e].children[e]}),delete a.caption.children.table,delete a.script,o6[e]=a,a})(s);!1===e.verify_html&&(e.valid_elements="*[*]");let c=ai(e.valid_styles),u=ai(e.invalid_styles,"map"),m=ai(e.valid_classes,"map"),f=i("whitespace_elements","pre script noscript style textarea video audio iframe object code"),g=i("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),p=i("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),h=i("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),b="td th iframe video audio object script code",v=i("non_empty_elements",b+" pre",p),y=i("move_caret_before_on_enter_elements",b+" table",p),C=i("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),x=i("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",C),w=i("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),E=i("transparent_elements","a ins del canvas map");ae("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),e=>{l[e]=RegExp("</"+e+"[^>]*>","gi")});let k=e=>RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),S=e=>{let t=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,n=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,a=/[*?+]/;if(e){let l,i;let s=ao(e,",");r["@"]&&(l=r["@"].attributes,i=r["@"].attributesOrder);for(let e=0,d=s.length;e<d;e++){let d=t.exec(s[e]);if(d){let e=d[1],t=d[2],s=d[3],c=d[5],u={},m=[],f={attributes:u,attributesOrder:m};if("#"===e&&(f.paddEmpty=!0),"-"===e&&(f.removeEmpty=!0),"!"===d[4]&&(f.removeEmptyAttrs=!0),l&&(eR(l,(e,t)=>{u[t]=e}),i&&m.push(...i)),c){let e=ao(c,"|");for(let t=0,r=e.length;t<r;t++)if(d=n.exec(e[t])){let e={},t=d[1],r=d[2].replace(/[\\:]:/g,":"),n=d[3],o=d[4];if("!"===t&&(f.attributesRequired=f.attributesRequired||[],f.attributesRequired.push(r),e.required=!0),"-"===t){delete u[r],m.splice(an(m,r),1);continue}if(n&&("="===n&&(f.attributesDefault=f.attributesDefault||[],f.attributesDefault.push({name:r,value:o}),e.defaultValue=o),"~"===n&&(f.attributesForced=f.attributesForced||[],f.attributesForced.push({name:r,value:o}),e.forcedValue=o),"<"===n&&(e.validValues=o7(o,"?"))),a.test(r)){let t=e;f.attributePatterns=f.attributePatterns||[],t.pattern=k(r),f.attributePatterns.push(t)}else u[r]||m.push(r),u[r]=e}}if(l||"@"!==t||(l=u,i=m),s&&(f.outputName=t,r[s]=f),a.test(t)){let e=f;e.pattern=k(t),o.push(e)}else r[t]=f}}}},_=e=>{o=[],ea(e_(r),e=>{delete r[e]}),S(e),ae(d,(e,t)=>{n[t]=e.children})},N=e=>{let t=/^(~)?(.+)$/;e&&(delete o9.text_block_elements,delete o9.block_elements,ae(ao(e,","),e=>{let o=t.exec(e);if(o){let e="~"===o[1],t=e?"span":"div",l=o[2];if(n[l]=n[t],a[l]=t,v[l.toUpperCase()]={},v[l]={},e||(x[l.toUpperCase()]={},x[l]={}),!r[l]){let e=r[t];delete(e=at({},e)).removeEmptyAttrs,delete e.removeEmpty,r[l]=e}ae(n,(e,r)=>{e[t]&&(n[r]=e=at({},n[r]),e[l]=e[t])})}}))},R=e=>{let t=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;delete o6[s],e&&ae(ao(e,","),e=>{let r=t.exec(e);if(r){let e;let t=r[1];e=t?n[r[2]]:n[r[2]]={"#comment":{}},e=n[r[2]],ae(ao(r[3],"|"),r=>{"-"===t?delete e[r]:e[r]={}})}})},A=e=>{let t=r[e];if(t)return t;let n=o.length;for(;n--;){let t=o[n];if(t.pattern.test(e))return t}};e.valid_elements?_(e.valid_elements):(ae(d,(e,t)=>{r[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},n[t]=e.children}),ae(ao("strong/b em/i"),e=>{let t=ao(e,"/");r[t[1]].outputName=t[0]}),ae(w,(t,n)=>{r[n]&&(e.padd_empty_block_inline_children&&(r[n].paddInEmptyBlock=!0),r[n].removeEmpty=!0)}),ae(ao("ol ul blockquote a table tbody"),e=>{r[e]&&(r[e].removeEmpty=!0)}),ae(ao("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),e=>{r[e].paddEmpty=!0}),ae(ao("span"),e=>{r[e].removeEmptyAttrs=!0})),N(e.custom_elements),R(e.valid_children),S(e.extended_valid_elements),R("+ol[ul|ol],+ul[ul|ol]"),ae({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(e,t)=>{r[t]&&(r[t].parentsRequired=ao(e))}),e.invalid_elements&&ae(ar(e.invalid_elements),e=>{r[e]&&delete r[e]}),A("span")||S("span[!data-mce-type|*]");let O=j(c),T=j(u),B=j(m),D=j(h),P=j(x),L=j(C),M=j(w),F=j(Object.seal(p)),I=j(g),U=j(v),z=j(y),H=j(f),$=j(E),V=j(Object.seal(l)),q=j(a);return{type:s,children:n,elements:r,getValidStyles:O,getValidClasses:B,getBlockElements:P,getInvalidStyles:T,getVoidElements:F,getTextBlockElements:L,getTextInlineElements:M,getBoolAttrs:D,getElementRule:A,getSelfClosingElements:I,getNonEmptyElements:U,getMoveCaretBeforeOnEnterElements:z,getWhitespaceElements:H,getTransparentElements:$,getSpecialElements:V,isValidChild:(e,t)=>{let r=n[e.toLowerCase()];return!(!r||!r[t.toLowerCase()])},isValid:(e,t)=>{let r=A(e);if(r){if(!t)return!0;{if(r.attributes[t])return!0;let e=r.attributePatterns;if(e){let r=e.length;for(;r--;)if(e[r].pattern.test(t))return!0}}}return!1},getCustomElements:q,addValidElements:S,setValidElements:_,addCustomElements:N,addValidChildren:R}},ad=(e={},t)=>{let r,n;let o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,a=/\s*([^:]+):\s*([^;]+);?/g,l=/\s+$/,i={};t&&(r=t.getValidStyles(),n=t.getInvalidStyles());let s="\\\" \\' \\; \\: ; : \uFEFF".split(" ");for(let e=0;e<s.length;e++)i[s[e]]="\uFEFF"+e,i["\uFEFF"+e]=s[e];let d={parse:t=>{var r,n,s;let c={},u=!1,m=e.url_converter,f=e.url_converter_scope||d,g=(e,t,r)=>{let n=c[e+"-top"+t];if(!n)return;let o=c[e+"-right"+t];if(!o)return;let a=c[e+"-bottom"+t];if(!a)return;let l=c[e+"-left"+t];if(!l)return;let i=[n,o,a,l],s=i.length-1;for(;s--&&i[s]===i[s+1];);s>-1&&r||(c[e+t]=-1===s?i[0]:i.join(" "),delete c[e+"-top"+t],delete c[e+"-right"+t],delete c[e+"-bottom"+t],delete c[e+"-left"+t])},p=e=>{let t=c[e];if(!t)return;let r=t.split(" "),n=r.length;for(;n--;)if(r[n]!==r[0])return!1;return c[e]=r[0],!0},h=e=>(u=!0,i[e]),b=(e,t)=>(u&&(e=e.replace(/\uFEFF[0-9]/g,e=>i[e])),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e),v=e=>String.fromCharCode(parseInt(e.slice(1),16)),y=e=>e.replace(/\\[0-9a-f]+/gi,v),C=(t,r,n,o,a,l)=>{if(a=a||l)return"'"+(a=b(a)).replace(/\'/g,"\\'")+"'";if(r=b(r||n||o||""),!e.allow_script_urls){let t=r.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(t)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(t))return""}return m&&(r=m.call(f,r,"style")),"url('"+r.replace(/\'/g,"\\'")+"')"};if(t){let i;for(t=(t=t.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,h).replace(/\"[^\"]+\"|\'[^\']+\'/g,e=>e.replace(/[;:]/g,h));i=a.exec(t);){a.lastIndex=i.index+i[0].length;let t=i[1].replace(l,"").toLowerCase(),r=i[2].replace(l,"");if(t&&r){if(t=y(t),r=y(r),-1!==t.indexOf("\uFEFF")||-1!==t.indexOf('"')||!e.allow_script_urls&&("behavior"===t||/expression\s*\(|\/\*|\*\//.test(r)))continue;"font-weight"===t&&"700"===r?r="bold":"color"!==t&&"background-color"!==t||(r=r.toLowerCase()),r=r.replace(o,C),c[t]=u?b(r,!0):r}}g("border","",!0),g("border","-width"),g("border","-color"),g("border","-style"),g("padding",""),g("margin",""),n="border-style",s="border-color",p(r="border-width")&&p(n)&&p(s)&&(c.border=c[r]+" "+c[n]+" "+c[s],delete c[r],delete c[n],delete c[s]),"medium none"===c.border&&delete c.border,"none"===c["border-image"]&&delete c["border-image"]}return c},serialize:(e,t)=>{let o="",a=(t,r)=>{let n=r[t];if(n)for(let t=0,r=n.length;t<r;t++){let r=n[t],a=e[r];a&&(o+=(o.length>0?" ":"")+r+": "+a+";")}};return t&&r?(a("*",r),a(t,r)):eR(e,(e,r)=>{e&&((e,t)=>{if(!n||!t)return!0;let r=n["*"];return!(r&&r[e]||(r=n[t])&&r[e])})(r,t)&&(o+=(o.length>0?" ":"")+r+": "+e+";")}),o}};return d},ac={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},au=(e,t)=>{let r=null!=t?t:{};for(let t in e)eF(ac,t)||(r[t]=e[t]);return P(e.composedPath)&&(r.composedPath=()=>e.composedPath()),r},am=(e,t,r,n)=>{var o,a;let l=au(t,n);return l.type=e,D(l.target)&&(l.target=null!==(o=l.srcElement)&&void 0!==o?o:r),(D(t.preventDefault)||(a=t)instanceof Event||L(a.initEvent))&&(l.preventDefault=()=>{l.defaultPrevented=!0,l.isDefaultPrevented=X,L(t.preventDefault)&&t.preventDefault()},l.stopPropagation=()=>{l.cancelBubble=!0,l.isPropagationStopped=X,L(t.stopPropagation)&&t.stopPropagation()},l.stopImmediatePropagation=()=>{l.isImmediatePropagationStopped=X,l.stopPropagation()},l.isDefaultPrevented===X||l.isDefaultPrevented===Y||(l.isDefaultPrevented=!0===l.defaultPrevented?X:Y,l.isPropagationStopped=!0===l.cancelBubble?X:Y,l.isImmediatePropagationStopped=Y)),l},af=/^(?:mouse|contextmenu)|click/,ag=(e,t,r,n)=>{e.addEventListener(t,r,n||!1)},ap=(e,t,r,n)=>{e.removeEventListener(t,r,n||!1)},ah=(e,t)=>{let r=am(e.type,e,document,t);if(P(e)&&af.test(e.type)&&B(e.pageX)&&!B(e.clientX)){let t=r.target.ownerDocument||document,n=t.documentElement,o=t.body,a=r;a.pageX=e.clientX+(n&&n.scrollLeft||o&&o.scrollLeft||0)-(n&&n.clientLeft||o&&o.clientLeft||0),a.pageY=e.clientY+(n&&n.scrollTop||o&&o.scrollTop||0)-(n&&n.clientTop||o&&o.clientTop||0)}return r},ab=(e,t,r)=>{let n=e.document,o={type:"ready"};if(r.domLoaded)return void t(o);let a=()=>{ap(e,"DOMContentLoaded",a),ap(e,"load",a),r.domLoaded||(r.domLoaded=!0,t(o)),e=null};"complete"===n.readyState||"interactive"===n.readyState&&n.body?a():ag(e,"DOMContentLoaded",a),r.domLoaded||ag(e,"load",a)};class av{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(e,t,r,n){let o,a;let l=this,i=window,s=e=>{l.executeHandlers(ah(e||i.event),a)};if(!e||nR(e)||nT(e))return r;e[l.expando]?a=e[l.expando]:(a=l.count++,e[l.expando]=a,l.events[a]={}),n=n||e;let d=t.split(" "),c=d.length;for(;c--;){let t=d[c],u=s,m=!1,f=!1;"DOMContentLoaded"===t&&(t="ready"),l.domLoaded&&"ready"===t&&"complete"===e.readyState?r.call(n,ah({type:t})):(l.hasFocusIn||"focusin"!==t&&"focusout"!==t||(m=!0,f="focusin"===t?"focus":"blur",u=e=>{let t=ah(e||i.event);t.type="focus"===t.type?"focusin":"focusout",l.executeHandlers(t,a)}),(o=l.events[a][t])?"ready"===t&&l.domLoaded?r(ah({type:t})):o.push({func:r,scope:n}):(l.events[a][t]=o=[{func:r,scope:n}],o.fakeName=f,o.capture=m,o.nativeHandler=u,"ready"===t?ab(e,u,l):ag(e,f||t,u,m)))}return e=o=null,r}unbind(e,t,r){if(!e||nR(e)||nT(e))return this;let n=e[this.expando];if(n){let o=this.events[n];if(t){let n=t.split(" "),a=n.length;for(;a--;){let t=n[a],l=o[t];if(l){if(r){let e=l.length;for(;e--;)if(l[e].func===r){let r=l.nativeHandler,n=l.fakeName,a=l.capture,i=l.slice(0,e).concat(l.slice(e+1));i.nativeHandler=r,i.fakeName=n,i.capture=a,o[t]=i}}r&&0!==l.length||(delete o[t],ap(e,l.fakeName||t,l.nativeHandler,l.capture))}}}else eR(o,(t,r)=>{ap(e,t.fakeName||r,t.nativeHandler,t.capture)}),o={};for(let e in o)if(eF(o,e))return this;delete this.events[n];try{delete e[this.expando]}catch(t){e[this.expando]=null}}return this}fire(e,t,r){return this.dispatch(e,t,r)}dispatch(e,t,r){if(!e||nR(e)||nT(e))return this;let n=ah({type:t,target:e},r);do{let t=e[this.expando];t&&this.executeHandlers(n,t),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!n.isPropagationStopped());return this}clean(e){if(!e||nR(e)||nT(e))return this;if(e[this.expando]&&this.unbind(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName){this.unbind(e);let t=e.getElementsByTagName("*"),r=t.length;for(;r--;)(e=t[r])[this.expando]&&this.unbind(e)}return this}destroy(){this.events={}}cancel(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}executeHandlers(e,t){let r=this.events[t],n=r&&r[e.type];if(n)for(let t=0,r=n.length;t<r;t++){let r=n[t];if(r&&!1===r.func.call(r.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}}}av.Event=new av;let ay=tL.each,aC=tL.grep,ax="data-mce-style",aw=tL.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),aE=(e,t,r)=>{D(r)||""===r?t3(e,t):tJ(e,t,r)},ak=e=>e.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),aS=(e,t)=>{let r=0;if(e)for(let n=e.nodeType,o=e.previousSibling;o;o=o.previousSibling){let e=o.nodeType;t&&nR(o)&&(e===n||!o.data.length)||(r++,n=e)}return r},a_=(e,t)=>{let r=t0(t,"style"),n=e.serialize(e.parse(r),t$(t));aE(t,ax,n)},aN=(e,t,r)=>{let n=ak(t);D(r)||""===r?r0(e,n):rG(e,n,M(r)?eF(aw,n)?r+"":r+"px":r)},aR=(e,t={})=>{let r={},n=window,o={},a=0,l=oH.forElement(ro(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy}),i=[],s=t.schema?t.schema:as({}),d=ad({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),c=t.ownEvents?new av:av.Event,u=s.getBlockElements(),m=t=>t&&e&&_(t)?e.getElementById(t):t,f=e=>{let t=m(e);return P(t)?ro(t):null},g=(e,t,r="")=>{let n;let o=f(e);if(P(o)&&tW(o)){let e=W[t];n=e&&e.get?e.get(o.dom,t):t0(o,t)}return P(n)?n:r},p=e=>{let t=m(e);return D(t)?[]:t.attributes},h=(e,r,n)=>{k(e,e=>{if(ny(e)){let o=ro(e),a=""===n?null:n,l=t0(o,r),i=W[r];i&&i.set?i.set(o.dom,a,r):aE(o,r,a),l!==a&&t.onSetAttrib&&t.onSetAttrib({attrElm:o.dom,attrName:r,attrValue:a})}})},b=()=>t.root_element||e.body,v=(t,r)=>((e,t,r)=>{let n=0,o=0,a=e.ownerDocument;if(r=r||e,t){var l;if(r===e&&t.getBoundingClientRect&&"static"===rX(ro(e),"position")){let r=t.getBoundingClientRect();return{x:n=r.left+(a.documentElement.scrollLeft||e.scrollLeft)-a.documentElement.clientLeft,y:o=r.top+(a.documentElement.scrollTop||e.scrollTop)-a.documentElement.clientTop}}let i=t;for(;i&&i!==r&&i.nodeType&&!oz(i,r);){let e=i;n+=e.offsetLeft||0,o+=e.offsetTop||0,i=e.offsetParent}for(i=t.parentNode;i&&i!==r&&i.nodeType&&!oz(i,r);)n-=i.scrollLeft||0,o-=i.scrollTop||0,i=i.parentNode;o+=(l=ro(t),oI.isFirefox()&&"table"===t$(l)?oU(rk(l)).filter(e=>"caption"===t$(e)).bind(e=>oU(rE(e)).map(t=>{let r=t.dom.offsetTop,n=e.dom.offsetTop,o=e.dom.offsetHeight;return r<=n?-o:0})).getOr(0):0)}return{x:n,y:o}})(e.body,m(t),r),y=(e,t,r)=>{let n=m(e);if(!D(n)&&ny(n))return r?rX(ro(n),ak(t)):("float"===(t=t.replace(/-(\D)/g,(e,t)=>t.toUpperCase()))&&(t="cssFloat"),n.style?n.style[t]:void 0)},C=e=>{let t=m(e);if(!t)return{w:0,h:0};let r=y(t,"width"),n=y(t,"height");return r&&-1!==r.indexOf("px")||(r="0"),n&&-1!==n.indexOf("px")||(n="0"),{w:parseInt(r,10)||t.offsetWidth||t.clientWidth,h:parseInt(n,10)||t.offsetHeight||t.clientHeight}},x=(e,t)=>{if(!e)return!1;let r=A(e)?e:[e];return en(r,e=>rc(ro(e),t))},w=(e,t,r,n)=>{let o=[],a=m(e);n=void 0===n;let l=r||("BODY"!==b().nodeName?b().parentNode:null);if(_(t)){if("*"===t)t=ny;else{let e=t;t=t=>x(t,e)}}for(;a&&!(a===l||D(a.nodeType)||nB(a)||nD(a));){if(!t||t(a)){if(!n)return[a];o.push(a)}a=a.parentNode}return n?o:null},E=(e,t,r)=>{let n=t;if(e){_(t)&&(n=e=>x(e,t));for(let t=e[r];t;t=t[r])if(L(n)&&n(t))return t}return null},k=function(e,t,r){let n=null!=r?r:this;if(A(e)){let r=[];return ay(e,(e,o)=>{let a=m(e);a&&r.push(t.call(n,a,o))}),r}{let r=m(e);return!!r&&t.call(n,r)}},S=(e,t)=>{k(e,e=>{eR(t,(t,r)=>{h(e,r,t)})})},N=(e,t)=>{k(e,e=>{let r=ro(e);nr(r,t)})},R=(t,r,n,o,a)=>k(t,t=>{let l=_(r)?e.createElement(r):r;return P(n)&&S(l,n),o&&(!_(o)&&o.nodeType?l.appendChild(o):_(o)&&N(l,o)),a?l:t.appendChild(l)}),O=(t,r,n)=>R(e.createElement(t),t,r,n,!0),T=o5.encodeAllRaw,B=(e,t)=>k(e,e=>{let r=ro(e);return t&&ea(rk(r),e=>{tK(e)&&0===e.dom.length?r4(e):r1(r,e)}),r4(r),r.dom}),M=(e,t,r)=>{k(e,e=>{if(ny(e)){let n=ro(e),o=t.split(" ");ea(o,e=>{P(r)?(r?re:rr)(n,e):(t6(n)?n.dom.classList.toggle(e):er(t9(n),e)?t7(n,e):t4(n,e),rt(n))})}})},F=(e,t,r)=>k(t,n=>{var o;let a=A(t)?e.cloneNode(!0):e;return r&&ay(aC(n.childNodes),e=>{a.appendChild(e)}),null===(o=n.parentNode)||void 0===o||o.replaceChild(a,n),n}),U=e=>{if(ny(e)){let t="a"===e.nodeName.toLowerCase()&&!g(e,"href")&&g(e,"id");if(g(e,"name")||g(e,"data-mce-bookmark")||t)return!0}return!1},z=()=>e.createRange(),H=(r,o,a,l)=>{if(A(r)){let e=r.length,t=[];for(;e--;)t[e]=H(r[e],o,a,l);return t}return t.collect&&(r===e||r===n)&&i.push([r,o,a,l]),c.bind(r,o,a,l||q)},$=(t,r,o)=>{if(A(t)){let e=t.length,n=[];for(;e--;)n[e]=$(t[e],r,o);return n}if(i.length>0&&(t===e||t===n)){let e=i.length;for(;e--;){let[n,a,l]=i[e];t!==n||r&&r!==a||o&&o!==l||c.unbind(n,a,l)}}return c.unbind(t,r,o)},V=e=>{if(e&&ny(e)){let t=e.getAttribute("data-mce-contenteditable");return t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null}return null},q={doc:e,settings:t,win:n,files:o,stdMode:!0,boxModel:!0,styleSheetLoader:l,boundEvents:i,styles:d,schema:s,events:c,isBlock:e=>_(e)?eF(u,e):ny(e)&&(eF(u,e.nodeName)||oL(s,e)),root:null,clone:(e,t)=>e.cloneNode(t),getRoot:b,getViewPort:e=>{let t=nm(e);return{x:t.x,y:t.y,w:t.width,h:t.height}},getRect:e=>{let t=m(e),r=v(t),n=C(t);return{x:r.x,y:r.y,w:n.w,h:n.h}},getSize:C,getParent:(e,t,r)=>{let n=w(e,t,r,!1);return n&&n.length>0?n[0]:null},getParents:w,get:m,getNext:(e,t)=>E(e,t,"nextSibling"),getPrev:(e,t)=>E(e,t,"previousSibling"),select:(r,n)=>{var o,a;let l=null!==(a=null!==(o=m(n))&&void 0!==o?o:t.root_element)&&void 0!==a?a:e;return L(l.querySelectorAll)?ek(l.querySelectorAll(r)):[]},is:x,add:R,create:O,createHTML:(e,t,r="")=>{let n="<"+e;for(let e in t)eI(t,e)&&(n+=" "+e+'="'+T(t[e])+'"');return e7(r)&&eF(s.getVoidElements(),e)?n+" />":n+">"+r+"</"+e+">"},createFragment:t=>{let r;let n=e.createElement("div"),o=e.createDocumentFragment();for(o.appendChild(n),t&&(n.innerHTML=t);r=n.firstChild;)o.appendChild(r);return o.removeChild(n),o},remove:B,setStyle:(e,r,n)=>{k(e,e=>{let o=ro(e);aN(o,r,n),t.update_styles&&a_(d,o)})},getStyle:y,setStyles:(e,r)=>{k(e,e=>{let n=ro(e);eR(r,(e,t)=>{aN(n,t,e)}),t.update_styles&&a_(d,n)})},removeAllAttribs:e=>k(e,e=>{let t=e.attributes;for(let r=t.length-1;r>=0;r--)e.removeAttributeNode(t.item(r))}),setAttrib:h,setAttribs:S,getAttrib:g,getPos:v,parseStyle:e=>d.parse(e),serializeStyle:(e,t)=>d.serialize(e,t),addStyle:t=>{if(q!==aR.DOM&&e===document){if(r[t])return;r[t]=!0}let n=e.getElementById("mceDefaultStyles");if(!n){(n=e.createElement("style")).id="mceDefaultStyles",n.type="text/css";let t=e.head;t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)}n.styleSheet?n.styleSheet.cssText+=t:n.appendChild(e.createTextNode(t))},loadCSS:e=>{e||(e=""),ea(e.split(","),e=>{o[e]=!0,l.load(e).catch(I)})},addClass:(e,t)=>{M(e,t,!0)},removeClass:(e,t)=>{M(e,t,!1)},hasClass:(e,t)=>{let r=f(e),n=t.split(" ");return P(r)&&eh(n,e=>rn(r,e))},toggleClass:M,show:e=>{k(e,e=>r0(ro(e),"display"))},hide:e=>{k(e,e=>rG(ro(e),"display","none"))},isHidden:e=>{let t=f(e);return P(t)&&tM(rJ(t,"display"),"none")},uniqueId:e=>(e||"mce_")+a++,setHTML:N,getOuterHTML:e=>{let t=f(e);return P(t)?ny(t.dom)?t.dom.outerHTML:(e=>{let t=rl("div"),r=ro(e.dom.cloneNode(!0));return r8(t,r),nt(t)})(t):""},setOuterHTML:(e,t)=>{k(e,e=>{ny(e)&&(e.outerHTML=t)})},decode:o5.decode,encode:T,insertAfter:(e,t)=>{let r=m(t);return k(e,e=>{let t=null==r?void 0:r.parentNode,n=null==r?void 0:r.nextSibling;return t&&(n?t.insertBefore(e,n):t.appendChild(e)),e})},replace:F,rename:(e,t)=>{if(e.nodeName!==t.toUpperCase()){let r=O(t);return ay(p(e),t=>{h(r,t.nodeName,g(e,t.nodeName))}),F(r,e,!0),r}return e},findCommonAncestor:(e,t)=>{let r=e;for(;r;){let e=t;for(;e&&r!==e;)e=e.parentNode;if(r===e)break;r=r.parentNode}return!r&&e.ownerDocument?e.ownerDocument.documentElement:r},run:k,getAttribs:p,isEmpty:(e,t)=>{let r=0;if(U(e))return!1;let n=e.firstChild;if(n){let o=new nh(n,e),a=s?s.getWhitespaceElements():{},l=t||(s?s.getNonEmptyElements():null),i=n;do{if(ny(i)){let e=i.getAttribute("data-mce-bogus");if(e){i=o.next("all"===e);continue}let t=i.nodeName.toLowerCase();if(l&&l[t]){if("br"===t){r++,i=o.next();continue}return!1}if(U(i))return!1}if(nT(i)||nR(i)&&!oh(i.data)||nR(i)&&i.parentNode&&a[i.parentNode.nodeName]&&oh(i.data))return!1;i=o.next()}while(i)}return r<=1},createRng:z,nodeIndex:aS,split:(e,t,r)=>{let n,o,a=z();if(e&&t&&e.parentNode&&t.parentNode){let l=e.parentNode;return a.setStart(l,aS(e)),a.setEnd(t.parentNode,aS(t)),n=a.extractContents(),(a=z()).setStart(t.parentNode,aS(t)+1),a.setEnd(l,aS(e)+1),o=a.extractContents(),l.insertBefore(oq(q,n),e),r?l.insertBefore(r,e):l.insertBefore(t,e),l.insertBefore(oq(q,o),e),B(e),r||t}},bind:H,unbind:$,fire:(e,t,r)=>c.dispatch(e,t,r),dispatch:(e,t,r)=>c.dispatch(e,t,r),getContentEditable:V,getContentEditableParent:e=>{let t=b(),r=null;for(let n=e;n&&n!==t&&null===(r=V(n));n=n.parentNode);return r},isEditable:e=>{if(P(e)){let t=ny(e)?e:e.parentElement,r="true"===V(b());return P(t)&&rV(ro(t),r)}return!1},destroy:()=>{if(i.length>0){let e=i.length;for(;e--;){let[t,r,n]=i[e];c.unbind(t,r,n)}}eR(o,(e,t)=>{l.unload(t),delete o[t]})},isChildOf:(e,t)=>e===t||t.contains(e),dumpRng:e=>"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},W=((e,t,r)=>{let n=t.keep_values,o={set:(e,n,o)=>{let a=ro(e);L(t.url_converter)&&P(n)&&(n=t.url_converter.call(t.url_converter_scope||r(),String(n),o,e)),aE(a,"data-mce-"+o,n),aE(a,o,n)},get:(e,t)=>{let r=ro(e);return t0(r,"data-mce-"+t)||t0(r,t)}},a={style:{set:(t,r)=>{let o=ro(t);n&&aE(o,ax,r),t3(o,"style"),_(r)&&rY(o,e.parse(r))},get:t=>{let r=ro(t),n=t0(r,ax)||t0(r,"style");return e.serialize(e.parse(n),t$(r))}}};return n&&(a.href=a.src=o),a})(d,t,j(q));return q};aR.DOM=aR(document),aR.nodeIndex=aS;let aA=aR.DOM;class aO{constructor(e={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=e}_setReferrerPolicy(e){this.settings.referrerPolicy=e}loadScript(e){return new Promise((t,r)=>{let n;let o=()=>{aA.remove(a),n&&(n.onerror=n.onload=n=null)},a=aA.uniqueId();(n=document.createElement("script")).id=a,n.type="text/javascript",n.src=tL._addCacheSuffix(e),this.settings.referrerPolicy&&aA.setAttrib(n,"referrerpolicy",this.settings.referrerPolicy),n.onload=()=>{o(),t()},n.onerror=()=>{o(),r("Failed to load script: "+e)},(document.getElementsByTagName("head")[0]||document.body).appendChild(n)})}isDone(e){return 2===this.states[e]}markDone(e){this.states[e]=2}add(e){let t=this;return t.queue.push(e),void 0===t.states[e]&&(t.states[e]=0),new Promise((r,n)=>{t.scriptLoadedCallbacks[e]||(t.scriptLoadedCallbacks[e]=[]),t.scriptLoadedCallbacks[e].push({resolve:r,reject:n})})}load(e){return this.add(e)}remove(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]}loadQueue(){let e=this.queue;return this.queue=[],this.loadScripts(e)}loadScripts(e){let t=this,r=(e,r)=>{eM(t.scriptLoadedCallbacks,r).each(t=>{ea(t,t=>t[e](r))}),delete t.scriptLoadedCallbacks[r]},n=e=>{let t=es(e,e=>"rejected"===e.status);return t.length>0?Promise.reject(ep(t,({reason:e})=>A(e)?e:[e])):Promise.resolve()},o=e=>Promise.allSettled(eo(e,e=>2===t.states[e]?(r("resolve",e),Promise.resolve()):3===t.states[e]?(r("reject",e),Promise.reject(e)):(t.states[e]=1,t.loadScript(e).then(()=>{t.states[e]=2,r("resolve",e);let a=t.queue;return a.length>0?(t.queue=[],o(a).then(n)):Promise.resolve()},()=>(t.states[e]=3,r("reject",e),Promise.reject(e)))))),a=e=>(t.loading=!0,o(e).then(e=>{t.loading=!1;let r=t.queueLoadedCallbacks.shift();return Q.from(r).each(G),n(e)})),l=eU(e);return t.loading?new Promise((e,r)=>{t.queueLoadedCallbacks.push(()=>a(l).then(e,r))}):a(l)}}aO.ScriptLoader=new aO;let aT=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},aB={},aD=aT("en"),aP=()=>eM(aB,aD.get()),aL={getData:()=>eA(aB,e=>({...e})),setCode:e=>{e&&aD.set(e)},getCode:()=>aD.get(),add:(e,t)=>{let r=aB[e];r||(aB[e]=r={}),eR(t,(e,t)=>{r[t.toLowerCase()]=e})},translate:e=>{let t=aP().getOr({}),r=e=>L(e)?Object.prototype.toString.call(e):n(e)?"":""+e,n=e=>""===e||null==e,o=e=>{let n=r(e);return eM(t,n.toLowerCase()).map(r).getOr(n)},a=e=>e.replace(/{context:\w+}$/,"");if(n(e))return"";if(N(e)&&eF(e,"raw"))return r(e.raw);if(A(e)&&e.length>1){let t=e.slice(1);return a(o(e[0]).replace(/\{([0-9]+)\}/g,(e,n)=>eF(t,n)?r(t[n]):e))}return a(o(e))},isRtl:()=>aP().bind(e=>eM(e,"_dir")).exists(e=>"rtl"===e),hasCode:e=>eF(aB,e)},aM=()=>{let e=[],t={},r={},n=[],o=(e,t)=>{let r=es(n,r=>r.name===e&&r.state===t);ea(r,e=>e.resolve())},a=e=>eF(t,e),l=(e,r)=>{let n=aL.getCode();!n||r&&-1===(","+(r||"")+",").indexOf(","+n+",")||aO.ScriptLoader.add(t[e]+"/langs/"+n+".js")},i=(e,t="added")=>"added"===t&&eF(r,e)||"loaded"===t&&a(e)?Promise.resolve():new Promise(r=>{n.push({name:e,state:t,resolve:r})});return{items:e,urls:t,lookup:r,get:e=>{if(r[e])return r[e].instance},requireLangPack:(e,t)=>{!1!==aM.languageLoad&&(a(e)?l(e,t):i(e,"loaded").then(()=>l(e,t)))},add:(t,n)=>(e.push(n),r[t]={instance:n},o(t,"added"),n),remove:e=>{delete t[e],delete r[e]},createUrl:(e,t)=>_(t)?_(e)?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}:t,load:(e,n)=>{if(t[e])return Promise.resolve();let a=_(n)?n:n.prefix+n.resource+n.suffix;0!==a.indexOf("/")&&-1===a.indexOf("://")&&(a=aM.baseURL+"/"+a),t[e]=a.substring(0,a.lastIndexOf("/"));let l=()=>(o(e,"loaded"),Promise.resolve());return r[e]?l():aO.ScriptLoader.add(a).then(l)},waitFor:i}};aM.languageLoad=!0,aM.baseURL="",aM.PluginManager=aM(),aM.ThemeManager=aM(),aM.ModelManager=aM();let aF=e=>{let t=aT(Q.none()),r=()=>t.get().each(e=>clearInterval(e));return{clear:()=>{r(),t.set(Q.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:n=>{r(),t.set(Q.some(setInterval(n,e)))}}},aI=()=>{let e=(e=>{let t=aT(Q.none()),r=()=>t.get().each(e);return{clear:()=>{r(),t.set(Q.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{r(),t.set(Q.some(e))}}})(I);return{...e,on:t=>e.get().each(t)}},aU=(e,t)=>{let r=null;return{cancel:()=>{O(r)||(clearTimeout(r),r=null)},throttle:(...n)=>{O(r)&&(r=setTimeout(()=>{r=null,e.apply(null,n)},t))}}},az=(e,t)=>{let r=null,n=()=>{O(r)||(clearTimeout(r),r=null)};return{cancel:n,throttle:(...o)=>{n(),r=setTimeout(()=>{r=null,e.apply(null,o)},t)}}},aj=j("mce-annotation"),aH=j("data-mce-annotation"),a$=j("data-mce-annotation-uid"),aV=j("data-mce-annotation-active"),aq=j("data-mce-annotation-classes"),aW=j("data-mce-annotation-attrs"),aK=e=>t=>rm(t,e),aG=(e,t)=>{let r=e.selection.getRng(),n=ro(r.startContainer),o=ro(e.getBody()),a=t.fold(()=>"."+aj(),e=>`[${aH()}="${e}"]`),l=rS(n,r.startOffset).getOr(n);return r$(l,a,aK(o)).bind(t=>t1(t,`${a$()}`).bind(r=>t1(t,`${aH()}`).map(t=>{let n=aX(e,r);return{uid:r,name:t,elements:n}})))},aY=(e,t)=>t2(e,"data-mce-bogus")||np(e,'[data-mce-bogus="all"]',aK(t)),aX=(e,t)=>{let r=ro(e.getBody()),n=ng(r,`[${a$()}="${t}"]`);return es(n,e=>!aY(e,r))},aQ=(e,t)=>{let r=ro(e.getBody()),n=ng(r,`[${aH()}="${t}"]`),o={};return ea(n,e=>{if(!aY(e,r)){let t=t0(e,a$()),r=eM(o,t).getOr([]);o[t]=r.concat([e])}}),o},aJ=0,aZ=e=>{let t=(new Date).getTime();return e+"_"+Math.floor(1e9*Math.random())+ ++aJ+String(t)},a0=(e,t)=>ro(e.dom.cloneNode(t)),a1=e=>a0(e,!1),a2=e=>a0(e,!0),a3=(e,t,r=Y)=>{let n=new nh(e,t),o=e=>{let t;do t=n[e]();while(t&&!nR(t)&&!r(t));return Q.from(t).filter(nR)};return{current:()=>Q.from(n.current()).filter(nR),next:()=>o("next"),prev:()=>o("prev"),prev2:()=>o("prev2")}},a8=(e,t)=>{let r=t||(t=>e.isBlock(t)||nP(t)||nF(t)),n=(e,t,r,o)=>{if(nR(e)){let r=o(e,t,e.data);if(-1!==r)return Q.some({container:e,offset:r})}return r().bind(e=>n(e.container,e.offset,r,o))};return{backwards:(t,o,a,l)=>{let i=a3(t,null!=l?l:e.getRoot(),r);return n(t,o,()=>i.prev().map(e=>({container:e,offset:e.length})),a).getOrNull()},forwards:(t,o,a,l)=>{let i=a3(t,null!=l?l:e.getRoot(),r);return n(t,o,()=>i.next().map(e=>({container:e,offset:0})),a).getOrNull()}}},a5=Math.round,a6=e=>e?{left:a5(e.left),top:a5(e.top),bottom:a5(e.bottom),right:a5(e.right),width:a5(e.width),height:a5(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},a9=(e,t)=>(e=a6(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),a4=(e,t,r)=>e>=0&&e<=Math.min(t.height,r.height)/2,a7=(e,t)=>{let r=Math.min(t.height/2,e.height/2);return e.bottom-r<t.top||!(e.top>t.bottom)&&a4(t.top-e.bottom,e,t)},le=(e,t)=>e.top>t.bottom||!(e.bottom<t.top)&&a4(t.bottom-e.top,e,t),lt=(e,t,r)=>{let n=Math.max(Math.min(t,e.left+e.width),e.left),o=Math.max(Math.min(r,e.top+e.height),e.top);return Math.sqrt((t-n)*(t-n)+(r-o)*(r-o))},lr=e=>{let t=e.startContainer,r=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===r+1?t.childNodes[r]:null},ln=(e,t)=>{if(ny(e)&&e.hasChildNodes()){let r=e.childNodes,n=Math.min(Math.max(t,0),r.length-1);return r[n]}return e},lo=RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),la=e=>_(e)&&e.charCodeAt(0)>=768&&lo.test(e),ll=nw("display","block table"),li=nw("float","left right"),ls=((...e)=>t=>{for(let r=0;r<e.length;r++)if(!e[r](t))return!1;return!0})(ny,om,q(li)),ld=q(nw("white-space","pre pre-line pre-wrap")),lc=aR.nodeIndex,lu=(e,t)=>t<0&&ny(e)&&e.hasChildNodes()?void 0:ln(e,t),lm=e=>e?e.createRange():aR.DOM.createRng(),lf=e=>_(e)&&/[\r\n\t ]/.test(e),lg=e=>!!e.setStart&&!!e.setEnd,lp=e=>{let t=e.startContainer,r=e.startOffset;if(lf(e.toString())&&ld(t.parentNode)&&nR(t)){let e=t.data;if(lf(e[r-1])||lf(e[r+1]))return!0}return!1},lh=e=>0===e.left&&0===e.right&&0===e.top&&0===e.bottom,lb=e=>{var t;let r;let n=e.getClientRects();return r=n.length>0?a6(n[0]):a6(e.getBoundingClientRect()),!lg(e)&&nP(e)&&lh(r)?(e=>{let t=e.ownerDocument,r=lm(t),n=t.createTextNode("\xa0"),o=e.parentNode;o.insertBefore(n,e),r.setStart(n,0),r.setEnd(n,1);let a=a6(r.getBoundingClientRect());return o.removeChild(n),a})(e):lh(r)&&lg(e)&&null!==(t=(e=>{let t=e.startContainer,r=e.endContainer,n=e.startOffset,o=e.endOffset;if(t===r&&nR(r)&&0===n&&1===o){let t=e.cloneRange();return t.setEndAfter(r),lb(t)}return null})(e))&&void 0!==t?t:r},lv=(e,t)=>{let r=a9(e,t);return r.width=1,r.right=r.left+1,r},ly=(e,t,r)=>{let n=()=>(r||(r=(e=>{let t=[],r=e=>{var r;0!==e.height&&(t.length>0&&(r=t[t.length-1],e.left===r.left&&e.top===r.top&&e.bottom===r.bottom&&e.right===r.right)||t.push(e))},n=(e,t)=>{let n=lm(e.ownerDocument);if(t<e.data.length){if(la(e.data[t]))return;if(la(e.data[t-1])&&(n.setStart(e,t),n.setEnd(e,t+1),!lp(n)))return void r(lv(lb(n),!1))}t>0&&(n.setStart(e,t-1),n.setEnd(e,t),lp(n)||r(lv(lb(n),!1))),t<e.data.length&&(n.setStart(e,t),n.setEnd(e,t+1),lp(n)||r(lv(lb(n),!0)))},o=e.container(),a=e.offset();if(nR(o))return n(o,a),t;if(ny(o)){if(e.isAtEnd()){let e=lu(o,a);nR(e)&&n(e,e.data.length),ls(e)&&!nP(e)&&r(lv(lb(e),!1))}else{let l=lu(o,a);if(nR(l)&&n(l,0),ls(l)&&e.isAtEnd())return r(lv(lb(l),!1)),t;let i=lu(e.container(),e.offset()-1);ls(i)&&!nP(i)&&(ll(i)||ll(l)||!ls(l))&&r(lv(lb(i),!1)),ls(l)&&r(lv(lb(l),!0))}}return t})(ly(e,t))),r);return{container:j(e),offset:j(t),toRange:()=>{let r=lm(e.ownerDocument);return r.setStart(e,t),r.setEnd(e,t),r},getClientRects:n,isVisible:()=>n().length>0,isAtStart:()=>(nR(e),0===t),isAtEnd:()=>nR(e)?t>=e.data.length:t>=e.childNodes.length,isEqual:r=>r&&e===r.container()&&t===r.offset(),getNode:r=>lu(e,r?t-1:t)}};ly.fromRangeStart=e=>ly(e.startContainer,e.startOffset),ly.fromRangeEnd=e=>ly(e.endContainer,e.endOffset),ly.after=e=>ly(e.parentNode,lc(e)+1),ly.before=e=>ly(e.parentNode,lc(e)),ly.isAbove=(e,t)=>tF(ew(t.getClientRects()),eE(e.getClientRects()),a7).getOr(!1),ly.isBelow=(e,t)=>tF(eE(t.getClientRects()),ew(e.getClientRects()),le).getOr(!1),ly.isAtStart=e=>!!e&&e.isAtStart(),ly.isAtEnd=e=>!!e&&e.isAtEnd(),ly.isTextPosition=e=>!!e&&nR(e.container()),ly.isElementPosition=e=>!ly.isTextPosition(e);let lC=(e,t)=>{nR(t)&&0===t.data.length&&e.remove(t)},lx=(e,t,r)=>{nD(r)?((e,t,r)=>{let n=Q.from(r.firstChild),o=Q.from(r.lastChild);t.insertNode(r),n.each(t=>lC(e,t.previousSibling)),o.each(t=>lC(e,t.nextSibling))})(e,t,r):(t.insertNode(r),lC(e,r.previousSibling),lC(e,r.nextSibling))},lw=aR.nodeIndex,lE=e=>{let t=e.parentNode;return nk(t)?lE(t):t},lk=e=>e?eq(e.childNodes,(e,t)=>(nk(t)&&"BR"!==t.nodeName?e=e.concat(lk(t)):e.push(t),e),[]):[],lS=e=>t=>e===t,l_=e=>(nR(e)?"text()":e.nodeName.toLowerCase())+"["+(e=>{let t,r;r=eW(t=lk(lE(e)),lS(e),e),t=t.slice(0,r+1);let n=eq(t,(e,r,n)=>(nR(r)&&nR(t[n-1])&&e++,e),0);return(r=eW(t=eV(t,nx([e.nodeName])),lS(e),e))-n})(e)+"]",lN=(e,t)=>{let r,n=[],o=t.container(),a=t.offset();if(nR(o))r=((e,t)=>{let r=e;for(;(r=r.previousSibling)&&nR(r);)t+=r.data.length;return t})(o,a);else{let e=o.childNodes;a>=e.length?(r="after",a=e.length-1):r="before",o=e[a]}n.push(l_(o));let l=((e,t,r)=>{let n=[];for(let r=t.parentNode;r&&r!==e;r=r.parentNode)n.push(r);return n})(e,o);return l=eV(l,q(nk)),(n=n.concat(e$(l,e=>l_(e)))).reverse().join("/")+","+r},lR=(e,t)=>{if(!t)return null;let r=t.split(","),n=r[0].split("/"),o=r.length>1?r[1]:"before",a=eq(n,(e,t)=>{var r,n;let o;let a=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t);return a?("text()"===a[1]&&(a[1]="#text"),r=a[1],n=parseInt(a[2],10),o=eV(o=lk(e),(e,t)=>!nR(e)||!nR(o[t-1])),(o=eV(o,nx([r])))[n]):null},e);if(!a)return null;if(!nR(a)&&a.parentNode){let e;return e="after"===o?lw(a)+1:lw(a),ly(a.parentNode,e)}return((e,t)=>{let r=e,n=0;for(;nR(r);){let o=r.data.length;if(t>=n&&t<=n+o){e=r,t-=n;break}if(!nR(r.nextSibling)){e=r,t=o;break}n+=o,r=r.nextSibling}return nR(e)&&t>e.data.length&&(t=e.data.length),ly(e,t)})(a,parseInt(o,10))},lA=(e,t,r,n,o)=>{let a=o?n.startContainer:n.endContainer,l=o?n.startOffset:n.endOffset,i=[],s=e.getRoot();if(nR(a))i.push(r?((e,t,r)=>{let n=e(t.data.slice(0,r)).length;for(let r=t.previousSibling;r&&nR(r);r=r.previousSibling)n+=e(r.data).length;return n})(t,a,l):l);else{let t=0,n=a.childNodes;l>=n.length&&n.length&&(t=1,l=Math.max(0,n.length-1)),i.push(e.nodeIndex(n[l],r)+t)}for(let t=a;t&&t!==s;t=t.parentNode)i.push(e.nodeIndex(t,r));return i},lO=(e,t,r)=>{let n=0;return tL.each(e.select(t),e=>"all"===e.getAttribute("data-mce-bogus")?void 0:e!==r&&void n++),n},lT=(e,t)=>{let r=t?e.startContainer:e.endContainer,n=t?e.startOffset:e.endOffset;if(ny(r)&&"TR"===r.nodeName){let o=r.childNodes;(r=o[Math.min(t?n:n-1,o.length-1)])&&(n=t?0:r.childNodes.length,t?e.setStart(r,n):e.setEnd(r,n))}},lB=e=>(lT(e,!0),lT(e,!1),e),lD=(e,t)=>{if(ny(e)&&nF(e=ln(e,t)))return e;if(ot(e)){nR(e)&&n7(e)&&(e=e.parentNode);let t=e.previousSibling;if(nF(t)||nF(t=e.nextSibling))return t}},lP=(e,t,r)=>{let n=r.getNode(),o=r.getRng();if("IMG"===n.nodeName||nF(n)){let e=n.nodeName;return{name:e,index:lO(r.dom,e,n)}}let a=lD(o.startContainer,o.startOffset)||lD(o.endContainer,o.endOffset);if(a){let e=a.tagName;return{name:e,index:lO(r.dom,e,a)}}return((e,t,r,n)=>{let o=t.dom,a=lA(o,e,r,n,!0),l=t.isForward(),i=os(n)?{isFakeCaret:!0}:{};return t.isCollapsed()?{start:a,forward:l,...i}:{start:a,end:lA(o,e,r,n,!1),forward:l,...i}})(e,r,t,o)},lL=(e,t,r)=>{let n={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return r?e.create("span",n,"&#xFEFF;"):e.create("span",n)},lM=(e,t)=>{let r=e.dom,n=e.getRng(),o=r.uniqueId(),a=e.isCollapsed(),l=e.getNode(),i=l.nodeName,s=e.isForward();if("IMG"===i)return{name:i,index:lO(r,i,l)};let d=lB(n.cloneRange());if(!a){d.collapse(!1);let e=lL(r,o+"_end",t);lx(r,d,e)}(n=lB(n)).collapse(!0);let c=lL(r,o+"_start",t);return lx(r,n,c),e.moveToBookmark({id:o,keep:!0,forward:s}),{id:o,forward:s}},lF=V(lP,H,!0),lI=e=>{let t=t=>t(e),r=j(e),n={tag:!0,inner:e,fold:(t,r)=>r(e),isValue:X,isError:Y,map:t=>lz.value(t(e)),mapError:()=>n,bind:t,exists:t,forall:t,getOr:r,or:()=>n,getOrThunk:r,orThunk:()=>n,getOrDie:r,each:t=>{t(e)},toOptional:()=>Q.some(e)};return n},lU=e=>{let t={tag:!1,inner:e,fold:(t,r)=>t(e),isValue:Y,isError:X,map:()=>t,mapError:t=>lz.error(t(e)),bind:()=>t,exists:Y,forall:X,getOr:H,or:H,getOrThunk:K,orThunk:K,getOrDie:W(String(e)),each:I,toOptional:Q.none};return t},lz={value:lI,error:lU,fromOption:(e,t)=>e.fold(()=>lU(t),lI)},lj=e=>{if(!A(e))throw Error("cases must be an array");if(0===e.length)throw Error("there must be at least one case");let t=[],r={};return ea(e,(n,o)=>{let a=e_(n);if(1!==a.length)throw Error("one and only one name per case");let l=a[0],i=n[l];if(void 0!==r[l])throw Error("duplicate key detected:"+l);if("cata"===l)throw Error("cannot have a case named cata (sorry)");if(!A(i))throw Error("case arguments must be an array");t.push(l),r[l]=(...r)=>{let n=r.length;if(n!==i.length)throw Error("Wrong number of arguments to case "+l+". Expected "+i.length+" ("+i+"), got "+n);return{fold:(...t)=>{if(t.length!==e.length)throw Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);return t[o].apply(null,r)},match:e=>{let n=e_(e);if(t.length!==n.length)throw Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+n.join(","));if(!eh(t,e=>er(n,e)))throw Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+t.join(", "));return e[l].apply(null,r)},log:e=>{console.log(e,{constructors:t,constructor:l,params:r})}}}}),r};lj([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);let lH=e=>"inline-command"===e.type||"inline-format"===e.type,l$=e=>"block-command"===e.type||"block-format"===e.type,lV=e=>{let t=t=>lz.error({message:t,pattern:e}),r=(r,n,o)=>{if(void 0!==e.format){let o;if(A(e.format)){if(!eh(e.format,_))return t(r+" pattern has non-string items in the `format` array");o=e.format}else{if(!_(e.format))return t(r+" pattern has non-string `format` parameter");o=[e.format]}return lz.value(n(o))}return void 0!==e.cmd?_(e.cmd)?lz.value(o(e.cmd,e.value)):t(r+" pattern has non-string `cmd` parameter"):t(r+" pattern is missing both `format` and `cmd` parameters")};if(!N(e))return t("Raw pattern is not an object");if(!_(e.start))return t("Raw pattern is missing `start` parameter");if(void 0!==e.end){if(!_(e.end))return t("Inline pattern has non-string `end` parameter");if(0===e.start.length&&0===e.end.length)return t("Inline pattern has empty `start` and `end` parameters");let n=e.start,o=e.end;return 0===o.length&&(o=n,n=""),r("Inline",e=>({type:"inline-format",start:n,end:o,format:e}),(e,t)=>({type:"inline-command",start:n,end:o,cmd:e,value:t}))}return void 0!==e.replacement?_(e.replacement)?0===e.start.length?t("Replacement pattern has empty `start` parameter"):lz.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):t("Replacement pattern has non-string `replacement` parameter"):0===e.start.length?t("Block pattern has empty `start` parameter"):r("Block",t=>({type:"block-format",start:e.start,format:t[0]}),(t,r)=>({type:"block-command",start:e.start,cmd:t,value:r}))},lq=e=>es(e,l$),lW=e=>es(e,lH),lK=e=>{let t=(e=>{let t=[],r=[];return ea(e,e=>{e.fold(e=>{t.push(e)},e=>{r.push(e)})}),{errors:t,values:r}})(eo(e,lV));return ea(t.errors,e=>console.error(e.message,e.pattern)),t.values},lG=tk().deviceType,lY=lG.isTouch(),lX=aR.DOM,lQ=e=>S(e,RegExp),lJ=e=>t=>t.options.get(e),lZ=e=>_(e)||N(e),l0=(e,t="")=>r=>{let n=_(r);if(n){if(-1!==r.indexOf("=")){let o=(e=>{let t=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return ec(t,(e,t)=>{let r=t.split("="),n=r[0],o=r.length>1?r[1]:n;return e[e5(n)]=e5(o),e},{})})(r);return{value:eM(o,e.id).getOr(t),valid:n}}return{value:r,valid:n}}return{valid:!1,message:"Must be a string."}},l1=lJ("iframe_attrs"),l2=lJ("doctype"),l3=lJ("document_base_url"),l8=lJ("body_id"),l5=lJ("body_class"),l6=lJ("content_security_policy"),l9=lJ("br_in_pre"),l4=lJ("forced_root_block"),l7=lJ("forced_root_block_attrs"),ie=lJ("newline_behavior"),it=lJ("br_newline_selector"),ir=lJ("no_newline_selector"),io=lJ("keep_styles"),ia=lJ("end_container_on_empty_block"),il=lJ("automatic_uploads"),ii=lJ("images_reuse_filename"),is=lJ("images_replace_blob_uris"),id=lJ("icons"),ic=lJ("icons_url"),iu=lJ("images_upload_url"),im=lJ("images_upload_base_path"),ig=lJ("images_upload_credentials"),ip=lJ("images_upload_handler"),ih=lJ("content_css_cors"),ib=lJ("referrer_policy"),iv=lJ("language"),iy=lJ("language_url"),iC=lJ("indent_use_margin"),ix=lJ("indentation"),iw=lJ("content_css"),iE=lJ("content_style"),ik=lJ("font_css"),iS=lJ("directionality"),i_=lJ("inline_boundaries_selector"),iN=lJ("object_resizing"),iR=lJ("resize_img_proportional"),iA=lJ("placeholder"),iO=lJ("event_root"),iT=lJ("service_message"),iB=lJ("theme"),iD=lJ("theme_url"),iP=lJ("model"),iL=lJ("model_url"),iM=lJ("inline_boundaries"),iF=lJ("formats"),iI=lJ("preview_styles"),iU=lJ("format_empty_lines"),iz=lJ("format_noneditable_selector"),ij=lJ("custom_ui_selector"),iH=lJ("inline"),i$=lJ("hidden_input"),iV=lJ("submit_patch"),iq=lJ("add_form_submit_trigger"),iW=lJ("add_unload_trigger"),iK=lJ("custom_undo_redo_levels"),iG=lJ("disable_nodechange"),iY=lJ("readonly"),iX=lJ("content_css_cors"),iQ=lJ("plugins"),iJ=lJ("external_plugins"),iZ=lJ("block_unsupported_drop"),i0=lJ("visual"),i1=lJ("visual_table_class"),i2=lJ("visual_anchor_class"),i3=lJ("iframe_aria_text"),i8=lJ("setup"),i5=lJ("init_instance_callback"),i6=lJ("urlconverter_callback"),i9=lJ("auto_focus"),i4=lJ("browser_spellcheck"),i7=lJ("protect"),se=lJ("paste_block_drop"),st=lJ("paste_data_images"),sr=lJ("paste_preprocess"),sn=lJ("paste_postprocess"),so=lJ("paste_webkit_styles"),sa=lJ("paste_remove_styles_if_webkit"),sl=lJ("paste_merge_formats"),si=lJ("smart_paste"),ss=lJ("paste_as_text"),sd=lJ("paste_tab_spaces"),sc=lJ("allow_html_data_urls"),su=lJ("text_patterns"),sm=lJ("text_patterns_lookup"),sf=lJ("noneditable_class"),sg=lJ("editable_class"),sp=lJ("noneditable_regexp"),sh=lJ("preserve_cdata"),sb=lJ("highlight_on_focus"),sv=lJ("xss_sanitization"),sy=e=>tL.explode(e.options.get("images_file_types")),sC=lJ("table_tab_navigation"),sx=e=>{let t=e.parentNode;t&&t.removeChild(e)},sw=e=>{let t=n4(e);return{count:e.length-t.length,text:t}},sE=e=>{let t;for(;-1!==(t=e.data.lastIndexOf("\uFEFF"));)e.deleteData(t,1)},sk=(e,t)=>(s_(e),t),sS=(e,t)=>ly.isTextPosition(t)?nR(e)&&t.container()===e?((e,t)=>{let r=sw(e.data.substr(0,t.offset())),n=sw(e.data.substr(t.offset()));return(r.text+n.text).length>0?(sE(e),ly(e,t.offset()-r.count)):t})(e,t):sk(e,t):t.container()===e.parentNode?((e,t)=>{let r=t.container(),n=((e,t)=>{let r=et(e,t);return -1===r?Q.none():Q.some(r)})(ek(r.childNodes),e).map(e=>e<t.offset()?ly(r,t.offset()-1):t).getOr(t);return s_(e),n})(e,t):sk(e,t),s_=e=>{ny(e)&&ot(e)&&(or(e)?e.removeAttribute("data-mce-caret"):sx(e)),nR(e)&&(sE(e),0===e.data.length&&sx(e))},sN=(e,t,r)=>{let n,o;let a=a9(t.getBoundingClientRect(),r);if("BODY"===e.tagName){let t=e.ownerDocument.documentElement;n=e.scrollLeft||t.scrollLeft,o=e.scrollTop||t.scrollTop}else{let t=e.getBoundingClientRect();n=e.scrollLeft-t.left,o=e.scrollTop-t.top}a.left+=n,a.right+=n,a.top+=o,a.bottom+=o,a.width=1;let l=t.offsetWidth-t.clientWidth;return l>0&&(r&&(l*=-1),a.left+=l,a.right+=l),a},sR=(e,t,r,n)=>{let o,a;let l=aI(),i=l4(e),s=e.dom,d=()=>{(e=>{var t,r;let n=ng(ro(e),"*[contentEditable=false],video,audio,embed,object");for(let e=0;e<n.length;e++){let o=n[e].dom,a=o.previousSibling;if(ol(a)){let e=a.data;1===e.length?null===(t=a.parentNode)||void 0===t||t.removeChild(a):a.deleteData(e.length-1,1)}oa(a=o.nextSibling)&&(1===a.data.length?null===(r=a.parentNode)||void 0===r||r.removeChild(a):a.deleteData(0,1))}})(t),a&&(s_(a),a=null),l.on(e=>{s.remove(e.caret),l.clear()}),o&&(clearInterval(o),o=void 0)};return{show:(e,c)=>{let u;if(d(),nI(c))return null;if(!r(c))return a=((e,t)=>{var r;let n=(null!==(r=e.ownerDocument)&&void 0!==r?r:document).createTextNode("\uFEFF"),o=e.parentNode;if(t){let t=e.previousSibling;if(nR(t)){if(ot(t))return t;if(ol(t))return t.splitText(t.data.length-1)}null==o||o.insertBefore(n,e)}else{let t=e.nextSibling;if(nR(t)){if(ot(t))return t;if(oa(t))return t.splitText(1),t}e.nextSibling?null==o||o.insertBefore(n,e.nextSibling):null==o||o.appendChild(n)}return n})(c,e),u=c.ownerDocument.createRange(),sO(a.nextSibling)?(u.setStart(a,0),u.setEnd(a,0)):(u.setStart(a,1),u.setEnd(a,1)),u;{let r=((e,t,r)=>{var n;let o=(null!==(n=t.ownerDocument)&&void 0!==n?n:document).createElement(e);o.setAttribute("data-mce-caret",r?"before":"after"),o.setAttribute("data-mce-bogus","all"),o.appendChild(n5().dom);let a=t.parentNode;return r?null==a||a.insertBefore(o,t):t.nextSibling?null==a||a.insertBefore(o,t.nextSibling):null==a||a.appendChild(o),o})(i,c,e),d=sN(t,c,e);s.setStyle(r,"top",d.top),a=r;let m=s.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});s.setStyles(m,{...d}),s.add(t,m),l.set({caret:m,element:c,before:e}),e&&s.addClass(m,"mce-visual-caret-before"),o=setInterval(()=>{l.on(e=>{n()?s.toggleClass(e.caret,"mce-visual-caret-hidden"):s.addClass(e.caret,"mce-visual-caret-hidden")})},500),(u=c.ownerDocument.createRange()).setStart(r,0),u.setEnd(r,0)}return u},hide:d,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{l.on(e=>{let r=sN(t,e.element,e.before);s.setStyles(e.caret,{...r})})},destroy:()=>clearInterval(o)}},sA=()=>tT.browser.isFirefox(),sO=e=>nF(e)||nz(e),sT=e=>(sO(e)||nS(e)&&sA())&&rv(ro(e)).exists(rV),sB=nw("display","block table table-cell table-caption list-item"),sD=e=>e>0,sP=e=>e<0,sL=(e,t)=>{let r;for(;r=e(t);)if(!n7(r))return r;return null},sM=(e,t,r,n,o)=>{let a;let l=new nh(e,n),i=nF(e)||n7(e);if(sP(t)){if(i&&r(a=sL(l.prev.bind(l),!0)))return a;for(;a=sL(l.prev.bind(l),o);)if(r(a))return a}if(sD(t)){if(i&&r(a=sL(l.next.bind(l),!0)))return a;for(;a=sL(l.next.bind(l),o);)if(r(a))return a}return null},sF=(e,t)=>{for(;e&&e!==t;){if(sB(e))return e;e=e.parentNode}return null},sI=(e,t,r)=>sF(e.container(),r)===sF(t.container(),r),sU=(e,t)=>{if(!t)return Q.none();let r=t.container(),n=t.offset();return ny(r)?Q.from(r.childNodes[n+e]):Q.none()},sz=(e,t)=>{var r;let n=(null!==(r=t.ownerDocument)&&void 0!==r?r:document).createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n},sj=(e,t,r)=>sF(t,e)===sF(r,e),sH=(e,t,r)=>{let n=e?"previousSibling":"nextSibling",o=r;for(;o&&o!==t;){let e=o[n];if(e&&ot(e)&&(e=e[n]),nF(e)||nz(e)){if(sj(t,e,o))return e;break}if(om(e))break;o=o.parentNode}return null},s$=V(sz,!0),sV=V(sz,!1),sq=(e,t,r)=>{let n;let o=V(sH,!0,t),a=V(sH,!1,t),l=r.startContainer,i=r.startOffset;if(n7(l)){let e=nR(l)?l.parentNode:l,t=e.getAttribute("data-mce-caret");if("before"===t&&sT(n=e.nextSibling))return s$(n);if("after"===t&&sT(n=e.previousSibling))return sV(n)}if(!r.collapsed)return r;if(nR(l)){if(ot(l)){if(1===e){if(n=a(l))return s$(n);if(n=o(l))return sV(n)}if(-1===e){if(n=o(l))return sV(n);if(n=a(l))return s$(n)}return r}if(ol(l)&&i>=l.data.length-1)return 1===e&&(n=a(l))?s$(n):r;if(oa(l)&&i<=1)return -1===e&&(n=o(l))?sV(n):r;if(i===l.data.length)return(n=a(l))?s$(n):r;if(0===i)return(n=o(l))?sV(n):r}return r},sW=(e,t)=>sU(e?0:-1,t).filter(nF),sK=(e,t,r)=>{let n=sq(e,t,r);return -1===e?ly.fromRangeStart(n):ly.fromRangeEnd(n)},sG=e=>Q.from(e.getNode()).map(ro),sY=(e,t)=>{let r=t;for(;(r=e(r))&&!r.isVisible(););return r},sX=(e,t)=>{let r=sI(e,t);return!(r||!nP(e.getNode()))||r};(pf=pg||(pg={}))[pf.Backwards=-1]="Backwards",pf[pf.Forwards=1]="Forwards";let sQ=e=>oc(e)||!!of(e)&&!ec(ek(e.getElementsByTagName("*")),(e,t)=>e||nM(t),!1),sJ=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,sZ=(e,t)=>{if(sD(e)){if(om(t.previousSibling)&&!nR(t.previousSibling))return ly.before(t);if(nR(t))return ly(t,0)}if(sP(e)){if(om(t.nextSibling)&&!nR(t.nextSibling))return ly.after(t);if(nR(t))return ly(t,t.data.length)}return sP(e)?nP(t)?ly.before(t):ly.after(t):ly.before(t)},s0=(e,t,r)=>{let n,o,a,l;if(!ny(r)||!t)return null;if(t.isEqual(ly.after(r))&&r.lastChild){if(l=ly.after(r.lastChild),sP(e)&&om(r.lastChild)&&ny(r.lastChild))return nP(r.lastChild)?ly.before(r.lastChild):l}else l=t;let i=l.container(),s=l.offset();if(nR(i)){if(sP(e)&&s>0)return ly(i,--s);if(sD(e)&&s<i.length)return ly(i,++s);n=i}else{if(sP(e)&&s>0&&om(o=sJ(i,s-1)))return!sQ(o)&&(a=sM(o,e,og,o))?nR(a)?ly(a,a.data.length):ly.after(a):nR(o)?ly(o,o.data.length):ly.before(o);if(sD(e)&&s<i.childNodes.length&&om(o=sJ(i,s)))return nP(o)?((e,t)=>{let r=t.nextSibling;return r&&om(r)?nR(r)?ly(r,0):ly.before(r):s0(pg.Forwards,ly.after(t),e)})(r,o):!sQ(o)&&(a=sM(o,e,og,o))?nR(a)?ly(a,0):ly.before(a):nR(o)?ly(o,0):ly.after(o);n=o||l.getNode()}if(n&&(sD(e)&&l.isAtEnd()||sP(e)&&l.isAtStart())&&(n=sM(n,e,X,r,!0),og(n,r)))return sZ(e,n);o=n?sM(n,e,og,r):n;let d=eK(es(((e,t)=>{let r=[],n=e;for(;n&&n!==t;)r.push(n),n=n.parentNode;return r})(i,r),nF));return!d||o&&d.contains(o)?o?sZ(e,o):null:l=sD(e)?ly.after(d):ly.before(d)},s1=e=>({next:t=>s0(pg.Forwards,t,e),prev:t=>s0(pg.Backwards,t,e)}),s2=e=>ly.isTextPosition(e)?0===e.offset():om(e.getNode()),s3=e=>{if(ly.isTextPosition(e)){let t=e.container();return e.offset()===t.data.length}return om(e.getNode(!0))},s8=(e,t)=>!ly.isTextPosition(e)&&!ly.isTextPosition(t)&&e.getNode()===t.getNode(!0),s5=(e,t,r)=>{let n=s1(t);return Q.from(e?n.next(r):n.prev(r))},s6=(e,t,r)=>s5(e,t,r).bind(n=>sI(r,n,t)&&(e?!s8(r,n)&&!(!ly.isTextPosition(r)&&nP(r.getNode()))&&s3(r)&&s2(n):!s8(n,r)&&s2(r)&&s3(n))?s5(e,t,n):Q.some(n)),s9=(e,t,r,n)=>s6(e,t,r).bind(r=>n(r)?s9(e,t,r,n):Q.some(r)),s4=(e,t)=>{let r=e?t.firstChild:t.lastChild;return nR(r)?Q.some(ly(r,e?0:r.data.length)):r?om(r)?Q.some(e?ly.before(r):nP(r)?ly.before(r):ly.after(r)):((e,t,r)=>{let n=e?ly.before(r):ly.after(r);return s5(e,t,n)})(e,t,r):Q.none()},s7=V(s5,!0),de=V(s5,!1),dt=V(s4,!0),dr=V(s4,!1),dn="_mce_caret",da=e=>ny(e)&&e.id===dn,dl=(e,t)=>{let r=t;for(;r&&r!==e;){if(da(r))return r;r=r.parentNode}return null},di=e=>eF(e,"name"),ds=e=>tL.isArray(e.start),dd=e=>!(!di(e)&&T(e.forward))||e.forward,dc=(e,t)=>(ny(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),du=(e,t)=>dr(e).fold(Y,e=>(t.setStart(e.container(),e.offset()),t.setEnd(e.container(),e.offset()),!0)),dm=(e,t,r)=>!(t.hasChildNodes()||!dl(e,t)||(((e,t)=>{var r;let n=(null!==(r=e.ownerDocument)&&void 0!==r?r:document).createTextNode("\uFEFF");e.appendChild(n),t.setStart(n,0),t.setEnd(n,0)})(t,r),0)),df=(e,t,r,n)=>{let o=r[t?"start":"end"],a=e.getRoot();if(o){let e=a,r=o[0];for(let t=o.length-1;e&&t>=1;t--){let r=e.childNodes;if(dm(a,e,n))return!0;if(o[t]>r.length-1)return!!dm(a,e,n)||du(e,n);e=r[o[t]]}nR(e)&&(r=Math.min(o[0],e.data.length)),ny(e)&&(r=Math.min(o[0],e.childNodes.length)),t?n.setStart(e,r):n.setEnd(e,r)}return!0},dg=e=>nR(e)&&e.data.length>0,dp=(e,t,r)=>{let n=e.get(r.id+"_"+t),o=null==n?void 0:n.parentNode,a=r.keep;if(n&&o){let l,i;if("start"===t?a?n.hasChildNodes()?(l=n.firstChild,i=1):dg(n.nextSibling)?(l=n.nextSibling,i=0):dg(n.previousSibling)?(l=n.previousSibling,i=n.previousSibling.data.length):(l=o,i=e.nodeIndex(n)+1):(l=o,i=e.nodeIndex(n)):a?n.hasChildNodes()?(l=n.firstChild,i=1):dg(n.previousSibling)?(l=n.previousSibling,i=n.previousSibling.data.length):(l=o,i=e.nodeIndex(n)):(l=o,i=e.nodeIndex(n)),!a){let o;let a=n.previousSibling,s=n.nextSibling;for(tL.each(tL.grep(n.childNodes),e=>{nR(e)&&(e.data=e.data.replace(/\uFEFF/g,""))});o=e.get(r.id+"_"+t);)e.remove(o,!0);if(nR(s)&&nR(a)&&!tT.browser.isOpera()){let t=a.data.length;a.appendData(s.data),e.remove(s),l=a,i=t}}return Q.some(ly(l,i))}return Q.none()},dh=(e,t,r)=>((e,t,r=!1)=>2===t?lP(n4,r,e):3===t?(e=>{let t=e.getRng();return{start:lN(e.dom.getRoot(),ly.fromRangeStart(t)),end:lN(e.dom.getRoot(),ly.fromRangeEnd(t)),forward:e.isForward()}})(e):t?{rng:e.getRng(),forward:e.isForward()}:lM(e,!1))(e,t,r),db=(e,t)=>{((e,t)=>{let r=e.dom;if(t){if(ds(t))return((e,t)=>{let r=e.createRng();return df(e,!0,t,r)&&df(e,!1,t,r)?Q.some({range:r,forward:dd(t)}):Q.none()})(r,t);if(_(t.start))return((e,t)=>{let r=Q.from(lR(e.getRoot(),t.start)),n=Q.from(lR(e.getRoot(),t.end));return tF(r,n,(r,n)=>{let o=e.createRng();return o.setStart(r.container(),r.offset()),o.setEnd(n.container(),n.offset()),{range:o,forward:dd(t)}})})(r,t);if(eF(t,"id"))return((e,t)=>{let r=dp(e,"start",t),n=dp(e,"end",t);return tF(r,n.or(r),(r,n)=>{let o=e.createRng();return o.setStart(dc(e,r.container()),r.offset()),o.setEnd(dc(e,n.container()),n.offset()),{range:o,forward:dd(t)}})})(r,t);if(di(t))return Q.from(r.select(t.name)[t.index]).map(e=>{let t=r.createRng();return t.selectNode(e),{range:t,forward:!0}});if(eF(t,"rng"))return Q.some({range:t.rng,forward:dd(t)})}return Q.none()})(e,t).each(({range:t,forward:r})=>{e.setRng(t,r)})},dv=e=>ny(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type"),dy=e=>"\xa0"===e,dC=e=>""!==e&&-1!==" \f\n\r	\v".indexOf(e),dx=e=>!dC(e)&&!dy(e)&&!nH(e),dw=e=>{let t=e.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},dE=e=>{var t;return{value:e0(dw(e.red)+dw(e.green)+dw(e.blue),"#").toUpperCase()}},dk=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,dS=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,d_=(e,t,r,n)=>({red:e,green:t,blue:r,alpha:n}),dN=(e,t,r,n)=>{let o=parseInt(e,10),a=parseInt(t,10),l=parseInt(r,10),i=parseFloat(n);return d_(o,a,l,i)},dR=e=>(e=>{if("transparent"===e)return Q.some(d_(0,0,0,0));let t=dk.exec(e);if(null!==t)return Q.some(dN(t[1],t[2],t[3],"1"));let r=dS.exec(e);return null!==r?Q.some(dN(r[1],r[2],r[3],r[4])):Q.none()})(e).map(dE).map(e=>"#"+e.value).getOr(e),dA=e=>{let t=[];if(e)for(let r=0;r<e.rangeCount;r++)t.push(e.getRangeAt(r));return t},dO=(e,t)=>{let r=ng(t,"td[data-mce-selected],th[data-mce-selected]");return r.length>0?r:es(ep(e,e=>{let t=lr(e);return t?[ro(t)]:[]}),n1)},dT=e=>dO(dA(e.selection.getSel()),ro(e.getBody())),dB=(e,t)=>rj(e,"table",t),dD=e=>r_(e).fold(j([e]),t=>[e].concat(dD(t))),dP=e=>rN(e).fold(j([e]),t=>"br"===t$(t)?rC(t).map(t=>[e].concat(dP(t))).getOr([]):[e].concat(dP(t))),dL=(e,t)=>tF((e=>{let t=e.startContainer,r=e.startOffset;return nR(t)?0===r?Q.some(ro(t)):Q.none():Q.from(t.childNodes[r]).map(ro)})(t),(e=>{let t=e.endContainer,r=e.endOffset;return nR(t)?r===t.data.length?Q.some(ro(t)):Q.none():Q.from(t.childNodes[r-1]).map(ro)})(t),(t,r)=>{let n=em(dD(e),V(rm,t)),o=em(dP(e),V(rm,r));return n.isSome()&&o.isSome()}).getOr(!1),dM=(e,t,r,n)=>{let o=new nh(r,r),a=eD(e.schema.getMoveCaretBeforeOnEnterElements(),(e,t)=>!er(["td","th","table"],t.toLowerCase())),l=r;do{if(nR(l)&&0!==tL.trim(l.data).length)return void(n?t.setStart(l,0):t.setEnd(l,l.data.length));if(a[l.nodeName])return void(n?t.setStartBefore(l):"BR"===l.nodeName?t.setEndBefore(l):t.setEndAfter(l))}while(l=n?o.next():o.prev());"BODY"===r.nodeName&&(n?t.setStart(r,0):t.setEnd(r,r.childNodes.length))},dF=e=>{let t=e.selection.getSel();return P(t)&&t.rangeCount>0},dI=(e,t)=>{let r=dT(e);r.length>0?ea(r,r=>{let n=r.dom,o=e.dom.createRng();o.setStartBefore(n),o.setEndAfter(n),t(o,!0)}):t(e.selection.getRng(),!1)},dU=(e,t,r)=>{let n=lM(e,t);r(n),e.moveToBookmark(n)},dz=e=>M(null==e?void 0:e.nodeType),dj=e=>ny(e)&&!dv(e)&&!da(e)&&!nk(e),dH=e=>!0===e.isContentEditable,d$=(e,t,r)=>{let{selection:n,dom:o}=e,a=n.getNode(),l=nF(a);dU(n,!0,()=>{t()}),l&&nF(a)&&o.isChildOf(a,e.getBody())?e.selection.select(a):r(n.getStart())&&dV(o,n)},dV=(e,t)=>{var r,n;let o=t.getRng(),{startContainer:a,startOffset:l}=o;if(!((e,t)=>{if(dj(t)&&!/^(TD|TH)$/.test(t.nodeName)){let r=e.getAttrib(t,"data-mce-selected"),n=parseInt(r,10);return!isNaN(n)&&n>0}return!1})(e,t.getNode())&&ny(a)){let i;let s=a.childNodes,d=e.getRoot();if(l<s.length){let t=s[l];i=new nh(t,null!==(r=e.getParent(t,e.isBlock))&&void 0!==r?r:d)}else{let t=s[s.length-1];(i=new nh(t,null!==(n=e.getParent(t,e.isBlock))&&void 0!==n?n:d)).next(!0)}for(let r=i.current();r;r=i.next()){if("false"===e.getContentEditable(r))return;if(nR(r)&&!dG(r))return o.setStart(r,0),void t.setRng(o)}}},dq=(e,t,r)=>{if(e){let n=t?"nextSibling":"previousSibling";for(e=r?e:e[n];e;e=e[n])if(ny(e)||!dG(e))return e}},dW=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||oL(e,t),dK=(e,t,r)=>e.schema.isValidChild(t,r),dG=(e,t=!1)=>{if(P(e)&&nR(e)){let r=t?e.data.replace(/ /g,"\xa0"):e.data;return oh(r)}return!1},dY=(e,t)=>{let r=e.dom;return dj(t)&&"false"===r.getContentEditable(t)&&((e,t)=>{let r="[data-mce-cef-wrappable]",n=iz(e),o=e7(n)?r:`${r},${n}`;return rc(ro(t),o)})(e,t)&&0===r.select('[contenteditable="true"]',t).length},dX=(e,t)=>L(e)?e(t):(P(t)&&(e=e.replace(/%(\w+)/g,(e,r)=>t[r]||e)),e),dQ=(e,t)=>(t=t||"",e=""+((e=e||"").nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()),dJ=(e,t)=>{if(D(e))return null;{let r=String(e);return"color"!==t&&"backgroundColor"!==t||(r=dR(r)),"fontWeight"===t&&700===e&&(r="bold"),"fontFamily"===t&&(r=r.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),r}},dZ=(e,t,r)=>{let n=e.getStyle(t,r);return dJ(n,r)},d0=(e,t)=>{let r;return e.getParent(t,t=>!!ny(t)&&!!(r=e.getStyle(t,"text-decoration"))&&"none"!==r),r},d1=(e,t,r)=>e.getParents(t,r,e.getRoot()),d2=(e,t,r)=>{let n=e.formatter.get(t);return P(n)&&en(n,r)},d3=e=>eI(e,"block"),d8=e=>eI(e,"selector"),d5=e=>eI(e,"inline"),d6=e=>d8(e)&&!1!==e.expand&&!d5(e),d9=(e,t)=>{let r=t;for(;r;){if(ny(r)&&e.getContentEditable(r))return"false"===e.getContentEditable(r)?r:t;r=r.parentNode}return t},d4=(e,t,r,n)=>{let o=t.data;if(e){for(let e=r;e>0;e--)if(n(o.charAt(e-1)))return e}else for(let e=r;e<o.length;e++)if(n(o.charAt(e)))return e;return -1},d7=(e,t,r)=>d4(e,t,r,e=>dy(e)||dC(e)),ce=(e,t,r)=>d4(e,t,r,dx),ct=(e,t,r,n,o,a)=>{let l;let i=e.getParent(r,e.isBlock)||t,s=(t,r,n)=>{let a=a8(e),s=o?a.backwards:a.forwards;return Q.from(s(t,r,(e,t)=>dv(e.parentNode)?-1:(l=e,n(o,e,t)),i))};return s(r,n,d7).bind(e=>a?s(e.container,e.offset+(o?-1:0),ce):Q.some(e)).orThunk(()=>l?Q.some({container:l,offset:o?0:l.length}):Q.none())},cr=(e,t,r,n,o)=>{let a=n[o];nR(n)&&e7(n.data)&&a&&(n=a);let l=d1(e,n);for(let n=0;n<l.length;n++)for(let o=0;o<t.length;o++){let a=t[o];if((!P(a.collapsed)||a.collapsed===r.collapsed)&&d8(a)&&e.is(l[n],a.selector))return l[n]}return n},cn=(e,t,r,n)=>{var o;let a=r,l=e.getRoot(),i=t[0];if(d3(i)&&(a=i.wrapper?null:e.getParent(r,i.block,l)),!a){let t=null!==(o=e.getParent(r,"LI,TD,TH"))&&void 0!==o?o:l;a=e.getParent(nR(r)?r.parentNode:r,t=>t!==l&&dW(e.schema,t),t)}if(a&&d3(i)&&i.wrapper&&(a=d1(e,a,"ul,ol").reverse()[0]||a),!a)for(a=r;a&&a[n]&&!e.isBlock(a[n])&&!dQ(a=a[n],"br"););return a||r},co=(e,t,r,n)=>{let o=r.parentNode;return!P(r[n])&&(!(o!==t&&!D(o)&&!e.isBlock(o))||co(e,t,o,n))},ca=(e,t,r,n,o)=>{var a;let l=r,i=o?"previousSibling":"nextSibling",s=e.getRoot();if(nR(r)&&!dG(r)&&(o?n>0:n<r.data.length))return r;for(;l;){if(!t[0].block_expand&&e.isBlock(l))return l;for(let t=l[i];t;t=t[i]){let r=nR(t)&&!co(e,s,t,i);if(!dv(t)&&(!nP(a=t)||!a.getAttribute("data-mce-bogus")||a.nextSibling)&&!dG(t,r))return l}if(l===s||l.parentNode===s){r=l;break}l=l.parentNode}return r},cl=e=>dv(e.parentNode)||dv(e),ci=(e,t,r,n=!1)=>{let{startContainer:o,startOffset:a,endContainer:l,endOffset:i}=t,s=r[0];return ny(o)&&o.hasChildNodes()&&nR(o=ln(o,a))&&(a=0),ny(l)&&l.hasChildNodes()&&nR(l=ln(l,t.collapsed?i:i-1))&&(i=l.data.length),o=d9(e,o),l=d9(e,l),cl(o)&&(o=dv(o)?o:o.parentNode,nR(o=t.collapsed?o.previousSibling||o:o.nextSibling||o)&&(a=t.collapsed?o.length:0)),cl(l)&&(l=dv(l)?l:l.parentNode,nR(l=t.collapsed?l.nextSibling||l:l.previousSibling||l)&&(i=t.collapsed?0:l.length)),t.collapsed&&(ct(e,e.getRoot(),o,a,!0,n).each(({container:e,offset:t})=>{o=e,a=t}),ct(e,e.getRoot(),l,i,!1,n).each(({container:e,offset:t})=>{l=e,i=t})),(d5(s)||s.block_expand)&&(d5(s)&&nR(o)&&0!==a||(o=ca(e,r,o,a,!0)),d5(s)&&nR(l)&&i!==l.data.length||(l=ca(e,r,l,i,!1))),d6(s)&&(o=cr(e,r,t,o,"previousSibling"),l=cr(e,r,t,l,"nextSibling")),(d3(s)||d8(s))&&(o=cn(e,r,o,"previousSibling"),l=cn(e,r,l,"nextSibling"),d3(s)&&(e.isBlock(o)||(o=ca(e,r,o,a,!0)),e.isBlock(l)||(l=ca(e,r,l,i,!1)))),ny(o)&&o.parentNode&&(a=e.nodeIndex(o),o=o.parentNode),ny(l)&&l.parentNode&&(i=e.nodeIndex(l)+1,l=l.parentNode),{startContainer:o,startOffset:a,endContainer:l,endOffset:i}},cs=(e,t,r)=>{var n;let o=t.startOffset,a=ln(t.startContainer,o),l=t.endOffset,i=ln(t.endContainer,l-1),s=e=>{let t=e[0];nR(t)&&t===a&&o>=t.data.length&&e.splice(0,1);let r=e[e.length-1];return 0===l&&e.length>0&&r===i&&nR(r)&&e.splice(e.length-1,1),e},d=(e,t,r)=>{let n=[];for(;e&&e!==r;e=e[t])n.push(e);return n},c=(t,r)=>e.getParent(t,e=>e.parentNode===r,r),u=(e,t,n)=>{let o=n?"nextSibling":"previousSibling";for(let a=e,l=a.parentNode;a&&a!==t;a=l){l=a.parentNode;let t=d(a===e?a:a[o],o);t.length&&(n||t.reverse(),r(s(t)))}};if(a===i)return r(s([a]));let m=null!==(n=e.findCommonAncestor(a,i))&&void 0!==n?n:e.getRoot();if(e.isChildOf(a,i))return u(a,m,!0);if(e.isChildOf(i,a))return u(i,m);let f=c(a,m)||a,g=c(i,m)||i;u(a,f,!0);let p=d(f===a?f:f.nextSibling,"nextSibling",g===i?g.nextSibling:g);p.length&&r(s(p)),u(i,g)},cd=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],cc=(e,t,r,n,o,a)=>{let{uid:l=t,...i}=r;re(e,aj()),tJ(e,`${a$()}`,l),tJ(e,`${aH()}`,n);let{attributes:s={},classes:d=[]}=o(l,i);if(tZ(e,s),ea(d,t=>{re(e,t)}),a){d.length>0&&tJ(e,`${aq()}`,d.join(","));let t=e_(s);t.length>0&&tJ(e,`${aW()}`,t.join(","))}},cu=(e,t,r,n,o)=>{let a=rl("span",e);return cc(a,t,r,n,o,!1),a},cm=(e,t,r,n,o,a)=>{let l=[],i=cu(e.getDoc(),r,a,n,o),s=aI(),d=()=>{s.clear()},c=e=>{ea(e,u)},u=t=>{var u,m;switch(u="span",m=t$(t),rb(t).fold(()=>"skipping",r=>"br"===m||tK(t)&&"\uFEFF"===nV(t)?"valid":tW(t)&&rn(t,aj())?"existing":da(t.dom)?"caret":en(cd,e=>rc(t,e))?"valid-block":dK(e,u,m)&&dK(e,t$(r),u)?"valid":"invalid-child")){case"invalid-child":{d();let e=rk(t);c(e),d();break}case"valid-block":d(),cc(t,r,a,n,o,!0);break;case"valid":{let e=s.get().getOrThunk(()=>{let e=a1(i);return l.push(e),s.set(e),e});r5(t,e)}}};return cs(e.dom,t,e=>{d(),(e=>{let t=eo(e,ro);c(t)})(e)}),l},cf=e=>{let t=(()=>{let e={};return{register:(t,r)=>{e[t]={name:t,settings:r}},lookup:t=>eM(e,t).map(e=>e.settings),getNames:()=>e_(e)}})();((e,t)=>{let r=aH(),n=e=>Q.from(e.attr(r)).bind(t.lookup),o=e=>{var t,r;e.attr(a$(),null),e.attr(aH(),null),e.attr(aV(),null);let n=Q.from(e.attr(aW())).map(e=>e.split(",")).getOr([]),o=Q.from(e.attr(aq())).map(e=>e.split(",")).getOr([]);ea(n,t=>e.attr(t,null));let a=null!==(r=null===(t=e.attr("class"))||void 0===t?void 0:t.split(" "))&&void 0!==r?r:[],l=ev(a,[aj()].concat(o));e.attr("class",l.length>0?l.join(" "):null),e.attr(aq(),null),e.attr(aW(),null)};e.serializer.addTempAttr(aV()),e.serializer.addAttributeFilter(r,e=>{for(let t of e)n(t).each(e=>{!1===e.persistent&&("span"===t.name?t.unwrap():o(t))})})})(e,t);let r=((e,t)=>{let r=aT({}),n=()=>({listeners:[],previous:aI()}),o=(e,t)=>{a(e,e=>(t(e),e))},a=(e,t)=>{let o=r.get(),a=t(eM(o,e).getOrThunk(n));o[e]=a,r.set(o)},l=(t,r)=>{ea(aX(e,t),e=>{r?tJ(e,aV(),"true"):t3(e,aV())})},i=az(()=>{let r=eC(t.getNames());ea(r,t=>{a(t,r=>{let n=r.previous.get();return aG(e,Q.some(t)).fold(()=>{n.each(e=>{o(t,e=>{ea(e.listeners,e=>e(!1,t))}),r.previous.clear(),l(e,!1)})},({uid:e,name:t,elements:a})=>{tM(n,e)||(n.each(e=>l(e,!1)),o(t,r=>{ea(r.listeners,r=>r(!0,t,{uid:e,nodes:eo(a,e=>e.dom)}))}),r.previous.set(e),l(e,!0))}),{previous:r.previous,listeners:r.listeners}})})},30);return e.on("remove",()=>{i.cancel()}),e.on("NodeChange",()=>{i.throttle()}),{addListener:(e,t)=>{a(e,e=>({previous:e.previous,listeners:e.listeners.concat([t])}))}}})(e,t),n=tX("span"),o=e=>{ea(e,e=>{n(e)?r7(e):(e=>{rr(e,aj()),t3(e,`${a$()}`),t3(e,`${aH()}`),t3(e,`${aV()}`);let t=t1(e,`${aW()}`).map(e=>e.split(",")).getOr([]),r=t1(e,`${aq()}`).map(e=>e.split(",")).getOr([]);ea(t,t=>t3(e,t)),ea(r,t=>{rr(e,t)}),t3(e,`${aq()}`),t3(e,`${aW()}`)})(e)})};return{register:(e,r)=>{t.register(e,r)},annotate:(r,n)=>{t.lookup(r).each(t=>{((e,t,r,n)=>{e.undoManager.transact(()=>{let o=e.selection,a=o.getRng(),l=dT(e).length>0,i=aZ("mce-annotation");if(a.collapsed&&!l&&((e,t)=>{let r=ci(e.dom,t,[{inline:"span"}]);t.setStart(r.startContainer,r.startOffset),t.setEnd(r.endContainer,r.endOffset),e.selection.setRng(t)})(e,a),o.getRng().collapsed&&!l){let a=cu(e.getDoc(),i,n,t,r.decorate);nr(a,"\xa0"),o.getRng().insertNode(a.dom),o.select(a.dom)}else dU(o,!1,()=>{dI(e,o=>{cm(e,o,i,t,r.decorate,n)})})})})(e,r,t,n)})},annotationChanged:(e,t)=>{r.addListener(e,t)},remove:t=>{aG(e,Q.some(t)).each(({elements:t})=>{let r=e.selection.getBookmark();o(t),e.selection.moveToBookmark(r)})},removeAll:t=>{let r=e.selection.getBookmark();eR(aQ(e,t),(e,t)=>{o(e)}),e.selection.moveToBookmark(r)},getAll:t=>{let r=aQ(e,t);return eA(r,e=>eo(e,e=>e.dom))}}},cg=e=>({getBookmark:V(dh,e),moveToBookmark:V(db,e)});cg.isBookmarkNode=dv;let cp=(e,t,r)=>!r.collapsed&&en(r.getClientRects(),r=>e>=r.left&&e<=r.right&&t>=r.top&&t<=r.bottom),ch=(e,t,r)=>{e.dispatch(t,r)},cb=(e,t,r,n)=>{e.dispatch("FormatApply",{format:t,node:r,vars:n})},cv=(e,t,r,n)=>{e.dispatch("FormatRemove",{format:t,node:r,vars:n})},cy=(e,t)=>e.dispatch("SetContent",t),cC=(e,t)=>e.dispatch("GetContent",t),cx=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),cw={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||cw.metaKeyPressed(e),metaKeyPressed:e=>tT.os.isMacOS()||tT.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},cE="data-mce-selected",ck=Math.abs,cS=Math.round,c_={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},cN=(e,t)=>{let r,n,o,a,l,i,s,d,c,u,m,f,g,p,h;let b=t.dom,v=t.getDoc(),y=document,C=t.getBody(),x=e=>P(e)&&(nL(e)||b.is(e,"figure.image")),w=e=>nz(e)||b.hasClass(e,"mce-preview-object"),E=e=>{let r=e.target;((e,t)=>{if("longpress"===e.type||0===e.type.indexOf("touch")){let r=e.touches[0];return x(e.target)&&!cp(r.clientX,r.clientY,t)}return x(e.target)&&!cp(e.clientX,e.clientY,t)})(e,t.selection.getRng())&&!e.isDefaultPrevented()&&t.selection.select(r)},k=e=>b.hasClass(e,"mce-preview-object")&&P(e.firstElementChild)?[e,e.firstElementChild]:b.is(e,"figure.image")?[e.querySelector("img")]:[e],S=e=>{let r=iN(t);return!!r&&"false"!==e.getAttribute("data-mce-resize")&&e!==t.getBody()&&(b.hasClass(e,"mce-preview-object")&&P(e.firstElementChild)?rc(ro(e.firstElementChild),r):rc(ro(e),r))},_=(e,r,n)=>{if(P(n)){let o=k(e);ea(o,e=>{e.style[r]||!t.schema.isValid(e.nodeName.toLowerCase(),r)?b.setStyle(e,r,n):b.setAttrib(e,r,""+n)})}},N=(e,t,r)=>{_(e,"width",t),_(e,"height",r)},R=e=>{let l,v,y,E;l=e.screenX-i,v=e.screenY-s,f=l*a[2]+d,g=v*a[3]+c,f=f<5?5:f,g=g<5?5:g,((x(r)||w(r))&&!1!==iR(t)?!cw.modifierPressed(e):cw.modifierPressed(e))&&(ck(l)>ck(v)?(g=cS(f*u),f=cS(g/u)):(f=cS(g/u),g=cS(f*u))),N(n,f,g),y=a.startPos.x+l,E=a.startPos.y+v,y=y>0?y:0,E=E>0?E:0,b.setStyles(o,{left:y,top:E,display:"block"}),o.innerHTML=f+" &times; "+g,a[2]<0&&n.clientWidth<=f&&b.setStyle(n,"left",(void 0)+(d-f)),a[3]<0&&n.clientHeight<=g&&b.setStyle(n,"top",(void 0)+(c-g)),(l=C.scrollWidth-p)+(v=C.scrollHeight-h)!=0&&b.setStyles(o,{left:y-l,top:E-v}),m||(((e,t,r,n,o)=>{e.dispatch("ObjectResizeStart",{target:t,width:r,height:n,origin:o})})(t,r,d,c,"corner-"+a.name),m=!0)},A=()=>{let e=m;m=!1,e&&(_(r,"width",f),_(r,"height",g)),b.unbind(v,"mousemove",R),b.unbind(v,"mouseup",A),y!==v&&(b.unbind(y,"mousemove",R),b.unbind(y,"mouseup",A)),b.remove(n),b.remove(o),b.remove(l),O(r),e&&(((e,t,r,n,o)=>{e.dispatch("ObjectResized",{target:t,width:r,height:n,origin:o})})(t,r,f,g,"corner-"+a.name),b.setAttrib(r,"style",b.getAttrib(r,"style"))),t.nodeChanged()},O=e=>{M();let m=b.getPos(e,C),x=m.x,E=m.y,_=e.getBoundingClientRect(),O=_.width||_.right-_.left,T=_.height||_.bottom-_.top;r!==e&&(B(),r=e,f=g=0);let D=t.dispatch("ObjectSelected",{target:e});S(e)&&!D.isDefaultPrevented()?eR(c_,(e,t)=>{let m=b.get("mceResizeHandle"+t);m&&b.remove(m),m=b.add(C,"div",{id:"mceResizeHandle"+t,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+t+"-resize; margin:0; padding:0"}),b.bind(m,"mousedown",m=>{m.stopImmediatePropagation(),m.preventDefault(),(m=>{var f;let g=k(r)[0];i=m.screenX,s=m.screenY,d=g.clientWidth,u=(c=g.clientHeight)/d,(a=e).name=t,a.startPos={x:O*e[0]+x,y:T*e[1]+E},p=C.scrollWidth,h=C.scrollHeight,l=b.add(C,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),b.setStyles(l,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),n=w(f=r)?b.create("img",{src:tT.transparentSrc}):f.cloneNode(!0),b.addClass(n,"mce-clonedresizable"),b.setAttrib(n,"data-mce-bogus","all"),n.contentEditable="false",b.setStyles(n,{left:x,top:E,margin:0}),N(n,O,T),n.removeAttribute(cE),C.appendChild(n),b.bind(v,"mousemove",R),b.bind(v,"mouseup",A),y!==v&&(b.bind(y,"mousemove",R),b.bind(y,"mouseup",A)),o=b.add(C,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},d+" &times; "+c)})(m)}),e.elm=m,b.setStyles(m,{left:O*e[0]+x-m.offsetWidth/2,top:T*e[1]+E-m.offsetHeight/2})}):B(!1)},T=aU(O,0),B=(e=!0)=>{T.cancel(),M(),r&&e&&r.removeAttribute(cE),eR(c_,(e,t)=>{let r=b.get("mceResizeHandle"+t);r&&(b.unbind(r),b.remove(r))})},D=(e,t)=>b.isChildOf(e,t),L=r=>{if(m||t.removed||t.composing)return;let n="mousedown"===r.type?r.target:e.getNode(),o=r$(ro(n),"table,img,figure.image,hr,video,span.mce-preview-object").map(e=>e.dom).filter(e=>b.isEditable(e.parentElement)).getOrUndefined(),a=P(o)?b.getAttrib(o,cE,"1"):"1";if(ea(b.select("img[data-mce-selected],hr[data-mce-selected]"),e=>{e.removeAttribute(cE)}),P(o)&&D(o,C)){F();let t=e.getStart(!0);if(D(t,o)&&D(e.getEnd(!0),o))return b.setAttrib(o,cE,a),void T.throttle(o)}B()},M=()=>{eR(c_,e=>{e.elm&&(b.unbind(e.elm),delete e.elm)})},F=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(e){}};return t.on("init",()=>{F(),t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",L),t.on("keyup compositionend",e=>{r&&"TABLE"===r.nodeName&&L(e)}),t.on("hide blur",B),t.on("contextmenu longpress",E,!0)}),t.on("remove",M),{isResizable:S,showResizeRect:O,hideResizeRect:B,updateResizeRect:L,destroy:()=>{T.cancel(),r=n=l=null}}},cR=(e,t,r)=>{let n=e.document.createRange();return t.fold(e=>{n.setStartBefore(e.dom)},(e,t)=>{n.setStart(e.dom,t)},e=>{n.setStartAfter(e.dom)}),((e,t)=>{t.fold(t=>{e.setEndBefore(t.dom)},(t,r)=>{e.setEnd(t.dom,r)},t=>{e.setEndAfter(t.dom)})})(n,r),n},cA=(e,t,r,n,o)=>{let a=e.document.createRange();return a.setStart(t.dom,r),a.setEnd(n.dom,o),a},cO=lj([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),cT=(e,t,r)=>t(ro(r.startContainer),r.startOffset,ro(r.endContainer),r.endOffset);cO.ltr,cO.rtl;let cB=(e,t,r,n)=>({start:e,soffset:t,finish:r,foffset:n}),cD=document.caretPositionFromPoint?(e,t,r)=>{var n,o;return Q.from(null===(o=(n=e.dom).caretPositionFromPoint)||void 0===o?void 0:o.call(n,t,r)).bind(t=>{if(null===t.offsetNode)return Q.none();let r=e.dom.createRange();return r.setStart(t.offsetNode,t.offset),r.collapse(),Q.some(r)})}:document.caretRangeFromPoint?(e,t,r)=>{var n,o;return Q.from(null===(o=(n=e.dom).caretRangeFromPoint)||void 0===o?void 0:o.call(n,t,r))}:Q.none,cP=lj([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),cL={before:cP.before,on:cP.on,after:cP.after,cata:(e,t,r,n)=>e.fold(t,r,n),getStart:e=>e.fold(H,H,H)},cM=lj([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),cF={domRange:cM.domRange,relative:cM.relative,exact:cM.exact,exactFromRange:e=>cM.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{let t=e.match({domRange:e=>ro(e.startContainer),relative:(e,t)=>cL.getStart(e),exact:(e,t,r,n)=>e});return rh(t)},range:cB},cI=(e,t)=>{let r=t$(e);return"input"===r?cL.after(e):er(["br","img"],r)?0===t?cL.before(e):cL.after(e):cL.on(e,t)},cU=(e,t)=>{let r=e.fold(cL.before,cI,cL.after),n=t.fold(cL.before,cI,cL.after);return cF.relative(r,n)},cz=(e,t,r,n)=>{let o=cI(e,t),a=cI(r,n);return cF.relative(o,a)},cj=(e,t)=>{let r=(t||document).createDocumentFragment();return ea(e,e=>{r.appendChild(e.dom)}),ro(r)},cH=e=>{let t=cF.getWin(e).dom,r=(e,r,n,o)=>cA(t,e,r,n,o),n=e.match({domRange:e=>{let t=ro(e.startContainer),r=ro(e.endContainer);return cz(t,e.startOffset,r,e.endOffset)},relative:cU,exact:cz});return((e,t)=>{let r=t.match({domRange:e=>({ltr:j(e),rtl:Q.none}),relative:(t,r)=>({ltr:eG(()=>cR(e,t,r)),rtl:eG(()=>Q.some(cR(e,r,t)))}),exact:(t,r,n,o)=>({ltr:eG(()=>cA(e,t,r,n,o)),rtl:eG(()=>Q.some(cA(e,n,o,t,r)))})});return((e,t)=>{let r=t.ltr();return r.collapsed?t.rtl().filter(e=>!1===e.collapsed).map(e=>cO.rtl(ro(e.endContainer),e.endOffset,ro(e.startContainer),e.startOffset)).getOrThunk(()=>cT(0,cO.ltr,r)):cT(0,cO.ltr,r)})(0,r)})(t,n).match({ltr:r,rtl:r})},c$=(e,t,r)=>((e,t,r)=>{let n=ro(e.document);return cD(n,t,r).map(e=>cB(ro(e.startContainer),e.startOffset,ro(e.endContainer),e.endOffset))})(rh(ro(r)).dom,e,t).map(e=>{let t=r.createRange();return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),t}).getOrUndefined(),cV=(e,t)=>P(e)&&P(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,cq=(e,t,r)=>null!==((e,t,r)=>{let n=e;for(;n&&n!==t;){if(r(n))return n;n=n.parentNode}return null})(e,t,r),cW=(e,t,r)=>cq(e,t,e=>e.nodeName===r),cK=(e,t)=>ot(e)&&!cq(e,t,da),cG=(e,t,r)=>{let n=t.parentNode;if(n){let o;let a=new nh(t,e.getParent(n,e.isBlock)||e.getRoot());for(;o=a[r?"prev":"next"]();)if(nP(o))return!0}return!1},cY=(e,t,r,n,o)=>{let a,l;let i=e.getRoot(),s=e.schema.getNonEmptyElements(),d=o.parentNode;if(!d)return Q.none();let c=e.getParent(d,e.isBlock)||i;if(n&&nP(o)&&t&&e.isEmpty(c))return Q.some(ly(d,e.nodeIndex(o)));let u=new nh(o,c);for(;l=u[n?"prev":"next"]();){if("false"===e.getContentEditableParent(l)||cK(l,i))return Q.none();if(nR(l)&&l.data.length>0)return cW(l,i,"A")?Q.none():Q.some(ly(l,n?l.data.length:0));if(e.isBlock(l)||s[l.nodeName.toLowerCase()])return Q.none();a=l}return nT(a)?Q.none():r&&a?Q.some(ly(a,0)):Q.none()},cX=(e,t,r,n)=>{var o;let a=e.getRoot(),l,i=!1,s=r?n.startContainer:n.endContainer,d=r?n.startOffset:n.endOffset,c=ny(s)&&d===s.childNodes.length,u=e.schema.getNonEmptyElements(),m=r;if(ot(s))return Q.none();if(ny(s)&&d>s.childNodes.length-1&&(m=!1),nB(s)&&(s=a,d=0),s===a){if(m&&(l=s.childNodes[d>0?d-1:0])&&(ot(l)||u[l.nodeName]||nS(l)))return Q.none();if(s.hasChildNodes()){if(d=Math.min(!m&&d>0?d-1:d,s.childNodes.length-1),d=nR(s=s.childNodes[d])&&c?s.data.length:0,!t&&s===a.lastChild&&nS(s)||((e,t)=>{let r=t;for(;r&&r!==e;){if(nF(r))return!0;r=r.parentNode}return!1})(a,s)||ot(s))return Q.none();if(s.hasChildNodes()&&!nS(s)){l=s;let t=new nh(s,a);do{if(nF(l)||ot(l)){i=!1;break}if(nR(l)&&l.data.length>0){d=m?0:l.data.length,s=l,i=!0;break}if(u[l.nodeName.toLowerCase()]&&!nU(l)){d=e.nodeIndex(l),s=l.parentNode,m||d++,i=!0;break}}while(l=m?t.next():t.prev())}}}return t&&(nR(s)&&0===d&&cY(e,c,t,!0,s).each(e=>{s=e.container(),d=e.offset(),i=!0}),ny(s)&&((l=s.childNodes[d])||(l=s.childNodes[d-1]),!l||!nP(l)||"A"===(null===(o=l.previousSibling)||void 0===o?void 0:o.nodeName)||cG(e,l,!1)||cG(e,l,!0)||cY(e,c,t,!0,l).each(e=>{s=e.container(),d=e.offset(),i=!0}))),m&&!t&&nR(s)&&d===s.data.length&&cY(e,c,t,!1,s).each(e=>{s=e.container(),d=e.offset(),i=!0}),i&&s?Q.some(ly(s,d)):Q.none()},cQ=(e,t)=>{let r=t.collapsed,n=t.cloneRange(),o=ly.fromRangeStart(t);return cX(e,r,!0,n).each(e=>{r&&ly.isAbove(o,e)||n.setStart(e.container(),e.offset())}),r||cX(e,r,!1,n).each(e=>{n.setEnd(e.container(),e.offset())}),r&&n.collapse(!0),cV(t,n)?Q.none():Q.some(n)},cJ=(e,t)=>e.splitText(t),cZ=e=>{let t=e.startContainer,r=e.startOffset,n=e.endContainer,o=e.endOffset;if(t===n&&nR(t)){if(r>0&&r<t.data.length){if(t=(n=cJ(t,r)).previousSibling,o>r){o-=r;let e=cJ(n,o).previousSibling;t=n=e,o=e.data.length,r=0}else o=0}}else if(nR(t)&&r>0&&r<t.data.length&&(t=cJ(t,r),r=0),nR(n)&&o>0&&o<n.data.length){let e=cJ(n,o).previousSibling;n=e,o=e.data.length}return{startContainer:t,startOffset:r,endContainer:n,endOffset:o}},c0=e=>({walk:(t,r)=>cs(e,t,r),split:cZ,expand:(t,r={type:"word"})=>{if("word"===r.type){let r=ci(e,t,[{inline:"span"}]),n=e.createRng();return n.setStart(r.startContainer,r.startOffset),n.setEnd(r.endContainer,r.endOffset),n}return t},normalize:t=>cQ(e,t).fold(Y,e=>(t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0))});c0.compareRanges=cV,c0.getCaretRangeFromPoint=c$,c0.getSelectedNode=lr,c0.getNode=ln;let c1=((e,t)=>{let r=t=>{let r=(e=>{let t=e.dom;return rF(e)?t.getBoundingClientRect().height:t.offsetHeight})(t);if(r<=0||null===r){let r=rX(t,e);return parseFloat(r)||0}return r},n=(e,t)=>ec(t,(t,r)=>{let n=rX(e,r),o=void 0===n?0:parseInt(n,10);return isNaN(o)?t:t+o},0);return{set:(t,r)=>{if(!M(r)&&!r.match(/^[0-9]+$/))throw Error(e+".set accepts only positive integer values. Value was "+r);let n=t.dom;rW(n)&&(n.style[e]=r+"px")},get:r,getOuter:r,aggregate:n,max:(e,t,r)=>{let o=n(e,r);return t>o?t-o:0}}})("height"),c2=()=>ro(document),c3=(e,t)=>e.view(t).fold(j([]),t=>{let r=e.owner(t),n=c3(e,r);return[t].concat(n)});var c8=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?Q.none():Q.from(null===(t=e.dom.defaultView)||void 0===t?void 0:t.frameElement)).map(ro)},owner:e=>rp(e)});let c5=e=>"textarea"===t$(e),c6=(e,t)=>{let r=(e=>{let t=e.dom.ownerDocument,r=t.body,n=t.defaultView,o=t.documentElement;if(r===e.dom)return na(r.offsetLeft,r.offsetTop);let a=nl(null==n?void 0:n.pageYOffset,o.scrollTop),l=nl(null==n?void 0:n.pageXOffset,o.scrollLeft),i=nl(o.clientTop,r.clientTop),s=nl(o.clientLeft,r.clientLeft);return ni(e).translate(l-s,a-i)})(e),n=c1.get(e);return{element:e,bottom:r.top+n,height:n,pos:r,cleanup:t}},c9=(e,t,r,n)=>{ut(e,(o,a)=>c7(e,t,r,n),r)},c4=(e,t,r,n,o)=>{let a={elm:n.element.dom,alignToTop:o};e.dispatch("ScrollIntoView",a).isDefaultPrevented()||(r(t,ns(t).top,n,o),((e,t)=>{e.dispatch("AfterScrollIntoView",t)})(e,a))},c7=(e,t,r,n)=>{let o=ro(e.getBody()),a=ro(e.getDoc());o.dom.offsetWidth;let l=((e,t)=>{let r=((e,t)=>{let r=rk(e);if(0===r.length||c5(e))return{element:e,offset:t};if(t<r.length&&!c5(r[t]))return{element:r[t],offset:0};{let n=r[r.length-1];return c5(n)?{element:e,offset:t}:"img"===t$(n)?{element:n,offset:1}:tK(n)?{element:n,offset:nV(n).length}:{element:n,offset:rk(n).length}}})(e,t),n=ra('<span data-mce-bogus="all" style="display: inline-block;">\uFEFF</span>');return r1(r.element,n),c6(n,()=>r4(n))})(ro(r.startContainer),r.startOffset);c4(e,a,t,l,n),l.cleanup()},ue=(e,t,r,n)=>{let o=ro(e.getDoc());c4(e,o,r,c6(ro(t),I),n)},ut=(e,t,r)=>{let n=r.startContainer,o=r.startOffset,a=r.endContainer,l=r.endOffset;t(ro(n),ro(a));let i=e.dom.createRng();i.setStart(n,o),i.setEnd(a,l),e.selection.setRng(r)},ur=(e,t,r,n)=>{let o=e.pos;if(r)nd(o.left,o.top,n);else{let r=o.top-t+e.height;nd(o.left,r,n)}},un=(e,t,r,n,o)=>{let a=r+t,l=n.pos.top,i=n.bottom,s=i-l>=r;l<t?ur(n,r,!1!==o,e):l>a?ur(n,r,s?!1!==o:!0===o,e):i>a&&!s&&ur(n,r,!0===o,e)},uo=(e,t,r,n)=>{let o=rh(e).dom.innerHeight;un(e,t,o,r,n)},ua=(e,t,r,n)=>{let o=rh(e).dom.innerHeight;un(e,t,o,r,n);let a=(e=>{let t=c2(),r=ns(t),n=((e,t)=>{let r=t.owner(e);return c3(t,r)})(e,c8),o=ni(e),a=ed(n,(e,t)=>{let r=ni(t);return{left:e.left+r.left,top:e.top+r.top}},{left:0,top:0});return na(a.left+o.left+r.left,a.top+o.top+r.top)})(r.element),l=nm(window);a.top<l.y?nc(r.element,!1!==n):a.top>l.bottom&&nc(r.element,!0===n)},ul=(e,t,r)=>c9(e,uo,t,r),ui=(e,t,r)=>ue(e,t,uo,r),us=(e,t,r)=>c9(e,ua,t,r),ud=(e,t,r)=>ue(e,t,ua,r),uc=(e,t,r)=>{(e.inline?ul:us)(e,t,r)},uu=e=>e.dom.focus(),um=e=>{let t=rB(e).dom;return e.dom===t.activeElement},uf=(e=c2())=>Q.from(e.dom.activeElement).map(ro),ug=(e,t)=>{let r=tK(t)?nV(t).length:rk(t).length+1;return e>r?r:e<0?0:e},up=e=>cF.range(e.start,ug(e.soffset,e.start),e.finish,ug(e.foffset,e.finish)),uh=(e,t)=>!nv(t.dom)&&(rf(e,t)||rm(e,t)),ub=e=>t=>uh(e,t.start)&&uh(e,t.finish),uv=e=>cF.range(ro(e.startContainer),e.startOffset,ro(e.endContainer),e.endOffset),uy=e=>{let t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),Q.some(t)}catch(e){return Q.none()}},uC=e=>{var t;let r=e.inline||tT.browser.isFirefox()?(e=>{let t=e.getSelection();return(t&&0!==t.rangeCount?Q.from(t.getRangeAt(0)):Q.none()).map(uv)})(rh(t=ro(e.getBody())).dom).filter(ub(t)):Q.none();e.bookmark=r.isSome()?r:e.bookmark},ux=e=>(e.bookmark?e.bookmark:Q.none()).bind(t=>{var r;return r=ro(e.getBody()),Q.from(t).filter(ub(r)).map(up)}).bind(uy),uw={isEditorUIElement:e=>{let t=e.className.toString();return -1!==t.indexOf("tox-")||-1!==t.indexOf("mce-")}},uE={setEditorTimeout:(e,t,r)=>{var n,o;return n=()=>{e.removed||t()},M(o=r)||(o=0),setTimeout(n,o)},setEditorInterval:(e,t,r)=>{var n,o;let a=(n=()=>{e.removed?clearInterval(a):t()},M(o=r)||(o=0),setInterval(n,o));return a}},uk=aR.DOM,uS=e=>{let t=e.classList;return void 0!==t&&(t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"))},u_=(e,t)=>{let r=ij(e),n=uk.getParent(t,t=>ny(t)&&uw.isEditorUIElement(t)||!!r&&e.dom.is(t,r));return null!==n},uN=e=>{try{let t=rB(ro(e.getElement()));return uf(t).fold(()=>document.body,e=>e.dom)}catch(e){return document.body}},uR=(t,r)=>{let n=r.editor;(e=>{let t=aU(()=>{uC(e)},0);e.on("init",()=>{e.inline&&((e,t)=>{let r=()=>{t.throttle()};aR.DOM.bind(document,"mouseup",r),e.on("remove",()=>{aR.DOM.unbind(document,"mouseup",r)})})(e,t),((e,t)=>{e.on("mouseup touchend",e=>{t.throttle()})})(e,t),e.on("keyup NodeChange AfterSetSelectionRange",t=>{"nodechange"===t.type&&t.selectionChange||uC(e)})}),e.on("remove",()=>{t.cancel()})})(n);let o=(e,t)=>{sb(e)&&!0!==e.inline&&t(ro(e.getContainer()),"tox-edit-focus")};n.on("focusin",()=>{let e=t.focusedEditor;uS(uN(n))&&o(n,re),e!==n&&(e&&e.dispatch("blur",{focusedEditor:n}),t.setActive(n),t.focusedEditor=n,n.dispatch("focus",{blurredEditor:e}),n.focus(!0))}),n.on("focusout",()=>{uE.setEditorTimeout(n,()=>{let e=t.focusedEditor;uS(uN(n))&&e===n||o(n,rr),u_(n,uN(n))||e!==n||(n.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null)})}),e||(e=e=>{let r=t.activeEditor;r&&rL(e).each(e=>{e.ownerDocument===document&&(e===document.body||u_(r,e)||t.focusedEditor!==r||(r.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null))})},uk.bind(document,"focusin",e))},uA=(t,r)=>{t.focusedEditor===r.editor&&(t.focusedEditor=null),!t.activeEditor&&e&&(uk.unbind(document,"focusin",e),e=null)},uO=(e,t)=>{var r;(r=ro(e.getBody()),(t.collapsed?Q.from(ln(t.startContainer,t.startOffset)).map(ro):Q.none()).bind(e=>n0(e)?Q.some(e):rf(r,e)?Q.none():Q.some(r))).bind(e=>dt(e.dom)).fold(()=>{e.selection.normalize()},t=>e.selection.setRng(t.toRange()))},uT=e=>{if(e.setActive)try{e.setActive()}catch(t){e.focus()}else e.focus()},uB=e=>e.inline?(e=>{var t;let r=e.getBody();return r&&(um(t=ro(r))||uf(rB(t)).filter(e=>t.dom.contains(e.dom)).isSome())})(e):P(e.iframeElement)&&um(ro(e.iframeElement)),uD=e=>e.editorManager.setActive(e),uP=(e,t,r,n,o)=>{let a=r?t.startContainer:t.endContainer,l=r?t.startOffset:t.endOffset;return Q.from(a).map(ro).map(e=>n&&t.collapsed?e:rS(e,o(e,l)).getOr(e)).bind(e=>tW(e)?Q.some(e):rb(e).filter(tW)).map(e=>e.dom).getOr(e)},uL=(e,t,r=!1)=>uP(e,t,!0,r,(e,t)=>Math.min(rR(e),t)),uM=(e,t,r=!1)=>uP(e,t,!1,r,(e,t)=>t>0?t-1:t),uF=(e,t)=>{let r=e;for(;e&&nR(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||r},uI=(e,t)=>eo(t,t=>{let r=e.dispatch("GetSelectionRange",{range:t});return r.range!==t?r.range:t}),uU=["img","br"],uz=e=>{let t=nq(e).filter(e=>0!==e.trim().length||e.indexOf("\xa0")>-1).isSome();return t||er(uU,t$(e))||tW(e)&&tH(e.dom)&&"false"===t0(e,"contenteditable")},uj="[data-mce-autocompleter]",uH=(e,t)=>{if(u$(ro(e.getBody())).isNone()){let r=ra('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());r8(r,ro(t.extractContents())),t.insertNode(r.dom),rb(r).each(e=>e.dom.normalize()),((e,t)=>{let r=e=>{let n=rk(e);for(let e=n.length-1;e>=0;e--){let o=n[e];if(t(o))return Q.some(o);let a=r(o);if(a.isSome())return a}return Q.none()};return r(e)})(r,uz).map(t=>{e.selection.setCursorLocation(t.dom,"img"===t$(t)?1:nq(t).fold(()=>rk(t).length,e=>e.length))})}},u$=e=>rH(e,uj),uV={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},uq=(e,t,r)=>{let n=r?"lastChild":"firstChild",o=r?"prev":"next";if(e[n])return e[n];if(e!==t){let r=e[o];if(r)return r;for(let n=e.parent;n&&n!==t;n=n.parent)if(r=n[o])return r}},uW=e=>{var t;let r=null!==(t=e.value)&&void 0!==t?t:"";if(!oh(r))return!1;let n=e.parent;return!n||"span"===n.name&&!n.attr("style")||!/^[ ]+$/.test(r)},uK=e=>{let t="a"===e.name&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class uG{constructor(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}static create(e,t){let r=new uG(e,uV[e]||1);return t&&eR(t,(e,t)=>{r.attr(t,e)}),r}replace(e){return e.parent&&e.remove(),this.insert(e,this),this.remove(),this}attr(e,t){let r=this;if(!_(e))return P(e)&&eR(e,(e,t)=>{r.attr(t,e)}),r;let n=r.attributes;if(n){if(void 0!==t){if(null===t){if(e in n.map){delete n.map[e];let t=n.length;for(;t--;)if(n[t].name===e)return n.splice(t,1),r}return r}if(e in n.map){let r=n.length;for(;r--;)if(n[r].name===e){n[r].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,r}return n.map[e]}}clone(){let e=new uG(this.name,this.type),t=this.attributes;if(t){let r=[];r.map={};for(let e=0,n=t.length;e<n;e++){let n=t[e];"id"!==n.name&&(r[r.length]={name:n.name,value:n.value},r.map[n.name]=n.value)}e.attributes=r}return e.value=this.value,e}wrap(e){return this.parent&&(this.parent.insert(e,this),e.append(this)),this}unwrap(){for(let e=this.firstChild;e;){let t=e.next;this.insert(e,this,!0),e=t}this.remove()}remove(){let e=this,t=e.parent,r=e.next,n=e.prev;return t&&(t.firstChild===e?(t.firstChild=r,r&&(r.prev=null)):n&&(n.next=r),t.lastChild===e?(t.lastChild=n,n&&(n.next=null)):r&&(r.prev=n),e.parent=e.next=e.prev=null),e}append(e){let t=this;e.parent&&e.remove();let r=t.lastChild;return r?(r.next=e,e.prev=r,t.lastChild=e):t.lastChild=t.firstChild=e,e.parent=t,e}insert(e,t,r){e.parent&&e.remove();let n=t.parent||this;return r?(t===n.firstChild?n.firstChild=e:t.prev&&(t.prev.next=e),e.prev=t.prev,e.next=t,t.prev=e):(t===n.lastChild?n.lastChild=e:t.next&&(t.next.prev=e),e.next=t.next,e.prev=t,t.next=e),e.parent=n,e}getAll(e){let t=[];for(let r=this.firstChild;r;r=uq(r,this))r.name===e&&t.push(r);return t}children(){let e=[];for(let t=this.firstChild;t;t=t.next)e.push(t);return e}empty(){let e=this;if(e.firstChild){let t=[];for(let r=e.firstChild;r;r=uq(r,e))t.push(r);let r=t.length;for(;r--;){let e=t[r];e.parent=e.firstChild=e.lastChild=e.next=e.prev=null}}return e.firstChild=e.lastChild=null,e}isEmpty(e,t={},r){var n;let o=this.firstChild;if(uK(this))return!1;if(o)do{if(1===o.type){if(o.attr("data-mce-bogus"))continue;if(e[o.name]||uK(o))return!1}if(8===o.type||3===o.type&&!uW(o)||3===o.type&&o.parent&&t[o.parent.name]&&oh(null!==(n=o.value)&&void 0!==n?n:"")||r&&r(o))return!1}while(o=uq(o,this));return!0}walk(e){return uq(this,null,e)}}let uY=(e,t,r=0)=>{let n=e.toLowerCase();if(-1!==n.indexOf("[if ",r)&&/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(n.substr(r))){let e=n.indexOf("[endif]",r);return n.indexOf(">",e)}if(t){let e=n.indexOf(">",r);return -1!==e?e:n.length}{let t=/--!?>/g;t.lastIndex=r;let o=t.exec(e);return o?o.index+o[0].length:n.length}},uX=(e,t,r)=>{let n=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,o=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,a=e.getVoidElements(),l=1,i=r;for(;0!==l;)for(n.lastIndex=i;;){let e=n.exec(t);if(null===e)return i;if("!"===e[1]){i=e2(e[2],"--")?uY(t,!1,e.index+3):uY(t,!0,e.index+1);break}{o.lastIndex=n.lastIndex;let r=o.exec(t);if(O(r)||r.index!==n.lastIndex)continue;"/"===e[1]?l-=1:eF(a,e[2])||(l+=1),i=n.lastIndex+r[0].length;break}}return i},uQ=(e,t)=>{let r;let n=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,o=e.schema,a=((e,t)=>{let r=RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return t.replace(r,"")})(e.getTempAttrs(),t),l=o.getVoidElements();for(;r=n.exec(a);){let e;let t=n.lastIndex,i=r[0].length;e=l[r[1]]?t:uX(o,a,t),a=a.substring(0,t-i)+a.substring(e),n.lastIndex=t-i}return n4(a)},uJ=e=>{let t=ng(e,"[data-mce-bogus]");ea(t,e=>{"all"===t0(e,"data-mce-bogus")?r4(e):nX(e)?(r1(e,ri("\uFEFF")),r4(e)):r7(e)})},uZ=e=>{let t=ng(e,"input");ea(t,e=>{t3(e,"name")})},u0=(e,t,r)=>{let n;return n="raw"===t.format?tL.trim(uQ(e.serializer,r.innerHTML)):"text"===t.format?((e,t)=>{let r=e.getDoc(),n=rB(ro(e.getBody())),o=rl("div",r);tJ(o,"data-mce-bogus","all"),rY(o,{position:"fixed",left:"-9999999px",top:"0"}),nr(o,t.innerHTML),uJ(o),uZ(o);let a=rA(n)?n:ro(rp(n).dom.body);r8(a,o);let l=n4(o.dom.innerText);return r4(o),l})(e,r):"tree"===t.format?e.serializer.serialize(r,t):((e,t)=>{let r=l4(e),n=RegExp(`^(<${r}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${r}>[\r
]*|<br \\/>[\r
]*)$`);return t.replace(n,"")})(e,e.serializer.serialize(r,t)),"text"!==t.format&&!n2(ro(r))&&_(n)?tL.trim(n):n},u1=tL.makeMap,u2=e=>{let t=[],r=(e=e||{}).indent,n=u1(e.indent_before||""),o=u1(e.indent_after||""),a=o5.getEncodeFunc(e.entity_encoding||"raw",e.entities),l="xhtml"!==e.element_format;return{start:(e,i,s)=>{if(r&&n[e]&&t.length>0){let e=t[t.length-1];e.length>0&&"\n"!==e&&t.push("\n")}if(t.push("<",e),i)for(let e=0,r=i.length;e<r;e++){let r=i[e];t.push(" ",r.name,'="',a(r.value,!0),'"')}if(t[t.length]=!s||l?">":" />",s&&r&&o[e]&&t.length>0){let e=t[t.length-1];e.length>0&&"\n"!==e&&t.push("\n")}},end:e=>{let n;t.push("</",e,">"),r&&o[e]&&t.length>0&&(n=t[t.length-1]).length>0&&"\n"!==n&&t.push("\n")},text:(e,r)=>{e.length>0&&(t[t.length]=r?e:a(e))},cdata:e=>{t.push("<![CDATA[",e,"]]>")},comment:e=>{t.push("<!--",e,"-->")},pi:(e,n)=>{n?t.push("<?",e," ",a(n),"?>"):t.push("<?",e,"?>"),r&&t.push("\n")},doctype:e=>{t.push("<!DOCTYPE",e,">",r?"\n":"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},u3=(e={},t=as())=>{let r=u2(e);return e.validate=!("validate"in e)||e.validate,{serialize:n=>{let o=e.validate,a={3:e=>{var t;r.text(null!==(t=e.value)&&void 0!==t?t:"",e.raw)},8:e=>{var t;r.comment(null!==(t=e.value)&&void 0!==t?t:"")},7:e=>{r.pi(e.name,e.value)},10:e=>{var t;r.doctype(null!==(t=e.value)&&void 0!==t?t:"")},4:e=>{var t;r.cdata(null!==(t=e.value)&&void 0!==t?t:"")},11:e=>{let t=e;if(t=t.firstChild)do l(t);while(t=t.next)}};r.reset();let l=e=>{var n;let i=a[e.type];if(i)i(e);else{let a=e.name,i=a in t.getVoidElements(),s=e.attributes;if(o&&s&&s.length>1){let r=[];r.map={};let n=t.getElementRule(e.name);if(n){for(let e=0,t=n.attributesOrder.length;e<t;e++){let t=n.attributesOrder[e];if(t in s.map){let e=s.map[t];r.map[t]=e,r.push({name:t,value:e})}}for(let e=0,t=s.length;e<t;e++){let t=s[e].name;if(!(t in r.map)){let e=s.map[t];r.map[t]=e,r.push({name:t,value:e})}}s=r}}if(r.start(a,s,i),!i){let t=e.firstChild;if(t){"pre"!==a&&"textarea"!==a||3!==t.type||"\n"!==(null===(n=t.value)||void 0===n?void 0:n[0])||r.text("\n",!0);do l(t);while(t=t.next)}r.end(a)}}};return 1!==n.type||e.inner?3===n.type?a[3](n):a[11](n):l(n),r.getContent()}}},u8=new Set;ea(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],e=>{u8.add(e)});let u5=["font","text-decoration","text-emphasis"],u6=(e,t)=>e_(e.parseStyle(e.getAttrib(t,"style"))),u9=(e,t,r)=>{let n=u6(e,t),o=u6(e,r),a=n=>{var o,a;let l=null!==(o=e.getStyle(t,n))&&void 0!==o?o:"",i=null!==(a=e.getStyle(r,n))&&void 0!==a?a:"";return e4(l)&&e4(i)&&l!==i};return en(n,e=>{let t=t=>en(t,t=>t===e);if(!t(o)&&t(u5)){let e=es(o,e=>en(u5,t=>e2(e,t)));return en(e,a)}return a(e)})},u4=(e,t,r)=>Q.from(r.container()).filter(nR).exists(n=>t(n.data.charAt(r.offset()+(e?0:-1)))),u7=V(u4,!0,dC),me=V(u4,!1,dC),mt=e=>{let t=e.container();return nR(t)&&(0===t.data.length||nH(t.data)&&cg.isBookmarkNode(t.parentNode))},mr=(e,t)=>r=>sU(e?0:-1,r).filter(t).isSome(),mn=e=>nL(e)&&"block"===rX(ro(e),"display"),mo=e=>nF(e)&&!(ny(e)&&"all"===e.getAttribute("data-mce-bogus")),ma=mr(!0,mn),ml=mr(!1,mn),mi=mr(!0,nz),ms=mr(!1,nz),md=mr(!0,nS),mc=mr(!1,nS),mu=mr(!0,mo),mm=mr(!1,mo),mf=(e,t)=>rf(t,e)?ry(e,e=>Y(e)||rm(e,t)).slice(0,-1):[],mg=(e,t)=>[e].concat(mf(e,t)),mp=(e,t,r)=>s9(e,t,r,mt),mh=(e,t)=>em(mg(ro(t.container()),e),nG),mb=(e,t,r)=>mp(e,t.dom,r).forall(e=>mh(t,r).fold(()=>!sI(e,r,t.dom),n=>!sI(e,r,t.dom)&&rf(n,ro(e.container())))),mv=(e,t,r)=>mh(t,r).fold(()=>mp(e,t.dom,r).forall(e=>!sI(e,r,t.dom)),t=>mp(e,t.dom,r).isNone()),my=V(mv,!1),mC=V(mv,!0),mx=V(mb,!1),mw=V(mb,!0),mE=e=>sG(e).exists(nX),mk=(e,t,r)=>{let n=es(mg(ro(r.container()),t),nG),o=ew(n).getOr(t);return s5(e,o.dom,r).filter(mE)},mS=(e,t)=>sG(t).exists(nX)||mk(!0,e,t).isSome(),m_=(e,t)=>Q.from(t.getNode(!0)).map(ro).exists(nX)||mk(!1,e,t).isSome(),mN=V(mk,!1),mR=V(mk,!0),mA=e=>ly.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),mO=(e,t)=>{let r=es(mg(ro(t.container()),e),nG);return ew(r).getOr(e)},mT=(e,t)=>mA(t)?me(t):me(t)||de(mO(e,t).dom,t).exists(me),mB=(e,t)=>mA(t)?u7(t):u7(t)||s7(mO(e,t).dom,t).exists(u7),mD=e=>sG(e).bind(e=>rz(e,tW)).exists(e=>er(["pre","pre-wrap"],rX(e,"white-space"))),mP=(e,t)=>r=>{var n;return P(n=new nh(r,e)[t]())&&nF(n)&&sB(n)},mL=(e,t)=>!mD(t)&&(my(e,t)||mx(e,t)||m_(e,t)||mT(e,t)||((e,t)=>{let r=de(e.dom,t).getOr(t),n=mP(e.dom,"prev");return t.isAtStart()&&(n(t.container())||n(r.container()))})(e,t)),mM=(e,t)=>!mD(t)&&(mC(e,t)||mw(e,t)||mS(e,t)||mB(e,t)||((e,t)=>{let r=s7(e.dom,t).getOr(t),n=mP(e.dom,"next");return t.isAtEnd()&&(n(t.container())||n(r.container()))})(e,t)),mF=(e,t)=>mL(e,t)||mM(e,(e=>{let t=e.container(),r=e.offset();return nR(t)&&r<t.data.length?ly(t,r+1):e})(t)),mI=(e,t)=>dy(e.charAt(t)),mU=(e,t)=>dC(e.charAt(t)),mz=(e,t,r)=>{let n=t.data,o=ly(t,0);return r||!mI(n,0)||mF(e,o)?!!(r&&mU(n,0)&&mL(e,o))&&(t.data="\xa0"+n.slice(1),!0):(t.data=" "+n.slice(1),!0)},mj=(e,t,r)=>{let n=t.data,o=ly(t,n.length-1);return r||!mI(n,n.length-1)||mF(e,o)?!!(r&&mU(n,n.length-1)&&mM(e,o))&&(t.data=n.slice(0,-1)+"\xa0",!0):(t.data=n.slice(0,-1)+" ",!0)},mH=(e,t)=>{let r=t.container();if(!nR(r))return Q.none();if((e=>{let t=e.container();return nR(t)&&e1(t.data,"\xa0")})(t)){let n=mz(e,r,!1)||(e=>{let t=e.data,r=(e=>{let t=e.split("");return eo(t,(e,r)=>dy(e)&&r>0&&r<t.length-1&&dx(t[r-1])&&dx(t[r+1])?" ":e).join("")})(t);return r!==t&&(e.data=r,!0)})(r)||mj(e,r,!1);return tI(n,t)}if(mF(e,t)){let n=mz(e,r,!0)||mj(e,r,!0);return tI(n,t)}return Q.none()},m$=(e,t,r)=>{if(0===r)return;let n=ro(e),o=rU(n,nG).getOr(n),a=e.data.slice(t,t+r),l=t+r>=e.data.length&&mM(o,ly(e,e.data.length)),i=0===t&&mL(o,ly(e,0));e.replaceData(t,r,ov(a,4,i,l))},mV=(e,t)=>{let r=e.data.slice(t),n=r.length-e6(r).length;m$(e,t,n)},mq=(e,t)=>{let r=e.data.slice(0,t),n=r.length-e9(r).length;m$(e,t-n,n)},mW=(e,t,r,n=!0)=>{let o=e9(e.data).length,a=n?e:t,l=n?t:e;return n?a.appendData(l.data):a.insertData(0,l.data),r4(ro(l)),r&&mV(a,o),a},mK=(e,t)=>((e,t)=>{let r=e.container(),n=e.offset();return!ly.isTextPosition(e)&&r===t.parentNode&&n>ly.before(t).offset()})(t,e)?ly(t.container(),t.offset()-1):t,mG=e=>{var t;return om(e.previousSibling)?Q.some(nR(t=e.previousSibling)?ly(t,t.data.length):ly.after(t)):e.previousSibling?dr(e.previousSibling):Q.none()},mY=e=>{var t;return om(e.nextSibling)?Q.some(nR(t=e.nextSibling)?ly(t,0):ly.before(t)):e.nextSibling?dt(e.nextSibling):Q.none()},mX=(e,t,r)=>(e?mY(r).orThunk(()=>mG(r)).orThunk(()=>s7(t,ly.after(r)).orThunk(()=>de(t,ly.before(r)))):mG(r).orThunk(()=>mY(r)).orThunk(()=>Q.from(r.previousSibling?r.previousSibling:r.parentNode).bind(e=>de(t,ly.before(e))).orThunk(()=>s7(t,ly.after(r))))).map(V(mK,r)),mQ=(e,t,r)=>{r.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),t)})},mJ=(e,t)=>t&&eF(e.schema.getBlockElements(),t$(t)),mZ=e=>{if(oE(e)){let t=ra('<br data-mce-bogus="1">');return r9(e),r8(e,t),Q.some(ly.before(t.dom))}return Q.none()},m0=(e,t,r,n=!0)=>{var o;let a=mX(t,e.getBody(),r.dom),l=rU(r,V(mJ,e),(o=e.getBody(),e=>e.dom===o)),i=((e,t,r)=>{let n=rC(e).filter(tK),o=rx(e).filter(tK);return r4(e),(n.isSome()&&o.isSome()&&t.isSome()?Q.some(((e,t,n)=>{let o=e.dom,a=t.dom,l=o.data.length;return mW(o,a,r),n.container()===a?ly(o,l):n})(n.getOrDie(),o.getOrDie(),t.getOrDie())):Q.none()).orThunk(()=>(r&&(n.each(e=>mq(e.dom,e.dom.length)),o.each(e=>mV(e.dom,0))),t))})(r,a,eF(e.schema.getTextInlineElements(),t$(r)));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):l.bind(mZ).fold(()=>{n&&mQ(e,t,i)},r=>{n&&mQ(e,t,Q.some(r))})},m1=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,m2=(e,t)=>rc(ro(t),i_(e))&&!oL(e.schema,t)&&e.dom.isEditable(t),m3=(e,t,r)=>{let n=es(aR.DOM.getParents(r.container(),"*",t),e);return Q.from(n[n.length-1])},m8=(e,t)=>{let r=t.container(),n=t.offset();return e?oe(r)?nR(r.nextSibling)?ly(r.nextSibling,0):ly.after(r):on(t)?ly(r,n+1):t:oe(r)?nR(r.previousSibling)?ly(r.previousSibling,r.previousSibling.data.length):ly.before(r):oo(t)?ly(r,n-1):t},m5=V(m8,!0),m6=V(m8,!1),m9=(e,t)=>{let r=e=>e.stopImmediatePropagation();e.on("beforeinput input",r,!0),e.getDoc().execCommand(t),e.off("beforeinput input",r)},m4=e=>m9(e,"Delete"),m7=e=>nQ(e)||nZ(e),fe=(e,t)=>rf(e,t)?rz(t,m7,t=>tM(rb(t),e,rm)):Q.none(),ft=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},fr=e=>(8===tV(e)||"#comment"===t$(e)?rC(e):rN(e)).bind(fr).orThunk(()=>Q.some(e)),fn=(e,t,r,n=!0)=>{var o;t.deleteContents();let a=fr(r).getOr(r),l=ro(null!==(o=e.dom.getParent(a.dom,e.dom.isBlock))&&void 0!==o?o:r.dom);if(l.dom===e.getBody()?ft(e,n):oE(l)&&(n6(l),n&&e.selection.setCursorLocation(l.dom,0)),!rm(r,l)){let e=tM(rb(l),r)?[]:rb(l).map(rk).map(e=>es(e,e=>!rm(l,e))).getOr([]);ea(e.concat(rk(r)),e=>{rm(e,l)||rf(e,l)||!oE(e)||r4(e)})}},fo=e=>ng(e,"td,th"),fa=(e,t)=>({start:e,end:t}),fl=lj([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),fi=(e,t)=>r$(ro(e),"td,th",t),fs=e=>!rm(e.start,e.end),fd=(e,t)=>dB(e.start,t).bind(r=>dB(e.end,t).bind(e=>tI(rm(r,e),r))),fc=e=>t=>fd(t,e).map(e=>({rng:t,table:e,cells:fo(e)})),fu=(e,t,r,n)=>{if(r.collapsed||!e.forall(fs))return Q.none();if(t.isSameTable){let t=e.bind(fc(n));return Q.some({start:t,end:t})}{let e=fi(r.startContainer,n),t=fi(r.endContainer,n),o=e.bind(e=>dB(e,n).bind(t=>eE(fo(t)).map(t=>fa(e,t)))).bind(fc(n)),a=t.bind(e=>dB(e,n).bind(t=>ew(fo(t)).map(t=>fa(t,e)))).bind(fc(n));return Q.some({start:o,end:a})}},fm=(e,t)=>ef(e,e=>rm(e,t)),ff=e=>tF(fm(e.cells,e.rng.start),fm(e.cells,e.rng.end),(t,r)=>e.cells.slice(t,r+1)),fg=(e,t)=>{let{startTable:r,endTable:n}=t,o=e.cloneRange();return r.each(e=>o.setStartAfter(e.dom)),n.each(e=>o.setEndBefore(e.dom)),o},fp=(e,t)=>{let r=t=>rm(e,t),n=((e,t)=>{let r=fi(e.startContainer,t),n=fi(e.endContainer,t);return tF(r,n,fa)})(t,r),o=((e,t)=>{let r=e=>dB(ro(e),t),n=r(e.startContainer),o=r(e.endContainer),a=n.isSome(),l=o.isSome(),i=tF(n,o,rm).getOr(!1);return{startTable:n,endTable:o,isStartInTable:a,isEndInTable:l,isSameTable:i,isMultiTable:!i&&a&&l}})(t,r);return n.exists(e=>!fs(e)&&fd(e,r).exists(e=>{let t=e.dom.rows;return 1===t.length&&1===t[0].cells.length})&&dL(e.start,t))?n.map(e=>fl.singleCellTable(t,e.start)):o.isMultiTable?fu(n,o,t,r).bind(({start:e,end:r})=>{let n=e.bind(ff).getOr([]),a=r.bind(ff).getOr([]);if(n.length>0&&a.length>0){let e=fg(t,o);return Q.some(fl.multiTable(n,a,e))}return Q.none()}):fu(n,o,t,r).bind(({start:e,end:t})=>e.or(t)).bind(e=>{let{isSameTable:r}=o,n=ff(e).getOr([]);if(r&&e.cells.length===n.length)return Q.some(fl.fullTable(e.table));if(n.length>0){if(r)return Q.some(fl.partialTable(n,Q.none()));{let e=fg(t,o);return Q.some(fl.partialTable(n,Q.some({...o,rng:e})))}}return Q.none()})},fh=e=>ea(e,e=>{t3(e,"contenteditable"),n6(e)}),fb=(e,t,r,n)=>{let o=r.cloneRange();n?(o.setStart(r.startContainer,r.startOffset),o.setEndAfter(t.dom.lastChild)):(o.setStartBefore(t.dom.firstChild),o.setEnd(r.endContainer,r.endOffset)),fx(e,o,t,!1).each(e=>e())},fv=e=>{let t=dT(e),r=ro(e.selection.getNode());nI(r.dom)&&oE(r)?e.selection.setCursorLocation(r.dom,0):e.selection.collapse(!0),t.length>1&&en(t,e=>rm(e,r))&&tJ(r,"data-mce-selected","1")},fy=(e,t,r)=>Q.some(()=>{let n=e.selection.getRng(),o=r.bind(({rng:r,isStartInTable:o})=>{var a;let l=(a=o?r.endContainer:r.startContainer,Q.from(e.dom.getParent(a,e.dom.isBlock)).map(ro));r.deleteContents(),((e,t,r)=>{r.each(r=>{t?r4(r):(n6(r),e.selection.setCursorLocation(r.dom,0))})})(e,o,l.filter(oE));let i=o?t[0]:t[t.length-1];return fb(e,i,n,o),oE(i)?Q.none():Q.some(o?t.slice(1):t.slice(0,-1))}).getOr(t);fh(o),fv(e)}),fC=(e,t,r,n)=>Q.some(()=>{let o=e.selection.getRng(),a=t[0],l=r[r.length-1];fb(e,a,o,!0),fb(e,l,o,!1);let i=oE(a)?t:t.slice(1),s=oE(l)?r:r.slice(0,-1);fh(i.concat(s)),n.deleteContents(),fv(e)}),fx=(e,t,r,n=!0)=>Q.some(()=>{fn(e,t,r,n)}),fw=(e,t)=>Q.some(()=>m0(e,!1,t)),fE=(e,t)=>em(mg(t,e),n1),fk=(e,t)=>em(mg(t,e),tX("caption")),fS=(e,t)=>Q.some(()=>{n6(t),e.selection.setCursorLocation(t.dom,0)}),f_=(e,t)=>e?md(t):mc(t),fN=(e,t,r)=>{let n=ro(e.getBody());return fk(n,r).fold(()=>((e,t,r,n)=>{let o=ly.fromRangeStart(e.selection.getRng());return fE(r,n).bind(n=>oE(n)?fS(e,n):s6(t,e.getBody(),o).bind(e=>fE(r,ro(e.getNode())).bind(e=>rm(e,n)?Q.none():Q.some(I))))})(e,t,n,r).orThunk(()=>tI(((e,t)=>{let r=ly.fromRangeStart(e.selection.getRng());return f_(t,r)||s5(t,e.getBody(),r).exists(e=>f_(t,e))})(e,t),I)),r=>((e,t,r,n)=>{let o=ly.fromRangeStart(e.selection.getRng());return oE(n)?fS(e,n):s6(t,e.getBody(),o).fold(()=>Q.some(I),a=>dt(n.dom).bind(e=>dr(n.dom).map(r=>t?o.isEqual(e)&&a.isEqual(r):o.isEqual(r)&&a.isEqual(e))).getOr(!0)?fS(e,n):fk(r,ro(a.getNode())).fold(()=>Q.some(I),e=>tI(!rm(e,n),I)))})(e,t,n,r))},fR=(e,t)=>{let r=ro(e.selection.getStart(!0)),n=dT(e);return e.selection.isCollapsed()&&0===n.length?fN(e,t,r):((e,t,r)=>{let n=ro(e.getBody()),o=e.selection.getRng();return 0!==r.length?fy(e,r,Q.none()):fk(n,t).fold(()=>fp(n,o).bind(t=>t.fold(V(fx,e),V(fw,e),V(fy,e),V(fC,e))),t=>fS(e,t))})(e,r,n)},fA=(e,t)=>{let r=t;for(;r&&r!==e;){if(nM(r)||nF(r))return r;r=r.parentNode}return null},fO=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],fT=tL.each,fB=e=>{let t=e.dom,r=new Set(e.serializer.getTempAttrs()),n=e=>en(fO,t=>e2(e,t))||r.has(e);return{compare:(e,r)=>{if(e.nodeName!==r.nodeName||e.nodeType!==r.nodeType)return!1;let o=e=>{let r={};return fT(t.getAttribs(e),o=>{let a=o.nodeName.toLowerCase();"style"===a||n(a)||(r[a]=t.getAttrib(e,a))}),r},a=(e,t)=>{for(let r in e)if(eF(e,r)){let n=t[r];if(B(n)||e[r]!==n)return!1;delete t[r]}for(let e in t)if(eF(t,e))return!1;return!0};return(!(ny(e)&&ny(r))||!!a(o(e),o(r))&&!!a(t.parseStyle(t.getAttrib(e,"style")),t.parseStyle(t.getAttrib(r,"style"))))&&!dv(e)&&!dv(r)},isAttributeInternal:n}},fD=(e,t,r,n)=>{let o=r.name;for(let t=0,a=e.length;t<a;t++){let a=e[t];if(a.name===o){let e=n.nodes[o];e?e.nodes.push(r):n.nodes[o]={filter:a,nodes:[r]}}}if(r.attributes)for(let e=0,o=t.length;e<o;e++){let o=t[e],a=o.name;if(a in r.attributes.map){let e=n.attributes[a];e?e.nodes.push(r):n.attributes[a]={filter:o,nodes:[r]}}}},fP=(e,t)=>{let r=(e,r)=>{eR(e,e=>{let n=ek(e.nodes);ea(e.filter.callbacks,o=>{for(let t=n.length-1;t>=0;t--){let o=n[t];((r?void 0===o.attr(e.filter.name):o.name!==e.filter.name)||D(o.parent))&&n.splice(t,1)}n.length>0&&o(n,e.filter.name,t)})})};r(e.nodes,!1),r(e.attributes,!0)},fL=(e,t,r,n={})=>{let o=((e,t,r)=>{let n={nodes:{},attributes:{}};return r.firstChild&&((r,o)=>{let a=r;for(;a=a.walk();)fD(e,t,a,n)})(r),n})(e,t,r);fP(o,n)},fM=(e,t,r)=>{if(e.insert&&t(r)){let e=new uG("br",1);e.attr("data-mce-bogus","1"),r.empty().append(e)}else r.empty().append(new uG("#text",3)).value="\xa0"},fF=(e,t)=>{let r=null==e?void 0:e.firstChild;return P(r)&&r===e.lastChild&&r.name===t},fI=(e,t,r,n)=>n.isEmpty(t,r,t=>((e,t)=>{let r=e.getElementRule(t.name);return!0===(null==r?void 0:r.paddEmpty)})(e,t)),fU=e=>{let t;for(let r=e;r;r=r.parent){let e=r.attr("contenteditable");if("false"===e)break;"true"===e&&(t=r)}return Q.from(t)},fz=(e,t,r=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{let n=e.children();for(let e of n)r&&!t.isValidChild(r.name,e.name)&&fz(e,t,r);e.unwrap()}},fj=(e,t,r,n=I)=>{let o=t.getTextBlockElements(),a=t.getNonEmptyElements(),l=t.getWhitespaceElements(),i=tL.makeMap("tr,td,th,tbody,thead,tfoot,table"),s=new Set,d=e=>e!==r&&!i[e.name];for(let r=0;r<e.length;r++){let i,c,u;let m=e[r];if(!m.parent||s.has(m))continue;if(o[m.name]&&"li"===m.parent.name){let e=m.next;for(;e&&o[e.name];)e.name="li",s.add(e),m.parent.insert(e,m.parent),e=e.next;m.unwrap();continue}let f=[m];for(i=m.parent;i&&!t.isValidChild(i.name,m.name)&&d(i);i=i.parent)f.push(i);if(i&&f.length>1){if(t.isValidChild(i.name,m.name)){f.reverse(),n(c=f[0].clone());let e=c;for(let r=0;r<f.length-1;r++){t.isValidChild(e.name,f[r].name)&&r>0?(n(u=f[r].clone()),e.append(u)):u=e;for(let e=f[r].firstChild;e&&e!==f[r+1];){let t=e.next;u.append(e),e=t}e=u}fI(t,a,l,c)?i.insert(m,f[0],!0):(i.insert(c,f[0],!0),i.insert(m,c)),(fI(t,a,l,i=f[0])||fF(i,"br"))&&i.empty().remove()}else fz(m,t)}else if(m.parent){if("li"===m.name){let e=m.prev;if(e&&("ul"===e.name||"ol"===e.name)){e.append(m);continue}if((e=m.next)&&("ul"===e.name||"ol"===e.name)&&e.firstChild){e.insert(m,e.firstChild,!0);continue}let t=new uG("ul",1);n(t),m.wrap(t);continue}if(t.isValidChild(m.parent.name,"div")&&t.isValidChild("div",m.name)){let e=new uG("div",1);n(e),m.wrap(e)}else fz(m,t)}}},fH=(e,t,r=t.parent)=>!(!r||!e.children[t.name]||e.isValidChild(r.name,t.name))||!(!r||"a"!==t.name||!((e,t)=>{let r=e;for(;r;){if("a"===r.name)return!0;r=r.parent}return!1})(r)),f$=e=>e.collapsed?e:(e=>{let t=ly.fromRangeStart(e),r=ly.fromRangeEnd(e),n=e.commonAncestorContainer;return s5(!1,n,r).map(o=>!sI(t,r,n)&&sI(t,o,n)?((e,t,r,n)=>{let o=document.createRange();return o.setStart(e,t),o.setEnd(r,n),o})(t.container(),t.offset(),o.container(),o.offset()):e).getOr(e)})(e),fV=(e,t)=>{let r=t.firstChild,n=t.lastChild;return r&&"meta"===r.name&&(r=r.next),n&&"mce_marker"===n.attr("id")&&(n=n.prev),((e,t)=>{var r,n;let o=e.getNonEmptyElements();return P(t)&&(t.isEmpty(o)||e.getBlockElements()[t.name]&&P((r=t).firstChild)&&r.firstChild===r.lastChild&&("br"===(n=t.firstChild).name||"\xa0"===n.value))})(e,n)&&(n=null==n?void 0:n.prev),!(!r||r!==n||"ul"!==r.name&&"ol"!==r.name)},fq=e=>{var t,r;return e.length>0&&(!(t=e[e.length-1]).firstChild||P(null==t?void 0:t.firstChild)&&t.firstChild===t.lastChild&&("\xa0"===(r=t.firstChild).data||nP(r)))?e.slice(0,-1):e},fW=(e,t)=>{let r=e.getParent(t,e.isBlock);return r&&"LI"===r.nodeName?r:null},fK=(e,t)=>{let r=ly.after(e),n=s1(t).prev(r);return n?n.toRange():null},fG=(e,t,r,n)=>{var o,a;let l=((e,t,r)=>{let n=t.serialize(r);return(e=>{var t,r;let n=e.firstChild,o=e.lastChild;return n&&"META"===n.nodeName&&(null===(t=n.parentNode)||void 0===t||t.removeChild(n)),o&&"mce_marker"===o.id&&(null===(r=o.parentNode)||void 0===r||r.removeChild(o)),e})(e.createFragment(n))})(t,e,n),i=fW(t,r.startContainer),s=fq(es(null!==(a=null==(o=l.firstChild)?void 0:o.childNodes)&&void 0!==a?a:[],e=>"LI"===e.nodeName)),d=t.getRoot(),c=e=>{let n=ly.fromRangeStart(r),o=s1(t.getRoot()),a=1===e?o.prev(n):o.next(n),l=null==a?void 0:a.getNode();return!l||fW(t,l)!==i};return i?c(1)?((e,t,r)=>{let n=e.parentNode;return n&&tL.each(t,t=>{n.insertBefore(t,e)}),((e,t)=>{let r=ly.before(e),n=s1(t).next(r);return n?n.toRange():null})(e,r)})(i,s,d):c(2)?(t.insertAfter(s.reverse(),i),fK(s[0],d)):((e,t,r,n)=>{let o=((e,t)=>{let r=t.cloneRange(),n=t.cloneRange();return r.setStartBefore(e),n.setEndAfter(e),[r.cloneContents(),n.cloneContents()]})(e,n),a=e.parentNode;return a&&(a.insertBefore(o[0],e),tL.each(t,t=>{a.insertBefore(t,e)}),a.insertBefore(o[1],e),a.removeChild(e)),fK(t[t.length-1],r)})(i,s,d,r):null},fY=["pre"],fX=(e,t,r)=>{var n,o,a,l;let i=e.selection,s=e.dom,d=e.parser,c=r.merge,u=u3({validate:!0},e.schema),m='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';-1===t.indexOf("{$caret}")&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,m);let f=i.getRng(),g=f.startContainer,p=e.getBody();g===p&&i.isCollapsed()&&s.isBlock(p.firstChild)&&P(l=p.firstChild)&&!e.schema.getVoidElements()[l.nodeName]&&s.isEmpty(p.firstChild)&&((f=s.createRng()).setStart(p.firstChild,0),f.setEnd(p.firstChild,0),i.setRng(f)),i.isCollapsed()||(e=>{let t=e.dom,r=f$(e.selection.getRng());e.selection.setRng(r);let n=t.getParent(r.startContainer,nI);P(n)&&n===t.getParent(r.endContainer,nI)&&dL(ro(n),r)?fx(e,r,ro(n)):r.startContainer===r.endContainer&&r.endOffset-r.startOffset==1&&nR(r.startContainer.childNodes[r.startOffset])?r.deleteContents():e.getDoc().execCommand("Delete",!1)})(e);let h=i.getNode(),b={context:h.nodeName.toLowerCase(),data:r.data,insert:!0},v=d.parse(t,b);if(!0===r.paste&&fV(e.schema,v)&&fW(s,h))return(f=fG(u,s,i.getRng(),v))&&i.setRng(f),t;!0===r.paste&&((e,t,r,n)=>{var o;let a=t.firstChild,l=t.lastChild,i=a===("bookmark"===l.attr("data-mce-type")?l.prev:l),s=er(fY,a.name);if(i&&s){let t="false"!==a.attr("contenteditable"),l=(null===(o=e.getParent(r,e.isBlock))||void 0===o?void 0:o.nodeName.toLowerCase())===a.name,i=Q.from(fA(n,r)).forall(nM);return t&&l&&i}return!1})(s,v,h,e.getBody())&&(null===(n=v.firstChild)||void 0===n||n.unwrap()),(e=>{let t=e;for(;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")})(v);let y=v.lastChild;if(y&&"mce_marker"===y.attr("id")){let t=y;for(y=y.prev;y;y=y.walk(!0))if(3===y.type||!s.isBlock(y.name)){y.parent&&e.schema.isValidChild(y.parent.name,"span")&&y.parent.insert(t,y,"br"===y.name);break}}if(e._selectionOverrides.showBlockCaretContainer(h),b.invalid){e.selection.setContent(m);let r,n=i.getNode(),a=e.getBody();for(nB(n)?n=r=a:r=n;r&&r!==a;)n=r,r=r.parentNode;t=n===a?a.innerHTML:s.getOuterHTML(n);let l=d.parse(t),c=(e=>{for(let t=e;t;t=t.walk())if("mce_marker"===t.attr("id"))return Q.some(t);return Q.none()})(l),f=c.bind(fU).getOr(l);c.each(e=>e.replace(v));let g=v.children(),p=null!==(o=v.parent)&&void 0!==o?o:l;v.unwrap();let h=es(g,t=>fH(e.schema,t,p));fj(h,e.schema,f),fL(d.getNodeFilters(),d.getAttributeFilters(),l),t=u.serialize(l),n===a?s.setHTML(a,t):s.setOuterHTML(n,t)}else((e,t,r)=>{var n;if("all"===r.getAttribute("data-mce-bogus"))null===(n=r.parentNode)||void 0===n||n.insertBefore(e.dom.createFragment(t),r);else{let n=r.firstChild,o=r.lastChild;n&&(n!==o||"BR"!==n.nodeName)?e.selection.setContent(t,{no_events:!0}):e.dom.setHTML(r,t)}})(e,t=u.serialize(v),h);return((e,t)=>{let r=e.schema.getTextInlineElements(),n=e.dom;if(t){let t=e.getBody(),o=fB(e);tL.each(n.select("*[data-mce-fragment]"),e=>{if(P(r[e.nodeName.toLowerCase()])&&eh(u6(n,e),e=>!u8.has(e))){for(let r=e.parentElement;P(r)&&r!==t&&!u9(n,e,r);r=r.parentElement)if(o.compare(r,e)){n.remove(e,!0);break}}})}})(e,c),((e,t)=>{var r,n,o,a;let l,i;let s=e.dom,d=e.selection;if(!t)return;d.scrollIntoView(t);let c=fA(e.getBody(),t);if(c&&"false"===s.getContentEditable(c))return s.remove(t),void d.select(c);let u=s.createRng(),m=t.previousSibling;if(nR(m)){u.setStart(m,null!==(n=null===(r=m.nodeValue)||void 0===r?void 0:r.length)&&void 0!==n?n:0);let e=t.nextSibling;nR(e)&&(m.appendData(e.data),null===(o=e.parentNode)||void 0===o||o.removeChild(e))}else u.setStartBefore(t),u.setEndBefore(t);let f=s.getParent(t,s.isBlock);s.remove(t),f&&s.isEmpty(f)&&(r9(ro(f)),u.setStart(f,0),u.setEnd(f,0),nI(f)||f.getAttribute("data-mce-fragment")||(a=u,i=ly.fromRangeStart(a),!(l=null==(i=s1(e.getBody()).next(i))?void 0:i.toRange()))?s.add(f,s.create("br",{"data-mce-bogus":"1"})):(u=l,s.remove(f))),d.setRng(u)})(e,s.get("mce_marker")),a=e.getBody(),tL.each(a.getElementsByTagName("*"),e=>{e.removeAttribute("data-mce-fragment")}),((e,t)=>{Q.from(e.getParent(t,"td,th")).map(ro).each(n9)})(s,i.getStart()),((e,t,r)=>{let n=ry(ro(r),e=>rm(e,ro(t)));ex(n,n.length-2).filter(tW).fold(()=>oO(e,t),t=>oO(e,t.dom))})(e.schema,e.getBody(),i.getStart()),t},fQ=e=>e instanceof uG,fJ=(e,t,r)=>{e.dom.setHTML(e.getBody(),t),!0!==r&&uB(e)&&dt(e.getBody()).each(t=>{let r=t.getNode(),n=nS(r)?dt(r).getOr(t):t;e.selection.setRng(n.toRange())})},fZ=(e,t)=>((e,t)=>{var r,n;let o=e.dom;return o.parentNode?(r=ro(o.parentNode),n=r=>!rm(e,r)&&t(r),em(r.dom.childNodes,e=>n(ro(e))).map(ro)):Q.none()})(e,t).isSome(),f0=e=>L(e)?e:Y,f1=(e,t,r)=>{let n=t(e),o=f0(r);return n.orThunk(()=>o(e)?Q.none():((e,t,r)=>{let n=e.dom,o=f0(r);for(;n.parentNode;){n=n.parentNode;let e=ro(n),r=t(e);if(r.isSome())return r;if(o(e))break}return Q.none()})(e,t,o))},f2=(e,t,r)=>{let n=e.formatter.get(r);if(n)for(let r=0;r<n.length;r++){let o=n[r];if(d8(o)&&!1===o.inherit&&e.dom.is(t,o.selector))return!0}return!1},f3=(e,t,r,n,o)=>{let a=e.dom.getRoot();if(t===a)return!1;let l=e.dom.getParent(t,t=>!!f2(e,t,r)||t.parentNode===a||!!f6(e,t,r,n,!0));return!!f6(e,l,r,n,o)},f8=(e,t,r)=>!(!d5(r)||!dQ(t,r.inline))||!(!d3(r)||!dQ(t,r.block))||!!d8(r)&&ny(t)&&e.is(t,r.selector),f5=(e,t,r,n,o,a)=>{let l=r[n],i="attributes"===n;if(L(r.onmatch))return r.onmatch(t,r,n);if(l){if(ez(l))for(let r=0;r<l.length&&(i?!e.getAttrib(t,l[r]):!dZ(e,t,l[r]));r++);else for(let n in l)if(eF(l,n)){let s=i?e.getAttrib(t,n):dZ(e,t,n),d=dX(l[n],a),c=D(s)||e7(s);if(c&&D(d))continue;if(o&&c&&!r.exact||(!o||r.exact)&&!dQ(s,dJ(d,n)))return!1}}return!0},f6=(e,t,r,n,o)=>{let a=e.formatter.get(r),l=e.dom;if(a&&ny(t))for(let r=0;r<a.length;r++){let i=a[r];if(f8(e.dom,t,i)&&f5(l,t,i,"attributes",o,n)&&f5(l,t,i,"styles",o,n)){let r=i.classes;if(r){for(let o=0;o<r.length;o++)if(!e.dom.hasClass(t,dX(r[o],n)))return}return i}}},f9=(e,t,r,n,o)=>{if(n)return f3(e,n,t,r,o);if(n=e.selection.getNode(),f3(e,n,t,r,o))return!0;let a=e.selection.getStart();return!(a===n||!f3(e,a,t,r,o))},f4=e=>(e=>{let t=[],r=e;for(;r;){if(nR(r)&&"\uFEFF"!==r.data||r.childNodes.length>1)return[];ny(r)&&t.push(r),r=r.firstChild}return t})(e).length>0,f7=e=>{if(e){let t=new nh(e,e);for(let e=t.current();e;e=t.next())if(nR(e))return e}return null},ge=e=>{let t=rl("span");return tZ(t,{id:dn,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&r8(t,ri("\uFEFF")),t},gt=(e,t,r=!0)=>{let n=e.dom,o=e.selection;if(f4(t))m0(e,!1,ro(t),r);else{let e=o.getRng(),r=n.getParent(t,n.isBlock),a=e.startContainer,l=e.startOffset,i=e.endContainer,s=e.endOffset,d=(e=>{let t=f7(e);return t&&"\uFEFF"===t.data.charAt(0)&&t.deleteData(0,1),t})(t);n.remove(t,!0),a===d&&l>0&&e.setStart(d,l-1),i===d&&s>0&&e.setEnd(d,s-1),r&&n.isEmpty(r)&&n6(ro(r)),o.setRng(e)}},gr=(e,t,r=!0)=>{let n=e.dom,o=e.selection;if(t)gt(e,t,r);else if(!(t=dl(e.getBody(),o.getStart())))for(;t=n.get(dn);)gt(e,t,!1)},gn=(e,t)=>(e.appendChild(t),t),go=(e,t)=>{var r;let n=ed(e,(e,t)=>gn(e,t.cloneNode(!1)),t),o=null!==(r=n.ownerDocument)&&void 0!==r?r:document;return gn(n,o.createTextNode("\uFEFF"))},ga=(e,t,r,n)=>{let o;let a=e.dom,l=e.selection,i=!1,s=e.formatter.get(t);if(!s)return;let d=l.getRng(),c=d.startContainer,u=d.startOffset,m=c;nR(c)&&(u!==c.data.length&&(i=!0),m=m.parentNode);let f=[];for(;m;){if(f6(e,m,t,r,n)){o=m;break}m.nextSibling&&(i=!0),f.push(m),m=m.parentNode}if(o){if(i){let o=l.getBookmark();d.collapse(!0);let i=ci(a,d,s,!0);i=cZ(i),e.formatter.remove(t,r,i,n),l.moveToBookmark(o)}else{let i=dl(e.getBody(),o),s=ge(!1).dom;((e,t,r)=>{var n,o;let a=e.dom,l=a.getParent(r,V(dW,e.schema));l&&a.isEmpty(l)?null===(n=r.parentNode)||void 0===n||n.replaceChild(t,r):((e=>{let t=ng(e,"br"),r=es((e=>{let t=[],r=e.dom;for(;r;)t.push(ro(r)),r=r.lastChild;return t})(e).slice(-1),nX);t.length===r.length&&ea(r,r4)})(ro(r)),a.isEmpty(r)?null===(o=r.parentNode)||void 0===o||o.replaceChild(t,r):a.insertAfter(t,r))})(e,s,null!=i?i:o);let d=((e,t,r,n,o,a)=>{let l=e.formatter,i=e.dom,s=es(e_(l.get()),e=>e!==n&&!e1(e,"removeformat")),d=ec(s,(t,n)=>{let o=d2(e,n,e=>{let t=e=>L(e)||e.length>1&&"%"===e.charAt(0);return en(["styles","attributes"],r=>eM(e,r).exists(e=>{let r=A(e)?e:eL(e);return en(r,t)}))});return e.formatter.matchNode(r,n,{},o)?t.concat([n]):t},[]);if(es(d,t=>!((e,t,r)=>{let n=["inline","block","selector","attributes","styles","classes"],o=e=>eD(e,(e,t)=>en(n,e=>e===t));return d2(e,t,t=>{let n=o(t);return d2(e,r,e=>{let t=o(e);return((e,t,r=y)=>v(r).eq(e,t))(n,t)})})})(e,t,n)).length>0){let e=r.cloneNode(!1);return i.add(t,e),l.remove(n,o,e,a),i.remove(e),Q.some(e)}return Q.none()})(e,s,o,t,r,n),c=go(f.concat(d.toArray()),s);i&&gt(e,i,!1),l.setCursorLocation(c,1),a.isEmpty(o)&&a.remove(o)}}},gl=e=>{let t=ge(!1),r=go(e,t.dom);return{caretContainer:t,caretPosition:ly(r,0)}},gi=(e,t)=>{let{caretContainer:r,caretPosition:n}=gl(t);return r1(ro(e),r),r4(ro(e)),n},gs=(e,t)=>{let r=e.schema.getTextInlineElements();return eF(r,t$(t))&&!da(t.dom)&&!nk(t.dom)},gd=e=>da(e.dom)&&f4(e.dom),gc={},gu=nx(["pre"]);gc.pre||(gc.pre=[]),gc.pre.push(e=>{if(!e.selection.getRng().collapsed){let t=e.selection.getSelectedBlocks(),r=es(es(t,gu),e=>{let r=e.previousSibling;return gu(r)&&er(t,r)});ea(r,e=>{((e,t)=>{let r=ro(t),n=rp(r).dom;r4(r),r6(ro(e),[rl("br",n),rl("br",n),...rk(r)])})(e.previousSibling,e)})}});let gm=["fontWeight","fontStyle","color","fontSize","fontFamily"],gf=(e,t)=>{let r=e.get(t);return A(r)?em(r,e=>{var t;return d5(e)&&"span"===e.inline&&N((t=e).styles)&&en(e_(t.styles),e=>er(gm,e))}):Q.none()},gg=(e,t)=>de(t,ly.fromRangeStart(e)).isNone(),gp=(e,t)=>!1===s7(t,ly.fromRangeEnd(e)).exists(e=>!nP(e.getNode())||s7(t,e).isSome()),gh=e=>t=>nj(t)&&e.isEditable(t),gb=e=>es(e.getSelectedBlocks(),gh(e.dom)),gv=tL.each,gy=e=>ny(e)&&!dv(e)&&!da(e)&&!nk(e),gC=(e,t)=>{for(let r=e;r&&!(nR(r)&&e4(r.data));r=r[t])if(ny(r)&&!dv(r))return r;return e},gx=(e,t,r)=>{let n=fB(e),o=ny(t)&&dH(t),a=ny(r)&&dH(r);if(o&&a){let o=gC(t,"previousSibling"),a=gC(r,"nextSibling");if(n.compare(o,a)){for(let e=o.nextSibling;e&&e!==a;){let t=e;e=e.nextSibling,o.appendChild(t)}return e.dom.remove(a),tL.each(tL.grep(a.childNodes),e=>{o.appendChild(e)}),o}}return r},gw=(e,t,r,n)=>{var o;if(n&&!1!==t.merge_siblings){let t=null!==(o=gx(e,dq(n),n))&&void 0!==o?o:n;gx(e,t,dq(t,!0))}},gE=(e,t,r)=>{gv(e.childNodes,e=>{gy(e)&&(t(e)&&r(e),e.hasChildNodes()&&gE(e,t,r))})},gk=(e,t)=>r=>!(!r||!dZ(e,r,t)),gS=(e,t,r)=>n=>{e.setStyle(n,t,r),""===n.getAttribute("style")&&n.removeAttribute("style"),"SPAN"===n.nodeName&&0===e.getAttribs(n).length&&e.remove(n,!0)},g_=lj([{keep:[]},{rename:["name"]},{removed:[]}]),gN=/^(src|href|style)$/,gR=tL.each,gA=(e,t,r)=>e.isChildOf(t,r)&&t!==r&&!e.isBlock(r),gO=(e,t,r)=>{let n=t[r?"startContainer":"endContainer"],o=t[r?"startOffset":"endOffset"];if(ny(n)){let e=n.childNodes.length-1;!r&&o&&o--,n=n.childNodes[o>e?e:o]}return nR(n)&&r&&o>=n.data.length&&(n=new nh(n,e.getBody()).next()||n),nR(n)&&!r&&0===o&&(n=new nh(n,e.getBody()).prev()||n),n},gT=(e,t)=>{let r=t?"firstChild":"lastChild",n=e[r];return/^(TR|TH|TD)$/.test(e.nodeName)&&n?"TR"===e.nodeName&&n[r]||n:e},gB=(e,t,r,n)=>{var o;let a=e.create(r,n);return null===(o=t.parentNode)||void 0===o||o.insertBefore(a,t),a.appendChild(t),a},gD=(e,t,r,n,o)=>{let a=ro(t),l=ro(e.create(n,o)),i=r?rE(a):rw(a);return r6(l,i),r?(r1(a,l),r3(l,a)):(r2(a,l),r8(l,a)),l.dom},gP=(e,t,r)=>{let n;let o=t.parentNode,a=e.dom,l=l4(e);d3(r)&&o===a.getRoot()&&(r.list_block&&dQ(t,r.list_block)||ea(ek(t.childNodes),t=>{dK(e,l,t.nodeName.toLowerCase())?n?n.appendChild(t):(n=gB(a,t,l),a.setAttribs(n,l7(e))):n=null})),d8(r)&&d5(r)&&tM(eM(r,"mixed"),!0)&&!dQ(r.inline,t)||a.remove(t,!0)},gL=(e,t,r)=>M(e)?{name:t,value:null}:{name:e,value:dX(t,r)},gM=(e,t)=>{""===e.getAttrib(t,"style")&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},gF=(e,t,r,n,o)=>{let a=!1;gR(r.styles,(l,i)=>{let{name:s,value:d}=gL(i,l,n),c=dJ(d,s);(r.remove_similar||O(d)||!ny(o)||dQ(dZ(e,o,s),c))&&e.setStyle(t,s,""),a=!0}),a&&gM(e,t)},gI=(e,t,r,n,o)=>{let a=e.dom,l=fB(e),i=e.schema;if(d5(t)&&oD(i,t.inline)&&oL(i,n)&&n.parentElement===e.getBody())return gP(e,n,t),g_.removed();if(!t.ceFalseOverride&&n&&"false"===a.getContentEditableParent(n)||n&&!f8(a,n,t)&&(!t.links||"A"!==n.nodeName))return g_.keep();let s=t.preserve_attributes;if(d5(t)&&"all"===t.remove&&A(s)){let e=es(a.getAttribs(n),e=>er(s,e.name.toLowerCase()));if(a.removeAllAttribs(n),ea(e,e=>a.setAttrib(n,e.name,e.value)),e.length>0)return g_.rename("span")}if("all"!==t.remove){gF(a,n,t,r,o),gR(t.attributes,(e,l)=>{let{name:i,value:s}=gL(l,e,r);if(t.remove_similar||O(s)||!ny(o)||dQ(a.getAttrib(o,i),s)){if("class"===i){let e=a.getAttrib(n,i);if(e){let t="";if(ea(e.split(/\s+/),e=>{/mce\-\w+/.test(e)&&(t+=(t?" ":"")+e)}),t)return void a.setAttrib(n,i,t)}}if(gN.test(i)&&n.removeAttribute("data-mce-"+i),"style"===i&&nx(["li"])(n)&&"none"===a.getStyle(n,"list-style-type"))return n.removeAttribute(i),void a.setStyle(n,"list-style-type","none");"class"===i&&n.removeAttribute("className"),n.removeAttribute(i)}}),gR(t.classes,e=>{e=dX(e,r),ny(o)&&!a.hasClass(o,e)||a.removeClass(n,e)});let e=a.getAttribs(n);for(let t=0;t<e.length;t++){let r=e[t].nodeName;if(!l.isAttributeInternal(r))return g_.keep()}}return"none"!==t.remove?(gP(e,n,t),g_.removed()):g_.keep()},gU=(e,t,r,n,o)=>gI(e,t,r,n,o).fold(Y,t=>(e.dom.rename(n,t),!0),X),gz=(e,t,r,n)=>gI(e,t,r,n,n).fold(j(n),t=>(e.dom.createFragment().appendChild(n),e.dom.rename(n,t)),j(null)),gj=(e,t,r,n,o)=>{let a=e.formatter.get(t),l=a[0],i=e.dom,s=e.selection,d=n=>{let i;let s=(n.parentNode&&ea(d1(e.dom,n.parentNode).reverse(),n=>{if(!i&&ny(n)&&"_start"!==n.id&&"_end"!==n.id){let a=f6(e,n,t,r,o);a&&!1!==a.split&&(i=n)}}),i);return((e,t,r,n,o,a,l,i)=>{var s,d;let c,u;let m=e.dom;if(r){let a=r.parentNode;for(let r=n.parentNode;r&&r!==a;r=r.parentNode){let n=m.clone(r,!1);for(let r=0;r<t.length&&null!==(n=gz(e,t[r],i,n));r++);n&&(c&&n.appendChild(c),u||(u=n),c=n)}l.mixed&&m.isBlock(r)||(n=null!==(s=m.split(r,n))&&void 0!==s?s:n),c&&u&&(null===(d=o.parentNode)||void 0===d||d.insertBefore(c,o),u.appendChild(o),d5(l)&&gw(e,l,0,c))}return n})(e,a,s,n,n,0,l,r)},c=t=>en(a,n=>gU(e,n,r,t,t)),u=t=>{let r=ek(t.childNodes),n=c(t)||en(a,e=>f8(i,t,e)),o=t.parentNode;if(!n&&P(o)&&d6(l)&&c(o),l.deep&&r.length)for(let e=0;e<r.length;e++)u(r[e]);ea(["underline","line-through","overline"],r=>{ny(t)&&e.dom.getStyle(t,"text-decoration")===r&&t.parentNode&&d0(i,t.parentNode)===r&&gU(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:r}},void 0,t)})},m=e=>{let t=i.get(e?"_start":"_end");if(t){var r;let n=t[e?"firstChild":"lastChild"];return dv(r=n)&&ny(r)&&("_start"===r.id||"_end"===r.id)&&(n=n[e?"firstChild":"lastChild"]),nR(n)&&0===n.data.length&&(n=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling),i.remove(t,!0),n}return null},f=t=>{let r,n,o=ci(i,t,a,t.collapsed);if(l.split){if(o=cZ(o),r=gO(e,o,!0),n=gO(e,o),r!==n){if(r=gT(r,!0),n=gT(n,!1),gA(i,r,n)){let e=Q.from(r.firstChild).getOr(r);return d(gD(i,e,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void m(!0)}if(gA(i,n,r)){let e=Q.from(n.lastChild).getOr(n);return d(gD(i,e,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void m(!1)}r=gB(i,r,"span",{id:"_start","data-mce-type":"bookmark"}),n=gB(i,n,"span",{id:"_end","data-mce-type":"bookmark"});let e=i.createRng();e.setStartAfter(r),e.setEndBefore(n),cs(i,e,e=>{ea(e,e=>{dv(e)||dv(e.parentNode)||d(e)})}),d(r),d(n),r=m(!0),n=m()}else r=n=d(r);o.startContainer=r.parentNode?r.parentNode:r,o.startOffset=i.nodeIndex(r),o.endContainer=n.parentNode?n.parentNode:n,o.endOffset=i.nodeIndex(n)+1}cs(i,o,e=>{ea(e,u)})};if(n){if(dz(n)){let e=i.createRng();e.setStartBefore(n),e.setEndAfter(n),f(e)}else f(n);cv(e,t,n,r)}else s.isCollapsed()&&d5(l)&&!dT(e).length?ga(e,t,r,o):(d$(e,()=>dI(e,f),n=>d5(l)&&f9(e,t,r,n)),e.nodeChanged()),"removeformat"===t?ea(gb(e.selection),t=>{ea(gm,r=>e.dom.setStyle(t,r,"")),gM(e.dom,t)}):gf(e.formatter,t).each(t=>{ea(gb(e.selection),n=>gF(e.dom,n,t,r,null))}),cv(e,t,n,r)},gH=tL.each,g$=tL.each,gV=(e,t,r,n)=>{if(g$(r.styles,(r,o)=>{e.setStyle(t,o,dX(r,n))}),r.styles){let r=e.getAttrib(t,"style");r&&e.setAttrib(t,"data-mce-style",r)}},gq=(e,t,r,n)=>{let o=e.formatter.get(t),a=o[0],l=!n&&e.selection.isCollapsed(),i=e.dom,s=e.selection,d=(e,t=a)=>{L(t.onformat)&&t.onformat(e,t,r,n),gV(i,e,t,r),g$(t.attributes,(t,n)=>{i.setAttrib(e,n,dX(t,r))}),g$(t.classes,t=>{let n=dX(t,r);i.hasClass(e,n)||i.addClass(e,n)})},c=(e,t)=>{let r=!1;return g$(e,e=>!(!d8(e)||("false"!==i.getContentEditable(t)||e.ceFalseOverride)&&(!P(e.collapsed)||e.collapsed===l)&&i.is(t,e.selector)&&!da(t)&&(d(t,e),r=!0,1))),r},u=e=>{if(_(e)){let t=i.create(e);return d(t),t}return null},m=(n,l,i)=>{let s=[],m=!0,f=a.inline||a.block,g=u(f);cs(n,l,l=>{let u;let p=l=>{let h=!1,b=m,v=!1,y=l.parentNode,C=y.nodeName.toLowerCase(),x=n.getContentEditable(l);P(x)&&(b=m,m="true"===x,h=!0,v=dY(e,l));let w=m&&!h;if(nP(l)&&!((e,t,r,n)=>{if(iU(e)&&d5(t)&&r.parentNode){let t=al(e.schema),o=fZ(ro(r),e=>da(e.dom));return eI(t,n)&&oE(ro(r.parentNode),!1)&&!o}return!1})(e,a,l,C))return u=null,void(d3(a)&&n.remove(l));if(d3(a)&&!0===a.wrapper&&f6(e,l,t,r))u=null;else{if(((t,r,n)=>{let o=d3(a)&&!0!==a.wrapper&&dW(e.schema,t)&&dK(e,r,f);return n&&o})(l,C,w)){let e=n.rename(l,f);return d(e),s.push(e),void(u=null)}if(d8(a)){let e=c(o,l);if(!e&&P(y)&&d6(a)&&(e=c(o,y)),!d5(a)||e)return void(u=null)}P(g)&&((t,r,o,l)=>{let s=t.nodeName.toLowerCase(),d=dK(e,f,s)&&dK(e,r,f),c=!i&&nR(t)&&nH(t.data),u=da(t),m=!d5(a)||!n.isBlock(t);return(o||l)&&d&&!c&&!u&&m})(l,C,w,v)?(u||(u=n.clone(g,!1),y.insertBefore(u,l),s.push(u)),v&&h&&(m=b),u.appendChild(l)):(u=null,ea(ek(l.childNodes),p),h&&(m=b),u=null)}};ea(l,p)}),!0===a.links&&ea(s,e=>{let t=e=>{"A"===e.nodeName&&d(e,a),ea(ek(e.childNodes),t)};t(e)}),ea(s,l=>{var i;let c;let u=(c=0,ea(l.childNodes,e=>{P(e)&&nR(e)&&0===e.length||dv(e)||c++}),c);!(s.length>1)&&n.isBlock(l)||0!==u?(d5(a)||d3(a)&&a.wrapper)&&(a.exact||1!==u||(l=(e=>{let t=em(e.childNodes,dj).filter(e=>"false"!==n.getContentEditable(e)&&f8(n,e,a));return t.map(t=>{let r=n.clone(t,!1);return d(r),n.replace(r,e,!0),n.remove(t,!0),r}).getOr(e)})(l)),i=l,gH(o,t=>{d5(t)&&gH(e.dom.select(t.inline,i),n=>{gy(n)&&gU(e,t,r,n,t.exact?n:null)}),((e,t,r)=>{if(t.clear_child_styles){let n=t.links?"*:not(a)":"*";gv(e.select(n,r),r=>{gy(r)&&dH(r)&&gv(t.styles,(t,n)=>{e.setStyle(r,n,"")})})}})(e.dom,t,i)}),((e,t,r,n,o)=>{let a=o.parentNode;f6(e,a,r,n)&&gU(e,t,n,o)||t.merge_with_parents&&a&&e.dom.getParent(a,a=>!!f6(e,a,r,n)&&(gU(e,t,n,o),!0))})(e,a,t,r,l),((e,t,r,n)=>{if(t.styles&&t.styles.backgroundColor){let o=gk(e,"fontSize");gE(n,e=>o(e)&&dH(e),gS(e,"backgroundColor",dX(t.styles.backgroundColor,r)))}})(n,a,r,l),((e,t,r,n)=>{let o=t=>{if(ny(t)&&ny(t.parentNode)&&dH(t)){let r=d0(e,t.parentNode);e.getStyle(t,"color")&&r?e.setStyle(t,"text-decoration",r):e.getStyle(t,"text-decoration")===r&&e.setStyle(t,"text-decoration",null)}};t.styles&&(t.styles.color||t.styles.textDecoration)&&(tL.walk(n,o,"childNodes"),o(n))})(n,a,0,l),((e,t,r,n)=>{if(d5(t)&&("sub"===t.inline||"sup"===t.inline)){let r=gk(e,"fontSize");gE(n,e=>r(e)&&dH(e),gS(e,"fontSize",""));let o=es(e.select("sup"===t.inline?"sub":"sup",n),dH);e.remove(o,!0)}})(n,a,0,l),gw(e,a,0,l)):n.remove(l,!0)})},f=dz(n)?n:s.getNode();if("false"===i.getContentEditable(f)&&!dY(e,f))return c(o,n=f),void cb(e,t,n,r);if(a){if(n){if(dz(n)){if(!c(o,n)){let e=i.createRng();e.setStartBefore(n),e.setEndAfter(n),m(i,ci(i,e,o),!0)}}else m(i,n,!0)}else l&&d5(a)&&!dT(e).length?((e,t,r)=>{var n,o;let a;let l=e.selection,i=e.formatter.get(t);if(!i)return;let s=l.getRng(),d=s.startOffset,c=s.startContainer.nodeValue;a=dl(e.getBody(),l.getStart());let u=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(c&&d>0&&d<c.length&&u.test(c.charAt(d))&&u.test(c.charAt(d-1))){let n=l.getBookmark();s.collapse(!0);let o=ci(e.dom,s,i);o=cZ(o),e.formatter.apply(t,r,o),l.moveToBookmark(n)}else{let i=a?f7(a):null;a&&(null==i?void 0:i.data)==="\uFEFF"||(n=e.getDoc(),o=ge(!0).dom,i=(a=n.importNode(o,!0)).firstChild,s.insertNode(a),d=1),e.formatter.apply(t,r,a),l.setCursorLocation(i,d)}})(e,t,r):(s.setRng(f$(s.getRng())),d$(e,()=>{dI(e,(e,t)=>{let r=t?e:ci(i,e,o);m(i,r,!1)})},X),e.nodeChanged()),gf(e.formatter,t).each(t=>{var n;ea(es((e=>{let t=e.getSelectedBlocks(),r=e.getRng();if(e.isCollapsed())return[];if(1===t.length)return gg(r,t[0])&&gp(r,t[0])?t:[];{let e=ew(t).filter(e=>gg(r,e)).toArray(),n=eE(t).filter(e=>gp(r,e)).toArray(),o=t.slice(1,-1);return e.concat(o).concat(n)}})(n=e.selection),gh(n.dom)),e=>gV(i,e,t,r))});eF(gc,t)&&ea(gc[t],t=>{t(e)})}cb(e,t,n,r)},gW=e=>eF(e,"vars"),gK=e=>e.selection.getStart(),gG=(e,t,r,n,o)=>eu(t,t=>{let a=e.formatter.matchNode(t,r,null!=o?o:{},n);return!B(a)},t=>!!f2(e,t,r)||!n&&P(e.formatter.matchNode(t,r,o,!0))),gY=(e,t)=>{let r=null!=t?t:gK(e);return es(d1(e.dom,r),e=>ny(e)&&!nk(e))},gX=(e,t,r)=>{let n=gY(e,t);eR(r,(r,o)=>{let a=r=>{let a=gG(e,n,o,r.similar,gW(r)?r.vars:void 0),l=a.isSome();if(r.state.get()!==l){r.state.set(l);let e=a.getOr(t);gW(r)?r.callback(l,{node:e,format:o,parents:n}):ea(r.callbacks,t=>t(l,{node:e,format:o,parents:n}))}};ea([r.withSimilar,r.withoutSimilar],a),ea(r.withVars,a)})},gQ=tL.explode,gJ=()=>{let e={};return{addFilter:(t,r)=>{ea(gQ(t),t=>{eF(e,t)||(e[t]={name:t,callbacks:[]}),e[t].callbacks.push(r)})},getFilters:()=>eL(e),removeFilter:(t,r)=>{ea(gQ(t),t=>{if(eF(e,t)){if(P(r)){let n=e[t],o=es(n.callbacks,e=>e!==r);o.length>0?n.callbacks=o:delete e[t]}else delete e[t]}})}}},gZ=(e,t,r)=>{var n;let o=ad();t.convert_fonts_to_spans&&((e,t,r)=>{e.addNodeFilter("font",e=>{ea(e,e=>{let n=t.parse(e.attr("style")),o=e.attr("color"),a=e.attr("face"),l=e.attr("size");o&&(n.color=o),a&&(n["font-family"]=a),l&&te(l).each(e=>{n["font-size"]=r[e-1]}),e.name="span",e.attr("style",t.serialize(n)),ea(["color","face","size"],t=>{e.attr(t,null)})})})})(e,o,tL.explode(null!==(n=t.font_size_legacy_values)&&void 0!==n?n:"")),((e,t,r)=>{e.addNodeFilter("strike",e=>{let n="html4"!==t.type;ea(e,e=>{if(n)e.name="s";else{let t=r.parse(e.attr("style"));t["text-decoration"]="line-through",e.name="span",e.attr("style",r.serialize(t))}})})})(e,r,o)},g0=e=>{let[t,...r]=e.split(","),n=r.join(","),o=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(o){let e=";base64"===o[2],t=e?(e=>{let t=/([a-z0-9+\/=\s]+)/i.exec(e);return t?t[1]:""})(n):decodeURIComponent(n);return Q.some({type:o[1],data:t,base64Encoded:e})}return Q.none()},g1=(e,t,r=!0)=>{let n=t;if(r)try{n=atob(t)}catch(e){return Q.none()}let o=new Uint8Array(n.length);for(let e=0;e<o.length;e++)o[e]=n.charCodeAt(e);return Q.some(new Blob([o],{type:e}))},g2=e=>new Promise((t,r)=>{let n=new FileReader;n.onloadend=()=>{t(n.result)},n.onerror=()=>{var e;r(null===(e=n.error)||void 0===e?void 0:e.message)},n.readAsDataURL(e)}),g3=0,g8=(e,t,r)=>g0(e).bind(({data:e,type:n,base64Encoded:o})=>{if(t&&!o)return Q.none();{let t=o?e:btoa(e);return r(t,n)}}),g5=(e,t,r)=>{let n=e.create("blobid"+g3++,t,r);return e.add(n),n},g6=(e,t,r=!1)=>g8(t,r,(t,r)=>Q.from(e.getByData(t,r)).orThunk(()=>g1(r,t).map(r=>g5(e,r,t))));function g9(e){return(g9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g4(e,t){return(g4=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g7(e,t,r){return(g7=!function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&g4(o,r.prototype),o}:Reflect.construct).apply(null,arguments)}function pe(e){return function(e){if(Array.isArray(e))return pt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return pt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pt(e,t):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var pr=Object.hasOwnProperty,pn=Object.setPrototypeOf,po=Object.isFrozen,pa=Object.getPrototypeOf,pl=Object.getOwnPropertyDescriptor,pi=Object.freeze,ps=Object.seal,pd=Object.create,pc="undefined"!=typeof Reflect&&Reflect,pu=pc.apply,pm=pc.construct;pu||(pu=function(e,t,r){return e.apply(t,r)}),pi||(pi=function(e){return e}),ps||(ps=function(e){return e}),pm||(pm=function(e,t){return g7(e,pe(t))});var pf,pg,pp,ph=p_(Array.prototype.forEach),pb=p_(Array.prototype.pop),pv=p_(Array.prototype.push),py=p_(String.prototype.toLowerCase),pC=p_(String.prototype.match),px=p_(String.prototype.replace),pw=p_(String.prototype.indexOf),pE=p_(String.prototype.trim),pk=p_(RegExp.prototype.test),pS=(pp=TypeError,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return pm(pp,t)});function p_(e){return function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return pu(e,t,n)}}function pN(e,t){pn&&pn(e,null);for(var r=t.length;r--;){var n=t[r];if("string"==typeof n){var o=py(n);o!==n&&(po(t)||(t[r]=o),n=o)}e[n]=!0}return e}function pR(e){var t,r=pd(null);for(t in e)pu(pr,e,[t])&&(r[t]=e[t]);return r}function pA(e,t){for(;null!==e;){var r=pl(e,t);if(r){if(r.get)return p_(r.get);if("function"==typeof r.value)return p_(r.value)}e=pa(e)}return function(e){return console.warn("fallback value for",e),null}}var pO=pi(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),pT=pi(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),pB=pi(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),pD=pi(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),pP=pi(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),pL=pi(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),pM=pi(["#text"]),pF=pi(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),pI=pi(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),pU=pi(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),pz=pi(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),pj=ps(/\{\{[\w\W]*|[\w\W]*\}\}/gm),pH=ps(/<%[\w\W]*|[\w\W]*%>/gm),p$=ps(/^data-[\-\w.\u00B7-\uFFFF]/),pV=ps(/^aria-[\-\w]+$/),pq=ps(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),pW=ps(/^(?:\w+script|data):/i),pK=ps(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),pG=ps(/^html$/i),pY=function(e,t){if("object"!==g9(e)||"function"!=typeof e.createPolicy)return null;var r=null,n="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(n)&&(r=t.currentScript.getAttribute(n));var o="dompurify"+(r?"#"+r:"");try{return e.createPolicy(o,{createHTML:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+o+" could not be created."),null}},pX=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof window?null:window,r=function(t){return e(t)};if(r.version="2.3.8",r.removed=[],!t||!t.document||9!==t.document.nodeType)return r.isSupported=!1,r;var n=t.document,o=t.document,a=t.DocumentFragment,l=t.HTMLTemplateElement,i=t.Node,s=t.Element,d=t.NodeFilter,c=t.NamedNodeMap,u=void 0===c?t.NamedNodeMap||t.MozNamedAttrMap:c,m=t.HTMLFormElement,f=t.DOMParser,g=t.trustedTypes,p=s.prototype,h=pA(p,"cloneNode"),b=pA(p,"nextSibling"),v=pA(p,"childNodes"),y=pA(p,"parentNode");if("function"==typeof l){var C=o.createElement("template");C.content&&C.content.ownerDocument&&(o=C.content.ownerDocument)}var x=pY(g,n),w=x?x.createHTML(""):"",E=o,k=E.implementation,S=E.createNodeIterator,_=E.createDocumentFragment,N=E.getElementsByTagName,R=n.importNode,A={};try{A=pR(o).documentMode?o.documentMode:{}}catch(e){}var O={};r.isSupported="function"==typeof y&&k&&void 0!==k.createHTMLDocument&&9!==A;var T,B,D=pq,P=null,L=pN({},[].concat(pe(pO),pe(pT),pe(pB),pe(pP),pe(pM))),M=null,F=pN({},[].concat(pe(pF),pe(pI),pe(pU),pe(pz))),I=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),U=null,z=null,j=!0,H=!0,$=!1,V=!1,q=!1,W=!1,K=!1,G=!1,Y=!1,X=!1,Q=!0,J=!0,Z=!1,ee={},et=null,er=pN({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),en=null,eo=pN({},["audio","video","img","source","image","track"]),ea=null,el=pN({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ei="http://www.w3.org/1998/Math/MathML",es="http://www.w3.org/2000/svg",ed="http://www.w3.org/1999/xhtml",ec=ed,eu=!1,em=["application/xhtml+xml","text/html"],ef=null,eg=o.createElement("form"),ep=function(e){return e instanceof RegExp||e instanceof Function},eh=function(e){ef&&ef===e||(e&&"object"===g9(e)||(e={}),P="ALLOWED_TAGS"in(e=pR(e))?pN({},e.ALLOWED_TAGS):L,M="ALLOWED_ATTR"in e?pN({},e.ALLOWED_ATTR):F,ea="ADD_URI_SAFE_ATTR"in e?pN(pR(el),e.ADD_URI_SAFE_ATTR):el,en="ADD_DATA_URI_TAGS"in e?pN(pR(eo),e.ADD_DATA_URI_TAGS):eo,et="FORBID_CONTENTS"in e?pN({},e.FORBID_CONTENTS):er,U="FORBID_TAGS"in e?pN({},e.FORBID_TAGS):{},z="FORBID_ATTR"in e?pN({},e.FORBID_ATTR):{},ee="USE_PROFILES"in e&&e.USE_PROFILES,j=!1!==e.ALLOW_ARIA_ATTR,H=!1!==e.ALLOW_DATA_ATTR,$=e.ALLOW_UNKNOWN_PROTOCOLS||!1,V=e.SAFE_FOR_TEMPLATES||!1,q=e.WHOLE_DOCUMENT||!1,G=e.RETURN_DOM||!1,Y=e.RETURN_DOM_FRAGMENT||!1,X=e.RETURN_TRUSTED_TYPE||!1,K=e.FORCE_BODY||!1,Q=!1!==e.SANITIZE_DOM,J=!1!==e.KEEP_CONTENT,Z=e.IN_PLACE||!1,D=e.ALLOWED_URI_REGEXP||D,ec=e.NAMESPACE||ed,e.CUSTOM_ELEMENT_HANDLING&&ep(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(I.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&ep(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(I.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(I.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),B="application/xhtml+xml"===(T=T=-1===em.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE)?function(e){return e}:py,V&&(H=!1),Y&&(G=!0),ee&&(P=pN({},pe(pM)),M=[],!0===ee.html&&(pN(P,pO),pN(M,pF)),!0===ee.svg&&(pN(P,pT),pN(M,pI),pN(M,pz)),!0===ee.svgFilters&&(pN(P,pB),pN(M,pI),pN(M,pz)),!0===ee.mathMl&&(pN(P,pP),pN(M,pU),pN(M,pz))),e.ADD_TAGS&&(P===L&&(P=pR(P)),pN(P,e.ADD_TAGS)),e.ADD_ATTR&&(M===F&&(M=pR(M)),pN(M,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&pN(ea,e.ADD_URI_SAFE_ATTR),e.FORBID_CONTENTS&&(et===er&&(et=pR(et)),pN(et,e.FORBID_CONTENTS)),J&&(P["#text"]=!0),q&&pN(P,["html","head","body"]),P.table&&(pN(P,["tbody"]),delete U.tbody),pi&&pi(e),ef=e)},eb=pN({},["mi","mo","mn","ms","mtext"]),ev=pN({},["foreignobject","desc","title","annotation-xml"]),ey=pN({},["title","style","font","a","script"]),eC=pN({},pT);pN(eC,pB),pN(eC,pD);var ex=pN({},pP);pN(ex,pL);var ew=function(e){var t=y(e);t&&t.tagName||(t={namespaceURI:ed,tagName:"template"});var r=py(e.tagName),n=py(t.tagName);return e.namespaceURI===es?t.namespaceURI===ed?"svg"===r:t.namespaceURI===ei?"svg"===r&&("annotation-xml"===n||eb[n]):Boolean(eC[r]):e.namespaceURI===ei?t.namespaceURI===ed?"math"===r:t.namespaceURI===es?"math"===r&&ev[n]:Boolean(ex[r]):e.namespaceURI===ed&&!(t.namespaceURI===es&&!ev[n])&&!(t.namespaceURI===ei&&!eb[n])&&!ex[r]&&(ey[r]||!eC[r])},eE=function(e){pv(r.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=w}catch(t){e.remove()}}},ek=function(e,t){try{pv(r.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){pv(r.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!M[e]){if(G||Y)try{eE(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}}},eS=function(e){if(K)e="<remove></remove>"+e;else{var t,r,n=pC(e,/^[\r\n\t ]+/);r=n&&n[0]}"application/xhtml+xml"===T&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var a=x?x.createHTML(e):e;if(ec===ed)try{t=(new f).parseFromString(a,T)}catch(e){}if(!t||!t.documentElement){t=k.createDocument(ec,"template",null);try{t.documentElement.innerHTML=eu?"":a}catch(e){}}var l=t.body||t.documentElement;return e&&r&&l.insertBefore(o.createTextNode(r),l.childNodes[0]||null),ec===ed?N.call(t,q?"html":"body")[0]:q?t.documentElement:l},e_=function(e){return S.call(e.ownerDocument||e,e,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT,null,!1)},eN=function(e){return"object"===g9(i)?e instanceof i:e&&"object"===g9(e)&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},eR=function(e,t,n){O[e]&&ph(O[e],function(e){e.call(r,t,n,ef)})},eA=function(e){if(eR("beforeSanitizeElements",e,null),e instanceof m&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof u)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore)||pk(/[\u0080-\uFFFF]/,e.nodeName))return eE(e),!0;var t,n=B(e.nodeName);if(eR("uponSanitizeElement",e,{tagName:n,allowedTags:P}),e.hasChildNodes()&&!eN(e.firstElementChild)&&(!eN(e.content)||!eN(e.content.firstElementChild))&&pk(/<[/\w]/g,e.innerHTML)&&pk(/<[/\w]/g,e.textContent)||"select"===n&&pk(/<template/i,e.innerHTML))return eE(e),!0;if(!P[n]||U[n]){if(!U[n]&&eT(n)&&(I.tagNameCheck instanceof RegExp&&pk(I.tagNameCheck,n)||I.tagNameCheck instanceof Function&&I.tagNameCheck(n)))return!1;if(J&&!et[n]){var o=y(e)||e.parentNode,a=v(e)||e.childNodes;if(a&&o)for(var l=a.length-1;l>=0;--l)o.insertBefore(h(a[l],!0),b(e))}return eE(e),!0}return e instanceof s&&!ew(e)?(eE(e),!0):("noscript"===n||"noembed"===n)&&pk(/<\/no(script|embed)/i,e.innerHTML)?(eE(e),!0):(V&&3===e.nodeType&&(t=px(t=e.textContent,pj," "),t=px(t,pH," "),e.textContent!==t&&(pv(r.removed,{element:e.cloneNode()}),e.textContent=t)),eR("afterSanitizeElements",e,null),!1)},eO=function(e,t,r){if(Q&&("id"===t||"name"===t)&&(r in o||r in eg))return!1;if(H&&!z[t]&&pk(p$,t));else if(j&&pk(pV,t));else if(!M[t]||z[t]){if(!(eT(e)&&(I.tagNameCheck instanceof RegExp&&pk(I.tagNameCheck,e)||I.tagNameCheck instanceof Function&&I.tagNameCheck(e))&&(I.attributeNameCheck instanceof RegExp&&pk(I.attributeNameCheck,t)||I.attributeNameCheck instanceof Function&&I.attributeNameCheck(t))||"is"===t&&I.allowCustomizedBuiltInElements&&(I.tagNameCheck instanceof RegExp&&pk(I.tagNameCheck,r)||I.tagNameCheck instanceof Function&&I.tagNameCheck(r))))return!1}else if(ea[t]);else if(pk(D,px(r,pK,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==pw(r,"data:")||!en[e]){if($&&!pk(pW,px(r,pK,"")));else if(r)return!1}return!0},eT=function(e){return e.indexOf("-")>0},eB=function(e){eR("beforeSanitizeAttributes",e,null);var t,r,n,o,a=e.attributes;if(a){var l={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:M};for(o=a.length;o--;){var i=t=a[o],s=i.name,d=i.namespaceURI;r="value"===s?t.value:pE(t.value),n=B(s);var c=r;if(l.attrName=n,l.attrValue=r,l.keepAttr=!0,l.forceKeepAttr=void 0,eR("uponSanitizeAttribute",e,l),r=l.attrValue,!l.forceKeepAttr){if(l.keepAttr){if(pk(/\/>/i,r))ek(s,e);else if(V&&(r=px(r,pj," "),r=px(r,pH," ")),eO(B(e.nodeName),n,r)){if(r!==c)try{d?e.setAttributeNS(d,s,r):e.setAttribute(s,r)}catch(t){ek(s,e)}}else ek(s,e)}else ek(s,e)}}eR("afterSanitizeAttributes",e,null)}},eD=function e(t){var r,n=e_(t);for(eR("beforeSanitizeShadowDOM",t,null);r=n.nextNode();)eR("uponSanitizeShadowNode",r,null),eA(r)||(r.content instanceof a&&e(r.content),eB(r));eR("afterSanitizeShadowDOM",t,null)};return r.sanitize=function(e,o){if((eu=!e)&&(e="<!-->"),"string"!=typeof e&&!eN(e)){if("function"!=typeof e.toString)throw pS("toString is not a function");if("string"!=typeof(e=e.toString()))throw pS("dirty is not a string, aborting")}if(!r.isSupported){if("object"===g9(t.toStaticHTML)||"function"==typeof t.toStaticHTML){if("string"==typeof e)return t.toStaticHTML(e);if(eN(e))return t.toStaticHTML(e.outerHTML)}return e}if(W||eh(o),r.removed=[],"string"==typeof e&&(Z=!1),Z){if(e.nodeName){var l,s,d,c,u,m=B(e.nodeName);if(!P[m]||U[m])throw pS("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof i)1===(s=(l=eS("<!---->")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===s.nodeName||"HTML"===s.nodeName?l=s:l.appendChild(s);else{if(!G&&!V&&!q&&-1===e.indexOf("<"))return x&&X?x.createHTML(e):e;if(!(l=eS(e)))return G?null:X?w:""}l&&K&&eE(l.firstChild);for(var f=e_(Z?e:l);d=f.nextNode();)3===d.nodeType&&d===c||eA(d)||(d.content instanceof a&&eD(d.content),eB(d),c=d);if(c=null,Z)return e;if(G){if(Y)for(u=_.call(l.ownerDocument);l.firstChild;)u.appendChild(l.firstChild);else u=l;return M.shadowroot&&(u=R.call(n,u,!0)),u}var g=q?l.outerHTML:l.innerHTML;return q&&P["!doctype"]&&l.ownerDocument&&l.ownerDocument.doctype&&l.ownerDocument.doctype.name&&pk(pG,l.ownerDocument.doctype.name)&&(g="<!DOCTYPE "+l.ownerDocument.doctype.name+">\n"+g),V&&(g=px(g,pj," "),g=px(g,pH," ")),x&&X?x.createHTML(g):g},r.setConfig=function(e){eh(e),W=!0},r.clearConfig=function(){ef=null,W=!1},r.isValidAttribute=function(e,t,r){return ef||eh({}),eO(B(e),B(t),r)},r.addHook=function(e,t){"function"==typeof t&&(O[e]=O[e]||[],pv(O[e],t))},r.removeHook=function(e){if(O[e])return pb(O[e])},r.removeHooks=function(e){O[e]&&(O[e]=[])},r.removeAllHooks=function(){O={}},r}();let pQ=tL.each,pJ=tL.trim,pZ=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],p0={ftp:21,http:80,https:443,mailto:25},p1=["img","video"],p2=(e,t,r)=>{var n;let o=(e=>{try{return decodeURIComponent(e)}catch(t){return unescape(e)}})(t).replace(/\s/g,"");return!e.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(o)||!e.allow_html_data_urls&&(/^data:image\//i.test(o)?(P(n=e.allow_svg_data_urls)?!n:!P(r)||!er(p1,r))&&/^data:image\/svg\+xml/i.test(o):/^data:/i.test(o)))};class p3{constructor(e,t={}){this.path="",this.directory="",e=pJ(e),this.settings=t;let r=t.base_uri,n=this;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))return void(n.source=e);let o=0===e.indexOf("//");if(0!==e.indexOf("/")||o||(e=(r&&r.protocol||"http")+"://mce_host"+e),!/^[\w\-]*:?\/\//.test(e)){let t=r?r.path:new p3(document.location.href).directory;if(""===(null==r?void 0:r.protocol))e="//mce_host"+n.toAbsPath(t,e);else{let o=/([^#?]*)([#?]?.*)/.exec(e);o&&(e=(r&&r.protocol||"http")+"://mce_host"+n.toAbsPath(t,o[1])+o[2])}}e=e.replace(/@@/g,"(mce_at)");let a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);a&&pQ(pZ,(e,t)=>{let r=a[t];r&&(r=r.replace(/\(mce_at\)/g,"@@")),n[e]=r}),r&&(n.protocol||(n.protocol=r.protocol),n.userInfo||(n.userInfo=r.userInfo),n.port||"mce_host"!==n.host||(n.port=r.port),n.host&&"mce_host"!==n.host||(n.host=r.host),n.source=""),o&&(n.protocol="")}static parseDataUri(e){let t;let r=decodeURIComponent(e).split(","),n=/data:([^;]+)/.exec(r[0]);return n&&(t=n[1]),{type:t,data:r[1]}}static isDomSafe(e,t,r={}){if(r.allow_script_urls)return!0;{let n=o5.decode(e).replace(/[\s\u0000-\u001F]+/g,"");return!p2(r,n,t)}}static getDocumentBaseUrl(e){var t;let r;return r=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?null!==(t=e.href)&&void 0!==t?t:"":e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}setPath(e){let t=/^(.*?)\/?(\w+)?$/.exec(e);t&&(this.path=t[0],this.directory=t[1],this.file=t[2]),this.source="",this.getURI()}toRelative(e){if("./"===e)return e;let t=new p3(e,{base_uri:this});if("mce_host"!==t.host&&this.host!==t.host&&t.host||this.port!==t.port||this.protocol!==t.protocol&&""!==t.protocol)return t.getURI();let r=this.getURI(),n=t.getURI();if(r===n||"/"===r.charAt(r.length-1)&&r.substr(0,r.length-1)===n)return r;let o=this.toRelPath(this.path,t.path);return t.query&&(o+="?"+t.query),t.anchor&&(o+="#"+t.anchor),o}toAbsolute(e,t){let r=new p3(e,{base_uri:this});return r.getURI(t&&this.isSameOrigin(r))}isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;let t=this.protocol?p0[this.protocol]:null;if(t&&(this.port||t)==(e.port||t))return!0}return!1}toRelPath(e,t){let r,n,o=0,a="",l=e.substring(0,e.lastIndexOf("/")).split("/"),i=t.split("/");if(l.length>=i.length){for(r=0,n=l.length;r<n;r++)if(r>=i.length||l[r]!==i[r]){o=r+1;break}}if(l.length<i.length){for(r=0,n=i.length;r<n;r++)if(r>=l.length||l[r]!==i[r]){o=r+1;break}}if(1===o)return t;for(r=0,n=l.length-(o-1);r<n;r++)a+="../";for(r=o-1,n=i.length;r<n;r++)a+=r!==o-1?"/"+i[r]:i[r];return a}toAbsPath(e,t){let r,n=0,o=/\/$/.test(t)?"/":"",a=e.split("/"),l=t.split("/"),i=[];pQ(a,e=>{e&&i.push(e)});let s=[];for(let e=l.length-1;e>=0;e--)0!==l[e].length&&"."!==l[e]&&(".."!==l[e]?n>0?n--:s.push(l[e]):n++);let d=i.length-n;return 0!==(r=d<=0?eb(s).join("/"):i.slice(0,d).join("/")+"/"+eb(s).join("/")).indexOf("/")&&(r="/"+r),o&&r.lastIndexOf("/")!==r.length-1&&(r+=o),r}getURI(e=!1){let t;return this.source&&!e||(t="",e||(this.protocol?t+=this.protocol+"://":t+="//",this.userInfo&&(t+=this.userInfo+"@"),this.host&&(t+=this.host),this.port&&(t+=":"+this.port)),this.path&&(t+=this.path),this.query&&(t+="?"+this.query),this.anchor&&(t+="#"+this.anchor),this.source=t),this.source}}let p8=tL.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),p5="data-mce-type",p6=0,p9=(e,t,r,n)=>{var o,a,l,i;let s=t.validate,d=r.getSpecialElements();8===e.nodeType&&!t.allow_conditional_comments&&/^\[if/i.test(null!==(o=e.nodeValue)&&void 0!==o?o:"")&&(e.nodeValue=" "+e.nodeValue);let c=null!==(a=null==n?void 0:n.tagName)&&void 0!==a?a:e.nodeName.toLowerCase();if(1!==e.nodeType||"body"===c)return;let u=ro(e),m=t2(u,p5),f=t0(u,"data-mce-bogus");if(!m&&_(f))return void("all"===f?r4(u):r7(u));let g=r.getElementRule(c);if(!s||g){if(P(n)&&(n.allowedTags[c]=!0),s&&g&&!m){if(ea(null!==(l=g.attributesForced)&&void 0!==l?l:[],e=>{tJ(u,e.name,"{$uid}"===e.value?"mce_"+p6++:e.value)}),ea(null!==(i=g.attributesDefault)&&void 0!==i?i:[],e=>{t2(u,e.name)||tJ(u,e.name,"{$uid}"===e.value?"mce_"+p6++:e.value)}),g.attributesRequired&&!en(g.attributesRequired,e=>t2(u,e))||g.removeEmptyAttrs&&(e=>{let t=e.dom.attributes;return null==t||0===t.length})(u))return void r7(u);g.outputName&&g.outputName!==c&&((e,t)=>{let r=((e,t)=>{let r=rl(t),n=t8(e);return tZ(r,n),r})(e,t);r2(e,r);let n=rk(e);r6(r,n),r4(e)})(u,g.outputName)}}else eF(d,c)?r4(u):r7(u)},p4=(e,t,r,n,o)=>!(n in p8&&p2(e,o,r))&&(!e.validate||t.isValid(r,n)||e2(n,"data-")||e2(n,"aria-")),p7=(e,t)=>e.hasAttribute(p5)&&("id"===t||"class"===t||"style"===t),he=(e,t)=>e in t.getBoolAttrs(),ht=(e,t,r)=>{let{attributes:n}=e;for(let o=n.length-1;o>=0;o--){let a=n[o],l=a.name,i=a.value;p4(t,r,e.tagName.toLowerCase(),l,i)||p7(e,l)?he(l,r)&&e.setAttribute(l,l):e.removeAttribute(l)}},hr=(e,t)=>{let r=pX();return r.addHook("uponSanitizeElement",(r,n)=>{p9(r,e,t,n)}),r.addHook("uponSanitizeAttribute",(r,n)=>{let o=r.tagName.toLowerCase(),{attrName:a,attrValue:l}=n;n.keepAttr=p4(e,t,o,a,l),n.keepAttr?(n.allowedAttributes[a]=!0,he(a,t)&&(n.attrValue=a),e.allow_svg_data_urls&&e2(l,"data:image/svg+xml")&&(n.forceKeepAttr=!0)):p7(r,a)&&(n.forceKeepAttr=!0)}),r},hn=tL.makeMap,ho=tL.extend,ha=(e,t,r)=>{let n=e.name,o=n in r&&"title"!==n&&"textarea"!==n,a=t.childNodes;for(let t=0,n=a.length;t<n;t++){let n=a[t],l=new uG(n.nodeName.toLowerCase(),n.nodeType);if(ny(n)){let e=n.attributes;for(let t=0,r=e.length;t<r;t++){let r=e[t];l.attr(r.name,r.value)}}else nR(n)?(l.value=n.data,o&&(l.raw=!0)):(nT(n)||nA(n)||nO(n))&&(l.value=n.data);ha(l,n,r),e.append(l)}},hl=(e={},t=as())=>{let r=gJ(),n=gJ(),o={validate:!0,root_name:"body",sanitize:!0,...e},a=new DOMParser,l=((e,t)=>{if(e.sanitize){let r=hr(e,t);return(t,n)=>{r.sanitize(t,((e,t)=>{let r={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return r.PARSER_MEDIA_TYPE=t,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r})(e,n)),r.removed=[]}}return(r,n)=>{let o;let a=document.createNodeIterator(r,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);for(;o=a.nextNode();)p9(o,e,t),ny(o)&&ht(o,e,t)}})(o,t),i=r.addFilter,s=r.getFilters,d=r.removeFilter,c=n.addFilter,u=n.getFilters,m=n.removeFilter,f=(e,r)=>{let n=_(r.attr(p5)),o=1===r.type&&!eF(e,r.name)&&!(1===r.type&&oD(t,r.name)&&_(r.attr(ok)));return 3===r.type||o&&!n},g={schema:t,addAttributeFilter:c,getAttributeFilters:u,removeAttributeFilter:m,addNodeFilter:i,getNodeFilters:s,removeNodeFilter:d,parse:(e,r={})=>{var n;let i=o.validate,d=null!==(n=r.context)&&void 0!==n?n:o.root_name,c=((e,r,n="html")=>{let o="xhtml"===n?"application/xhtml+xml":"text/html",i=eF(t.getSpecialElements(),r.toLowerCase()),s=i?`<${r}>${e}</${r}>`:e,d="xhtml"===n?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${s}</body></html>`:`<body>${s}</body>`,c=a.parseFromString(d,o).body;return l(c,o),i?c.firstChild:c})(e,d,r.format);oO(t,c);let m=new uG(d,11);ha(m,c,t.getSpecialElements()),c.innerHTML="";let[g,p]=((e,t,r,n)=>{let o=r.validate,a=t.getNonEmptyElements(),l=t.getWhitespaceElements(),i=ho(hn("script,style,head,html,body,title,meta,param"),t.getBlockElements()),s=al(t),d=/[ \t\r\n]+/g,c=/^[ \t\r\n]+/,u=/[ \t\r\n]+$/,m=e=>{let t=e.parent;for(;P(t);){if(t.name in l)return!0;t=t.parent}return!1},f=e=>e.name in i&&!oF(t,e),g=(t,r)=>{let o=r?t.prev:t.next;return!P(o)&&!D(t.parent)&&f(t.parent)&&(t.parent!==e||!0===n.isRootContent)};return[e=>{var t,r;if(3===e.type&&!m(e)){let n=null!==(t=e.value)&&void 0!==t?t:"";n=n.replace(d," "),(P(r=e.prev)&&(f(r)||"br"===r.name)||g(e,!0))&&(n=n.replace(c,"")),0===n.length?e.remove():e.value=n}},e=>{var r,i;if(1===e.type){let r=t.getElementRule(e.name);if(o&&r){let o=fI(t,a,l,e);r.paddInEmptyBlock&&o&&(e=>{let r=e;for(;P(r);){if(r.name in s)return fI(t,a,l,r);r=r.parent}return!1})(e)?fM(n,f,e):r.removeEmpty&&o?f(e)?e.remove():e.unwrap():r.paddEmpty&&(o||fF(e,"#text")&&(null===(i=null==e?void 0:e.firstChild)||void 0===i?void 0:i.value)==="\xa0")&&fM(n,f,e)}}else if(3===e.type&&!m(e)){let t=null!==(r=e.value)&&void 0!==r?r:"";(e.next&&f(e.next)||g(e,!1))&&(t=t.replace(u,"")),0===t.length?e.remove():e.value=t}}]})(m,t,o,r),h=[],b={nodes:{},attributes:{}},v=e=>fD(s(),u(),e,b);if(((e,t,r)=>{let n=[];for(let r=e,o=r;r;o=r,r=r.walk()){let a=r;ea(t,e=>e(a)),D(a.parent)&&a!==e?r=o:n.push(a)}for(let e=n.length-1;e>=0;e--){let t=n[e];ea(r,e=>e(t))}})(m,[g,v],[p,i?e=>{fH(t,e)&&h.push(e)}:I]),h.reverse(),i&&h.length>0){if(r.context){let{pass:e,fail:n}=ei(h,e=>e.parent===m);fj(n,t,m,v),r.invalid=e.length>0}else fj(h,t,m,v)}let y=((e,t)=>{var r;let n=null!==(r=t.forced_root_block)&&void 0!==r?r:e.forced_root_block;return!1===n?"":!0===n?"p":n})(o,r);return y&&("body"===m.name||r.isRootContent)&&((e,r)=>{let n=ho(hn("script,style,head,html,body,title,meta,param"),t.getBlockElements()),a=/^[ \t\r\n]+/,l=/[ \t\r\n]+$/,i=e.firstChild,s=null,d=e=>{var t,r;e&&((i=e.firstChild)&&3===i.type&&(i.value=null===(t=i.value)||void 0===t?void 0:t.replace(a,"")),(i=e.lastChild)&&3===i.type&&(i.value=null===(r=i.value)||void 0===r?void 0:r.replace(l,"")))};if(t.isValidChild(e.name,r.toLowerCase())){for(;i;){let t=i.next;f(n,i)?(s||((s=new uG(r,1)).attr(o.forced_root_block_attrs),e.insert(s,i)),s.append(i)):(d(s),s=null),i=t}d(s)}})(m,y),r.invalid||fP(b,r),m}};return((e,t)=>{let r=e.schema;t.remove_trailing_brs&&e.addNodeFilter("br",(e,t,n)=>{let o=tL.extend({},r.getBlockElements()),a=r.getNonEmptyElements(),l=r.getWhitespaceElements();o.body=1;let i=e=>e.name in o&&oF(r,e);for(let t=0,s=e.length;t<s;t++){let s=e[t],d=s.parent;if(d&&o[d.name]&&s===d.lastChild){let e=s.prev;for(;e;){let t=e.name;if("span"!==t||"bookmark"!==e.attr("data-mce-type")){"br"===t&&(s=null);break}e=e.prev}if(s&&(s.remove(),fI(r,a,l,d))){let e=r.getElementRule(d.name);e&&(e.removeEmpty?d.remove():e.paddEmpty&&fM(n,i,d))}}else{let e=s;for(;d&&d.firstChild===e&&d.lastChild===e&&(e=d,!o[d.name]);)d=d.parent;if(e===d){let e=new uG("#text",3);e.value="\xa0",s.replace(e)}}}}),e.addAttributeFilter("href",e=>{let r=e.length,n=e=>{let t=e?tL.trim(e):"";return/\b(noopener)\b/g.test(t)?t:t.split(" ").filter(e=>e.length>0).concat(["noopener"]).sort().join(" ")};if(!t.allow_unsafe_link_target)for(;r--;){let t=e[r];"a"===t.name&&"_blank"===t.attr("target")&&t.attr("rel",n(t.attr("rel")))}}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",e=>{let t,r,n,o,a=e.length;for(;a--;)if("a"===(o=e[a]).name&&o.firstChild&&!o.attr("href"))for(n=o.parent,t=o.lastChild;t&&n;)r=t.prev,n.insert(t,o),t=r}),t.fix_list_elements&&e.addNodeFilter("ul,ol",e=>{let t,r,n=e.length;for(;n--;)if((r=(t=e[n]).parent)&&("ul"===r.name||"ol"===r.name)){if(t.prev&&"li"===t.prev.name)t.prev.append(t);else{let e=new uG("li",1);e.attr("style","list-style-type: none"),t.wrap(e)}}});let n=r.getValidClasses();t.validate&&n&&e.addAttributeFilter("class",e=>{var t;let r=e.length;for(;r--;){let o=e[r],a=null!==(t=o.attr("class"))&&void 0!==t?t:"",l=tL.explode(a," "),i="";for(let e=0;e<l.length;e++){let t=l[e],r=!1,a=n["*"];a&&a[t]&&(r=!0),a=n[o.name],!r&&a&&a[t]&&(r=!0),r&&(i&&(i+=" "),i+=t)}i.length||(i=null),o.attr("class",i)}}),((e,t)=>{let{blob_cache:r}=t;if(r){let t=e=>{let t=e.attr("src");e.attr("src")===tT.transparentSrc||P(e.attr("data-mce-placeholder"))||P(e.attr("data-mce-bogus"))||D(t)||g6(r,t,!0).each(t=>{e.attr("src",t.blobUri())})};e.addAttributeFilter("src",e=>ea(e,t))}})(e,t)})(g,o),o.inline_styles&&gZ(g,o,t),g},hi=(e,t,r)=>{let n=fQ(e)?u3({validate:!1}).serialize(e):e,o=t(n);if(o.isDefaultPrevented())return o;if(fQ(e)){if(o.content!==n){let t=hl({validate:!1,forced_root_block:!1,sanitize:r}).parse(o.content,{context:e.name});return{...o,content:t}}return{...o,content:e}}return o},hs=(e,t)=>{if(t.no_events)return lz.value(t);{let r=e.dispatch("BeforeGetContent",t);return r.isDefaultPrevented()?lz.error(cC(e,{content:"",...r}).content):lz.value(r)}},hd=(e,t,r)=>{if(r.no_events)return t;{let n=hi(t,t=>cC(e,{...r,content:t}),sv(e));return n.content}},hc=(e,t)=>{if(t.no_events)return lz.value(t);{let r=hi(t.content,r=>{var n;return n={...t,content:r},e.dispatch("BeforeSetContent",n)},sv(e));return r.isDefaultPrevented()?(cy(e,r),lz.error(void 0)):lz.value(r)}},hu=(e,t,r)=>{r.no_events||cy(e,{...r,content:t})},hm=(e,t,r)=>({element:e,width:t,rows:r}),hf=(e,t)=>({element:e,cells:t}),hg=(e,t)=>({x:e,y:t}),hp=(e,t)=>t1(e,t).bind(te).getOr(1),hh=(e,t,r)=>{let n=e.rows;return!!(n[r]?n[r].cells:[])[t]},hb=e=>ec(e,(e,t)=>t.cells.length>e?t.cells.length:e,0),hv=(e,t)=>{let r=e.rows;for(let e=0;e<r.length;e++){let n=r[e].cells;for(let r=0;r<n.length;r++)if(rm(n[r],t))return Q.some(hg(r,e))}return Q.none()},hy=(e,t,r,n,o)=>{let a=[],l=e.rows;for(let e=r;e<=o;e++){let r=l[e].cells,o=t<n?r.slice(t,n+1):r.slice(n,t+1);a.push(hf(l[e].element,o))}return a},hC=e=>((e,t)=>{let r=a1(e.element),n=rl("tbody");return r6(n,t),r8(r,n),r})(e,eo(e.rows,e=>{let t=eo(e.cells,e=>{let t=a2(e);return t3(t,"colspan"),t3(t,"rowspan"),t}),r=a1(e.element);return r6(r,t),r})),hx=(e,t)=>{let r=ro(t.commonAncestorContainer),n=mg(r,e),o=es(n,n8),a=em(n,e=>"li"===t$(e)&&dL(e,t)).fold(j([]),e=>em(n,e=>"ul"===t$(e)||"ol"===t$(e)).map(e=>{let t=rl(t$(e)),r=eD(rZ(e),(e,t)=>e2(t,"list-style"));return rY(t,r),[rl("li"),t]}).getOr([])),l=o.concat(a.length?a:nZ(r)?rb(r).filter(nJ).fold(j([]),e=>[r,e]):nJ(r)?[r]:[]);return eo(l,a1)},hw=()=>cj([]),hE=(e,t)=>rj(t[0],"table",V(rm,e)).bind(e=>{let r=t[0],n=t[t.length-1],o=(e=>{let t=hm(a1(e),0,[]);return ea(ng(e,"tr"),(e,r)=>{ea(ng(e,"td,th"),(n,o)=>{((e,t,r,n,o)=>{let a=hp(o,"rowspan"),l=hp(o,"colspan"),i=e.rows;for(let e=r;e<r+a;e++){i[e]||(i[e]=hf(a2(n),[]));for(let n=t;n<t+l;n++)i[e].cells[n]=e===r&&n===t?o:a1(o)}})(t,((e,t,r)=>{for(;hh(e,t,r);)t++;return t})(t,o,r),r,e,n)})}),hm(t.element,hb(t.rows),t.rows)})(e);return hv(o,r).bind(e=>hv(o,n).map(t=>((e,t,r)=>{let n=t.x,o=t.y,a=r.x,l=r.y,i=o<l?hy(e,n,o,a,l):hy(e,n,l,a,o);return hm(e.element,hb(i),i)})(o,e,t))).map(e=>cj([hC(e)]))}).getOrThunk(hw),hk=(e,t)=>{var r;let n=dO(t,e);return n.length>0?hE(e,n):t.length>0&&t[0].collapsed?hw():((e,t)=>{let r=ec(t,(e,t)=>(r8(t,e),t),e);return t.length>0?cj([r]):r})(ro((r=t[0]).cloneContents()),hx(e,r))},hS=(e,t)=>t>=0&&t<e.length&&dC(e.charAt(t)),h_=e=>n4(e.innerText),hN=e=>ny(e)?e.outerHTML:nR(e)?o5.encodeRaw(e.data,!1):nT(e)?"<!--"+e.data+"-->":"",hR=(e,t)=>{var r;let n;return r=((e,t)=>{let r=e.length+t.length+2,n=Array(r),o=Array(r),a=(r,n,o,l,s)=>{let d=i(r,n,o,l);if(null===d||d.start===n&&d.diag===n-l||d.end===r&&d.diag===r-o){let a=r,i=o;for(;a<n||i<l;)a<n&&i<l&&e[a]===t[i]?(s.push([0,e[a]]),++a,++i):n-r>l-o?(s.push([2,e[a]]),++a):(s.push([1,t[i]]),++i)}else{a(r,d.start,o,d.start-d.diag,s);for(let t=d.start;t<d.end;++t)s.push([0,e[t]]);a(d.end,n,d.end-d.diag,l,s)}},l=(r,n,o,a)=>{let l=r;for(;l-n<a&&l<o&&e[l]===t[l-n];)++l;return{start:r,end:l,diag:n}},i=(r,a,i,s)=>{let d,c,u,m,f;let g=a-r,p=s-i;if(0===g||0===p)return null;let h=g-p,b=p+g,v=(b%2==0?b:b+1)/2;for(n[1+v]=r,o[1+v]=a+1,d=0;d<=v;++d){for(c=-d;c<=d;c+=2){for(u=c+v,c===-d||c!==d&&n[u-1]<n[u+1]?n[u]=n[u+1]:n[u]=n[u-1]+1,f=(m=n[u])-r+i-c;m<a&&f<s&&e[m]===t[f];)n[u]=++m,++f;if(h%2!=0&&h-d<=c&&c<=h+d&&o[u-h]<=n[u])return l(o[u-h],c+r-i,a,s)}for(c=h-d;c<=h+d;c+=2){for(u=c+v-h,c===h-d||c!==h+d&&o[u+1]<=o[u-1]?o[u]=o[u+1]-1:o[u]=o[u-1],f=(m=o[u]-1)-r+i-c;m>=r&&f>=i&&e[m]===t[f];)o[u]=m--,f--;if(h%2==0&&-d<=c&&c<=d&&o[u]<=n[u+h])return l(o[u],c+r-i,a,s)}}return null},s=[];return a(0,e.length,0,t.length,s),s})(eo(ek(t.childNodes),hN),e),n=0,ea(r,e=>{0===e[0]?n++:1===e[0]?(((e,t,r)=>{let n=(e=>{let t;let r=document.createElement("div"),n=document.createDocumentFragment();for(e&&(r.innerHTML=e);t=r.firstChild;)n.appendChild(t);return n})(t);if(e.hasChildNodes()&&r<e.childNodes.length){let t=e.childNodes[r];e.insertBefore(n,t)}else e.appendChild(n)})(t,e[1],n),n++):2===e[0]&&((e,t)=>{if(e.hasChildNodes()&&t<e.childNodes.length){let r=e.childNodes[t];e.removeChild(r)}})(t,n)}),t},hA=eG(()=>document.implementation.createHTMLDocument("undo")),hO=e=>{let t=es(eo(ek(e.getBody().childNodes),hN),e=>e.length>0),r=ep(t,t=>{let r=uQ(e.serializer,t);return r.length>0?[r]:[]}),n=r.join("");return -1!==n.indexOf("</iframe>")?{type:"fragmented",fragments:r,content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:n,bookmark:null,beforeBookmark:null}},hT=(e,t,r)=>{let n=r?t.beforeBookmark:t.bookmark;"fragmented"===t.type?hR(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:!P(n)||!ds(n)||!n.isFakeCaret}),n&&(e.selection.moveToBookmark(n),e.selection.scrollIntoView())},hB=e=>"fragmented"===e.type?e.fragments.join(""):e.content,hD=e=>{let t=rl("body",hA());return nr(t,hB(e)),ea(ng(t,"*[data-mce-bogus]"),r7),nt(t)},hP=(e,t)=>!(!e||!t)&&(hB(e)===hB(t)||hD(e)===hD(t)),hL=e=>0===e.get(),hM=(e,t,r)=>{hL(r)&&(e.typing=t)},hF=(e,t)=>{e.typing&&(hM(e,!1,t),e.add())},hI=e=>({init:{bindEvents:I},undoManager:{beforeChange:(t,r)=>{hL(t)&&r.set(lF(e.selection))},add:(t,r,n,o,a,l)=>((e,t,r,n,o,a,l)=>{let i=hO(e),s=tL.extend(a||{},i);if(!hL(n)||e.removed)return null;let d=t.data[r.get()];if(e.dispatch("BeforeAddUndo",{level:s,lastLevel:d,originalEvent:l}).isDefaultPrevented()||d&&hP(d,s))return null;t.data[r.get()]&&o.get().each(e=>{t.data[r.get()].beforeBookmark=e});let c=iK(e);if(c&&t.data.length>c){for(let e=0;e<t.data.length-1;e++)t.data[e]=t.data[e+1];t.data.length--,r.set(t.data.length)}s.bookmark=lF(e.selection),r.get()<t.data.length-1&&(t.data.length=r.get()+1),t.data.push(s),r.set(t.data.length-1);let u={level:s,lastLevel:d,originalEvent:l};return r.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",u),e.dispatch("change",u)):e.dispatch("AddUndo",u),s})(e,t,r,n,o,a,l),undo:(t,r,n)=>{var o;let a;return(o=t).typing&&(o.add(),o.typing=!1,hM(o,!1,r)),n.get()>0&&(n.set(n.get()-1),hT(e,a=o.data[n.get()],!0),e.setDirty(!0),e.dispatch("Undo",{level:a})),a},redo:(t,r)=>{let n;return t.get()<r.length-1&&(t.set(t.get()+1),hT(e,n=r[t.get()],!1),e.setDirty(!0),e.dispatch("Redo",{level:n})),n},clear:(t,r)=>{var n;(n=t).data=[],r.set(0),n.typing=!1,e.dispatch("ClearUndos")},reset:e=>{e.clear(),e.add()},hasUndo:(t,r)=>r.get()>0||t.typing&&t.data[0]&&!hP(hO(e),t.data[0]),hasRedo:(e,t)=>t.get()<e.data.length-1&&!e.typing,transact:(e,t,r)=>(hF(e,t),e.beforeChange(),e.ignore(r),e.add()),ignore:(e,t)=>((e,t)=>{try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}})(e,t),extra:(t,r,n,o)=>((e,t,r,n,o)=>{if(t.transact(n)){let n=t.data[r.get()].bookmark,a=t.data[r.get()-1];hT(e,a,!0),t.transact(o)&&(t.data[r.get()-1].beforeBookmark=n)}})(e,t,r,n,o)},formatter:{match:(t,r,n,o)=>f9(e,t,r,n,o),matchAll:(t,r)=>((e,t,r)=>{let n=[],o={},a=e.selection.getStart();return e.dom.getParent(a,a=>{for(let l=0;l<t.length;l++){let i=t[l];!o[i]&&f6(e,a,i,r)&&(o[i]=!0,n.push(i))}},e.dom.getRoot()),n})(e,t,r),matchNode:(t,r,n,o)=>f6(e,t,r,n,o),canApply:t=>((e,t)=>{let r=e.formatter.get(t),n=e.dom;if(r){let t=e.selection.getStart(),o=d1(n,t);for(let e=r.length-1;e>=0;e--){let t=r[e];if(!d8(t))return!0;for(let e=o.length-1;e>=0;e--)if(n.is(o[e],t.selector))return!0}}return!1})(e,t),closest:t=>((e,t)=>{let r=t=>rm(t,ro(e.getBody()));return Q.from(e.selection.getStart(!0)).bind(n=>f1(ro(n),r=>eS(t,t=>f6(e,r.dom,t)?Q.some(t):Q.none()),r)).getOrNull()})(e,t),apply:(t,r,n)=>gq(e,t,r,n),remove:(t,r,n,o)=>gj(e,t,r,n,o),toggle:(t,r,n)=>((e,t,r,n)=>{let o=e.formatter.get(t);o&&(!f9(e,t,r,n)||"toggle"in o[0]&&!o[0].toggle?gq(e,t,r,n):gj(e,t,r,n))})(e,t,r,n),formatChanged:(t,r,n,o,a)=>(((e,t,r,n,o,a)=>{let l=t.get();ea(r.split(","),t=>{let r=eM(l,t).getOrThunk(()=>{let e={withSimilar:{state:aT(!1),similar:!0,callbacks:[]},withoutSimilar:{state:aT(!1),similar:!1,callbacks:[]},withVars:[]};return l[t]=e,e}),i=()=>{let r=gY(e);return gG(e,r,t,o,a).isSome()};if(B(a)){let e=o?r.withSimilar:r.withoutSimilar;e.callbacks.push(n),1===e.callbacks.length&&e.state.set(i())}else r.withVars.push({state:aT(i()),similar:o,vars:a,callback:n})}),t.set(l)})(e,t,r,n,o,a),{unbind:()=>((e,t,r)=>{let n=e.get();ea(t.split(","),e=>eM(n,e).each(t=>{n[e]={withSimilar:{...t.withSimilar,callbacks:es(t.withSimilar.callbacks,e=>e!==r)},withoutSimilar:{...t.withoutSimilar,callbacks:es(t.withoutSimilar.callbacks,e=>e!==r)},withVars:es(t.withVars,e=>e.callback!==r)}})),e.set(n)})(t,r,n)})},editor:{getContent:t=>Q.from(e.getBody()).fold(j("tree"===t.format?new uG("body",11):""),r=>u0(e,t,r)),setContent:(t,r)=>Q.from(e.getBody()).map(n=>fQ(t)?((e,t,r,n)=>{fL(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),r);let o=u3({validate:!1},e.schema).serialize(r),a=n2(ro(t))?o:tL.trim(o);return fJ(e,a,n.no_selection),{content:r,html:a}})(e,n,t,r):((e,t,r,n)=>{if(0===r.length||/^\s+$/.test(r)){let o='<br data-mce-bogus="1">';"TABLE"===t.nodeName?r="<tr><td>"+o+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(r="<li>"+o+"</li>");let a=l4(e);return e.schema.isValidChild(t.nodeName.toLowerCase(),a.toLowerCase())?(r=o,r=e.dom.createHTML(a,l7(e),r)):r||(r=o),fJ(e,r,n.no_selection),{content:r,html:r}}{"raw"!==n.format&&(r=u3({validate:!1},e.schema).serialize(e.parser.parse(r,{isRootContent:!0,insert:!0})));let o=n2(ro(t))?r:tL.trim(r);return fJ(e,o,n.no_selection),{content:o,html:o}}})(e,n,t,r)).getOr({content:t,html:fQ(r.content)?"":r.content}),insertContent:(t,r)=>fX(e,t,r),addVisual:t=>((e,t)=>{let r=e.dom,n=P(t)?t:e.getBody();ea(r.select("table,a",n),t=>{switch(t.nodeName){case"TABLE":let n=i1(e),o=r.getAttrib(t,"border");o&&"0"!==o||!e.hasVisual?r.removeClass(t,n):r.addClass(t,n);break;case"A":if(!r.getAttrib(t,"href")){let n=r.getAttrib(t,"name")||t.id,o=i2(e);n&&e.hasVisual?r.addClass(t,o):r.removeClass(t,o)}}}),e.dispatch("VisualAid",{element:t,hasVisual:e.hasVisual})})(e,t)},selection:{getContent:(t,r)=>((e,t,r={})=>{let n={...r,format:t,get:!0,selection:!0,getInner:!0};return hs(e,n).fold(H,t=>{let r=((e,t)=>{if("text"===t.format)return Q.from(e.selection.getRng()).map(t=>{var r;let n=Q.from(e.dom.getParent(t.commonAncestorContainer,e.dom.isBlock)),o=e.getBody(),a=n.map(e=>e.nodeName).getOr("div").toLowerCase(),l=ro(t.cloneContents());uJ(l),uZ(l);let i=e.dom.add(o,a,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},l.dom),s=h_(i),d=n4(null!==(r=i.textContent)&&void 0!==r?r:"");if(e.dom.remove(i),hS(d,0)||hS(d,d.length-1)){let e=n.getOr(o),t=h_(e),r=t.indexOf(s);return -1===r?s:(hS(t,r-1)?" ":"")+s+(hS(t,r+s.length)?" ":"")}return s}).getOr("");{let r=((e,t)=>{let r=e.selection.getRng(),n=e.dom.create("body"),o=e.selection.getSel(),a=uI(e,dA(o)),l=t.contextual?hk(ro(e.getBody()),a).dom:r.cloneContents();return l&&n.appendChild(l),e.selection.serializer.serialize(n,t)})(e,t);return"tree"===t.format?r:e.selection.isCollapsed()?"":r}})(e,t);return hd(e,r,t)})})(e,t,r)},autocompleter:{addDecoration:t=>uH(e,t),removeDecoration:()=>u$(ro(e.getBody())).each(t=>{let r=e.selection.getBookmark();r7(t),e.selection.moveToBookmark(r)})},raw:{getModel:()=>Q.none()}}),hU=e=>eF(e.plugins,"rtc"),hz=e=>e.rtcInstance?e.rtcInstance:hI(e),hj=e=>{let t=e.rtcInstance;if(t)return t;throw Error("Failed to get RTC instance not yet initialized.")},hH=e=>hj(e).init.bindEvents(),h$=e=>0===e.dom.length?(r4(e),Q.none()):Q.some(e),hV=(e,t,r,n)=>{e.bind(e=>((n?mq:mV)(e.dom,n?e.dom.length:0),t.filter(tK).map(t=>((e,t,r,n)=>{let o=e.dom,a=t.dom,l=n?o.length:a.length;n?(mW(o,a,!1,!n),r.setStart(a,l)):(mW(a,o,!1,!n),r.setEnd(a,l))})(e,t,r,n)))).orThunk(()=>{let e=t.filter(e=>cg.isBookmarkNode(e.dom)).bind(n?rx:rC).or(t).filter(tK);return e.map(e=>((e,t)=>{rb(e).each(r=>{let n=e.dom;t&&mL(r,ly(n,0))?mV(n,0):!t&&mM(r,ly(n,n.length))&&mq(n,n.length)})})(e,n))})},hq=(e,t,r)=>{if(eF(e,t)){let n=es(e[t],e=>e!==r);0===n.length?delete e[t]:e[t]=n}},hW=e=>!(!e||!e.ownerDocument)&&rf(ro(e.ownerDocument),ro(e)),hK=(e,t,r,n)=>{let o,a;let{selectorChangedWithUnbind:l}=((e,t)=>{let r,n;let o=(t,r)=>em(r,r=>e.is(r,t)),a=t=>e.getParents(t,void 0,e.getRoot());return{selectorChangedWithUnbind:(e,l)=>(r||(r={},n={},t.on("NodeChange",e=>{let t=e.element,l=a(t),i={};eR(r,(e,t)=>{o(t,l).each(r=>{n[t]||(ea(e,e=>{e(!0,{node:r,selector:t,parents:l})}),n[t]=e),i[t]=e})}),eR(n,(e,r)=>{i[r]||(delete n[r],ea(e,e=>{e(!1,{node:t,selector:r,parents:l})}))})})),r[e]||(r[e]=[]),r[e].push(l),o(e,a(t.selection.getStart())).each(()=>{n[e]=r[e]}),{unbind:()=>{hq(r,e,l),hq(n,e,l)}})}})(e,n),i=(e,t)=>((e,t,r={})=>{let n={format:"html",...r,set:!0,selection:!0,content:t};hc(e,n).each(t=>{let r=((e,t)=>{if("raw"!==t.format){let r=e.selection.getRng(),n=e.dom.getParent(r.commonAncestorContainer,e.dom.isBlock),o=n?{context:n.nodeName.toLowerCase()}:{},a=e.parser.parse(t.content,{forced_root_block:!1,...o,...t});return u3({validate:!1},e.schema).serialize(a)}return t.content})(e,t),n=e.selection.getRng();((e,t)=>{let r=Q.from(t.firstChild).map(ro),n=Q.from(t.lastChild).map(ro);e.deleteContents(),e.insertNode(t);let o=r.bind(rC).filter(tK).bind(h$),a=n.bind(rx).filter(tK).bind(h$);hV(o,r,e,!0),hV(a,n,e,!1),e.collapse(!1)})(n,n.createContextualFragment(r)),e.selection.setRng(n),uc(e,n),hu(e,r,t)})})(n,e,t),s=e=>{let t=c();t.collapse(!!e),u(t)},d=()=>t.getSelection?t.getSelection():t.document.selection,c=()=>{let r;let l=(e,t,r)=>{try{return t.compareBoundaryPoints(e,r)}catch(e){return -1}},i=t.document;if(P(n.bookmark)&&!uB(n)){let e=ux(n);if(e.isSome())return e.map(e=>uI(n,[e])[0]).getOr(i.createRange())}try{let e=d();e&&!nv(e.anchorNode)&&(r=e.rangeCount>0?e.getRangeAt(0):i.createRange(),r=uI(n,[r])[0])}catch(e){}if(r||(r=i.createRange()),nB(r.startContainer)&&r.collapsed){let t=e.getRoot();r.setStart(t,0),r.setEnd(t,0)}return o&&a&&(0===l(r.START_TO_START,r,o)&&0===l(r.END_TO_END,r,o)?r=a:(o=null,a=null)),r},u=(e,t)=>{var r;if(!((r=e)&&hW(r.startContainer)&&hW(r.endContainer)))return;let l=d();if(e=n.dispatch("SetSelectionRange",{range:e,forward:t}).range,l){a=e;try{l.removeAllRanges(),l.addRange(e)}catch(e){}!1===t&&l.extend&&(l.collapse(e.endContainer,e.endOffset),l.extend(e.startContainer,e.startOffset)),o=l.rangeCount>0?l.getRangeAt(0):null}if(!e.collapsed&&e.startContainer===e.endContainer&&(null==l?void 0:l.setBaseAndExtent)&&e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()){let t=e.startContainer.childNodes[e.startOffset];t&&"IMG"===t.nodeName&&(l.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),l.anchorNode===e.startContainer&&l.focusNode===e.endContainer||l.setBaseAndExtent(t,0,t,1))}n.dispatch("AfterSetSelectionRange",{range:e,forward:t})},m=()=>{let t=d(),r=null==t?void 0:t.anchorNode,n=null==t?void 0:t.focusNode;if(!t||!r||!n||nv(r)||nv(n))return!0;let o=e.createRng(),a=e.createRng();try{o.setStart(r,t.anchorOffset),o.collapse(!0),a.setStart(n,t.focusOffset),a.collapse(!0)}catch(e){return!0}return 0>=o.compareBoundaryPoints(o.START_TO_START,a)},f={dom:e,win:t,serializer:r,editor:n,expand:(t={type:"word"})=>u(c0(e).expand(c(),t)),collapse:s,setCursorLocation:(t,r)=>{let o=e.createRng();P(t)&&P(r)?(o.setStart(t,r),o.setEnd(t,r),u(o),s(!1)):(dM(e,o,n.getBody(),!0),u(o))},getContent:e=>((e,t={})=>{var r;return r=t.format?t.format:"html",hj(e).selection.getContent(r,t)})(n,e),setContent:i,getBookmark:(e,t)=>g.getBookmark(e,t),moveToBookmark:e=>g.moveToBookmark(e),select:(t,r)=>(Q.from(t).bind(t=>Q.from(t.parentNode).map(n=>{let o=e.nodeIndex(t),a=e.createRng();return a.setStart(n,o),a.setEnd(n,o+1),r&&(dM(e,a,t,!0),dM(e,a,t,!1)),a})).each(u),t),isCollapsed:()=>{let e=c(),t=d();return!(!e||e.item)&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},isEditable:()=>{let t=c(),r=n.getBody().querySelectorAll('[data-mce-selected="1"]');return r.length>0?eh(r,t=>e.isEditable(t.parentElement)):t.startContainer===t.endContainer?e.isEditable(t.startContainer):e.isEditable(t.startContainer)&&e.isEditable(t.endContainer)},isForward:m,setNode:t=>(i(e.getOuterHTML(t)),t),getNode:()=>((e,t)=>{if(!t)return e;let r=t.startContainer,n=t.endContainer,o=t.startOffset,a=t.endOffset,l=t.commonAncestorContainer;t.collapsed||(r===n&&a-o<2&&r.hasChildNodes()&&(l=r.childNodes[o]),nR(r)&&nR(n)&&(r=r.length===o?uF(r.nextSibling,!0):r.parentNode,n=0===a?uF(n.previousSibling,!1):n.parentNode,r&&r===n&&(l=r)));let i=nR(l)?l.parentNode:l;return ny(i)?i:e})(n.getBody(),c()),getSel:d,setRng:u,getRng:c,getStart:e=>uL(n.getBody(),c(),e),getEnd:e=>uM(n.getBody(),c(),e),getSelectedBlocks:(t,r)=>((e,t,r,n)=>{let o=[],a=e.getRoot(),l=e.getParent(r||uL(a,t,t.collapsed),e.isBlock),i=e.getParent(n||uM(a,t,t.collapsed),e.isBlock);if(l&&l!==a&&o.push(l),l&&i&&l!==i){let t;let r=new nh(l,a);for(;(t=r.next())&&t!==i;)e.isBlock(t)&&o.push(t)}return i&&l!==i&&i!==a&&o.push(i),o})(e,c(),t,r),normalize:()=>{let t=c(),r=d();if(!(dA(r).length>1)&&dF(n)){let r=cQ(e,t);return r.each(e=>{u(e,m())}),r.getOr(t)}return t},selectorChanged:(e,t)=>(l(e,t),f),selectorChangedWithUnbind:l,getScrollContainer:()=>{let t,r=e.getRoot();for(;r&&"BODY"!==r.nodeName;){if(r.scrollHeight>r.clientHeight){t=r;break}r=r.parentNode}return t},scrollIntoView:(e,t)=>{P(e)?((e,t,r)=>{(e.inline?ui:ud)(e,t,r)})(n,e,t):uc(n,c(),t)},placeCaretAt:(e,t)=>u(c$(e,t,n.getDoc())),getBoundingClientRect:()=>{let e=c();return e.collapsed?ly.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:()=>{t=o=a=null,p.destroy()}},g=cg(f),p=cN(f,n);return f.bookmarkManager=g,f.controlSelection=p,f},hG=(e,t,r)=>{-1===tL.inArray(t,r)&&(e.addAttributeFilter(r,(e,t)=>{let r=e.length;for(;r--;)e[r].attr(t,null)}),t.push(r))},hY=(e,t)=>{let r=["data-mce-selected"],n=t&&t.dom?t.dom:aR.DOM,o=t&&t.schema?t.schema:as(e);e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs=!("remove_trailing_brs"in e)||e.remove_trailing_brs;let a=hl(e,o);return a.addAttributeFilter("data-mce-tabindex",(e,t)=>{let r=e.length;for(;r--;){let n=e[r];n.attr("tabindex",n.attr("data-mce-tabindex")),n.attr(t,null)}}),a.addAttributeFilter("src,href,style",(t,r)=>{let o="data-mce-"+r,a=e.url_converter,l=e.url_converter_scope,i=t.length;for(;i--;){let e=t[i],s=e.attr(o);void 0!==s?(e.attr(r,s.length>0?s:null),e.attr(o,null)):(s=e.attr(r),"style"===r?s=n.serializeStyle(n.parseStyle(s),e.name):a&&(s=a.call(l,s,r,e.name)),e.attr(r,s.length>0?s:null))}}),a.addAttributeFilter("class",e=>{let t=e.length;for(;t--;){let r=e[t],n=r.attr("class");n&&(n=n.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),r.attr("class",n.length>0?n:null))}}),a.addAttributeFilter("data-mce-type",(e,t,r)=>{let n=e.length;for(;n--;){let t=e[n];if("bookmark"===t.attr("data-mce-type")&&!r.cleanup){let e=Q.from(t.firstChild).exists(e=>{var t;return!nH(null!==(t=e.value)&&void 0!==t?t:"")});e?t.unwrap():t.remove()}}}),a.addNodeFilter("noscript",e=>{var t;let r=e.length;for(;r--;){let n=e[r].firstChild;n&&(n.value=o5.decode(null!==(t=n.value)&&void 0!==t?t:""))}}),a.addNodeFilter("script,style",(t,r)=>{var n;let o=e=>e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,""),a=t.length;for(;a--;){let l=t[a],i=l.firstChild,s=null!==(n=null==i?void 0:i.value)&&void 0!==n?n:"";if("script"===r){let t=l.attr("type");t&&l.attr("type","mce-no/type"===t?null:t.replace(/^mce\-/,"")),"xhtml"===e.element_format&&i&&s.length>0&&(i.value="// <![CDATA[\n"+o(s)+"\n// ]]>")}else"xhtml"===e.element_format&&i&&s.length>0&&(i.value="<!--\n"+o(s)+"\n-->")}}),a.addNodeFilter("#comment",t=>{let r=t.length;for(;r--;){let o=t[r],a=o.value;e.preserve_cdata&&0===(null==a?void 0:a.indexOf("[CDATA["))?(o.name="#cdata",o.type=4,o.value=n.decode(a.replace(/^\[CDATA\[|\]\]$/g,""))):0===(null==a?void 0:a.indexOf("mce:protected "))&&(o.name="#text",o.type=3,o.raw=!0,o.value=unescape(a).substr(14))}}),a.addNodeFilter("xml:namespace,input",(e,t)=>{let r=e.length;for(;r--;){let n=e[r];7===n.type?n.remove():1===n.type&&("input"!==t||n.attr("type")||n.attr("type","text"))}}),a.addAttributeFilter("data-mce-type",e=>{ea(e,e=>{"format-caret"===e.attr("data-mce-type")&&(e.isEmpty(a.schema.getNonEmptyElements())?e.remove():e.unwrap())})}),a.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(e,t)=>{let r=e.length;for(;r--;)e[r].attr(t,null)}),{schema:o,addNodeFilter:a.addNodeFilter,addAttributeFilter:a.addAttributeFilter,serialize:(r,l={})=>{let i={format:"html",...l},s=P(t)&&t.hasEventListeners("PreProcess")&&!i.no_events?((e,t,r)=>{let n;let o=e.dom,a=t.cloneNode(!0),l=document.implementation;if(l.createHTMLDocument){let e=l.createHTMLDocument("");tL.each("BODY"===a.nodeName?a.childNodes:[a],t=>{e.body.appendChild(e.importNode(t,!0))}),a="BODY"!==a.nodeName?e.body.firstChild:e.body,n=o.doc,o.doc=e}return((e,t)=>{e.dispatch("PreProcess",t)})(e,{...r,node:a}),n&&(o.doc=n),a})(t,r,i):r,d=((e,t,r)=>{let n=n4(r.getInner?t.innerHTML:e.getOuterHTML(t));return r.selection||n2(ro(t))?n:tL.trim(n)})(n,s,i),c=((e,t,r)=>{let n=r.selection?{forced_root_block:!1,...r}:r,o=e.parse(t,n);return(e=>{let t=e=>"br"===(null==e?void 0:e.name),r=e.lastChild;if(t(r)){let e=r.prev;t(e)&&(r.remove(),e.remove())}})(o),o})(a,d,i);return"tree"===i.format?c:((e,t,r,n,o)=>{let a=u3(t,r).serialize(n);return((e,t,r)=>{if(!t.no_events&&e){var n;let o=(n={...t,content:r},e.dispatch("PostProcess",n));return o.content}return r})(e,o,a)})(t,e,o,c,i)},addRules:o.addValidElements,setRules:o.setValidElements,addTempAttr:V(hG,a,r),getTempAttrs:j(r),getNodeFilters:a.getNodeFilters,getAttributeFilters:a.getAttributeFilters,removeNodeFilter:a.removeNodeFilter,removeAttributeFilter:a.removeAttributeFilter}},hX=(e,t)=>{let r=hY(e,t);return{schema:r.schema,addNodeFilter:r.addNodeFilter,addAttributeFilter:r.addAttributeFilter,serialize:r.serialize,addRules:r.addRules,setRules:r.setRules,addTempAttr:r.addTempAttr,getTempAttrs:r.getTempAttrs,getNodeFilters:r.getNodeFilters,getAttributeFilters:r.getAttributeFilters,removeNodeFilter:r.removeNodeFilter,removeAttributeFilter:r.removeAttributeFilter}},hQ=(e,t,r={})=>{let n={format:"html",...r,set:!0,content:t};return hc(e,n).map(t=>{var r;let n=(r=t.content,hz(e).editor.setContent(r,t));return hu(e,n.html,t),n.content}).getOr(t)},hJ="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),hZ="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),h0="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),h1=[{name:"template",replacedWith:"Advanced Template"}],h2=(e,t)=>{let r=es(t,t=>eF(e,t));return eC(r)},h3=e=>{let t=h2(e,hJ),r=e.forced_root_block;return!1!==r&&""!==r||t.push("forced_root_block (false only)"),eC(t)},h8=e=>h2(e,hZ),h5=(e,t)=>{let r=tL.makeMap(e.plugins," "),n=es(t,e=>eF(r,e));return eC(n)},h6=e=>h5(e,h0),h9=e=>h5(e,h1.map(e=>e.name)),h4=e=>em(h1,t=>t.name===e).fold(()=>e,t=>`${e}, replaced by ${t.replacedWith}`),h7=aR.DOM,be=e=>Q.from(e).each(e=>e.destroy()),bt=(()=>{let e={};return{add:(t,r)=>{e[t]=r},get:t=>e[t]?e[t]:{icons:{}},has:t=>eF(e,t)}})(),br=aM.ModelManager,bn=(e,t)=>t.dom[e],bo=(e,t)=>parseInt(rX(t,e),10),ba=V(bn,"clientWidth"),bl=V(bn,"clientHeight"),bi=V(bo,"margin-top"),bs=V(bo,"margin-left"),bd=e=>{let t=[],r=()=>{let t=e.theme;return t&&t.getNotificationManagerImpl?t.getNotificationManagerImpl():(()=>{let e=()=>{throw Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}})()},n=()=>Q.from(t[0]),o=()=>{ea(t,e=>{e.reposition()})},a=e=>{ef(t,t=>t===e).each(e=>{t.splice(e,1)})},l=(l,i=!0)=>{var s;return e.removed||!(s=e.inline?e.getBody():e.getContentAreaContainer(),Q.from(s).map(ro)).map(rF).getOr(!1)?{}:(i&&e.dispatch("BeforeOpenNotification",{notification:l}),em(t,e=>{var t;return!((t=r().getArgs(e)).type!==l.type||t.text!==l.text||t.progressBar||t.timeout||l.progressBar||l.timeout)}).getOrThunk(()=>{e.editorManager.setActive(e);let i=r().open(l,()=>{a(i),o(),n().fold(()=>e.focus(),e=>uu(ro(e.getEl())))});return t.push(i),o(),e.dispatch("OpenNotification",{notification:{...i}}),i}))},i=j(t);return e.on("SkinLoaded",()=>{let t=iT(e);t&&l({text:t,type:"warning",timeout:0},!1),o()}),e.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(o)}),e.on("remove",()=>{ea(t.slice(),e=>{r().close(e)})}),{open:l,close:()=>{n().each(e=>{r().close(e),a(e),o()})},getNotifications:i}},bc=aM.PluginManager,bu=aM.ThemeManager,bm=e=>{let t=[],r=()=>{let t=e.theme;return t&&t.getWindowManagerImpl?t.getWindowManagerImpl():(()=>{let e=()=>{throw Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}})()},n=(e,t)=>(...r)=>t?t.apply(e,r):void 0,o=r=>{e.dispatch("CloseWindow",{dialog:r}),0===(t=es(t,e=>e!==r)).length&&e.focus()},a=r=>{e.editorManager.setActive(e),uC(e),e.ui.show();let n=r();return t.push(n),e.dispatch("OpenWindow",{dialog:n}),n};return e.on("remove",()=>{ea(t,e=>{r().close(e)})}),{open:(e,t)=>a(()=>r().open(e,t,o)),openUrl:e=>a(()=>r().openUrl(e,o)),alert:(e,t,o)=>{let a=r();a.alert(e,n(o||a,t))},confirm:(e,t,o)=>{let a=r();a.confirm(e,n(o||a,t))},close:()=>{Q.from(t[t.length-1]).each(e=>{r().close(e),o(e)})}}},bf=(e,t)=>{e.notificationManager.open({type:"error",text:t})},bg=(e,t)=>{e._skinLoaded?bf(e,t):e.on("SkinLoaded",()=>{bf(e,t)})},bp=(e,t,r)=>{ch(e,t,{message:r}),console.error(r)},bh=(e,t,r)=>r?`Failed to load ${e}: ${r} from url ${t}`:`Failed to load ${e} url: ${t}`,bb=(e,...t)=>{let r=window.console;r&&(r.error?r.error(e,...t):r.log(e,...t))},bv=(e,t)=>{let r=e.editorManager.baseURL+"/skins/content",n=`content${e.editorManager.suffix}.css`;return eo(t,t=>/^[a-z0-9\-]+$/i.test(t)&&!e.inline?`${r}/${t}/${n}`:e.documentBaseURI.toAbsolute(t))},by=(e,t)=>{let r={};return{findAll:(n,o=X)=>{let a=es(n?ek(n.getElementsByTagName("img")):[],t=>{let r=t.src;return!t.hasAttribute("data-mce-bogus")&&!t.hasAttribute("data-mce-placeholder")&&!(!r||r===tT.transparentSrc)&&(e2(r,"blob:")?!e.isUploaded(r)&&o(t):!!e2(r,"data:")&&o(t))}),l=eo(a,e=>{let n=e.src;if(eF(r,n))return r[n].then(t=>_(t)?t:{image:e,blobInfo:t.blobInfo});{let o=((e,t)=>{let r=()=>Promise.reject("Invalid data URI");if(e2(t,"blob:")){let n=e.getByUri(t);return P(n)?Promise.resolve(n):(e2(t,"blob:")?fetch(t).then(e=>e.ok?e.blob():Promise.reject()).catch(()=>Promise.reject(`Cannot convert ${t} to Blob. Resource might not exist or is inaccessible.`)):e2(t,"data:")?new Promise((e,r)=>{g0(t).bind(({type:e,data:t,base64Encoded:r})=>g1(e,t,r)).fold(()=>r("Invalid data URI"),e)}):Promise.reject("Unknown URI format")).then(t=>g2(t).then(n=>g8(n,!1,r=>Q.some(g5(e,t,r))).getOrThunk(r)))}return e2(t,"data:")?g6(e,t).fold(r,e=>Promise.resolve(e)):Promise.reject("Unknown image data format")})(t,n).then(t=>(delete r[n],{image:e,blobInfo:t})).catch(e=>(delete r[n],e));return r[n]=o,o}});return Promise.all(l)}}},bC=()=>{let e={},t=(e,t)=>({status:e,resultUri:t}),r=t=>t in e;return{hasBlobUri:r,getResultUri:t=>{let r=e[t];return r?r.resultUri:null},isPending:t=>!!r(t)&&1===e[t].status,isUploaded:t=>!!r(t)&&2===e[t].status,markPending:r=>{e[r]=t(1,null)},markUploaded:(r,n)=>{e[r]=t(2,n)},removeFailed:t=>{delete e[t]},destroy:()=>{e={}}}},bx=0,bw=(e,t)=>{let r={},n=(e,r)=>new Promise((n,o)=>{let a=new XMLHttpRequest;a.open("POST",t.url),a.withCredentials=t.credentials,a.upload.onprogress=e=>{r(e.loaded/e.total*100)},a.onerror=()=>{o("Image upload failed due to a XHR Transport error. Code: "+a.status)},a.onload=()=>{var e,r;if(a.status<200||a.status>=300)return void o("HTTP Error: "+a.status);let l=JSON.parse(a.responseText);l&&_(l.location)?n((e=t.basePath,r=l.location,e?e.replace(/\/$/,"")+"/"+r.replace(/^\//,""):r)):o("Invalid JSON: "+a.responseText)};let l=new FormData;l.append("file",e.blob(),e.filename()),a.send(l)}),o=L(t.handler)?t.handler:n,a=(e,t)=>({url:t,blobInfo:e,status:!0}),l=(e,t)=>({url:"",blobInfo:e,status:!1,error:t}),i=(e,t)=>{tL.each(r[e],e=>{e(t)}),delete r[e]};return{upload:(s,d)=>{var c;return t.url||o!==n?(c=s,c=tL.grep(c,t=>!e.isUploaded(t.blobUri())),Promise.all(tL.map(c,t=>e.isPending(t.blobUri())?(e=>{let t=e.blobUri();return new Promise(e=>{r[t]=r[t]||[],r[t].push(e)})})(t):(e.markPending(t.blobUri()),new Promise(r=>{let n,s;try{let c=()=>{n&&(n.close(),s=I)},u=n=>{c(),e.markUploaded(t.blobUri(),n),i(t.blobUri(),a(t,n)),r(a(t,n))},m=n=>{c(),e.removeFailed(t.blobUri()),i(t.blobUri(),l(t,n)),r(l(t,n))};s=e=>{e<0||e>100||Q.from(n).orThunk(()=>Q.from(d).map(K)).each(t=>{n=t,t.progressBar.value(e)})},o(t,s).then(u,e=>{m(_(e)?{message:e}:e)})}catch(e){r(l(t,e))}}))))):new Promise(e=>{e([])})}}},bE=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),bk=(e,t)=>bw(t,{url:iu(e),basePath:im(e),credentials:ig(e),handler:ip(e)}),bS=e=>{let t,r;let n=(()=>{let e=[],t=e=>{if(!e.blob||!e.base64)throw Error("blob and base64 representations of the image are required for BlobInfo to be created");let t=e.id||"blobid"+bx+++(()=>{let e=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+e()+e()+e()})(),r=e.name||t,n=e.blob;return{id:j(t),name:j(r),filename:j(e.filename||r+"."+(({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[n.type.toLowerCase()]||"dat")),blob:j(n),base64:j(e.base64),blobUri:j(e.blobUri||URL.createObjectURL(n)),uri:j(e.uri)}},r=t=>em(e,t).getOrUndefined(),n=e=>r(t=>t.id()===e);return{create:(e,r,n,o,a)=>{if(_(e))return t({id:e,name:o,filename:a,blob:r,base64:n});if(N(e))return t(e);throw Error("Unknown input type")},add:t=>{n(t.id())||e.push(t)},get:n,getByUri:e=>r(t=>t.blobUri()===e),getByData:(e,t)=>r(r=>r.base64()===e&&r.blob().type===t),findFirst:r,removeByUri:t=>{e=es(e,e=>e.blobUri()!==t||(URL.revokeObjectURL(e.blobUri()),!1))},destroy:()=>{ea(e,e=>{URL.revokeObjectURL(e.blobUri())}),e=[]}}})(),o=bC(),a=[],l=t=>r=>e.selection?t(r):[],i=(e,t,r)=>{let n=0;do -1!==(n=e.indexOf(t,n))&&(e=e.substring(0,n)+r+e.substr(n+t.length),n+=r.length-t.length+1);while(-1!==n);return e},s=(e,t,r)=>{let n=`src="${r}"${r===tT.transparentSrc?' data-mce-placeholder="1"':""}`;return e=i(e,`src="${t}"`,n),i(e,'data-mce-src="'+t+'"','data-mce-src="'+r+'"')},d=(t,r)=>{ea(e.undoManager.data,e=>{"fragmented"===e.type?e.fragments=eo(e.fragments,e=>s(e,t,r)):e.content=s(e.content,t,r)})},c=()=>(t||(t=bk(e,o)),f().then(l(r=>{let o=eo(r,e=>e.blobInfo);return t.upload(o,bE(e)).then(l(t=>{let o=[],a=!1,l=eo(t,(t,l)=>{var i;let{blobInfo:s,image:c}=r[l],u=!1;return t.status&&is(e)?(t.url&&!e1(c.src,t.url)&&(a=!0),n.removeByUri(c.src),hU(e)||((t,r)=>{let n=e.convertURL(r,"src");d(t.src,r),tZ(ro(t),{src:ii(e)?r+(-1===r.indexOf("?")?"?":"&")+(new Date).getTime():r,"data-mce-src":n})})(c,t.url)):t.error&&(t.error.remove&&(d(c.src,tT.transparentSrc),o.push(c),u=!0),i=t.error.message,bg(e,aL.translate(["Failed to upload image: {0}",i]))),{element:c,status:t.status,uploadUri:t.url,blobInfo:s,removed:u}});return o.length>0&&!hU(e)?e.undoManager.transact(()=>{ea(o,t=>{e.dom.remove(t),n.removeByUri(t.src)})}):a&&e.undoManager.dispatchChange(),l}))}))),u=()=>il(e)?c():Promise.resolve([]),m=e=>eh(a,t=>t(e)),f=()=>(r||(r=by(o,n)),r.findAll(e.getBody(),m).then(l(t=>{let r=es(t,t=>!_(t)||(bg(e,t),!1));return hU(e)||ea(r,e=>{d(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")}),r}))),g=t=>t.replace(/src="(blob:[^"]+)"/g,(t,r)=>{let a=o.getResultUri(r);if(a)return'src="'+a+'"';let l=n.getByUri(r);return l||(l=ec(e.editorManager.get(),(e,t)=>e||t.editorUpload&&t.editorUpload.blobCache.getByUri(r),void 0)),l?'src="data:'+l.blob().type+";base64,"+l.base64()+'"':t});return e.on("SetContent",()=>{il(e)?u():f()}),e.on("RawSaveContent",e=>{e.content=g(e.content)}),e.on("GetContent",e=>{e.source_view||"raw"===e.format||"tree"===e.format||(e.content=g(e.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",e=>{ea(e,e=>{let t=e.attr("src");if(!t||n.getByUri(t))return;let r=o.getResultUri(t);r&&e.attr("src",r)})})}),{blobCache:n,addFilter:e=>{a.push(e)},uploadImages:c,uploadImagesAuto:u,scanForImages:f,destroy:()=>{n.destroy(),o.destroy(),r=t=null}}},b_={remove_similar:!0,inherit:!1},bN={selector:"td,th",...b_},bR={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...bN},tablecellverticalalign:{styles:{"vertical-align":"%value"},...bN},tablecellbordercolor:{styles:{borderColor:"%value"},...bN},tablecellclass:{classes:["%value"],...bN},tableclass:{selector:"table",classes:["%value"],...b_},tablecellborderstyle:{styles:{borderStyle:"%value"},...bN},tablecellborderwidth:{styles:{borderWidth:"%value"},...bN}},bA=j(bR),bO=tL.each,bT=aR.DOM,bB=e=>P(e)&&N(e),bD=(e,t)=>{let r=t&&t.schema||as({}),n=e=>{let t=_(e)?{name:e,classes:[],attrs:{}}:e,r=bT.create(t.name);return t.classes.length>0&&bT.addClass(r,t.classes.join(" ")),bT.setAttribs(r,t.attrs),r},o=(e,t,a)=>{let l;let i=t[0],s=bB(i)?i.name:void 0,d=((e,t)=>{let n=r.getElementRule(e.nodeName.toLowerCase()),o=null==n?void 0:n.parentsRequired;return!(!o||!o.length)&&(t&&er(o,t)?t:o[0])})(e,s);if(d)s===d?(l=i,t=t.slice(1)):l=d;else if(i)l=i,t=t.slice(1);else if(!a)return e;let c=l?n(l):bT.create("div");c.appendChild(e),a&&tL.each(a,t=>{let r=n(t);c.insertBefore(r,e)});let u=bB(l)?l.siblings:void 0;return o(c,t,u)},a=bT.create("div");if(e.length>0){let t=e[0],r=n(t),l=bB(t)?t.siblings:void 0;a.appendChild(o(r,e.slice(1),l))}return a},bP=e=>{let t="div",r={name:t,classes:[],attrs:{},selector:e=tL.trim(e)};return"*"!==e&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(e,t,n,o,a)=>{switch(t){case"#":r.attrs.id=n;break;case".":r.classes.push(n);break;case":":-1!==tL.inArray("checked disabled enabled read-only required".split(" "),n)&&(r.attrs[n]=n)}if("["===o){let e=a.match(/([\w\-]+)(?:\=\"([^\"]+))?/);e&&(r.attrs[e[1]]=e[2])}return""})),r.name=t||"div",r},bL=(e,t)=>{var r;let n="",o=iI(e);if(""===o)return"";let a=e=>_(e)?e.replace(/%(\w+)/g,""):"",l=(t,r)=>bT.getStyle(null!=r?r:e.getBody(),t,!0);if(_(t)){let r=e.formatter.get(t);if(!r)return"";t=r[0]}if("preview"in t){let e=t.preview;if(!1===e)return"";o=e||o}let i,s=t.block||t.inline||"span",d=_(r=t.selector)?(r=(r=r.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),tL.map(r.split(/(?:>|\s+(?![^\[\]]+\]))/),e=>{let t=tL.map(e.split(/(?:~\+|~|\+)/),bP),r=t.pop();return t.length&&(r.siblings=t),r}).reverse()):[];d.length>0?(d[0].name||(d[0].name=s),s=t.selector,i=bD(d,e)):i=bD([s],e);let c=bT.select(s,i)[0]||i.firstChild;bO(t.styles,(e,t)=>{let r=a(e);r&&bT.setStyle(c,t,r)}),bO(t.attributes,(e,t)=>{let r=a(e);r&&bT.setAttrib(c,t,r)}),bO(t.classes,e=>{let t=a(e);bT.hasClass(c,t)||bT.addClass(c,t)}),e.dispatch("PreviewFormats"),bT.setStyles(i,{position:"absolute",left:-65535}),e.getBody().appendChild(i);let u=l("fontSize"),m=/px$/.test(u)?parseInt(u,10):0;return bO(o.split(" "),e=>{let t=l(e,c);if(!("background-color"===e&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(t)&&"#ffffff"===dR(t=l(e)).toLowerCase()||"color"===e&&"#000000"===dR(t).toLowerCase())){if("font-size"===e&&/em|%$/.test(t)){if(0===m)return;t=parseFloat(t)/(/%$/.test(t)?100:1)*m+"px"}"border"===e&&t&&(n+="padding:0 2px;"),n+=e+":"+t+";"}}),e.dispatch("AfterPreviewFormats"),bT.remove(i),n},bM=e=>{let t=(e=>{let t={},r=(e,n)=>{e&&(_(e)?(A(n)||(n=[n]),ea(n,e=>{B(e.deep)&&(e.deep=!d8(e)),B(e.split)&&(e.split=!d8(e)||d5(e)),B(e.remove)&&d8(e)&&!d5(e)&&(e.remove="none"),d8(e)&&d5(e)&&(e.mixed=!0,e.block_expand=!0),_(e.classes)&&(e.classes=e.classes.split(/\s+/))}),t[e]=n):eR(e,(e,t)=>{r(t,e)}))};return r((e=>{let t=e.dom,r=e.schema.type,n={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:e=>{t.setStyle(e,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:e=>{t.setStyle(e,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{let e={inline:"span",styles:{textDecoration:"line-through"},exact:!0},t={inline:"strike",remove:"all",preserve_attributes:["class","style"]},n={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==r?[n,e,t]:[e,n,t]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(e,t,r)=>ny(e)&&e.hasAttribute("href"),onformat:(e,r,n)=>{tL.each(n,(r,n)=>{t.setAttrib(e,n,r)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":e=>{var t;return null!==(t=null==e?void 0:e.customValue)&&void 0!==t?t:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return tL.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),e=>{n[e]={block:e,remove:"all"}}),n})(e)),r(bA()),r(iF(e)),{get:e=>P(e)?t[e]:t,has:e=>eF(t,e),register:r,unregister:e=>(e&&t[e]&&delete t[e],t)}})(e),r=aT({});return(e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])})(e),(e=>{e.on("mouseup keydown",t=>{((e,t)=>{let r=e.selection,n=e.getBody();gr(e,null,!1),(8===t||46===t)&&r.isCollapsed()&&"\uFEFF"===r.getStart().innerHTML&&gr(e,dl(n,r.getStart())),37!==t&&39!==t||gr(e,dl(n,r.getStart()))})(e,t.keyCode)})})(e),hU(e)||(r.set({}),e.on("NodeChange",t=>{gX(e,t.element,r.get())}),e.on("FormatApply FormatRemove",t=>{let n=Q.from(t.node).map(e=>dz(e)?e:e.startContainer).bind(e=>ny(e)?Q.some(e):Q.from(e.parentElement)).getOrThunk(()=>gK(e));gX(e,n,r.get())})),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(t,r,n)=>{((e,t,r,n)=>{hj(e).formatter.apply(t,r,n)})(e,t,r,n)},remove:(t,r,n,o)=>{((e,t,r,n,o)=>{hj(e).formatter.remove(t,r,n,o)})(e,t,r,n,o)},toggle:(t,r,n)=>{((e,t,r,n)=>{hj(e).formatter.toggle(t,r,n)})(e,t,r,n)},match:(t,r,n,o)=>hj(e).formatter.match(t,r,n,o),closest:t=>hj(e).formatter.closest(t),matchAll:(t,r)=>hj(e).formatter.matchAll(t,r),matchNode:(t,r,n,o)=>hj(e).formatter.matchNode(t,r,n,o),canApply:t=>hj(e).formatter.canApply(t),formatChanged:(t,n,o,a)=>hj(e).formatter.formatChanged(r,t,n,o,a),getCssText:V(bL,e)}},bF=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},bI=e=>{let t=aI(),r=aT(0),n=aT(0),o={data:[],typing:!1,beforeChange:()=>{((e,t,r)=>{hj(e).undoManager.beforeChange(t,r)})(e,r,t)},add:(a,l)=>hj(e).undoManager.add(o,n,r,t,a,l),dispatchChange:()=>{e.setDirty(!0);let t=hO(e);t.bookmark=lF(e.selection),e.dispatch("change",{level:t,lastLevel:ex(o.data,n.get()).getOrUndefined()})},undo:()=>hj(e).undoManager.undo(o,r,n),redo:()=>{var t;return t=o.data,hj(e).undoManager.redo(n,t)},clear:()=>{((e,t,r)=>{hj(e).undoManager.clear(t,r)})(e,o,n)},reset:()=>{((e,t)=>{hj(e).undoManager.reset(t)})(e,o)},hasUndo:()=>hj(e).undoManager.hasUndo(o,n),hasRedo:()=>hj(e).undoManager.hasRedo(o,n),transact:t=>hj(e).undoManager.transact(o,r,t),ignore:t=>{((e,t,r)=>{hj(e).undoManager.ignore(t,r)})(e,r,t)},extra:(t,r)=>{((e,t,r,n,o)=>{hj(e).undoManager.extra(t,r,n,o)})(e,o,n,t,r)}};return hU(e)||((e,t,r)=>{let n=aT(!1),o=e=>{hM(t,!1,r),t.add({},e)};e.on("init",()=>{t.add()}),e.on("BeforeExecCommand",e=>{let n=e.command;bF(n)||(hF(t,r),t.beforeChange())}),e.on("ExecCommand",e=>{let t=e.command;bF(t)||o(e)}),e.on("ObjectResizeStart cut",()=>{t.beforeChange()}),e.on("SaveContent ObjectResized blur",o),e.on("dragend",o),e.on("keyup",r=>{let a=r.keyCode;r.isDefaultPrevented()||((a>=33&&a<=36||a>=37&&a<=40||45===a||r.ctrlKey)&&(o(),e.nodeChanged()),46!==a&&8!==a||e.nodeChanged(),n.get()&&t.typing&&!hP(hO(e),t.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),n.set(!1),e.nodeChanged()))}),e.on("keydown",e=>{let a=e.keyCode;if(e.isDefaultPrevented())return;if(a>=33&&a<=36||a>=37&&a<=40||45===a)return void(t.typing&&o(e));let l=e.ctrlKey&&!e.altKey||e.metaKey;!(a<16||a>20)||224===a||91===a||t.typing||l||(t.beforeChange(),hM(t,!0,r),t.add({},e),n.set(!0))}),e.on("mousedown",e=>{t.typing&&o(e)}),e.on("input",e=>{var t;e.inputType&&("insertReplacementText"===e.inputType||"insertText"===e.inputType&&null===e.data||"insertFromPaste"===(t=e).inputType||"insertFromDrop"===t.inputType)&&o(e)}),e.on("AddUndo Undo Redo ClearUndos",t=>{t.isDefaultPrevented()||e.nodeChanged()})})(e,o,r),e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo"),o},bU=[9,27,cw.HOME,cw.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,cw.DOWN,cw.UP,cw.LEFT,cw.RIGHT].concat(tT.browser.isFirefox()?[224]:[]),bz="data-mce-placeholder",bj=e=>"keydown"===e.type||"keyup"===e.type,bH=e=>{let t=e.keyCode;return t===cw.BACKSPACE||t===cw.DELETE},b$=(e,t)=>({from:e,to:t}),bV=(e,t)=>{let r=ro(e),n=ro(t.container());return fe(r,n).map(e=>({block:e,position:t}))},bq=(e,t)=>rz(t,e=>n1(e)||nM(e.dom),t=>rm(t,e)).filter(tW).getOr(e),bW=e=>{let t=(e=>{let t=rk(e);return ef(t,nG).fold(j(t),e=>t.slice(0,e))})(e);return ea(t,r4),t},bK=(e,t)=>{let r=mg(t,e);return em(r.reverse(),e=>oE(e)).each(r4)},bG=(e,t,r,n)=>{if(oE(r))return n6(r),dt(r.dom);0===es(rw(n),e=>!oE(e)).length&&oE(t)&&r1(n,rl("br"));let o=de(r.dom,ly.before(n.dom));return ea(bW(t),e=>{r1(n,e)}),bK(e,t),o},bY=(e,t,r)=>{if(oE(r)){if(oE(t)){let e=ed((e=>{let t=(e,r)=>r_(e).fold(()=>r,e=>nY(e)?t(e,r.concat(a1(e))):r);return t(e,[])})(r),(e,t)=>(r5(e,t),t),n5());r9(t),r8(t,e)}return r4(r),dt(t.dom)}let n=dr(r.dom);return ea(bW(t),e=>{r8(r,e)}),bK(e,t),n},bX=(e,t)=>{s4(e,t.dom).bind(e=>Q.from(e.getNode())).map(ro).filter(nX).each(r4)},bQ=(e,t,r)=>(bX(!0,t),bX(!1,r),(rf(r,t)?((e,t)=>{let r=mg(t,e);return Q.from(r[r.length-1])})(r,t):Q.none()).fold(V(bY,e,t,r),V(bG,e,t,r))),bJ=(e,t,r,n)=>t?bQ(e,n,r):bQ(e,r,n),bZ=(e,t)=>{var r,n;let o=ro(e.getBody()),a=(r=o.dom,(n=e.selection.getRng()).collapsed?((e,t,r)=>{let n=bV(e,ly.fromRangeStart(r)),o=n.bind(r=>s5(t,e,r.position).bind(r=>bV(e,r).map(r=>nP(r.position.getNode())&&!oE(r.block)?s4(!1,r.block.dom).bind(n=>n.isEqual(r.position)?s5(t,e,n).bind(t=>bV(e,t)):Q.some(r)).getOr(r):r)));return tF(n,o,b$).filter(t=>{var r;return!rm(t.from.block,t.to.block)&&((e,t)=>{let r=ro(e);return rm(bq(r,t.from.block),bq(r,t.to.block))})(e,t)&&!1===nF((r=t).from.block.dom)&&!1===nF(r.to.block.dom)&&(e=>{let t=e=>nQ(e)||oB(e.dom);return t(e.from.block)&&t(e.to.block)})(t)})})(r,t,n):Q.none()).map(r=>()=>{bJ(o,t,r.from.block,r.to.block).each(t=>{e.selection.setRng(t.toRange())})});return a},b0=(e,t)=>{let r=ro(t),n=V(rm,e);return rU(r,n1,n).isSome()},b1=e=>{let t=ro(e.getBody());return((e,t)=>{let r=de(e.dom,ly.fromRangeStart(t)).isNone(),n=s7(e.dom,ly.fromRangeEnd(t)).isNone();return!(b0(e,t.startContainer)||b0(e,t.endContainer))&&r&&n})(t,e.selection.getRng())?Q.some(()=>{e.setContent(""),e.selection.setCursorLocation()}):((e,t)=>{let r=t.getRng();return tF(fe(e,ro(r.startContainer)),fe(e,ro(r.endContainer)),(n,o)=>rm(n,o)?Q.none():Q.some(()=>{r.deleteContents(),bJ(e,!0,n,o).each(e=>{t.setRng(e.toRange())})})).getOr(Q.none())})(t,e.selection)},b2=(e,t)=>e.selection.isCollapsed()?Q.none():b1(e),b3=(e,t,r,n,o)=>Q.from(t._selectionOverrides.showCaret(e,r,n,o)),b8=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?Q.none():Q.some((e=>{let t=e.ownerDocument.createRange();return t.selectNode(e),t})(t)),b5=(e,t,r)=>t.collapsed?((e,t,r)=>{let n=sq(1,e.getBody(),t),o=ly.fromRangeStart(n),a=o.getNode();if(sO(a))return b3(1,e,a,!o.isAtEnd(),!1);let l=o.getNode(!0);if(sO(l))return b3(1,e,l,!1,!1);let i=fA(e.dom.getRoot(),o.getNode());return sO(i)?b3(1,e,i,!1,r):Q.none()})(e,t,r).getOr(t):t,b6=e=>mu(e)||mi(e),b9=e=>mm(e)||ms(e),b4=(e,t,r,n,o,a)=>{var l;b3(n,e,a.getNode(!o),o,!0).each(r=>{if(t.collapsed){let e=t.cloneRange();o?e.setEnd(r.startContainer,r.startOffset):e.setStart(r.endContainer,r.endOffset),e.deleteContents()}else t.deleteContents();e.selection.setRng(r)}),l=e.dom,nR(r)&&0===r.data.length&&l.remove(r)},b7=(e,t)=>((e,t)=>{let r=e.selection.getRng();if(!nR(r.commonAncestorContainer))return Q.none();let n=t?pg.Forwards:pg.Backwards,o=s1(e.getBody()),a=V(sY,t?o.next:o.prev),l=t?b6:b9,i=sK(n,e.getBody(),r),s=a(i),d=s?m8(t,s):s;if(!d||!sX(i,d))return Q.none();if(l(d))return Q.some(()=>b4(e,r,i.getNode(),n,t,d));let c=a(d);return c&&l(c)&&sX(d,c)?Q.some(()=>b4(e,r,i.getNode(),n,t,c)):Q.none()})(e,t),ve=(e,t)=>{let r=e.getBody();return t?dt(r).filter(mu):dr(r).filter(mm)},vt=e=>{let t=e.selection.getRng();return!t.collapsed&&(ve(e,!0).exists(e=>e.isEqual(ly.fromRangeStart(t)))||ve(e,!1).exists(e=>e.isEqual(ly.fromRangeEnd(t))))},vr=lj([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),vn=(e,t,r)=>s5(t,e,r).bind(n=>{var o;return P(o=n.getNode())&&(n1(ro(o))||nZ(ro(o)))||((e,t,r,n)=>{let o=t=>nY(ro(t))&&!sI(r,n,e);return sW(!t,r).fold(()=>sW(t,n).fold(Y,o),o)})(e,t,r,n)?Q.none():t&&nF(n.getNode())||!t&&nF(n.getNode(!0))?((e,t,r,n)=>{let o=n.getNode(!t);return fe(ro(e),ro(r.getNode())).map(e=>oE(e)?vr.remove(e.dom):vr.moveToElement(o)).orThunk(()=>Q.some(vr.moveToElement(o)))})(e,t,r,n):t&&mm(r)||!t&&mu(r)?Q.some(vr.moveToPosition(n)):Q.none()}),vo=(e,t)=>Q.from(fA(e.getBody(),t)),va=(e,t)=>{let r=e.selection.getNode();return vo(e,r).filter(nF).fold(()=>((e,t,r)=>{var n;let o=sq(t?1:-1,e,r),a=ly.fromRangeStart(o),l=ro(e);return!t&&mm(a)?Q.some(vr.remove(a.getNode(!0))):t&&mu(a)?Q.some(vr.remove(a.getNode())):!t&&mu(a)&&m_(l,a)?mN(l,a).map(e=>vr.remove(e.getNode())):t&&mm(a)&&mS(l,a)?mR(l,a).map(e=>vr.remove(e.getNode())):((e,t)=>{let r=t.getNode(!e);return ny(r)&&r.getAttribute("data-mce-caret")===(e?"after":"before")})(t,a)?(D(n=a.getNode(!t))?Q.none():t&&nF(n.nextSibling)?Q.some(vr.moveToElement(n.nextSibling)):!t&&nF(n.previousSibling)?Q.some(vr.moveToElement(n.previousSibling)):Q.none()).orThunk(()=>vn(e,t,a)):vn(e,t,a).bind(t=>t.fold(e=>Q.some(vr.remove(e)),e=>Q.some(vr.moveToElement(e)),t=>sI(a,t,e)?Q.none():Q.some(vr.moveToPosition(t))))})(e.getBody(),t,e.selection.getRng()).map(r=>()=>r.fold(r=>(e._selectionOverrides.hideFakeCaret(),m0(e,t,ro(r)),!0),r=>{let n=t?ly.before(r):ly.after(r);return e.selection.setRng(n.toRange()),!0},t=>(e.selection.setRng(t.toRange()),!0))),()=>Q.some(I))},vl=e=>{let t=e.dom,r=e.selection,n=fA(e.getBody(),r.getNode());if(nM(n)&&t.isBlock(n)&&t.isEmpty(n)){let e=t.create("br",{"data-mce-bogus":"1"});t.setHTML(n,""),n.appendChild(e),r.setRng(ly.before(e).toRange())}return!0},vi=(e,t)=>e.selection.isCollapsed()?va(e,t):((e,t)=>{let r=e.selection.getNode();return nF(r)&&!nI(r)?vo(e,r.parentNode).filter(nF).fold(()=>Q.some(()=>{ea(ng(ro(e.getBody()),".mce-offscreen-selection"),r4),m0(e,t,ro(e.selection.getNode())),ft(e)}),()=>Q.some(I)):vt(e)?Q.some(()=>{fn(e,e.selection.getRng(),ro(e.getBody()))}):Q.none()})(e,t),vs=(e,t)=>e.selection.isCollapsed()?((e,t)=>{let r=ly.fromRangeStart(e.selection.getRng());return s5(t,e.getBody(),r).filter(e=>t?ma(e):ml(e)).bind(e=>sU(t?0:-1,e)).map(t=>()=>e.selection.select(t))})(e,t):Q.none(),vd=e=>nR(e)&&"\uFEFF"===e.data[0],vc=e=>nR(e)&&"\uFEFF"===e.data[e.data.length-1],vu=e=>{var t;return(null!==(t=e.ownerDocument)&&void 0!==t?t:document).createTextNode("\uFEFF")},vm=(e,t)=>e?(e=>{var t;if(nR(e.previousSibling))return vc(e.previousSibling)||e.previousSibling.appendData("\uFEFF"),e.previousSibling;if(nR(e))return vd(e)||e.insertData(0,"\uFEFF"),e;{let r=vu(e);return null===(t=e.parentNode)||void 0===t||t.insertBefore(r,e),r}})(t):(e=>{var t,r;if(nR(e.nextSibling))return vd(e.nextSibling)||e.nextSibling.insertData(0,"\uFEFF"),e.nextSibling;if(nR(e))return vc(e)||e.appendData("\uFEFF"),e;{let n=vu(e);return e.nextSibling?null===(t=e.parentNode)||void 0===t||t.insertBefore(n,e.nextSibling):null===(r=e.parentNode)||void 0===r||r.appendChild(n),n}})(t),vf=V(vm,!0),vg=V(vm,!1),vp=(e,t)=>nR(e.container())?vm(t,e.container()):vm(t,e.getNode()),vh=(e,t)=>{let r=t.get();return r&&e.container()===r&&oe(r)},vb=(e,t)=>t.fold(t=>{s_(e.get());let r=vf(t);return e.set(r),Q.some(ly(r,r.length-1))},t=>dt(t).map(t=>{if(vh(t,e)){let t=e.get();return ly(t,1)}{s_(e.get());let r=vp(t,!0);return e.set(r),ly(r,1)}}),t=>dr(t).map(t=>{if(vh(t,e)){let t=e.get();return ly(t,t.length-1)}{s_(e.get());let r=vp(t,!1);return e.set(r),ly(r,r.length-1)}}),t=>{s_(e.get());let r=vg(t);return e.set(r),Q.some(ly(r,1))}),vv=(e,t)=>{for(let r=0;r<e.length;r++){let n=e[r].apply(null,t);if(n.isSome())return n}return Q.none()},vy=lj([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),vC=(e,t)=>sF(t,e)||e,vx=(e,t,r)=>{let n=m5(r),o=vC(t,n.container());return m3(e,o,n).fold(()=>s7(o,n).bind(V(m3,e,o)).map(e=>vy.before(e)),Q.none)},vw=(e,t)=>null===dl(e,t),vE=(e,t,r)=>m3(e,t,r).filter(V(vw,t)),vk=(e,t,r)=>{let n=m6(r);return vE(e,t,n).bind(e=>de(e,n).isNone()?Q.some(vy.start(e)):Q.none())},vS=(e,t,r)=>{let n=m5(r);return vE(e,t,n).bind(e=>s7(e,n).isNone()?Q.some(vy.end(e)):Q.none())},v_=(e,t,r)=>{let n=m6(r),o=vC(t,n.container());return m3(e,o,n).fold(()=>de(o,n).bind(V(m3,e,o)).map(e=>vy.after(e)),Q.none)},vN=e=>{var t,r,n;return t=vA(e),!("rtl"===aR.DOM.getStyle(t,"direction",!0)||(n=null!==(r=t.textContent)&&void 0!==r?r:"",m1.test(n)))},vR=(e,t,r)=>vv([vx,vk,vS,v_],[e,t,r]).filter(vN),vA=e=>e.fold(H,H,H,H),vO=e=>e.fold(j("before"),j("start"),j("end"),j("after")),vT=e=>e.fold(vy.before,vy.before,vy.after,vy.after),vB=e=>e.fold(vy.start,vy.start,vy.end,vy.end),vD=(e,t,r,n,o,a)=>tF(m3(t,r,n),m3(t,r,o),(t,n)=>t!==n&&((e,t,r)=>{let n=sF(t,e),o=sF(r,e);return P(n)&&n===o})(r,t,n)?vy.after(e?t:n):a).getOr(a),vP=(e,t)=>e.fold(X,e=>!(vO(e)===vO(t)&&vA(e)===vA(t))),vL=(e,t)=>e?t.fold(U(Q.some,vy.start),Q.none,U(Q.some,vy.after),Q.none):t.fold(Q.none,U(Q.some,vy.before),Q.none,U(Q.some,vy.end)),vM=(e,t,r)=>(t.setRng(ly(r.container(),r.offset()+(e?1:-1)).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0);(o=c||(c={}))[o.Br=0]="Br",o[o.Block=1]="Block",o[o.Wrap=2]="Wrap",o[o.Eol=3]="Eol";let vF=(e,t)=>e===pg.Backwards?eb(t):t,vI=(e,t,r)=>e===pg.Forwards?t.next(r):t.prev(r),vU=(e,t,r,n)=>nP(n.getNode(t===pg.Forwards))?c.Br:!1===sI(r,n)?c.Block:c.Wrap,vz=(e,t,r,n)=>{let o=s1(r),a=n,l=[];for(;a;){let r=vI(t,o,a);if(!r)break;if(nP(r.getNode(!1)))return t===pg.Forwards?{positions:vF(t,l).concat([r]),breakType:c.Br,breakAt:Q.some(r)}:{positions:vF(t,l),breakType:c.Br,breakAt:Q.some(r)};if(r.isVisible()){if(e(a,r)){let e=vU(0,t,a,r);return{positions:vF(t,l),breakType:e,breakAt:Q.some(r)}}l.push(r),a=r}else a=r}return{positions:vF(t,l),breakType:c.Eol,breakAt:Q.none()}},vj=(e,t,r,n)=>t(r,n).breakAt.map(n=>{let o=t(r,n).positions;return e===pg.Backwards?o.concat(n):[n].concat(o)}).getOr([]),vH=(e,t)=>ec(e,(e,r)=>e.fold(()=>Q.some(r),n=>tF(ew(n.getClientRects()),ew(r.getClientRects()),(e,o)=>{let a=Math.abs(t-e.left);return Math.abs(t-o.left)<=a?r:n}).or(e)),Q.none()),v$=(e,t)=>ew(t.getClientRects()).bind(t=>vH(e,t.left)),vV=V(vz,ly.isAbove,-1),vq=V(vz,ly.isBelow,1),vW=V(vj,-1,vV),vK=V(vj,1,vq),vG=(e,t)=>v$(vW(e,t),t),vY=(e,t)=>v$(vK(e,t),t),vX=(e,t)=>Math.abs(e.left-t),vQ=(e,t)=>Math.abs(e.right-t),vJ=(e,t)=>eq(e,(e,r)=>{let n=Math.min(vX(e,t),vQ(e,t)),o=Math.min(vX(r,t),vQ(r,t));return o===n&&eI(r,"node")&&nF(r.node)||o<n?r:e}),vZ=e=>{let t=t=>eo(t,t=>{let r=a6(t);return r.node=e,r});if(ny(e))return t(e.getClientRects());if(nR(e)){let r=e.ownerDocument.createRange();return r.setStart(e,0),r.setEnd(e,e.data.length),t(r.getClientRects())}return[]},v0=e=>ep(e,vZ);(a=u||(u={}))[a.Up=-1]="Up",a[a.Down=1]="Down";let v1=(e,t,r,n,o,a)=>{let l=0,i=[],s=n=>{let a=v0([n]);-1===e&&(a=a.reverse());for(let e=0;e<a.length;e++){let n=a[e];if(!r(n,d)){if(i.length>0&&t(n,eK(i))&&l++,n.line=l,o(n))return!0;i.push(n)}}return!1},d=eK(a.getClientRects());if(!d)return i;let c=a.getNode();return c&&(s(c),((e,t,r,n)=>{let o=n;for(;o=sM(o,e,og,t);)if(r(o))return})(e,n,s,c)),i},v2=V(v1,u.Up,a7,le),v3=V(v1,u.Down,le,a7),v8=e=>eK(e.getClientRects()),v5=e=>t=>t.line>e,v6=e=>t=>t.line===e,v9=(e,t)=>{e.selection.setRng(t),uc(e,e.selection.getRng())},v4=(e,t,r)=>Q.some(b5(e,t,r)),v7=(e,t,r,n,o,a)=>{let l=t===pg.Forwards,i=s1(e.getBody()),s=V(sY,l?i.next:i.prev),d=l?n:o;if(!r.collapsed){let n=lr(r);if(a(n))return b3(t,e,n,t===pg.Backwards,!1);if(vt(e)){let e=r.cloneRange();return e.collapse(t===pg.Backwards),Q.from(e)}}let c=sK(t,e.getBody(),r);if(d(c))return b8(e,c.getNode(!l));let u=s(c),m=os(r);if(!u)return m?Q.some(r):Q.none();if(d(u=m8(l,u)))return b3(t,e,u.getNode(!l),l,!1);let f=s(u);return f&&d(f)&&sX(u,f)?b3(t,e,f.getNode(!l),l,!1):m?v4(e,u.toRange(),!1):Q.none()},ye=(e,t,r,n,o,a)=>{let l;let i=sK(t,e.getBody(),r),s=eK(i.getClientRects()),d=t===u.Down,c=e.getBody();if(!s)return Q.none();if(vt(e)){let e=d?ly.fromRangeEnd(r):ly.fromRangeStart(r);return(d?vY:vG)(c,e).orThunk(()=>Q.from(e)).map(e=>e.toRange())}let m=(d?v3:v2)(c,v5(1),i),f=es(m,v6(1)),g=s.left,p=vJ(f,g);if(p&&a(p.node)){let r=Math.abs(g-p.left),n=Math.abs(g-p.right);return b3(t,e,p.node,r<n,!1)}if(l=n(i)?i.getNode():o(i)?i.getNode(!0):lr(r)){let r=((e,t,r,n)=>{let o,a,l,i;let s=s1(t),d=[],c=0;1===e?(o=s.next,a=le,l=a7,i=ly.after(n)):(o=s.prev,a=a7,l=le,i=ly.before(n));let u=v8(i);do{if(!i.isVisible())continue;let e=v8(i);if(l(e,u))continue;d.length>0&&a(e,eK(d))&&c++;let t=a6(e);if(t.position=i,t.line=c,r(t))break;d.push(t)}while(i=o(i));return d})(t,c,v5(1),l),n=vJ(es(r,v6(1)),g);if(n||(n=eK(es(r,v6(0)))))return v4(e,n.position.toRange(),!1)}return 0===f.length?yt(e,d).filter(d?o:n).map(t=>b5(e,t.toRange(),!1)):Q.none()},yt=(e,t)=>{var r,n;let o=e.selection.getRng(),a=t?ly.fromRangeEnd(o):ly.fromRangeStart(o),l=(r=a.container(),n=e.getBody(),rU(ro(r),e=>nM(e.dom),e=>e.dom===n).map(e=>e.dom).getOr(n));if(t){let e=vq(l,a);return eE(e.positions)}{let e=vV(l,a);return ew(e.positions)}},yr=(e,t,r)=>yt(e,t).filter(r).exists(t=>(e.selection.setRng(t.toRange()),!0)),yn=(e,t)=>{let r=e.dom.createRng();r.setStart(t.container(),t.offset()),r.setEnd(t.container(),t.offset()),e.selection.setRng(r)},yo=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},ya=(e,t,r)=>vb(t,r).map(t=>(yn(e,t),r)),yl=(e,t,r)=>{let n=e.getBody(),o=((e,t,r)=>{let n=ly.fromRangeStart(e);if(e.collapsed)return n;{let o=ly.fromRangeEnd(e);return r?de(t,o).getOr(o):s7(t,n).getOr(n)}})(e.selection.getRng(),n,r);return((e,t,r,n)=>{let o=m8(e,n),a=vR(t,r,o);return vR(t,r,o).bind(V(vL,e)).orThunk(()=>((e,t,r,n,o)=>{let a=m8(e,o);return s5(e,r,a).map(V(m8,e)).fold(()=>n.map(vT),o=>vR(t,r,o).map(V(vD,e,t,r,a,o)).filter(V(vP,n))).filter(vN)})(e,t,r,a,n))})(r,V(m2,e),n,o).bind(r=>ya(e,t,r))},yi=(e,t,r)=>!!iM(e)&&yl(e,t,r).isSome(),ys=(e,t,r)=>!!iM(t)&&((e,t)=>{let r=t.selection.getRng(),n=e?ly.fromRangeEnd(r):ly.fromRangeStart(r);return!!L(t.selection.getSel().modify)&&(e&&on(n)?vM(!0,t.selection,n):!(e||!oo(n))&&vM(!1,t.selection,n))})(e,t),yd=e=>{let t=aT(null),r=V(m2,e);return e.on("NodeChange",n=>{iM(e)&&(((e,t,r)=>{let n=eo(ng(ro(t.getRoot()),'*[data-mce-selected="inline-boundary"]'),e=>e.dom),o=es(n,e),a=es(r,e);ea(ev(o,a),V(yo,!1)),ea(ev(a,o),V(yo,!0))})(r,e.dom,n.parents),((e,t)=>{let r=t.get();if(e.selection.isCollapsed()&&!e.composing&&r){let n=ly.fromRangeStart(e.selection.getRng());ly.isTextPosition(n)&&!(on(n)||oo(n))&&(yn(e,sS(r,n)),t.set(null))}})(e,t),((e,t,r,n)=>{if(t.selection.isCollapsed()){let o=es(n,e);ea(o,n=>{let o=ly.fromRangeStart(t.selection.getRng());vR(e,t.getBody(),o).bind(e=>ya(t,r,e))})}})(r,e,t,n.parents))}),t},yc=V(ys,!0),yu=V(ys,!1),ym=(e,t,r)=>{if(iM(e)){let n=yt(e,t).getOrThunk(()=>{let r=e.selection.getRng();return t?ly.fromRangeEnd(r):ly.fromRangeStart(r)});return vR(V(m2,e),e.getBody(),n).exists(t=>{let n=vT(t);return vb(r,n).exists(t=>(yn(e,t),!0))})}return!1},yf=(e,t)=>r=>vb(t,r).map(t=>()=>yn(e,t)),yg=(e,t,r,n)=>{let o=e.getBody(),a=V(m2,e);e.undoManager.ignore(()=>{e.selection.setRng(((e,t)=>{let r=document.createRange();return r.setStart(e.container(),e.offset()),r.setEnd(t.container(),t.offset()),r})(r,n)),m4(e),vR(a,o,ly.fromRangeStart(e.selection.getRng())).map(vB).bind(yf(e,t)).each(G)}),e.nodeChanged()},yp=(e,t,r)=>{if(e.selection.isCollapsed()&&iM(e)){let n=ly.fromRangeStart(e.selection.getRng());return((e,t,r,n)=>{var o;let a=(o=e.getBody(),sF(n.container(),o)||o),l=V(m2,e),i=vR(l,a,n);return i.bind(e=>r?e.fold(j(Q.some(vB(e))),Q.none,j(Q.some(vT(e))),Q.none):e.fold(Q.none,j(Q.some(vT(e))),Q.none,j(Q.some(vB(e))))).map(yf(e,t)).getOrThunk(()=>{let o=s6(r,a,n),s=o.bind(e=>vR(l,a,e));return tF(i,s,()=>m3(l,a,n).bind(t=>tF(dt(t),dr(t),(e,r)=>{let n=m8(!0,e),o=m8(!1,r);return s7(t,n).forall(e=>e.isEqual(o))}).getOr(!0)?Q.some(()=>{m0(e,r,ro(t))}):Q.none())).getOrThunk(()=>s.bind(()=>o.map(o=>()=>{r?yg(e,t,n,o):yg(e,t,o,n)})))})})(e,t,r,n)}return Q.none()},yh=(e,t)=>{let r=ro(e.getBody()),n=ro(e.selection.getStart()),o=mg(n,r);return ef(o,t).fold(j(o),e=>o.slice(0,e))},yb=(e,t)=>{let r=V(gs,e);return ep(t,e=>r(e)?[e.dom]:[])},yv=e=>{let t=yh(e,nG);return yb(e,t)},yy=(e,t)=>{let r=yh(e,e=>nG(e)||rR(e)>1);return eE(r).bind(n=>{var o;let a=ly.fromRangeStart(e.selection.getRng());return tF(dt(o=n.dom),dr(o),(e,r)=>{let n=m8(!0,e),l=m8(!1,r),i=m8(!1,a);return t?s7(o,i).exists(e=>e.isEqual(l)&&a.isEqual(n)):de(o,i).exists(e=>e.isEqual(n)&&a.isEqual(l))}).getOr(!0)&&!gd(n)?Q.some(()=>((e,t,r,n)=>{let o=yb(t,n);if(0===o.length)m0(t,e,r);else{let e=gi(r.dom,o);t.selection.setRng(e.toRange())}})(t,e,n,r)):Q.none()})},yC=(e,t)=>{let r=e.selection.getStart(),n=((e,t)=>{let r=t.parentElement;return nP(t)&&!O(r)&&e.dom.isEmpty(r)})(e,r)||gd(ro(r))?gi(r,t):((e,t)=>{let{caretContainer:r,caretPosition:n}=gl(t);return e.selection.getRng().insertNode(r.dom),n})(e,t);e.selection.setRng(n.toRange())},yx=e=>nR(e.startContainer),yw=e=>{let t=e.selection.getRng();return 0===t.startOffset&&yx(t)&&((e,t)=>{let r=t.startContainer.parentElement;return!O(r)&&gs(e,ro(r))})(e,t)&&((e=>{let t=e.startContainer.parentNode,r=e.endContainer.parentNode;return!O(t)&&!O(r)&&t.isEqualNode(r)})(t)&&(e=>{let t=e.endContainer;return e.endOffset===(nR(t)?t.length:t.childNodes.length)})(t)||!t.endContainer.isEqualNode(t.commonAncestorContainer))},yE=(e,t)=>e.selection.isCollapsed()?yy(e,t):(e=>{if(yw(e)){let t=yv(e);return Q.some(()=>{m4(e),((e,t)=>{let r=ev(t,yv(e));r.length>0&&yC(e,r)})(e,t)})}return Q.none()})(e),yk=e=>rU(e,e=>da(e.dom),nG).isSome(),yS=e=>((e=>{let t=e.selection.getRng();return t.collapsed&&(yx(t)||e.dom.isEmpty(t.startContainer))&&!yk(ro(e.selection.getStart()))})(e)&&yC(e,[]),!0),y_=(e,t,r)=>P(r)?Q.some(()=>{e._selectionOverrides.hideFakeCaret(),m0(e,t,ro(r))}):Q.none(),yN=(e,t)=>e.selection.isCollapsed()?((e,t)=>{let r=t?mi:ms,n=t?pg.Forwards:pg.Backwards,o=sK(n,e.getBody(),e.selection.getRng());return r(o)?y_(e,t,o.getNode(!t)):Q.from(m8(t,o)).filter(e=>r(e)&&sX(o,e)).bind(r=>y_(e,t,r.getNode(!t)))})(e,t):((e,t)=>{let r=e.selection.getNode();return nz(r)?y_(e,t,r):Q.none()})(e,t),yR=e=>te(null!=e?e:"").getOr(0),yA=(e,t)=>(e||"table"===t$(t)?"margin":"padding")+("rtl"===rX(t,"direction")?"-right":"-left"),yO=e=>{let t=yB(e);return!e.mode.isReadOnly()&&(t.length>1||eh(t,t=>{let r=yA(iC(e),t),n=rJ(t,r).map(yR).getOr(0);return"false"!==e.dom.getContentEditable(t.dom)&&n>0}))},yT=e=>nJ(e)||nZ(e),yB=e=>es(ne(e.selection.getSelectedBlocks()),e=>!yT(e)&&!rb(e).exists(yT)&&rz(e,e=>nM(e.dom)||nF(e.dom)).exists(e=>nM(e.dom))),yD=(e,t)=>{var r,n;let{dom:o}=e,a=ix(e),l=null!==(n=null===(r=/[a-z%]+$/i.exec(a))||void 0===r?void 0:r[0])&&void 0!==n?n:"px",i=yR(a),s=iC(e);ea(yB(e),e=>{((e,t,r,n,o,a)=>{let l=yA(r,ro(a)),i=yR(e.getStyle(a,l));if("outdent"===t){let t=Math.max(0,i-n);e.setStyle(a,l,t?t+o:"")}else e.setStyle(a,l,i+n+o)})(o,t,s,i,l,e.dom)})},yP=e=>yD(e,"outdent"),yL=e=>{if(e.selection.isCollapsed()&&yO(e)){let t=e.dom,r=e.selection.getRng(),n=ly.fromRangeStart(r),o=t.getParent(r.startContainer,t.isBlock);if(null!==o&&my(ro(o),n))return Q.some(()=>yP(e))}return Q.none()},yM=(e,t,r)=>eS([yL,vi,b7,(e,r)=>yp(e,t,r),bZ,fR,vs,yN,b2,yE],t=>t(e,r)).filter(t=>e.selection.isEditable()),yF=(e,t)=>{e.addCommand("delete",()=>{((e,t)=>{yM(e,t,!1).fold(()=>{m4(e),ft(e)},G)})(e,t)}),e.addCommand("forwardDelete",()=>{((e,t)=>{yM(e,t,!0).fold(()=>m9(e,"ForwardDelete"),G)})(e,t)})},yI=e=>void 0===e.touches||1!==e.touches.length?Q.none():Q.some(e.touches[0]),yU=(e,t)=>eF(e,t.nodeName),yz=(e,t)=>!!nR(t)||!!ny(t)&&!yU(e.getBlockElements(),t)&&!dv(t)&&!oL(e,t),yj=(e,t)=>!!(nR(t)&&(0===t.data.length||/^\s+$/.test(t.data)&&(!t.nextSibling||yU(e,t.nextSibling)))),yH=e=>e.dom.create(l4(e),l7(e)),y$=e=>{let t=e.dom,r=e.selection,n=e.schema,o=n.getBlockElements(),a=r.getStart(),l=e.getBody(),i,s,d=!1,c=l4(e);if(!a||!ny(a))return;let u=l.nodeName.toLowerCase();if(!n.isValidChild(u,c.toLowerCase())||en(mf(ro(a),ro(l)),e=>yU(o,e.dom)))return;let m=r.getRng(),{startContainer:f,startOffset:g,endContainer:p,endOffset:h}=m,b=uB(e),v=l.firstChild;for(;v;)if(ny(v)&&oT(n,v),yz(n,v)){if(yj(o,v)){s=v,v=v.nextSibling,t.remove(s);continue}i||(i=yH(e),l.insertBefore(i,v),d=!0),s=v,v=v.nextSibling,i.appendChild(s)}else i=null,v=v.nextSibling;d&&b&&(m.setStart(f,g),m.setEnd(p,h),r.setRng(m),e.nodeChanged())},yV=(e,t,r)=>{let n=ro(yH(e)),o=n5();r8(n,o),r(t,n);let a=document.createRange();return a.setStartBefore(o.dom),a.setEndBefore(o.dom),a},yq=e=>t=>-1!==(" "+t.attr("class")+" ").indexOf(e),yW=(e,t,r)=>function(n){let o=arguments,a=o[o.length-2],l=a>0?t.charAt(a-1):"";if('"'===l)return n;if(">"===l){let e=t.lastIndexOf("<",a);if(-1!==e&&-1!==t.substring(e,a).indexOf('contenteditable="false"'))return n}return'<span class="'+r+'" data-mce-content="'+e.dom.encode(o[0])+'">'+e.dom.encode("string"==typeof o[1]?o[1]:o[0])+"</span>"},yK=(e,t)=>{t.hasAttribute("data-mce-caret")&&(oi(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},yG=(e,t)=>{let r=rH(ro(e.getBody()),"*[data-mce-caret]").map(e=>e.dom).getOrNull();if(r)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void yK(e,r)):void(or(r)&&(yK(e,r),e.undoManager.add()))},yY=(e,t,r)=>{let n=s1(e.getBody()),o=V(sY,1===t?n.next:n.prev);if(r.collapsed){let n=e.dom.getParent(r.startContainer,"PRE");if(!n)return;if(!o(ly.fromRangeStart(r))){let r=ro((e=>{let t=e.dom.create(l4(e));return t.innerHTML='<br data-mce-bogus="1">',t})(e));1===t?r2(ro(n),r):r1(ro(n),r),e.selection.select(r.dom,!0),e.selection.collapse()}}},yX=(e,t)=>((e,t)=>{let r=t?pg.Forwards:pg.Backwards,n=e.selection.getRng();return v7(e,r,n,mu,mm,nF).orThunk(()=>(yY(e,r,n),Q.none()))})(e,t).exists(t=>(v9(e,t),!0)),yQ=(e,t)=>((e,t)=>{let r=t?1:-1,n=e.selection.getRng();return ye(e,r,n,e=>mu(e)||md(e),e=>mm(e)||mc(e),nF).orThunk(()=>(yY(e,r,n),Q.none()))})(e,t).exists(t=>(v9(e,t),!0)),yJ=(e,t)=>yr(e,t,t?mm:mu),yZ=(e,t)=>ve(e,!t).map(r=>{let n=r.toRange(),o=e.selection.getRng();return t?n.setStart(o.startContainer,o.startOffset):n.setEnd(o.endContainer,o.endOffset),n}).exists(t=>(v9(e,t),!0)),y0=e=>er(["figcaption"],t$(e)),y1=(e,t)=>{let r=ro(e.getBody()),n=ly.fromRangeStart(e.selection.getRng());return((e,t)=>{let r=V(rm,t);return rz(ro(e.container()),nG,r).filter(y0)})(n,r).exists(()=>{if(t?vq(r.dom,n).breakAt.isNone():vV(r.dom,n).breakAt.isNone()){let n=yV(e,r,t?r8:r3);return e.selection.setRng(n),!0}return!1})},y2=(e,t)=>!!e.selection.isCollapsed()&&y1(e,t),y3={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},y8=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,y5=(e,...t)=>()=>e.apply(null,t),y6=(e,t)=>em(ep(eo(e,e=>({...y3,...e})),e=>y8(e,t)?[e]:[]),e=>e.action()),y9=(e,t)=>eS(ep(eo(e,e=>({...y3,...e})),e=>y8(e,t)?[e]:[]),e=>e.action()),y4=(e,t)=>{let r=t?pg.Forwards:pg.Backwards,n=e.selection.getRng();return v7(e,r,n,mi,ms,nz).exists(t=>(v9(e,t),!0))},y7=(e,t)=>{let r=e.selection.getRng();return ye(e,t?1:-1,r,mi,ms,nz).exists(t=>(v9(e,t),!0))},Ce=(e,t)=>yr(e,t,t?ms:mi),Ct=lj([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Cr={...Ct,none:e=>Ct.none(e)},Cn=(e,t,r)=>ep(rk(e),e=>rc(e,t)?r(e)?[e]:[]:Cn(e,t,r)),Co=(e,t)=>r$(e,"table",t),Ca=(e,t,r,n,o=X)=>{let a=1===n;if(!a&&r<=0)return Cr.first(e[0]);if(a&&r>=e.length-1)return Cr.last(e[e.length-1]);{let a=r+n,l=e[a];return o(l)?Cr.middle(t,l):Ca(e,t,a,n,o)}},Cl=(e,t)=>Co(e,t).bind(t=>{let r=Cn(t,"th,td",X);return ef(r,t=>rm(e,t)).map(e=>({index:e,all:r}))}),Ci=(e,t,r,n,o)=>{let a=ng(ro(r),"td,th,caption").map(e=>e.dom),l=es(ep(a,t=>{var r;let n={left:(r=a6(t.getBoundingClientRect())).left- -1,top:r.top- -1,right:r.right+-2,bottom:r.bottom+-2,width:r.width+-1,height:r.height+-1};return[{x:n.left,y:e(n),cell:t},{x:n.right,y:e(n),cell:t}]}),e=>t(e,o));return ec(l,(e,t)=>e.fold(()=>Q.some(t),e=>{let r=Math.sqrt(Math.abs(e.x-n)+Math.abs(e.y-o)),a=Math.sqrt(Math.abs(t.x-n)+Math.abs(t.y-o));return Q.some(a<r?t:e)}),Q.none()).map(e=>e.cell)},Cs=V(Ci,e=>e.bottom,(e,t)=>e.y<t),Cd=V(Ci,e=>e.top,(e,t)=>e.y>t),Cc=(e,t,r)=>{var n;let o=e(t,r);return(o.breakType!==c.Wrap||0!==o.positions.length)&&(nP(r.getNode())||(n=o).breakType!==c.Br||1!==n.positions.length)?o.breakAt.isNone():!o.breakAt.exists(r=>e(t,r).breakAt.isSome())},Cu=V(Cc,vV),Cm=V(Cc,vq),Cf=(e,t,r,n)=>{let o=e.selection.getRng();return!(!sA()||!((e,t,r)=>{let n=ly.fromRangeStart(t);return s4(!e,r).exists(e=>e.isEqual(n))})(t,o,r)||(b3(t?1:-1,e,r,!t,!1).each(t=>{v9(e,t)}),0))},Cg=(e,t,r)=>{let n=((e,t)=>{let r=t.getNode(e);return nS(r)?Q.some(r):Q.none()})(!!t,r),o=!1===t;n.fold(()=>v9(e,r.toRange()),n=>s4(o,e.getBody()).filter(e=>e.isEqual(r)).fold(()=>v9(e,r.toRange()),r=>((e,t,r)=>{t.undoManager.transact(()=>{let n=yV(t,ro(r),e?r2:r1);v9(t,n)})})(t,e,n)))},Cp=(e,t,r,n)=>{let o=e.selection.getRng(),a=ly.fromRangeStart(o),l=e.getBody();if(!t&&Cu(n,a)){let n=ew(a.getClientRects()).bind(e=>Cs(r,e.left,e.top)).bind(e=>v$(dr(e).map(t=>vV(e,t).positions.concat(t)).getOr([]),a)).orThunk(()=>ew(a.getClientRects()).bind(e=>vH(vW(l,ly.before(r)),e.left))).getOr(ly.before(r));return Cg(e,t,n),!0}if(t&&Cm(n,a)){let n=eE(a.getClientRects()).bind(e=>Cd(r,e.left,e.top)).bind(e=>v$(dt(e).map(t=>[t].concat(vq(e,t).positions)).getOr([]),a)).orThunk(()=>ew(a.getClientRects()).bind(e=>vH(vK(l,ly.after(r)),e.left))).getOr(ly.after(r));return Cg(e,t,n),!0}return!1},Ch=(e,t,r)=>Q.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(n=>Q.from(e.dom.getParent(n,"table")).map(o=>r(e,t,o,n))).getOr(!1),Cb=(e,t)=>Ch(e,t,Cf),Cv=(e,t)=>Ch(e,t,Cp),Cy=(e,t,r)=>r.fold(Q.none,Q.none,(e,t)=>((e,t)=>{let r=e=>{for(let n=0;n<e.childNodes.length;n++){let o=ro(e.childNodes[n]);if(t(o))return Q.some(o);let a=r(e.childNodes[n]);if(a.isSome())return a}return Q.none()};return r(e.dom)})(t,uz).map(e=>(e=>{let t=cF.exact(e,0,e,0);return cH(t)})(e)),r=>(e.execCommand("mceTableInsertRowAfter"),CC(e,t,r))),CC=(e,t,r)=>Cy(e,t,Cl(r,void 0).fold(()=>Cr.none(r),e=>Ca(e.all,r,e.index,1,rV))),Cx=(e,t,r)=>Cy(e,t,Cl(r,void 0).fold(()=>Cr.none(),e=>Ca(e.all,r,e.index,-1,rV))),Cw=(e,t)=>{let r=["table","li","dl"],n=ro(e.getBody()),o=e=>{let t=t$(e);return rm(e,n)||er(r,t)},a=e.selection.getRng();return((e,t,r=Y)=>r(t)?Q.none():er(e,t$(t))?Q.some(t):rj(t,e.join(","),e=>rc(e,"table")||r(e)))(["td","th"],ro(t?a.endContainer:a.startContainer),o).map(r=>(Co(r,o).each(t=>{e.model.table.clearSelectedCells(t.dom)}),e.selection.collapse(!t),(t?CC:Cx)(e,o,r).each(t=>{e.selection.setRng(t)}),!0)).getOr(!1)},CE=(e,t)=>({container:e,offset:t}),Ck=aR.DOM,CS=e=>t=>e===t?-1:0,C_=(e,t,r)=>{if(nR(e)&&t>=0)return Q.some(CE(e,t));{let n=a8(Ck);return Q.from(n.backwards(e,t,CS(e),r)).map(e=>CE(e.container,e.container.data.length))}},CN=(e,t,r)=>{if(!nR(e))return Q.none();let n=e.data;if(t>=0&&t<=n.length)return Q.some(CE(e,t));{let n=a8(Ck);return Q.from(n.backwards(e,t,CS(e),r)).bind(e=>{let n=e.container.data;return CN(e.container,t+n.length,r)})}},CR=(e,t,r)=>{if(!nR(e))return Q.none();let n=e.data;if(t<=n.length)return Q.some(CE(e,t));{let o=a8(Ck);return Q.from(o.forwards(e,t,CS(e),r)).bind(e=>CR(e.container,t-n.length,r))}},CA=(e,t,r,n,o)=>{let a=a8(e,t=>e.isBlock(t)||er(["BR","IMG","HR","INPUT"],t.nodeName)||"false"===e.getContentEditable(t));return Q.from(a.backwards(t,r,n,o))},CO=e=>n4(e.toString().replace(/\u00A0/g," ")),CT=e=>""!==e&&-1!==" \xa0\f\n\r	\v".indexOf(e),CB=(e,t)=>e.substring(t.length),CD=(e,t,r,n=0)=>r$(ro(t.startContainer),uj).fold(()=>((e,t,r,n=0)=>{if(!t.collapsed||!nR(t.startContainer))return Q.none();let o={text:"",offset:0},a=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return CA(e,t.startContainer,t.startOffset,(e,t,n)=>(o.text=n+o.text,o.offset+=t,((e,t,r)=>{let n;let o=r.charAt(0);for(n=t-1;n>=0;n--){let a=e.charAt(n);if(CT(a))return Q.none();if(o===a&&e1(e,r,n,t))break}return Q.some(n)})(o.text,o.offset,r).getOr(t)),a).bind(e=>{let o=t.cloneRange();if(o.setStart(e.container,e.offset),o.setEnd(t.endContainer,t.endOffset),o.collapsed)return Q.none();let a=CO(o);return 0!==a.lastIndexOf(r)||CB(a,r).length<n?Q.none():Q.some({text:CB(a,r),range:o,trigger:r})})})(e,t,r,n),t=>{let n=e.createRng();n.selectNode(t.dom);let o=CO(n);return Q.some({range:n,text:CB(o,r),trigger:r})}),CP=e=>{if(3===e.nodeType)return CE(e,e.data.length);{let t=e.childNodes;return t.length>0?CP(t[t.length-1]):CE(e,t.length)}},CL=(e,t)=>{let r=e.childNodes;return r.length>0&&t<r.length?CL(r[t],0):r.length>0&&1===e.nodeType&&r.length===t?CP(r[r.length-1]):CE(e,t)},CM=(e,t,r,n={})=>{var o;let a=t(),l=null!==(o=e.selection.getRng().startContainer.nodeValue)&&void 0!==o?o:"",i=es(a.lookupByTrigger(r.trigger),t=>r.text.length>=t.minChars&&t.matches.getOrThunk(()=>{var t;return t=e.dom,e=>{let r=CL(e.startContainer,e.startOffset);return!((e,t)=>{var r;let n=null!==(r=e.getParent(t.container,e.isBlock))&&void 0!==r?r:e.getRoot();return CA(e,t.container,t.offset,(e,t)=>0===t?-1:t,n).filter(e=>{let t=e.container.data.charAt(e.offset-1);return!CT(t)}).isSome()})(t,r)}})(r.range,l,r.text));if(0===i.length)return Q.none();let s=Promise.all(eo(i,e=>e.fetch(r.text,e.maxResults,n).then(t=>({matchText:r.text,items:t,columns:e.columns,onAction:e.onAction,highlightOn:e.highlightOn}))));return Q.some({lookupData:s,context:r})};(l=m||(m={}))[l.Error=0]="Error",l[l.Value=1]="Value";let CF=(e,t,r)=>e.stype===m.Error?t(e.serror):r(e.svalue),CI=e=>({stype:m.Value,svalue:e}),CU=e=>({stype:m.Error,serror:e}),Cz=e=>N(e)&&e_(e).length>100?" removed due to size":JSON.stringify(e,null,2),Cj=(e,t)=>CU([{path:e,getErrorInfo:t}]),CH=(e,t)=>({extract:(r,n)=>eM(n,e).fold(()=>Cj(r,()=>'Choice schema did not contain choice key: "'+e+'"'),e=>eM(t,e).fold(()=>Cj(r,()=>'The chosen schema: "'+e+'" did not exist in branches: '+Cz(t)),t=>t.extract(r.concat(["branch: "+e]),n))),toString:()=>"chooseOn("+e+"). Possible values: "+e_(t)}),C$=e=>(...t)=>{if(0===t.length)throw Error("Can't merge zero objects");let r={};for(let n=0;n<t.length;n++){let o=t[n];for(let t in o)eF(o,t)&&(r[t]=e(r[t],o[t]))}return r},CV=C$((e,t)=>R(e)&&R(t)?CV(e,t):t),Cq=(C$((e,t)=>t),e=>({tag:"defaultedThunk",process:j(e)})),CW=e=>{var t;let r=(e=>{let t=[],r=[];return ea(e,e=>{CF(e,e=>r.push(e),e=>t.push(e))}),{values:t,errors:r}})(e);return r.errors.length>0?(t=r.errors,U(CU,eg)(t)):CI(r.values)},CK=(e,t,r)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return r(e.newKey,e.instantiator)}},CG=e=>({extract:(t,r)=>{var n;return(n=e(r)).stype===m.Error?Cj(t,j(n.serror)):n},toString:j("val")}),CY=CG(CI),CX=(e,t,r,n)=>n(eM(e,t).getOrThunk(()=>r(e))),CQ=(e,t,r,n,o)=>{var a;let l=e=>o.extract(t.concat([n]),e),i=e=>e.fold(()=>CI(Q.none()),e=>{var r;let a=o.extract(t.concat([n]),e);return r=Q.some,a.stype===m.Value?{stype:m.Value,svalue:r(a.svalue)}:a});switch(e.tag){case"required":return eM(r,n).fold(()=>Cj(t,()=>'Could not find valid *required* value for "'+n+'" in '+Cz(r)),l);case"defaultedThunk":return CX(r,n,e.process,l);case"option":return i(eM(r,n));case"defaultedOptionThunk":return a=e.process,i(eM(r,n).map(e=>!0===e?a(r):e));case"mergeWithThunk":return CX(r,n,j({}),t=>{let n=CV(e.process(r),t);return l(n)})}},CJ=e=>({extract:(t,r)=>((e,t,r)=>{let n={},o=[];for(let a of r)CK(a,(r,a,l,i)=>{let s=CQ(l,e,t,r,i);CF(s,e=>{o.push(...e)},e=>{n[a]=e})},(e,r)=>{n[e]=r(t)});return o.length>0?CU(o):CI(n)})(t,r,e),toString:()=>{let t=eo(e,e=>CK(e,(e,t,r,n)=>e+" -> "+n.toString(),(e,t)=>"state("+e+")"));return"obj{\n"+t.join("\n")+"}"}}),CZ=e=>({extract:(t,r)=>{let n=eo(r,(r,n)=>e.extract(t.concat(["["+n+"]"]),r));return CW(n)},toString:()=>"array("+e.toString()+")"}),C0=(e,t,r)=>{var n,o;return CF((n=t.extract([e],r)).stype===m.Error?{stype:m.Error,serror:(o=n.serror,{input:r,errors:o})}:n,lz.error,lz.value)},C1=(e,t)=>CH(e,eA(t,CJ)),C2=j(CY),C3=(e,t)=>CG(r=>e(r)?CI(r):CU(`Expected type: ${t} but got: ${typeof r}`)),C8=C3(M,"number"),C5=C3(_,"string"),C6=C3(T,"boolean"),C9=C3(L,"function"),C4=(e,t,r,n)=>({tag:"field",key:e,newKey:t,presence:r,prop:n}),C7=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),xe=(e,t)=>C4(e,e,{tag:"required",process:{}},t),xt=e=>xe(e,C5),xr=e=>xe(e,C9),xn=(e,t)=>C4(e,e,{tag:"option",process:{}},t),xo=e=>xn(e,C5),xa=(e,t,r)=>C4(e,e,Cq(t),r),xl=(e,t)=>xa(e,t,C8),xi=(e,t,r)=>{var n;return xa(e,t,(n=e=>er(r,e)?lz.value(e):lz.error(`Unsupported value: "${e}", choose one of "${r.join(", ")}".`),CG(e=>n(e).fold(CU,CI))))},xs=(e,t)=>xa(e,t,C6),xd=(e,t)=>xa(e,t,C9),xc=xt("type"),xu=xr("fetch"),xm=xr("onAction"),xf=xd("onSetup",()=>I),xg=xo("text"),xp=xo("icon"),xh=xo("tooltip"),xb=xo("label"),xv=xs("active",!1),xy=xs("enabled",!0),xC=xs("primary",!1),xx=e=>xa("type",e,C5),xw=CJ([xc,xt("trigger"),xl("minChars",1),C4(i="columns",i,Cq(1),C2()),xl("maxResults",10),xn("matches",C9),xu,xm,xa("highlightOn",[],CZ(C5))]),xE=[xy,xh,xp,xg,xf],xk=[xv].concat(xE),xS=[xd("predicate",Y),xi("scope","node",["node","editor"]),xi("position","selection",["node","selection","line"])],x_=xE.concat([xx("contextformbutton"),xC,xm,C7("original",H)]),xN=xk.concat([xx("contextformbutton"),xC,xm,C7("original",H)]),xR=xE.concat([xx("contextformbutton")]),xA=xk.concat([xx("contextformtogglebutton")]),xO=C1("type",{contextformbutton:x_,contextformtogglebutton:xN});CJ([xx("contextform"),xd("initValue",j("")),xb,C4(s="commands",s,{tag:"required",process:{}},CZ(xO)),xn("launch",C1("type",{contextformbutton:xR,contextformtogglebutton:xA}))].concat(xS));let xT=e=>{let t=e.ui.registry.getAll().popups,r=eA(t,e=>C0("Autocompleter",xw,{trigger:e.ch,...e}).fold(e=>{throw Error("Errors: \n"+(e=>{let t=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:j("... (only showing first ten failures)")}]):e;return eo(t,e=>"Failed path: ("+e.path.join(" > ")+")\n"+e.getErrorInfo())})(e.errors).join("\n")+"\n\nInput object: "+Cz(e.input))},H)),n=eU(eP(r,e=>e.trigger)),o=eL(r);return{dataset:r,triggers:n,lookupByTrigger:e=>es(o,t=>t.trigger===e)}},xB=e=>{let t=aI(),r=aT(!1),n=t.isSet,o=()=>{n()&&((e=>{hj(e).autocompleter.removeDecoration()})(e),(e=>{e.dispatch("AutocompleterEnd")})(e),r.set(!1),t.clear())},a=eG(()=>xT(e)),l=l=>{t.get().map(t=>CD(e.dom,e.selection.getRng(),t.trigger).bind(t=>CM(e,a,t,l))).getOrThunk(()=>((e,t)=>{var r;let n=t(),o=e.selection.getRng();return(r=e.dom,eS(n.triggers,e=>CD(r,o,e))).bind(r=>CM(e,t,r))})(e,a)).fold(o,a=>{var l;l=a.context,n()||(((e,t)=>{hj(e).autocompleter.addDecoration(t)})(e,l.range),t.set({trigger:l.trigger,matchLength:l.text.length})),a.lookupData.then(n=>{t.get().map(l=>{let i=a.context;l.trigger===i.trigger&&(i.text.length-l.matchLength>=10?o():(t.set({...l,matchLength:i.text.length}),r.get()?((e,t)=>{e.dispatch("AutocompleterUpdate",t)})(e,{lookupData:n}):(r.set(!0),((e,t)=>{e.dispatch("AutocompleterStart",t)})(e,{lookupData:n}))))})})})};e.addCommand("mceAutocompleterReload",(e,t)=>{let r=N(t)?t.fetchOptions:{};l(r)}),e.addCommand("mceAutocompleterClose",o),((e,t)=>{let r=az(t.load,50);e.on("keypress compositionend",e=>{27!==e.which&&r.throttle()}),e.on("keydown",e=>{let n=e.which;8===n?r.throttle():27===n&&t.cancelIfNecessary()}),e.on("remove",r.cancel)})(e,{cancelIfNecessary:o,load:l})},xD=e=>(t,r,n={})=>{let o=t.getBody(),a={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:o,currentTarget:o,eventPhase:Event.AT_TARGET,originalTarget:o,explicitOriginalTarget:o,isTrusted:!1,srcElement:o,cancelable:!1,preventDefault:I,inputType:r},l=au(new InputEvent(e));return t.dispatch(e,{...l,...a,...n})},xP=xD("input"),xL=xD("beforeinput"),xM=(e,t)=>{let r=e.dom,n=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){let e=(e=>{for(;e;){if(ny(e)||nR(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null})(t.firstChild);e&&/^(UL|OL|DL)$/.test(e.nodeName)&&t.insertBefore(r.doc.createTextNode("\xa0"),t.firstChild)}let o=r.createRng();if(t.normalize(),t.hasChildNodes()){let e=new nh(t,t),r,a=t;for(;r=e.current();){if(nR(r)){o.setStart(r,0),o.setEnd(r,0);break}if(n[r.nodeName.toLowerCase()]){o.setStartBefore(r),o.setEndBefore(r);break}a=r,r=e.next()}r||(o.setStart(a,0),o.setEnd(a,0))}else nP(t)?t.nextSibling&&r.isBlock(t.nextSibling)?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)):(o.setStart(t,0),o.setEnd(t,0));e.selection.setRng(o),uc(e,o)},xF=(e,t)=>{let r=e.getRoot(),n,o=t;for(;o!==r&&o&&"false"!==e.getContentEditable(o);)"true"===e.getContentEditable(o)&&(n=o),o=o.parentNode;return o!==r?n:r},xI=e=>Q.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),xU=(e,t)=>{let r=null==e?void 0:e.parentNode;return P(r)&&r.nodeName===t},xz=e=>P(e)&&/^(OL|UL|LI)$/.test(e.nodeName),xj=e=>{let t=e.parentNode;return P(t)&&/^(LI|DT|DD)$/.test(t.nodeName)?t:e},xH=(e,t,r)=>{let n=e[r?"firstChild":"lastChild"];for(;n&&!ny(n);)n=n[r?"nextSibling":"previousSibling"];return n===t},x$=(e,t)=>t&&"A"===t.nodeName&&e.isEmpty(t),xV=e=>{e.innerHTML='<br data-mce-bogus="1">'},xq=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,xW=(e,t)=>P(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.isEditable(t.parentNode)&&"false"!==e.getContentEditable(t),xK=(e,t,r)=>nR(t)?e?1===r&&"\uFEFF"===t.data.charAt(r-1)?0:r:r===t.data.length-1&&"\uFEFF"===t.data.charAt(r)?t.data.length:r:r,xG=(e,t)=>{l4(e).toLowerCase()===t.tagName.toLowerCase()&&((e,t,r)=>{let n=e.dom;Q.from(r.style).map(n.parseStyle).each(e=>{let r={...rZ(ro(t)),...e};n.setStyles(t,r)});let o=Q.from(r.class).map(e=>e.split(/\s+/)),a=Q.from(t.className).map(e=>es(e.split(/\s+/),e=>""!==e));tF(o,a,(e,r)=>{let o=es(r,t=>!er(e,t)),a=[...e,...o];n.setAttrib(t,"class",a.join(" "))});let l=["style","class"],i=eD(r,(e,t)=>!er(l,t));n.setAttribs(t,i)})(e,t,l7(e))},xY={insert:(e,t)=>{let r,n,o,a,l,i=!1,s=e.dom,d=e.schema,c=d.getNonEmptyElements(),u=e.selection.getRng(),m=l4(e),f=t=>{let r,o=n,l=d.getTextInlineElements(),i=r=t||"TABLE"===a||"HR"===a?s.create(t||m):y.cloneNode(!1);if(!1===io(e))s.setAttrib(r,"style",null),s.setAttrib(r,"class",null);else do if(l[o.nodeName]){if(da(o)||dv(o))continue;let e=o.cloneNode(!1);s.setAttrib(e,"id",""),r.hasChildNodes()?(e.appendChild(r.firstChild),r.appendChild(e)):(i=e,r.appendChild(e))}while((o=o.parentNode)&&o!==v);return xG(e,r),xV(i),r},g=e=>{let t;let r=xK(e,n,o);if(nR(n)&&(e?r>0:r<n.data.length))return!1;if(n.parentNode===y&&i&&!e||e&&ny(n)&&n===y.firstChild)return!0;if(xq(n,"TABLE")||xq(n,"HR"))return i&&!e||!i&&e;let a=new nh(n,y);for(nR(n)&&(e&&0===r?a.prev():e||r!==n.data.length||a.next());t=a.current();){if(ny(t)){if(!t.getAttribute("data-mce-bogus")){let e=t.nodeName.toLowerCase();if(c[e]&&"br"!==e)return!1}}else if(nR(t)&&!oh(t.data))return!1;e?a.prev():a.next()}return!0},p=()=>{let t;return t=/^(H[1-6]|PRE|FIGURE)$/.test(a)&&"HGROUP"!==C?f(m):f(),((e,t)=>{let r=ia(e);return!D(t)&&(_(r)?er(tL.explode(r),t.nodeName.toLowerCase()):r)})(e,l)&&xW(s,l)&&s.isEmpty(y)?t=s.split(l,y):s.insertAfter(t,y),xM(e,t),t};cQ(s,u).each(e=>{u.setStart(e.startContainer,e.startOffset),u.setEnd(e.endContainer,e.endOffset)}),n=u.startContainer,o=u.startOffset;let h=!(!t||!t.shiftKey),b=!(!t||!t.ctrlKey);ny(n)&&n.hasChildNodes()&&(i=o>n.childNodes.length-1,n=n.childNodes[Math.min(o,n.childNodes.length-1)]||n,o=i&&nR(n)?n.data.length:0);let v=xF(s,n);if(!v||((e,t)=>{let r=e.dom.getParent(t,"ol,ul,dl");return null!==r&&"false"===e.dom.getContentEditableParent(r)})(e,n))return;h||(n=((e,t,r,n,o)=>{var a,l;let i=e.dom,s=null!==(a=xF(i,n))&&void 0!==a?a:i.getRoot(),d=i.getParent(n,i.isBlock);if(!d||!xW(i,d)){if(!(d=d||s).hasChildNodes()){let n=i.create(t);return xG(e,n),d.appendChild(n),r.setStart(n,0),r.setEnd(n,0),n}let a,c=n;for(;c&&c.parentNode!==d;)c=c.parentNode;for(;c&&!i.isBlock(c);)a=c,c=c.previousSibling;let u=null===(l=null==a?void 0:a.parentElement)||void 0===l?void 0:l.nodeName;if(a&&u&&e.schema.isValidChild(u,t.toLowerCase())){let l=a.parentNode,s=i.create(t);for(xG(e,s),l.insertBefore(s,a),c=a;c&&!i.isBlock(c);){let e=c.nextSibling;s.appendChild(c),c=e}r.setStart(n,o),r.setEnd(n,o)}}return n})(e,m,u,n,o));let y=s.getParent(n,s.isBlock)||s.getRoot();l=P(null==y?void 0:y.parentNode)?s.getParent(y.parentNode,s.isBlock):null,a=y?y.nodeName.toUpperCase():"";let C=l?l.nodeName.toUpperCase():"";if("LI"!==C||b||(y=l,l=l.parentNode,a=C),/^(LI|DT|DD)$/.test(a)&&ny(l)&&s.isEmpty(y))return void((e,t,r,n,o)=>{var a,l,i,s;let d=e.dom,c=e.selection.getRng(),u=r.parentNode;if(r===e.getBody()||!u)return;xz(a=r)&&xz(a.parentNode)&&(o="LI");let m=t(o);if(xH(r,n,!0)&&xH(r,n,!1)){if(xU(r,"LI")){let e=xj(r);d.insertAfter(m,e),(null===(i=(l=r).parentNode)||void 0===i?void 0:i.firstChild)===l?d.remove(e):d.remove(r)}else d.replace(m,r)}else if(xH(r,n,!0))xU(r,"LI")?(d.insertAfter(m,xj(r)),m.appendChild(d.doc.createTextNode(" ")),m.appendChild(r)):u.insertBefore(m,r),d.remove(n);else if(xH(r,n,!1))d.insertAfter(m,xj(r)),d.remove(n);else{r=xj(r);let e=c.cloneRange();e.setStartAfter(n),e.setEndAfter(r);let t=e.extractContents();"LI"===o&&(s=t).firstChild&&"LI"===s.firstChild.nodeName?(m=t.firstChild,d.insertAfter(t,r)):(d.insertAfter(t,r),d.insertAfter(m,r)),d.remove(n)}xM(e,m)})(e,f,l,y,m);if(y===e.getBody()||!xW(s,y))return;let x=y.parentNode;if(n7(y))r=oi(y),s.isEmpty(y)&&xV(y),xG(e,r),xM(e,r);else if(g(!1))r=p();else if(g(!0)&&x)r=x.insertBefore(f(),y),xM(e,xq(y,"HR")?r:y);else{let t=(e=>{let t=e.cloneRange();return t.setStart(e.startContainer,xK(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,xK(!1,e.endContainer,e.endOffset)),t})(u).cloneRange();t.setEndAfter(y);let n=t.extractContents();ea(nf(ro(n),tK),e=>{let t=e.dom;t.nodeValue=n4(t.data)}),(e=>{let t=e;do nR(t)&&(t.data=t.data.replace(/^[\r\n]+/,"")),t=t.firstChild;while(t)})(n),r=n.firstChild,s.insertAfter(n,y),((e,t,r)=>{var n;let o=[];if(!r)return;let a=r;for(;a=a.firstChild;){if(e.isBlock(a))return;ny(a)&&!t[a.nodeName.toLowerCase()]&&o.push(a)}let l=o.length;for(;l--;)(!(a=o[l]).hasChildNodes()||a.firstChild===a.lastChild&&""===(null===(n=a.firstChild)||void 0===n?void 0:n.nodeValue)||x$(e,a))&&e.remove(a)})(s,c,r),((e,t)=>{t.normalize();let r=t.lastChild;(!r||ny(r)&&/^(left|right)$/gi.test(e.getStyle(r,"float",!0)))&&e.add(t,"br")})(s,y),s.isEmpty(y)&&xV(y),r.normalize(),s.isEmpty(r)?(s.remove(r),p()):(xG(e,r),xM(e,r))}s.setAttrib(r,"id",""),e.dispatch("NewBlock",{newBlock:r})},fakeEventName:"insertParagraph"},xX=(e,t,r)=>{let n=e.dom.createRng();r?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),e.selection.setRng(n),uc(e,n)},xQ=(e,t)=>{let r=rl("br");r1(ro(t),r),e.undoManager.add()},xJ=(e,t)=>{xZ(e.getBody(),t)||r2(ro(t),rl("br"));let r=rl("br");r2(ro(t),r),xX(e,r.dom,!1),e.undoManager.add()},xZ=(e,t)=>{var r;return r=ly.after(t),!!nP(r.getNode())||s7(e,ly.after(t)).map(e=>nP(e.getNode())).getOr(!1)},x0=e=>e&&"A"===e.nodeName&&"href"in e,x1=e=>e.fold(Y,x0,x0,Y),x2=(e,t)=>{t.fold(I,V(xQ,e),V(xJ,e),I)},x3={insert:(e,t)=>{let r=(e=>{let t=V(m2,e),r=ly.fromRangeStart(e.selection.getRng());return vR(t,e.getBody(),r).filter(x1)})(e);r.isSome()?r.each(V(x2,e)):((e,t)=>{let r=e.selection,n=e.dom,o=r.getRng(),a,l=!1;cQ(n,o).each(e=>{o.setStart(e.startContainer,e.startOffset),o.setEnd(e.endContainer,e.endOffset)});let i=o.startOffset,s=o.startContainer;if(ny(s)&&s.hasChildNodes()){let e=i>s.childNodes.length-1;s=s.childNodes[Math.min(i,s.childNodes.length-1)]||s,i=e&&nR(s)?s.data.length:0}let d=n.getParent(s,n.isBlock),c=d&&d.parentNode?n.getParent(d.parentNode,n.isBlock):null,u=c?c.nodeName.toUpperCase():"",m=!(!t||!t.ctrlKey);"LI"!==u||m||(d=c),nR(s)&&i>=s.data.length&&(((e,t,r)=>{let n;let o=new nh(t,r),a=e.getNonEmptyElements();for(;n=o.next();)if(a[n.nodeName.toLowerCase()]||nR(n)&&n.length>0)return!0;return!1})(e.schema,s,d||n.getRoot())||(a=n.create("br"),o.insertNode(a),o.setStartAfter(a),o.setEndAfter(a),l=!0)),a=n.create("br"),lx(n,o,a),xX(e,a,l),e.undoManager.add()})(e,t)},fakeEventName:"insertLineBreak"},x8=(e,t)=>xI(e).filter(e=>t.length>0&&rc(ro(e),t)).isSome(),x5=lj([{br:[]},{block:[]},{none:[]}]),x6=(e,t)=>x8(e,ir(e)),x9=e=>(t,r)=>xI(t).filter(e=>nZ(ro(e))).isSome()===e,x4=(e,t)=>(r,n)=>{let o=xI(r).fold(j(""),e=>e.nodeName.toUpperCase())===e.toUpperCase();return o===t},x7=e=>{let t=xF(e.dom,e.selection.getStart());return D(t)},we=e=>x4("pre",e),wt=e=>(t,r)=>l9(t)===e,wr=(e,t)=>x8(e,it(e)),wn=(e,t)=>t,wo=e=>{let t=l4(e),r=xF(e.dom,e.selection.getStart());return P(r)&&e.schema.isValidChild(r.nodeName,t)},wa=(e,t)=>(r,n)=>ec(e,(e,t)=>e&&t(r,n),!0)?Q.some(t):Q.none(),wl=(e,t,r)=>{t.selection.isCollapsed()||(e=>{e.execCommand("delete")})(t),P(r)&&xL(t,e.fakeEventName).isDefaultPrevented()||(e.insert(t,r),P(r)&&xP(t,e.fakeEventName))},wi=(e,t)=>{let r=()=>wl(x3,e,t),n=()=>wl(xY,e,t),o=vv([wa([x6],x5.none()),wa([we(!0),x7],x5.none()),wa([x4("summary",!0)],x5.br()),wa([we(!0),wt(!1),wn],x5.br()),wa([we(!0),wt(!1)],x5.block()),wa([we(!0),wt(!0),wn],x5.block()),wa([we(!0),wt(!0)],x5.br()),wa([x9(!0),wn],x5.br()),wa([x9(!0)],x5.block()),wa([wr],x5.br()),wa([wn],x5.br()),wa([wo],x5.block())],[e,!(!t||!t.shiftKey)]).getOr(x5.none());switch(ie(e)){case"linebreak":o.fold(r,r,I);break;case"block":o.fold(n,n,I);break;case"invert":o.fold(n,r,I);break;default:o.fold(r,n,I)}},ws=tk(),wd=e=>e.stopImmediatePropagation(),wc=e=>e.keyCode===cw.PAGE_UP||e.keyCode===cw.PAGE_DOWN,wu=(e,t,r)=>{r&&!e.get()?t.on("NodeChange",wd,!0):!r&&e.get()&&t.off("NodeChange",wd),e.set(r)},wm=(e,t)=>{let r=t.container(),n=t.offset();return nR(r)?(r.insertData(n,e),Q.some(ly(r,n+e.length))):sG(t).map(r=>{let n=ri(e);return t.isAtEnd()?r2(r,n):r1(r,n),ly(n.dom,e.length)})},wf=V(wm,"\xa0"),wg=V(wm," "),wp=(e,t)=>r=>!mD(r)&&(de(e.dom,r).isNone()||s7(e.dom,r).isNone()||my(e,r)||mC(e,r)||m_(e,r)||mS(e,r)||mT(e,r)||mB(e,r))?wf(t):wg(t),wh=e=>{let t=ly.fromRangeStart(e.selection.getRng()),r=ro(e.getBody());if(e.selection.isCollapsed()){let n=V(m2,e),o=ly.fromRangeStart(e.selection.getRng());return vR(n,e.getBody(),o).bind(e=>e.fold(e=>de(r.dom,ly.before(e)),e=>dt(e),e=>dr(e),e=>s7(r.dom,ly.after(e)))).map(n=>()=>wp(r,t)(n).each(t=>(e.selection.setRng(t.toRange()),e.nodeChanged(),!0)))}return Q.none()},wb=e=>sC(e)?[{keyCode:cw.TAB,action:y5(Cw,e,!0)},{keyCode:cw.TAB,shiftKey:!0,action:y5(Cw,e,!1)}]:[],wv=e=>{if(e.addShortcut("Meta+P","","mcePrint"),xB(e),hU(e))return aT(null);{let t;let r=yd(e);return(e=>{e.on("keyup compositionstart",V(yG,e))})(e),((e,t)=>{e.on("keydown",r=>{r.isDefaultPrevented()||((e,t,r)=>{let n=tT.os.isMacOS()||tT.os.isiOS();y6([{keyCode:cw.RIGHT,action:y5(yX,e,!0)},{keyCode:cw.LEFT,action:y5(yX,e,!1)},{keyCode:cw.UP,action:y5(yQ,e,!1)},{keyCode:cw.DOWN,action:y5(yQ,e,!0)},...n?[{keyCode:cw.UP,action:y5(yZ,e,!1),metaKey:!0,shiftKey:!0},{keyCode:cw.DOWN,action:y5(yZ,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:cw.RIGHT,action:y5(Cb,e,!0)},{keyCode:cw.LEFT,action:y5(Cb,e,!1)},{keyCode:cw.UP,action:y5(Cv,e,!1)},{keyCode:cw.DOWN,action:y5(Cv,e,!0)},{keyCode:cw.RIGHT,action:y5(y4,e,!0)},{keyCode:cw.LEFT,action:y5(y4,e,!1)},{keyCode:cw.UP,action:y5(y7,e,!1)},{keyCode:cw.DOWN,action:y5(y7,e,!0)},{keyCode:cw.RIGHT,action:y5(yi,e,t,!0)},{keyCode:cw.LEFT,action:y5(yi,e,t,!1)},{keyCode:cw.RIGHT,ctrlKey:!n,altKey:n,action:y5(yc,e,t)},{keyCode:cw.LEFT,ctrlKey:!n,altKey:n,action:y5(yu,e,t)},{keyCode:cw.UP,action:y5(y2,e,!1)},{keyCode:cw.DOWN,action:y5(y2,e,!0)}],r).each(e=>{r.preventDefault()})})(e,t,r)})})(e,r),t=!1,e.on("keydown",n=>{t=n.keyCode===cw.BACKSPACE,n.isDefaultPrevented()||((e,t,r)=>{let n=r.keyCode===cw.BACKSPACE?"deleteContentBackward":"deleteContentForward";y9([{keyCode:cw.BACKSPACE,action:y5(yL,e)},{keyCode:cw.BACKSPACE,action:y5(vi,e,!1)},{keyCode:cw.DELETE,action:y5(vi,e,!0)},{keyCode:cw.BACKSPACE,action:y5(b7,e,!1)},{keyCode:cw.DELETE,action:y5(b7,e,!0)},{keyCode:cw.BACKSPACE,action:y5(yp,e,t,!1)},{keyCode:cw.DELETE,action:y5(yp,e,t,!0)},{keyCode:cw.BACKSPACE,action:y5(fR,e,!1)},{keyCode:cw.DELETE,action:y5(fR,e,!0)},{keyCode:cw.BACKSPACE,action:y5(vs,e,!1)},{keyCode:cw.DELETE,action:y5(vs,e,!0)},{keyCode:cw.BACKSPACE,action:y5(yN,e,!1)},{keyCode:cw.DELETE,action:y5(yN,e,!0)},{keyCode:cw.BACKSPACE,action:y5(b2,e,!1)},{keyCode:cw.DELETE,action:y5(b2,e,!0)},{keyCode:cw.BACKSPACE,action:y5(bZ,e,!1)},{keyCode:cw.DELETE,action:y5(bZ,e,!0)},{keyCode:cw.BACKSPACE,action:y5(yE,e,!1)},{keyCode:cw.DELETE,action:y5(yE,e,!0)}],r).filter(t=>e.selection.isEditable()).each(t=>{r.preventDefault(),xL(e,n).isDefaultPrevented()||(t(),xP(e,n))})})(e,r,n)}),e.on("keyup",r=>{r.isDefaultPrevented()||((e,t,r)=>{let n=tk(),o=n.os,a=n.browser,l=o.isMacOS()?[{keyCode:cw.BACKSPACE,altKey:!0,action:y5(yS,e)},{keyCode:cw.DELETE,altKey:!0,action:y5(yS,e)}]:[{keyCode:cw.BACKSPACE,ctrlKey:!0,action:y5(yS,e)},{keyCode:cw.DELETE,ctrlKey:!0,action:y5(yS,e)}];o.isMacOS()&&r&&l.push({keyCode:a.isFirefox()?224:91,action:y5(yS,e)}),y6([{keyCode:cw.BACKSPACE,action:y5(vl,e)},{keyCode:cw.DELETE,action:y5(vl,e)},...l],t)})(e,r,t),t=!1}),(e=>{e.on("keydown",t=>{var r;t.keyCode===cw.ENTER&&(t.isDefaultPrevented()||(t.preventDefault(),(r=e.undoManager).typing&&(r.typing=!1,r.add()),e.undoManager.transact(()=>{wi(e,t)})))})})(e),(e=>{e.on("keydown",t=>{t.isDefaultPrevented()||((e,t)=>{y9([{keyCode:cw.SPACEBAR,action:y5(wh,e)}],t).each(r=>{t.preventDefault(),xL(e,"insertText",{data:" "}).isDefaultPrevented()||(r(),xP(e,"insertText",{data:" "}))})})(e,t)})})(e),(e=>{e.on("input",t=>{t.isComposing||(e=>{let t=ro(e.getBody());e.selection.isCollapsed()&&mH(t,ly.fromRangeStart(e.selection.getRng())).each(t=>{e.selection.setRng(t.toRange())})})(e)})})(e),(e=>{e.on("keydown",t=>{t.isDefaultPrevented()||((e,t)=>{y6([...wb(e)],t).each(e=>{t.preventDefault()})})(e,t)})})(e),((e,t)=>{e.on("keydown",r=>{r.isDefaultPrevented()||((e,t,r)=>{let n=tT.os.isMacOS()||tT.os.isiOS();y6([{keyCode:cw.END,action:y5(yJ,e,!0)},{keyCode:cw.HOME,action:y5(yJ,e,!1)},...n?[]:[{keyCode:cw.HOME,action:y5(yZ,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:cw.END,action:y5(yZ,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:cw.END,action:y5(Ce,e,!0)},{keyCode:cw.HOME,action:y5(Ce,e,!1)},{keyCode:cw.END,action:y5(ym,e,!0,t)},{keyCode:cw.HOME,action:y5(ym,e,!1,t)}],r).each(e=>{r.preventDefault()})})(e,t,r)})})(e,r),((e,t)=>{if(ws.os.isMacOS())return;let r=aT(!1);e.on("keydown",t=>{wc(t)&&wu(r,e,!0)}),e.on("keyup",n=>{n.isDefaultPrevented()||y6([{keyCode:cw.PAGE_UP,action:y5(ym,e,!1,t)},{keyCode:cw.PAGE_DOWN,action:y5(ym,e,!0,t)}],n),wc(n)&&r.get()&&(wu(r,e,!1),e.nodeChanged())})})(e,r),r}};class wy{constructor(e){let t;this.lastPath=[],this.editor=e;let r=this;"onselectionchange"in e.getDoc()||e.on("NodeChange click mouseup keyup focus",r=>{let n=e.selection.getRng(),o={startContainer:n.startContainer,startOffset:n.startOffset,endContainer:n.endContainer,endOffset:n.endOffset};"nodechange"!==r.type&&cV(o,t)||e.dispatch("SelectionChange"),t=o}),e.on("contextmenu",()=>{e.dispatch("SelectionChange")}),e.on("SelectionChange",()=>{let t=e.selection.getStart(!0);t&&dF(e)&&!r.isSameElementPath(t)&&e.dom.isChildOf(t,e.getBody())&&e.nodeChanged({selectionChange:!0})}),e.on("mouseup",t=>{!t.isDefaultPrevented()&&dF(e)&&("IMG"===e.selection.getNode().nodeName?uE.setEditorTimeout(e,()=>{e.nodeChanged()}):e.nodeChanged())})}nodeChanged(e={}){let t;let r=this.editor.selection;if(this.editor.initialized&&r&&!iG(this.editor)&&!this.editor.mode.isReadOnly()){let n=this.editor.getBody();(t=r.getStart(!0)||n).ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(t,n)||(t=n);let o=[];this.editor.dom.getParent(t,e=>e===n||(o.push(e),!1)),this.editor.dispatch("NodeChange",{...e,element:t,parents:o})}}isSameElementPath(e){let t;let r=this.editor,n=eb(r.dom.getParents(e,X,r.getBody()));if(n.length===this.lastPath.length){for(t=n.length;t>=0&&n[t]===this.lastPath[t];t--);if(-1===t)return this.lastPath=n,!0}return this.lastPath=n,!1}}let wC=j("x-tinymce/html"),wx="<!-- x-tinymce/html -->",ww=e=>wx+e,wE=e=>-1!==e.indexOf(wx),wk="%MCEPASTEBIN%",wS=e=>e.dom.get("mcepastebin"),w_=e=>P(e)&&"mcepastebin"===e.id,wN=e=>e===wk,wR=(e,t)=>(tL.each(t,t=>{e=S(t,RegExp)?e.replace(t,""):e.replace(t[0],t[1])}),e),wA=e=>wR(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(e,t,r)=>t||r?"\xa0":" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),wO=(e,t)=>({content:e,cancelled:t}),wT=(e,t)=>(e.insertContent(t,{merge:sl(e),paste:!0}),!0),wB=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),wD=(e,t,r)=>!(e.selection.isCollapsed()||!wB(t))&&(e.undoManager.extra(()=>{r(e,t)},()=>{e.execCommand("mceInsertLink",!1,t)}),!0),wP=(e,t,r)=>!!(wB(t)&&en(sy(e),e=>e3(t.toLowerCase(),`.${e.toLowerCase()}`)))&&(e.undoManager.extra(()=>{r(e,t)},()=>{e.insertContent('<img src="'+t+'">')}),!0),wL=(n=0,()=>"mceclip"+n++),wM=(e,t,r,n)=>{var o;let a=((e,t,r)=>{let n=e.dispatch("PastePreProcess",{content:t,internal:r}),o=((e,t)=>{let r=hl({sanitize:sv(e)},e.schema);r.addNodeFilter("meta",e=>{tL.each(e,e=>{e.remove()})});let n=r.parse(t,{forced_root_block:!1,isRootContent:!0});return u3({validate:!0},e.schema).serialize(n)})(e,n.content);return e.hasEventListeners("PastePostProcess")&&!n.isDefaultPrevented()?((e,t,r)=>{let n=e.dom.create("div",{style:"display:none"},t),o=e.dispatch("PastePostProcess",{node:n,internal:r});return wO(o.node.innerHTML,o.isDefaultPrevented())})(e,o,r):wO(o,n.isDefaultPrevented())})(e,t,r);a.cancelled||(o=a.content,n||!si(e)?wT(e,o):tL.each([wD,wP,wT],t=>!t(e,o,wT)))},wF=(e,t,r)=>{let n=r||wE(t);wM(e,t.replace(wx,""),n,!1)},wI=(e,t)=>{let r=e.dom.encode(t).replace(/\r\n/g,"\n"),n=((e,t,r)=>{let n=e.split(/\n\n/),o=((e,t)=>{let r="<"+e,n=eP(t,(e,t)=>t+'="'+o5.encodeAllRaw(e)+'"');return n.length&&(r+=" "+n.join(" ")),r+">"})(t,r),a="</"+t+">",l=eo(n,e=>e.split(/\n/).join("<br />"));return 1===l.length?l[0]:eo(l,e=>o+e+a).join("")})(ov(r,sd(e)),l4(e),l7(e));wM(e,n,!1,!0)},wU=e=>{let t={};if(e&&e.types)for(let r=0;r<e.types.length;r++){let n=e.types[r];try{t[n]=e.getData(n)}catch(e){t[n]=""}}return t},wz=(e,t)=>t in e&&e[t].length>0,wj=e=>wz(e,"text/html")||wz(e,"text/plain"),wH=(e,t,r)=>{let n="paste"===t.type?t.clipboardData:t.dataTransfer;if(st(e)&&n){let o=((e,t)=>{let r=t.items?ep(ek(t.items),e=>"file"===e.kind?[e.getAsFile()]:[]):[],n=t.files?ek(t.files):[];return es(r.length>0?r:n,(e=>{let t=sy(e);return e=>e2(e.type,"image/")&&en(t,t=>(e=>{let t=e.toLowerCase(),r={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return tL.hasOwn(r,t)?"image/"+r[t]:"image/"+t})(t)===e.type)})(e))})(e,n);if(o.length>0)return t.preventDefault(),Promise.all(eo(o,e=>g2(e).then(t=>({file:e,uri:t})))).then(t=>{r&&e.selection.setRng(r),ea(t,t=>{((e,t)=>{g0(t.uri).each(({data:r,type:n,base64Encoded:o})=>{let a=o?r:btoa(r),l=t.file,i=e.editorUpload.blobCache,s=i.getByData(a,n),d=null!=s?s:((e,t,r,n)=>{let o=wL(),a=ii(e)&&P(r.name),l=a?((e,t)=>{let r=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return P(r)?e.dom.encode(r[1]):void 0})(e,r.name):o,i=a?r.name:void 0,s=t.create(o,r,n,l,i);return t.add(s),s})(e,i,l,a);wF(e,`<img src="${d.blobUri()}">`,!1)})})(e,t)})}),!0}return!1},w$=(e,t,r,n)=>{var o;let a=wA(r),l=wz(t,wC())||wE(r),i=!l&&(o=a,!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(o)),s=wB(a);(wN(a)||!a.length||i&&!s)&&(n=!0),(n||s)&&(a=wz(t,"text/plain")&&i?t["text/plain"]:(e=>{let t=as(),r=hl({},t),n="",o=t.getVoidElements(),a=tL.makeMap("script noscript style textarea video audio iframe object"," "),l=t.getBlockElements(),i=e=>{let r=e.name;if("br"!==r){if("wbr"!==r){if(o[r]&&(n+=" "),a[r])n+=" ";else{if(3===e.type&&(n+=e.value),!(e.name in t.getVoidElements())){let t=e.firstChild;if(t)do i(t);while(t=t.next)}l[r]&&e.next&&(n+="\n","p"===r&&(n+="\n"))}}}else n+="\n"};return e=wR(e,[/<!\[[^\]]+\]>/g]),i(r.parse(e)),n})(a)),wN(a)||(n?wI(e,a):wF(e,a,l))},wV=(e,t,r)=>{let n;e.on("keydown",e=>{(cw.metaKeyPressed(e)&&86===e.keyCode||e.shiftKey&&45===e.keyCode)&&!e.isDefaultPrevented()&&(n=e.shiftKey&&86===e.keyCode)}),e.on("paste",o=>{var a,l;if(o.isDefaultPrevented()||tT.os.isAndroid()&&0===(null===(l=null===(a=o.clipboardData)||void 0===a?void 0:a.items)||void 0===l?void 0:l.length))return;let i="text"===r.get()||n;n=!1;let s=wU(o.clipboardData);!wj(s)&&wH(e,o,t.getLastRng()||e.selection.getRng())||(wz(s,"text/html")?(o.preventDefault(),w$(e,s,s["text/html"],i)):wz(s,"text/plain")&&wz(s,"text/uri-list")?(o.preventDefault(),w$(e,s,s["text/plain"],i)):(t.create(),uE.setEditorTimeout(e,()=>{let r=t.getHtml();t.remove(),w$(e,s,r,i)},0)))}),(e=>{let t=e=>e2(e,"webkit-fake-url"),r=e=>e2(e,"data:");e.parser.addNodeFilter("img",(n,o,a)=>{var l;if(!st(e)&&!0===(null===(l=a.data)||void 0===l?void 0:l.paste))for(let o of n){let n=o.attr("src");_(n)&&!o.attr("data-mce-object")&&n!==tT.transparentSrc&&(t(n)||!sc(e)&&r(n))&&o.remove()}})})(e)},wq=(e,t,r,n)=>{((e,t,r)=>{if(!e)return!1;try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",r),e.setData(wC(),t),!0}catch(e){return!1}})(e.clipboardData,t.html,t.text)?(e.preventDefault(),n()):r(t.html,n)},wW=e=>(t,r)=>{let{dom:n,selection:o}=e,a=n.create("div",{contenteditable:"false","data-mce-bogus":"all"}),l=n.create("div",{contenteditable:"true"},t);n.setStyles(a,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),a.appendChild(l),n.add(e.getBody(),a);let i=o.getRng();l.focus();let s=n.createRng();s.selectNodeContents(l),o.setRng(s),uE.setEditorTimeout(e,()=>{o.setRng(i),n.remove(a),r()},0)},wK=e=>({html:ww(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),wG=e=>!e.selection.isCollapsed()||!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),wY=(e,t)=>{var r,n;return c0.getCaretRangeFromPoint(null!==(r=t.clientX)&&void 0!==r?r:0,null!==(n=t.clientY)&&void 0!==n?n:0,e.getDoc())},wX=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},wQ=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,wJ=e=>tL.trim(e).replace(wQ,dR).toLowerCase(),wZ=(e,t,r)=>{let n=so(e);if(r||"all"===n||!sa(e))return t;let o=n?n.split(/[, ]/):[];if(o&&"none"!==n){let r=e.dom,n=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(e,t,a,l)=>{let i=r.parseStyle(r.decode(a)),s={};for(let e=0;e<o.length;e++){let t=i[o[e]],a=t,l=r.getStyle(n,o[e],!0);/color/.test(o[e])&&(a=wJ(a),l=wJ(l)),l!==a&&(s[o[e]]=t)}let d=r.serializeStyle(s,"span");return d?t+' style="'+d+'"'+l:t+l})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(e,t,r,n)=>t+' style="'+r+'"'+n)},w0=e=>{let t=aT(!1),r=aT(ss(e)?"text":"html"),n=(e=>{let t=aT(null);return{create:()=>((e,t)=>{let{dom:r,selection:n}=e,o=e.getBody();t.set(n.getRng());let a=r.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},wk);tT.browser.isFirefox()&&r.setStyle(a,"left","rtl"===r.getStyle(o,"direction",!0)?65535:-65535),r.bind(a,"beforedeactivate focusin focusout",e=>{e.stopPropagation()}),a.focus(),n.select(a,!0)})(e,t),remove:()=>((e,t)=>{let r=e.dom;if(wS(e)){let n;let o=t.get();for(;n=wS(e);)r.remove(n),r.unbind(n);o&&e.selection.setRng(o)}t.set(null)})(e,t),getEl:()=>wS(e),getHtml:()=>(e=>{let t=e.dom,r=(e,r)=>{e.appendChild(r),t.remove(r,!0)},[n,...o]=es(e.getBody().childNodes,w_);ea(o,e=>{r(n,e)});let a=t.select("div[id=mcepastebin]",n);for(let e=a.length-1;e>=0;e--){let o=t.create("div");n.insertBefore(o,a[e]),r(o,a[e])}return n?n.innerHTML:""})(e),getLastRng:t.get}})(e);(tT.browser.isChromium()||tT.browser.isSafari())&&((e,t)=>{e.on("PastePreProcess",r=>{r.content=t(e,r.content,r.internal)})})(e,wZ),e.addCommand("mceTogglePlainTextPaste",()=>{"text"===r.get()?(r.set("html"),cx(e,!1)):(r.set("text"),cx(e,!0)),e.focus()}),e.addCommand("mceInsertClipboardContent",(t,r)=>{r.html&&wF(e,r.html,r.internal),r.text&&wI(e,r.text)}),(e=>{let t=t=>r=>{t(e,r)},r=sr(e);L(r)&&e.on("PastePreProcess",t(r));let n=sn(e);L(n)&&e.on("PastePostProcess",t(n))})(e),e.on("PreInit",()=>{e.on("cut",t=>{!t.isDefaultPrevented()&&wG(e)&&wq(t,wK(e),wW(e),()=>{if(tT.browser.isChromium()||tT.browser.isFirefox()){let t=e.selection.getRng();uE.setEditorTimeout(e,()=>{e.selection.setRng(t),e.execCommand("Delete")},0)}else e.execCommand("Delete")})}),e.on("copy",t=>{!t.isDefaultPrevented()&&wG(e)&&wq(t,wK(e),wW(e),I)}),se(e)&&e.on("dragend dragover draggesture dragdrop drop drag",e=>{e.preventDefault(),e.stopPropagation()}),st(e)||e.on("drop",e=>{let t=e.dataTransfer;t&&en(t.files,e=>/^image\//.test(e.type))&&e.preventDefault()}),e.on("drop",r=>{if(r.isDefaultPrevented())return;let n=wY(e,r);if(D(n))return;let o=wU(r.dataTransfer),a=wz(o,wC());if((!wj(o)||(e=>{let t=e["text/plain"];return!!t&&0===t.indexOf("file://")})(o))&&wH(e,r,n))return;let l=o[wC()],i=l||o["text/html"]||o["text/plain"],s=((e,t,r,n)=>{let o=e.getParent(r,e=>oL(t,e));if(o&&eF(n,"text/html")){let e=(new DOMParser).parseFromString(n["text/html"],"text/html").body;return!O(e.querySelector(o.nodeName.toLowerCase()))}return!1})(e.dom,e.schema,n.startContainer,o);t.get()&&!s||i&&(r.preventDefault(),uE.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{l&&e.execCommand("Delete"),wX(e,n);let t=wA(i);o["text/html"]?wF(e,t,a):wI(e,t)})}))}),e.on("dragstart",e=>{t.set(!0)}),e.on("dragover dragend",r=>{st(e)&&!t.get()&&(r.preventDefault(),wX(e,wY(e,r))),"dragend"===r.type&&t.set(!1)}),wV(e,n,r)})},w1=e=>nF(e.dom),w2=e=>t=>rm(ro(e),t),w3=(e,t)=>rz(ro(e),w1,w2(t)),w8=(e,t,r)=>{let n=new nh(e,t),o=r?n.next.bind(n):n.prev.bind(n),a=e;for(let t=r?e:o();t&&!nP(t);t=o())om(t)&&(a=t);return a},w5=e=>{let t=((e,t)=>{let r=ly.fromRangeStart(e).getNode(),n=rz(ro(r),e=>nM(e.dom)||nG(e),w2(t)).getOr(ro(t)).dom,o=w8(r,n,!1),a=w8(r,n,!0),l=document.createRange();return w3(o,n).fold(()=>{nR(o)?l.setStart(o,0):l.setStartBefore(o)},e=>l.setStartBefore(e.dom)),w3(a,n).fold(()=>{nR(a)?l.setEnd(a,a.data.length):l.setEndAfter(a)},e=>l.setEndAfter(e.dom)),l})(e.selection.getRng(),e.getBody());e.selection.setRng(f$(t))};(d=f||(f={})).Before="before",d.After="after";let w6=(e,t)=>Math.abs(e.left-t),w9=(e,t)=>Math.abs(e.right-t),w4=(e,t)=>ec(es(e,e=>t>=e.top&&t<=e.bottom),(e,t)=>e.fold(()=>Q.some(t),e=>{let r=Math.min(t.left,e.left),n=Math.min(t.top,e.top),o=Math.max(t.right,e.right),a=Math.max(t.bottom,e.bottom);return Q.some({top:n,right:o,bottom:a,left:r,width:o-r,height:a-n})}),Q.none()).fold(()=>[[],e],t=>{let{pass:r,fail:n}=ei(e,e=>((e,t)=>{let r=Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top))/Math.min(e.height,t.height);return e.top<t.bottom&&e.bottom>t.top&&r>.5})(e,t));return[r,n]}),w7=(e,t,r)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),Ee=(e,t,r)=>{let n=e=>om(e.node)?Q.some(e):ny(e.node)?Ee(ek(e.node.childNodes),t,r):Q.none(),o=(e,o)=>{let a=eC(e,(e,n)=>o(e,t,r)-o(n,t,r));return((e,o)=>{if(e.length>=2){let a=n(e[0]).getOr(e[0]),l=n(e[1]).getOr(e[1]);if(2>Math.abs(o(a,t,r)-o(l,t,r))){if(nR(a.node))return Q.some(a);if(nR(l.node))return Q.some(l)}}return Q.none()})(a,o).orThunk(()=>eS(a,n))},[a,l]=w4(v0(e),r),{pass:i,fail:s}=ei(l,e=>e.top<r);return o(a,w7).orThunk(()=>o(s,lt)).orThunk(()=>o(i,lt))},Et=(e,t,r)=>((e,t,r)=>{let n=ro(e),o=rp(n),a=rs(o,t,r).filter(e=>rf(n,e)).getOr(n);return((e,t,r,n)=>{let o=(t,a)=>{let l=es(t.dom.childNodes,q(e=>ny(e)&&e.classList.contains("mce-drag-container")));return a.fold(()=>Ee(l,r,n),e=>{let t=es(l,t=>t!==e.dom);return Ee(t,r,n)}).orThunk(()=>(rm(t,e)?Q.none():rv(t)).bind(e=>o(e,Q.some(t))))};return o(t,Q.none())})(n,a,t,r)})(e,t,r).filter(e=>sT(e.node)).map(e=>({node:e.node,position:w6(e,t)<w9(e,t)?f.Before:f.After})),Er=e=>{var t,r;let n=e.getBoundingClientRect(),o=e.ownerDocument,a=o.documentElement,l=o.defaultView;return{top:n.top+(null!==(t=null==l?void 0:l.scrollY)&&void 0!==t?t:0)-a.clientTop,left:n.left+(null!==(r=null==l?void 0:l.scrollX)&&void 0!==r?r:0)-a.clientLeft}},En=e=>({target:e,srcElement:e}),Eo=e=>(t,r)=>{var n;return n=En(r),{...t,dataTransfer:null,type:e,...n}},Ea=Eo("dragstart"),El=Eo("drop"),Ei=e=>((e,t)=>{let r=W("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,srcElement:null,target:null,timeStamp:0,type:"dragend",composedPath:r,initEvent:r,preventDefault:I,stopImmediatePropagation:I,stopPropagation:I,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:null,...t}})(0,En(e)),Es=Eo("dragend"),Ed=((...e)=>t=>{for(let r=0;r<e.length;r++)if(e[r](t))return!0;return!1})(nF,nM),Ec=(e,t,r,n)=>{let o=e.dom,a=t.cloneNode(!0);o.setStyles(a,{width:r,height:n}),o.setAttrib(a,"data-mce-selected",null);let l=o.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return o.setStyles(l,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:r,height:n}),o.setStyles(a,{margin:0,boxSizing:"border-box"}),l.appendChild(a),l},Eu=(e,t)=>r=>()=>{let n="left"===e?r.scrollX:r.scrollY;r.scroll({[e]:n+t,behavior:"smooth"})},Em=Eu("left",-32),Ef=Eu("left",32),Eg=Eu("top",-32),Ep=Eu("top",32),Eh=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},Eb=(e,t)=>{let r=aU((e,r)=>{t._selectionOverrides.hideFakeCaret(),Et(t.getBody(),e,r).fold(()=>t.selection.placeCaretAt(e,r),n=>{let o=t._selectionOverrides.showCaret(1,n.node,n.position===f.Before,!1);o?t.selection.setRng(o):t.selection.placeCaretAt(e,r)})},0);return t.on("remove",r.cancel),n=>e.on(o=>{var a,l,i,s,d,c;let u=Math.max(Math.abs(n.screenX-o.screenX),Math.abs(n.screenY-o.screenY));if(!o.dragging&&u>10){if(t.dispatch("dragstart",Ea(n,o.element)).isDefaultPrevented())return;o.dragging=!0,t.focus()}if(o.dragging){let u=n.currentTarget===t.getDoc().documentElement,m=(i=t.inline?Er(t.getBody()):{left:0,top:0},s=(e=>{let t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}})(t),{pageX:(c={pageX:(d=((e,t)=>{if(t.target.ownerDocument!==e.getDoc()){let r=Er(e.getContentAreaContainer()),n=(e=>{let t=e.getBody(),r=e.getDoc().documentElement,n={left:t.scrollLeft,top:t.scrollTop},o={left:t.scrollLeft||r.scrollLeft,top:t.scrollTop||r.scrollTop};return e.inline?n:o})(e);return{left:t.pageX-r.left+n.left,top:t.pageY-r.top+n.top}}return{left:t.pageX,top:t.pageY}})(t,n)).left-i.left+s.left,pageY:d.top-i.top+s.top}).pageX-o.relX,pageY:c.pageY+5});a=o.ghost,l=t.getBody(),a.parentNode!==l&&l.appendChild(a),((e,t,r,n,o,a,l,i,s,d,c,u)=>{let m=0,f=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+r>o&&(m=t.pageX+r-o),t.pageY+n>a&&(f=t.pageY+n-a),e.style.width=r-m+"px",e.style.height=n-f+"px";let g=s.clientHeight,p=s.clientWidth,h=l+s.getBoundingClientRect().top,b=i+s.getBoundingClientRect().left;c.on(e=>{e.intervalId.clear(),e.dragging&&u&&(l+8>=g?e.intervalId.set(Ep(d)):l-8<=0?e.intervalId.set(Eg(d)):i+8>=p?e.intervalId.set(Ef(d)):i-8<=0?e.intervalId.set(Em(d)):h+16>=window.innerHeight?e.intervalId.set(Ep(window)):h-16<=0?e.intervalId.set(Eg(window)):b+16>=window.innerWidth?e.intervalId.set(Ef(window)):b-16<=0&&e.intervalId.set(Em(window)))})})(o.ghost,m,o.width,o.height,o.maxX,o.maxY,n.clientY,n.clientX,t.getContentAreaContainer(),t.getWin(),e,u),r.throttle(n.clientX,n.clientY)}})},Ev=(e,t,r)=>{e.on(e=>{if(e.intervalId.clear(),e.dragging){let n=r.fold(()=>Ei(e.element),t=>Es(t,e.element));t.dispatch("dragend",n)}}),Ey(e)},Ey=e=>{e.on(e=>{e.intervalId.clear(),Eh(e.ghost)}),e.clear()},EC=e=>{let t=aI(),r=aR.DOM,n=document,o=r=>{var n,o;if(0===r.button){let a=em(e.dom.getParents(r.target),Ed).getOr(null);if(P(a)&&(n=e.dom,o=e.getBody(),nF(a)&&a!==o&&n.isEditable(a.parentElement))){let n=e.dom.getPos(a),o=e.getBody(),l=e.getDoc().documentElement;t.set({element:a,dragging:!1,screenX:r.screenX,screenY:r.screenY,maxX:(e.inline?o.scrollWidth:l.offsetWidth)-2,maxY:(e.inline?o.scrollHeight:l.offsetHeight)-2,relX:r.pageX-n.x,relY:r.pageY-n.y,width:a.offsetWidth,height:a.offsetHeight,ghost:Ec(e,a,a.offsetWidth,a.offsetHeight),intervalId:aF(100)})}}},a=Eb(t,e),l=r=>{t.on(t=>{var n,o,a;if(t.intervalId.clear(),t.dragging){if(o=(e=>{let t=e.getSel();if(P(t)){let e=t.getRangeAt(0).startContainer;return nR(e)?e.parentNode:e}return null})(e.selection),a=t.element,!D(o)&&o!==a&&!e.dom.isChildOf(o,a)&&e.dom.isEditable(o)){let o=(e=>{let t=e.cloneNode(!0);return t.removeAttribute("data-mce-selected"),t})(t.element),a=null!==(n=e.getDoc().elementFromPoint(r.clientX,r.clientY))&&void 0!==n?n:e.getBody();e.dispatch("drop",El(r,a)).isDefaultPrevented()||e.undoManager.transact(()=>{((e,t)=>{let r=e.getParent(t.parentNode,e.isBlock);Eh(t),r&&r!==e.getRoot()&&e.isEmpty(r)&&n6(ro(r))})(e.dom,t.element),e.insertContent(e.dom.getOuterHTML(o)),e._selectionOverrides.hideFakeCaret()})}e.dispatch("dragend",Es(r,e.getBody()))}}),Ey(t)},i=r=>Ev(t,e,Q.some(r));e.on("mousedown",o),e.on("mousemove",a),e.on("mouseup",l),r.bind(n,"mousemove",a),r.bind(n,"mouseup",i),e.on("remove",()=>{r.unbind(n,"mousemove",a),r.unbind(n,"mouseup",i)}),e.on("keydown",r=>{r.keyCode===cw.ESC&&Ev(t,e,Q.none())})},Ex=(e,t)=>fA(e.getBody(),t),Ew=e=>{let t;let r=e.selection,n=e.dom,o=e.getBody(),a=sR(e,o,n.isBlock,()=>uB(e)),l="sel-"+n.uniqueId(),i="data-mce-selected",s=e=>e!==o&&(nF(e)||nz(e))&&n.isChildOf(e,o)&&n.isEditable(e.parentNode),d=(t,n,o,l=!0)=>e.dispatch("ShowCaret",{target:n,direction:t,before:o}).isDefaultPrevented()?null:(l&&r.scrollIntoView(n,-1===t),a.show(o,n)),c=e=>ot(e)||oa(e)||ol(e),u=e=>c(e.startContainer)||c(e.endContainer),m=t=>{let r=e.schema.getVoidElements(),o=n.createRng(),a=t.startContainer,l=t.startOffset,i=t.endContainer,s=t.endOffset;return eF(r,a.nodeName.toLowerCase())?0===l?o.setStartBefore(a):o.setStartAfter(a):o.setStart(a,l),eF(r,i.nodeName.toLowerCase())?0===s?o.setEndBefore(i):o.setEndAfter(i):o.setEnd(i,s),o},g=(a,c)=>{if(!a)return null;if(a.collapsed){if(!u(a)){let e=c?1:-1,t=sK(e,o,a),r=t.getNode(!c);if(P(r)){if(sT(r))return d(e,r,!!c&&!t.isAtEnd(),!1);if(oe(r)&&nF(r.nextSibling)){let e=n.createRng();return e.setStart(r,0),e.setEnd(r,0),e}}let l=t.getNode(c);if(P(l)){if(sT(l))return d(e,l,!c&&!t.isAtEnd(),!1);if(oe(l)&&nF(l.previousSibling)){let e=n.createRng();return e.setStart(l,1),e.setEnd(l,1),e}}}return null}let m=a.startContainer,f=a.startOffset,g=a.endOffset;if(nR(m)&&0===f&&nF(m.parentNode)&&(m=m.parentNode,f=n.nodeIndex(m),m=m.parentNode),!ny(m))return null;if(g===f+1&&m===a.endContainer){let o=m.childNodes[f];if(s(o))return(o=>{let a=o.cloneNode(!0),s=e.dispatch("ObjectSelected",{target:o,targetClone:a});if(s.isDefaultPrevented())return null;let d=((t,o)=>{let a=ro(e.getBody()),i=e.getDoc(),s=rH(a,"#"+l).getOrThunk(()=>{let e=ra('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',i);return tJ(e,"id",l),r8(a,e),e}),d=n.createRng();r9(s),r6(s,[ri("\xa0",i),ro(o),ri("\xa0",i)]),d.setStart(s.dom.firstChild,1),d.setEnd(s.dom.lastChild,0),rY(s,{top:n.getPos(t,e.getBody()).y+"px"}),uu(s);let c=r.getSel();return c&&(c.removeAllRanges(),c.addRange(d)),d})(o,s.targetClone),c=ro(o);return ea(ng(ro(e.getBody()),"*[data-mce-selected]"),e=>{rm(c,e)||t3(e,i)}),n.getAttrib(o,i)||o.setAttribute(i,"1"),t=o,h(),d})(o)}return null},p=()=>{t&&t.removeAttribute(i),rH(ro(e.getBody()),"#"+l).each(r4),t=null},h=()=>{a.hide()};return hU(e)||(e.on("click",t=>{n.isEditable(t.target)||(t.preventDefault(),e.focus())}),e.on("blur NewBlock",p),e.on("ResizeWindow FullscreenStateChanged",a.reposition),e.on("tap",t=>{let r=t.target,n=Ex(e,r);nF(n)?(t.preventDefault(),b8(e,n).each(g)):s(r)&&b8(e,r).each(g)},!0),e.on("mousedown",t=>{let a=t.target;if(a!==o&&"HTML"!==a.nodeName&&!n.isChildOf(a,o)||!((e,t,r)=>{let n=ro(e.getBody()),o=e.inline?n:ro(rp(n).dom.documentElement),a=((e,t,r,n)=>{let o=t.dom.getBoundingClientRect();return{x:r-(e?o.left+t.dom.clientLeft+bs(t):0),y:n-(e?o.top+t.dom.clientTop+bi(t):0)}})(e.inline,o,t,r);return((e,t,r)=>{let n=ba(e),o=bl(e);return t>=0&&r>=0&&t<=n&&r<=o})(o,a.x,a.y)})(e,t.clientX,t.clientY))return;p(),h();let l=Ex(e,a);nF(l)?(t.preventDefault(),b8(e,l).each(g)):Et(o,t.clientX,t.clientY).each(n=>{var o;t.preventDefault(),(o=d(1,n.node,n.position===f.Before,!1))&&r.setRng(o),ny(l)?l.focus():e.getBody().focus()})}),e.on("keypress",e=>{cw.modifierPressed(e)||nF(r.getNode())&&e.preventDefault()}),e.on("GetSelectionRange",e=>{let r=e.range;if(t){if(!t.parentNode)return void(t=null);(r=r.cloneRange()).selectNode(t),e.range=r}}),e.on("SetSelectionRange",e=>{e.range=m(e.range);let t=g(e.range,e.forward);t&&(e.range=t)}),e.on("AfterSetSelectionRange",e=>{let t=e.range,r=t.startContainer.parentElement;u(t)||ny(r)&&"mcepastebin"===r.id||h(),P(r)&&n.hasClass(r,"mce-offscreen-selection")||p()}),EC(e),iZ(e)&&(e=>{let t=t=>{if(!t.isDefaultPrevented()){let r=t.dataTransfer;r&&(er(r.types,"Files")||r.files.length>0)&&(t.preventDefault(),"drop"===t.type&&bg(e,"Dropped file type is not supported"))}},r=r=>{u_(e,r.target)&&t(r)},n=()=>{let n=aR.DOM,o=e.dom,a=document,l=e.inline?e.getBody():e.getDoc(),i=["drop","dragover"];ea(i,e=>{n.bind(a,e,r),o.bind(l,e,t)}),e.on("remove",()=>{ea(i,e=>{n.unbind(a,e,r),o.unbind(l,e,t)})})};e.on("init",()=>{uE.setEditorTimeout(e,n,0)})})(e),(e=>{let t=aU(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){let t=e.selection.getRng();if(t.collapsed){let r=b5(e,t,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{t.throttle()}),e.on("blur",()=>{t.cancel()})})(e),(e=>{e.on("init",()=>{e.on("focusin",t=>{let r=t.target;if(nz(r)){let t=fA(e.getBody(),r),n=nF(t)?t:r;e.selection.getNode()!==n&&b8(e,n).each(t=>e.selection.setRng(t))}})})})(e)),{showCaret:d,showBlockCaretContainer:e=>{e.hasAttribute("data-mce-caret")&&(oi(e),r.scrollIntoView(e))},hideFakeCaret:h,destroy:()=>{a.destroy(),t=null}}},EE=(e,t)=>{let r=t;for(let t=e.previousSibling;nR(t);t=t.previousSibling)r+=t.data.length;return r},Ek=(e,t,r,n,o)=>{if(nR(r)&&(n<0||n>r.data.length))return[];let a=o&&nR(r)?[EE(r,n)]:[n],l=r;for(;l!==t&&l.parentNode;)a.push(e.nodeIndex(l,o)),l=l.parentNode;return l===t?a.reverse():[]},ES=(e,t,r,n,o,a,l=!1)=>({start:Ek(e,t,r,n,l),end:Ek(e,t,o,a,l)}),E_=(e,t)=>{let r=t.slice(),n=r.pop();return M(n)?ec(r,(e,t)=>e.bind(e=>Q.from(e.childNodes[t])),Q.some(e)).bind(e=>nR(e)&&(n<0||n>e.data.length)?Q.none():Q.some({node:e,offset:n})):Q.none()},EN=(e,t)=>E_(e,t.start).bind(({node:r,offset:n})=>E_(e,t.end).map(({node:e,offset:t})=>{let o=document.createRange();return o.setStart(r,n),o.setEnd(e,t),o})),ER=(e,t,r)=>{if(t&&e.isEmpty(t)&&!r(t)){let n=t.parentNode;e.remove(t),ER(e,n,r)}},EA=(e,t,r,n=!0)=>{let o=t.startContainer.parentNode,a=t.endContainer.parentNode;t.deleteContents(),n&&!r(t.startContainer)&&(nR(t.startContainer)&&0===t.startContainer.data.length&&e.remove(t.startContainer),nR(t.endContainer)&&0===t.endContainer.data.length&&e.remove(t.endContainer),ER(e,o,r),o!==a&&ER(e,a,r))},EO=(e,t)=>Q.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),ET=(e,t,r)=>{let n=e.dynamicPatternsLookup({text:r,block:t});return{...e,blockPatterns:lq(n).concat(e.blockPatterns),inlinePatterns:lW(n).concat(e.inlinePatterns)}},EB=(e,t,r,n)=>{let o=e.createRng();return o.setStart(t,0),o.setEnd(r,n),o.toString()},ED=(e,t,r)=>{((e,t,r)=>{if(nR(e)&&0>=e.length)return Q.some(CE(e,0));{let t=a8(Ck);return Q.from(t.forwards(e,0,CS(e),r)).map(e=>CE(e.container,0))}})(t,0,t).each(n=>{var o;let a=n.container;CR(a,r.start.length,t).each(r=>{let n=e.createRng();n.setStart(a,0),n.setEnd(r.container,r.offset),EA(e,n,e=>e===t)});let l=ro(a),i=nV(l);/^\s[^\s]/.test(i)&&(o=i.slice(1),n$.set(l,o))})},EP=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),EL=(e,t)=>{let r=e.createRng();return r.setStartAfter(t.start),r.setEndBefore(t.end),r},EM=(e,t,r)=>{let n=EN(e.getRoot(),r).getOrDie("Unable to resolve path range"),o=n.startContainer,a=n.endContainer,l=0===n.endOffset?a:a.splitText(n.endOffset),i=0===n.startOffset?o:o.splitText(n.startOffset),s=i.parentNode;return{prefix:t,end:l.parentNode.insertBefore(EP(e,t+"-end"),l),start:s.insertBefore(EP(e,t+"-start"),i)}},EF=(e,t,r)=>{ER(e,e.get(t.prefix+"-end"),r),ER(e,e.get(t.prefix+"-start"),r)},EI=e=>0===e.start.length,EU=(e,t,r,n)=>{let o=t.start;return CA(e,n.container,n.offset,(e,t)=>{let r=e.data.substring(0,t),n=r.lastIndexOf(o.charAt(o.length-1)),a=r.lastIndexOf(o);return -1!==a?a+o.length:-1!==n?n+1:-1},r).bind(n=>{var a,l;let i=null!==(l=null===(a=r.textContent)||void 0===a?void 0:a.indexOf(o))&&void 0!==l?l:-1;if(-1!==i&&n.offset>=i+o.length){let t=e.createRng();return t.setStart(n.container,n.offset-o.length),t.setEnd(n.container,n.offset),Q.some(t)}{let a=n.offset-o.length;return CN(n.container,a,r).map(t=>{let r=e.createRng();return r.setStart(t.container,t.offset),r.setEnd(n.container,n.offset),r}).filter(e=>e.toString()===o).orThunk(()=>EU(e,t,r,CE(n.container,0)))}})},Ez=(e,t,r,n)=>{let o=e.dom,a=o.getRoot(),l=r.pattern,i=r.position.container,s=r.position.offset;return CN(i,s-r.pattern.end.length,t).bind(d=>{let c=ES(o,a,d.container,d.offset,i,s,n);if(EI(l))return Q.some({matches:[{pattern:l,startRng:c,endRng:c}],position:d});{let i=Ej(e,r.remainingPatterns,d.container,d.offset,t,n),s=i.getOr({matches:[],position:d}),u=s.position,m=((e,t,r,n,o,a=!1)=>{if(0===t.start.length&&!a){let t=e.createRng();return t.setStart(r,n),t.setEnd(r,n),Q.some(t)}return C_(r,n,o).bind(r=>EU(e,t,o,r).bind(e=>{var t;return a&&(e.endContainer===r.container&&e.endOffset===r.offset||0===r.offset&&(null===(t=e.endContainer.textContent)||void 0===t?void 0:t.length)===e.endOffset)?Q.none():Q.some(e)}))})(o,l,u.container,u.offset,t,i.isNone());return m.map(e=>{let t=((e,t,r,n=!1)=>ES(e,t,r.startContainer,r.startOffset,r.endContainer,r.endOffset,n))(o,a,e,n);return{matches:s.matches.concat([{pattern:l,startRng:t,endRng:c}]),position:CE(e.startContainer,e.startOffset)}})}})},Ej=(e,t,r,n,o,a)=>{let l=e.dom;return C_(r,n,l.getRoot()).bind(i=>{let s=EB(l,o,r,n);for(let l=0;l<t.length;l++){let d=t[l];if(!e3(s,d.end))continue;let c=t.slice();c.splice(l,1);let u=Ez(e,o,{pattern:d,remainingPatterns:c,position:i},a);if(u.isNone()&&n>0)return Ej(e,t,r,n-1,o,a);if(u.isSome())return u}return Q.none()})},EH=(e,t,r)=>{e.selection.setRng(r),"inline-format"===t.type?ea(t.format,t=>{e.formatter.apply(t)}):e.execCommand(t.cmd,!1,t.value)},E$=(e,t,r,n,o,a)=>((e,t)=>{let r=eh(e,e=>en(t,t=>e.pattern.start===t.pattern.start&&e.pattern.end===t.pattern.end));return e.length===t.length?r?e:t:e.length>t.length?e:t})(Ej(e,o.inlinePatterns,r,n,t,a).fold(()=>[],e=>e.matches),Ej(e,eC(o.inlinePatterns,(e,t)=>t.end.length-e.end.length),r,n,t,a).fold(()=>[],e=>e.matches)),EV=(e,t)=>{if(0===t.length)return;let r=e.dom,n=e.selection.getBookmark(),o=((e,t)=>{let r=aZ("mce_textpattern"),n=ed(t,(t,n)=>{let o=EM(e,r+`_end${t.length}`,n.endRng);return t.concat([{...n,endMarker:o}])},[]);return ed(n,(t,o)=>{let a=n.length-t.length-1,l=EI(o.pattern)?o.endMarker:EM(e,r+`_start${a}`,o.startRng);return t.concat([{...o,startMarker:l}])},[])})(r,t);ea(o,t=>{let n=r.getParent(t.startMarker.start,r.isBlock),o=e=>e===n;EI(t.pattern)?((e,t,r,n)=>{let o=EL(e.dom,r);EA(e.dom,o,n),EH(e,t,o)})(e,t.pattern,t.endMarker,o):((e,t,r,n,o)=>{let a=e.dom,l=EL(a,n),i=EL(a,r);EA(a,i,o),EA(a,l,o);let s={prefix:r.prefix,start:r.end,end:n.start},d=EL(a,s);EH(e,t,d)})(e,t.pattern,t.startMarker,t.endMarker,o),EF(r,t.endMarker,o),EF(r,t.startMarker,o)}),e.selection.moveToBookmark(n)},Eq=(e,t)=>{let r=e.selection.getRng();return EO(e,r).map(n=>{var o;let a=Math.max(0,r.startOffset),l=ET(t,n,null!==(o=n.textContent)&&void 0!==o?o:""),i=E$(e,n,r.startContainer,a,l,!0),s=((e,t,r,n)=>{var o;let a=e.dom,l=l4(e);if(!a.is(t,l))return[];let i=null!==(o=t.textContent)&&void 0!==o?o:"";return((e,t)=>{let r=eC(e,(e,t)=>t.start.length-e.start.length),n=t.replace("\xa0"," ");return em(r,e=>0===t.indexOf(e.start)||0===n.indexOf(e.start))})(r.blockPatterns,i).map(e=>tL.trim(i).length===e.start.length?[]:[{pattern:e,range:ES(a,a.getRoot(),t,0,t,0,!0)}]).getOr([])})(e,n,l);return(s.length>0||i.length>0)&&(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{e.insertContent("\uFEFF"),EV(e,i),((e,t)=>{if(0===t.length)return;let r=e.selection.getBookmark();ea(t,t=>((e,t)=>{let r=e.dom,n=t.pattern,o=EN(r.getRoot(),t.range).getOrDie("Unable to resolve path range");return EO(e,o).each(t=>{"block-format"===n.type?((e,t)=>{let r=t.get(e);return A(r)&&ew(r).exists(e=>eF(e,"block"))})(n.format,e.formatter)&&e.undoManager.transact(()=>{ED(e.dom,t,n),e.formatter.apply(n.format)}):"block-command"===n.type&&e.undoManager.transact(()=>{ED(e.dom,t,n),e.execCommand(n.cmd,!1,n.value)})}),!0})(e,t)),e.selection.moveToBookmark(r)})(e,s);let t=e.selection.getRng(),r=C_(t.startContainer,t.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),r.each(t=>{let r=t.container;"\uFEFF"===r.data.charAt(t.offset-1)&&(r.deleteData(t.offset-1,1),ER(e.dom,r.parentNode,t=>t===e.dom.getRoot()))})}),!0)}).getOr(!1)},EW=(e,t,r)=>{for(let n=0;n<e.length;n++)if(r(e[n],t))return!0;return!1},EK=e=>{let t=tL.each,r=cw.BACKSPACE,n=cw.DELETE,o=e.dom,a=e.selection,l=e.parser,i=tT.browser,s=i.isFirefox(),d=i.isChromium()||i.isSafari(),c=tT.deviceType.isiPhone()||tT.deviceType.isiPad(),u=tT.os.isMacOS()||tT.os.isiOS(),m=(t,r)=>{try{e.getDoc().execCommand(t,!1,String(r))}catch(e){}},f=e=>e.isDefaultPrevented(),g=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},p=()=>{e.inline||o.bind(e.getDoc(),"mousedown mouseup",t=>{let r;if(t.target===e.getDoc().documentElement){if(r=a.getRng(),e.getBody().focus(),"mousedown"===t.type){if(ot(r.startContainer))return;a.placeCaretAt(t.clientX,t.clientY)}else a.setRng(r)}})},h=()=>{Range.prototype.getClientRects||e.on("mousedown",t=>{if(!f(t)&&"HTML"===t.target.nodeName){let t=e.getBody();t.blur(),uE.setEditorTimeout(e,()=>{t.focus()})}})},b=()=>{let t=i2(e);e.on("click",r=>{let n=r.target;/^(IMG|HR)$/.test(n.nodeName)&&o.isEditable(n.parentNode)&&(r.preventDefault(),e.selection.select(n),e.nodeChanged()),"A"===n.nodeName&&o.hasClass(n,t)&&0===n.childNodes.length&&o.isEditable(n.parentNode)&&(r.preventDefault(),a.select(n))})},v=()=>{e.on("keydown",e=>{if(!f(e)&&e.keyCode===r&&a.isCollapsed()&&0===a.getRng().startOffset){let t=a.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}return!0})},y=()=>{iY(e)||e.on("BeforeExecCommand mousedown",()=>{m("StyleWithCSS",!1),m("enableInlineTableEditing",!1),iN(e)||m("enableObjectResizing",!1)})},C=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},x=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},w=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",t=>{let r;"HTML"===t.target.nodeName&&(r=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(r),e.selection.normalize(),e.nodeChanged())}))},E=()=>{u&&e.on("keydown",t=>{!cw.metaKeyPressed(t)||t.shiftKey||37!==t.keyCode&&39!==t.keyCode||(t.preventDefault(),e.selection.getSel().modify("move",37===t.keyCode?"backward":"forward","lineboundary"))})},k=()=>{e.on("click",e=>{let t=e.target;do if("A"===t.tagName)return void e.preventDefault();while(t=t.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},S=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",e=>{e.preventDefault()})})};return hU(e)?(d&&(p(),b(),S(),g(),c&&(x(),w(),k())),s&&(h(),y(),C(),E())):(e.on("keydown",t=>{if(f(t)||t.keyCode!==cw.BACKSPACE)return;let r=a.getRng(),n=r.startContainer,l=r.startOffset,i=o.getRoot(),s=n;if(r.collapsed&&0===l){for(;s.parentNode&&s.parentNode.firstChild===s&&s.parentNode!==i;)s=s.parentNode;"BLOCKQUOTE"===s.nodeName&&(e.formatter.toggle("blockquote",void 0,s),(r=o.createRng()).setStart(n,0),r.setEnd(n,0),a.setRng(r))}}),(()=>{let t=e=>{let t=o.create("body"),r=e.cloneContents();return t.appendChild(r),a.serializer.serialize(t,{format:"html"})};e.on("keydown",a=>{let l=a.keyCode;if(!f(a)&&(l===n||l===r)&&e.selection.isEditable()){let r=e.selection.isCollapsed(),n=e.getBody();if(r&&!o.isEmpty(n)||!r&&!(r=>{let n=t(r),a=o.createRng();return a.selectNode(e.getBody()),n===t(a)})(e.selection.getRng()))return;a.preventDefault(),e.setContent(""),n.firstChild&&o.isBlock(n.firstChild)?e.selection.setCursorLocation(n.firstChild,0):e.selection.setCursorLocation(n,0),e.nodeChanged()}})})(),tT.windowsPhone||e.on("keyup focusin mouseup",t=>{cw.modifierPressed(t)||(e=>{let t=e.getBody(),r=e.selection.getRng();return r.startContainer===r.endContainer&&r.startContainer===t&&0===r.startOffset&&r.endOffset===t.childNodes.length})(e)||a.normalize()},!0),d&&(p(),b(),e.on("init",()=>{m("DefaultParagraphSeparator",l4(e))}),S(),v(),l.addNodeFilter("br",e=>{let t=e.length;for(;t--;)"Apple-interchange-newline"===e[t].attr("class")&&e[t].remove()}),c?(x(),w(),k()):g()),s&&(e.on("keydown",t=>{if(!f(t)&&t.keyCode===r&&e.getBody().getElementsByTagName("hr").length&&a.isCollapsed()&&0===a.getRng().startOffset){let e=a.getNode(),r=e.previousSibling;if("HR"===e.nodeName)return o.remove(e),void t.preventDefault();r&&r.nodeName&&"hr"===r.nodeName.toLowerCase()&&(o.remove(r),t.preventDefault())}}),h(),(()=>{let r=()=>{let r=o.getAttribs(a.getStart().cloneNode(!1));return()=>{let n=a.getStart();n!==e.getBody()&&(o.setAttrib(n,"style",null),t(r,e=>{n.setAttributeNode(e.cloneNode(!0))}))}},n=()=>!a.isCollapsed()&&o.getParent(a.getStart(),o.isBlock)!==o.getParent(a.getEnd(),o.isBlock);e.on("keypress",t=>{let o;return!(!(f(t)||8!==t.keyCode&&46!==t.keyCode)&&n()&&(o=r(),e.getDoc().execCommand("delete",!1),o(),t.preventDefault(),1))}),o.bind(e.getDoc(),"cut",t=>{if(!f(t)&&n()){let t=r();uE.setEditorTimeout(e,()=>{t()})}})})(),y(),e.on("SetContent ExecCommand",e=>{"setcontent"!==e.type&&"mceInsertLink"!==e.command||t(o.select("a:not([data-mce-block])"),e=>{var t;let r=e.parentNode,n=o.getRoot();if((null==r?void 0:r.lastChild)===e){for(;r&&!o.isBlock(r);){if((null===(t=r.parentNode)||void 0===t?void 0:t.lastChild)!==r||r===n)return;r=r.parentNode}o.add(r,"br",{"data-mce-bogus":1})}})}),C(),E(),v())),{refreshContentEditable:I,isHidden:()=>{if(!s||e.removed)return!1;let t=e.selection.getSel();return!t||!t.rangeCount||0===t.rangeCount}}},EG=aR.DOM,EY=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,EX=e=>eD(e,e=>!1===B(e)),EQ=e=>{let t=e.options.get,r=e.editorUpload.blobCache;return EX({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_fonts_to_spans:t("convert_fonts_to_spans"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),remove_trailing_brs:t("remove_trailing_brs"),inline_styles:t("inline_styles"),root_name:EY(e),sanitize:t("xss_sanitization"),validate:!0,blob_cache:r,document:e.getDoc()})},EJ=e=>{let t=e.options.get;return EX({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},EZ=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,E0=e=>{let t=EZ(e),r=ik(e),n=e.contentCSS,o=()=>{t.unloadAll(n),e.inline||e.ui.styleSheetLoader.unloadAll(r)},a=()=>{e.removed?o():e.on("remove",o)};if(e.contentStyles.length>0){let t="";tL.each(e.contentStyles,e=>{t+=e+"\r\n"}),e.dom.addStyle(t)}let l=Promise.all(((e,t,r)=>{let n=[EZ(e).loadAll(t)];return e.inline?n:n.concat([e.ui.styleSheetLoader.loadAll(r)])})(e,n,r)).then(a).catch(a),i=iE(e);return i&&((e,t)=>{let r=ro(e.getBody()),n=rD(rB(r)),o=rl("style");tJ(o,"type","text/css"),r8(o,ri(t)),r8(n,o),e.on("remove",()=>{r4(o)})})(e,i),l},E1=e=>{var t;!0!==e.removed&&(hU(t=e)||t.load({initial:!0,format:"html"}),t.startContent=t.getContent({format:"raw"}),(e=>{e.bindPendingEventDelegates(),e.initialized=!0,(e=>{e.dispatch("Init")})(e),e.focus(!0),(e=>{let t=e.dom.getRoot();e.inline||dF(e)&&e.selection.getStart(!0)!==t||dt(t).each(t=>{let r=t.getNode(),n=nS(r)?dt(r).getOr(t):t;e.selection.setRng(n.toRange())})})(e),e.nodeChanged({initial:!0});let t=i5(e);L(t)&&t.call(e,e),(e=>{let t=i9(e);t&&uE.setEditorTimeout(e,()=>{let r;(r=!0===t?e:e.editorManager.get(t))&&!r.destroyed&&(r.focus(),r.selection.scrollIntoView())},100)})(e)})(e))},E2=e=>{let t=e.getElement(),r=e.getDoc();e.inline&&(EG.addClass(t,"mce-content-body"),e.contentDocument=r=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);let n=e.getBody();n.disabled=!0,e.readonly=iY(e),e.readonly||(e.inline&&"static"===EG.getStyle(n,"position",!0)&&(n.style.position="relative"),n.contentEditable="true"),n.disabled=!1,e.editorUpload=bS(e),e.schema=as(EJ(e)),e.dom=aR(r,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:ih(e),referrerPolicy:ib(e),onSetAttrib:t=>{e.dispatch("SetAttrib",t)}}),e.parser=(e=>{let t=hl(EQ(e),e.schema);return t.addAttributeFilter("src,href,style,tabindex",(t,r)=>{let n=e.dom,o="data-mce-"+r,a=t.length;for(;a--;){let l=t[a],i=l.attr(r);if(i&&!l.attr(o)){if(0===i.indexOf("data:")||0===i.indexOf("blob:"))continue;"style"===r?((i=n.serializeStyle(n.parseStyle(i),l.name)).length||(i=null),l.attr(o,i),l.attr(r,i)):"tabindex"===r?(l.attr(o,i),l.attr(r,null)):l.attr(o,e.convertURL(i,r,l.name))}}}),t.addNodeFilter("script",e=>{let t=e.length;for(;t--;){let r=e[t],n=r.attr("type")||"no/type";0!==n.indexOf("mce-")&&r.attr("type","mce-"+n)}}),sh(e)&&t.addNodeFilter("#cdata",t=>{var r;let n=t.length;for(;n--;){let o=t[n];o.type=8,o.name="#comment",o.value="[CDATA["+e.dom.encode(null!==(r=o.value)&&void 0!==r?r:"")+"]]"}}),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",t=>{let r=t.length,n=e.schema.getNonEmptyElements();for(;r--;){let e=t[r];e.isEmpty(n)&&0===e.getAll("br").length&&e.append(new uG("br",1))}}),t})(e),e.serializer=hX((e=>{let t=e.options.get;return{...EQ(e),...EJ(e),...EX({url_converter:t("url_converter"),url_converter_scope:t("url_converter_scope"),element_format:t("element_format"),entities:t("entities"),entity_encoding:t("entity_encoding"),indent:t("indent"),indent_after:t("indent_after"),indent_before:t("indent_before")})}})(e),e),e.selection=hK(e.dom,e.getWin(),e.serializer,e),e.annotator=cf(e),e.formatter=bM(e),e.undoManager=bI(e),e._nodeChangeDispatcher=new wy(e),e._selectionOverrides=Ew(e),(e=>{let t=aI(),r=aT(!1),n=az(t=>{e.dispatch("longpress",{...t,type:"longpress"}),r.set(!0)},400);e.on("touchstart",e=>{yI(e).each(o=>{n.cancel();let a={x:o.clientX,y:o.clientY,target:e.target};n.throttle(e),r.set(!1),t.set(a)})},!0),e.on("touchmove",o=>{n.cancel(),yI(o).each(n=>{t.on(o=>{((e,t)=>{let r=Math.abs(e.clientX-t.x),n=Math.abs(e.clientY-t.y);return r>5||n>5})(n,o)&&(t.clear(),r.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",o=>{n.cancel(),"touchcancel"!==o.type&&t.get().filter(e=>e.target.isEqualNode(o.target)).each(()=>{r.get()?o.preventDefault():e.dispatch("tap",{...o,type:"tap"})})},!0)})(e),(e=>{e.on("click",t=>{e.dom.getParent(t.target,"details")&&t.preventDefault()})})(e),e.parser.addNodeFilter("details",e=>{ea(e,e=>{e.attr("data-mce-open",e.attr("open")),e.attr("open","open")})}),e.serializer.addNodeFilter("details",e=>{ea(e,e=>{let t=e.attr("data-mce-open");e.attr("open",_(t)?t:null),e.attr("data-mce-open",null)})}),(e=>{let t="contenteditable",r=" "+tL.trim(sg(e))+" ",n=" "+tL.trim(sf(e))+" ",o=yq(r),a=yq(n),l=sp(e);l.length>0&&e.on("BeforeSetContent",t=>{((e,t,r)=>{let n=t.length,o=r.content;if("raw"!==r.format){for(;n--;)o=o.replace(t[n],yW(e,o,sf(e)));r.content=o}})(e,l,t)}),e.parser.addAttributeFilter("class",e=>{let r=e.length;for(;r--;){let n=e[r];o(n)?n.attr(t,"true"):a(n)&&n.attr(t,"false")}}),e.serializer.addAttributeFilter(t,e=>{let r=e.length;for(;r--;){let n=e[r];(o(n)||a(n))&&(l.length>0&&n.attr("data-mce-content")?(n.name="#text",n.type=3,n.raw=!0,n.value=n.attr("data-mce-content")):n.attr(t,null))}})})(e),hU(e)||((e=>{e.on("mousedown",t=>{t.detail>=3&&(t.preventDefault(),w5(e))})})(e),(e=>{let t=[",",".",";",":","!","?"],r=[32],n=()=>{var t,r;return t=su(e),r=sm(e),{inlinePatterns:lW(t),blockPatterns:lq(t),dynamicPatternsLookup:r}},o=()=>e.options.isSet("text_patterns_lookup");e.on("keydown",t=>{if(13===t.keyCode&&!cw.modifierPressed(t)&&e.selection.isCollapsed()){let r=n();(r.inlinePatterns.length>0||r.blockPatterns.length>0||o())&&Eq(e,r)&&t.preventDefault()}},!0);let a=()=>{if(e.selection.isCollapsed()){let t=n();(t.inlinePatterns.length>0||o())&&((e,t)=>{let r=e.selection.getRng();EO(e,r).map(n=>{let o=Math.max(0,r.startOffset-1),a=EB(e.dom,n,r.startContainer,o),l=ET(t,n,a),i=E$(e,n,r.startContainer,o,l,!1);i.length>0&&e.undoManager.transact(()=>{EV(e,i)})})})(e,t)}};e.on("keyup",e=>{EW(r,e,(e,t)=>e===t.keyCode&&!cw.modifierPressed(t))&&a()}),e.on("keypress",r=>{EW(t,r,(e,t)=>e.charCodeAt(0)===t.charCode)&&uE.setEditorTimeout(e,a)})})(e));let o=wv(e);yF(e,o),(e=>{e.on("NodeChange",V(y$,e))})(e),(e=>{var t;let r=e.dom,n=l4(e),o=null!==(t=iA(e))&&void 0!==t?t:"",a=(t,l)=>{if((e=>{if(bj(e)){let t=e.keyCode;return!bH(e)&&(cw.metaKeyPressed(e)||e.altKey||t>=112&&t<=123||er(bU,t))}return!1})(t))return;let i=e.getBody(),s=!(bj(t)&&!(bH(t)||"keyup"===t.type&&229===t.keyCode))&&((e,t,r)=>{if(oE(ro(t),!1)){let n=t.firstElementChild;return!n||!e.getStyle(t.firstElementChild,"padding-left")&&!e.getStyle(t.firstElementChild,"padding-right")&&r===n.nodeName.toLowerCase()}return!1})(r,i,n);(""!==r.getAttrib(i,bz)!==s||l)&&(r.setAttrib(i,bz,s?o:null),r.setAttrib(i,"aria-placeholder",s?o:null),((e,t)=>{e.dispatch("PlaceholderToggle",{state:t})})(e,s),e.on(s?"keydown":"keyup",a),e.off(s?"keyup":"keydown",a))};e4(o)&&e.on("init",t=>{a(t,!0),e.on("change SetContent ExecCommand",a),e.on("paste",t=>uE.setEditorTimeout(e,()=>a(t)))})})(e),w0(e);let a=(e=>{let t=e;return eM(e.plugins,"rtc").bind(e=>Q.from(e.setup)).fold(()=>(t.rtcInstance=hI(e),Q.none()),e=>(t.rtcInstance=(()=>{let e=j(null),t=j("");return{init:{bindEvents:I},undoManager:{beforeChange:I,add:e,undo:e,redo:e,clear:I,reset:I,hasUndo:Y,hasRedo:Y,transact:e,ignore:I,extra:I},formatter:{match:Y,matchAll:j([]),matchNode:j(void 0),canApply:Y,closest:t,apply:I,remove:I,toggle:I,formatChanged:j({unbind:I})},editor:{getContent:t,setContent:j({content:"",html:""}),insertContent:j(""),addVisual:I},selection:{getContent:t},autocompleter:{addDecoration:I,removeDecoration:I},raw:{getModel:j(Q.none())}}})(),Q.some(()=>e().then(e=>(t.rtcInstance=(e=>{let t=e=>N(e)?e:{},{init:r,undoManager:n,formatter:o,editor:a,selection:l,autocompleter:i,raw:s}=e;return{init:{bindEvents:r.bindEvents},undoManager:{beforeChange:n.beforeChange,add:n.add,undo:n.undo,redo:n.redo,clear:n.clear,reset:n.reset,hasUndo:n.hasUndo,hasRedo:n.hasRedo,transact:(e,t,r)=>n.transact(r),ignore:(e,t)=>n.ignore(t),extra:(e,t,r,o)=>n.extra(r,o)},formatter:{match:(e,r,n,a)=>o.match(e,t(r),a),matchAll:o.matchAll,matchNode:o.matchNode,canApply:e=>o.canApply(e),closest:e=>o.closest(e),apply:(e,r,n)=>o.apply(e,t(r)),remove:(e,r,n,a)=>o.remove(e,t(r)),toggle:(e,r,n)=>o.toggle(e,t(r)),formatChanged:(e,t,r,n,a)=>o.formatChanged(t,r,n,a)},editor:{getContent:e=>a.getContent(e),setContent:(e,t)=>({content:a.setContent(e,t),html:""}),insertContent:(e,t)=>(a.insertContent(e),""),addVisual:a.addVisual},selection:{getContent:(e,t)=>l.getContent(t)},autocompleter:{addDecoration:i.addDecoration,removeDecoration:i.removeDecoration},raw:{getModel:()=>Q.some(s.getRawModel())}}})(e),e.rtc.isRemote)))))})(e);(e=>{let t=e.getDoc(),r=e.getBody();(e=>{e.dispatch("PreInit")})(e),i4(e)||(t.body.spellcheck=!1,EG.setAttrib(r,"spellcheck","false")),e.quirks=EK(e),(e=>{e.dispatch("PostRender")})(e);let n=iS(e);void 0!==n&&(r.dir=n);let o=i7(e);o&&e.on("BeforeSetContent",e=>{tL.each(o,t=>{e.content=e.content.replace(t,e=>"<!--mce:protected "+escape(e)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",t=>{e.composing="compositionstart"===t.type})})(e),a.fold(()=>{E0(e).then(()=>E1(e))},t=>{e.setProgressState(!0),E0(e).then(()=>{t().then(t=>{e.setProgressState(!1),E1(e),hH(e)},t=>{e.notificationManager.open({type:"error",text:String(t)}),E1(e),hH(e)})})})},E3=aR.DOM,E8=aR.DOM,E5=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),E6=e=>{let t=e.getElement();return e.inline?E5(null):(e=>{let t=E8.create("div");return E8.insertAfter(t,e),E5(t,t)})(t)},E9=async e=>{var t,r;e.dispatch("ScriptsLoaded"),(e=>{let t=tL.trim(id(e)),r=e.ui.registry.getAll().icons,n={...bt.get("default").icons,...bt.get(t).icons};eR(n,(t,n)=>{eF(r,n)||e.ui.registry.addIcon(n,t)})})(e),(e=>{let t=iB(e);if(_(t)){let r=bu.get(t);e.theme=r(e,bu.urls[t])||{},L(e.theme.init)&&e.theme.init(e,bu.urls[t]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}})(e),(e=>{let t=iP(e),r=br.get(t);e.model=r(e,br.urls[t])})(e),(e=>{let t=[];ea(iQ(e),r=>{((e,t,r)=>{let n=bc.get(r),o=bc.urls[r]||e.documentBaseUrl.replace(/\/$/,"");if(r=tL.trim(r),n&&-1===tL.inArray(t,r)){if(e.plugins[r])return;try{let a=n(e,o)||{};e.plugins[r]=a,L(a.init)&&(a.init(e,o),t.push(r))}catch(t){((e,t,r)=>{let n=aL.translate(["Failed to initialize plugin: {0}",t]);ch(e,"PluginLoadError",{message:n}),bb(n,r),bg(e,n)})(e,r,t)}}})(e,t,r.replace(/^\-/,""))})})(e);let n=await (e=>{let t=e.getElement();return e.orgDisplay=t.style.display,_(iB(e))?(e=>{let t=e.theme.renderUI;return t?t():E6(e)})(e):L(iB(e))?(e=>{let t=e.getElement(),r=iB(e)(e,t);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:t.offsetHeight,r})(e):E6(e)})(e);((e,t)=>{let r={show:Q.from(t.show).getOr(I),hide:Q.from(t.hide).getOr(I),isEnabled:Q.from(t.isEnabled).getOr(X),setEnabled:r=>{e.mode.isReadOnly()||Q.from(t.setEnabled).each(e=>e(r))}};e.ui={...e.ui,...r}})(e,Q.from(n.api).getOr({})),e.editorContainer=n.editorContainer,e.contentCSS=e.contentCSS.concat(bv(e,iw(e)),bv(e,ik(e))),e.inline?E2(e):(((e,t)=>{let r=e.translate("Rich Text Area"),n=t1(ro(e.getElement()),"tabindex").bind(te),o=((e,t,r,n)=>{let o=rl("iframe");return n.each(e=>tJ(o,"tabindex",e)),tZ(o,r),tZ(o,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),re(o,"tox-edit-area__iframe"),o})(e.id,r,l1(e),n).dom;o.onload=()=>{o.onload=null,e.dispatch("load")},e.contentAreaContainer=t.iframeContainer,e.iframeElement=o,e.iframeHTML=(e=>{let t=l2(e)+"<html><head>";l3(e)!==e.documentBaseUrl&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';let r=l8(e),n=l5(e),o=e.translate(i3(e));return l6(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+l6(e)+'" />'),t+=`</head><body id="${r}" class="mce-content-body ${n}" data-id="${e.id}" aria-label="${o}"><br></body></html>`})(e),E3.add(t.iframeContainer,o)})(t=e,r={editorContainer:n.editorContainer,iframeContainer:n.iframeContainer}),r.editorContainer&&(r.editorContainer.style.display=t.orgDisplay,t.hidden=E3.isHidden(r.editorContainer)),t.getElement().style.display="none",E3.setAttrib(t.id,"aria-hidden","true"),t.getElement().style.visibility=t.orgVisibility,(e=>{let t=e.iframeElement,r=nn(ro(t),"load",X,()=>{r.unbind(),e.contentDocument=t.contentDocument,E2(e)});if(tT.browser.isFirefox()){let t=e.getDoc();t.open(),t.write(e.iframeHTML),t.close()}else t.srcdoc=e.iframeHTML})(t))},E4=aR.DOM,E7=e=>"-"===e.charAt(0),ke=(e,t,r)=>Q.from(t).filter(e=>e4(e)&&!bt.has(e)).map(t=>({url:`${e.editorManager.baseURL}/icons/${t}/icons${r}.js`,name:Q.some(t)})),kt=(e,t)=>{let r=aO.ScriptLoader,n=()=>{!e.removed&&(e=>{let t=iB(e);return!_(t)||P(bu.get(t))})(e)&&(e=>{let t=iP(e);return P(br.get(t))})(e)&&E9(e)};((e,t)=>{let r=iB(e);if(_(r)&&!E7(r)&&!eF(bu.urls,r)){let n=iD(e),o=n?e.documentBaseURI.toAbsolute(n):`themes/${r}/theme${t}.js`;bu.load(r,o).catch(()=>{bp(e,"ThemeLoadError",bh("theme",o,r))})}})(e,t),((e,t)=>{let r=iP(e);if("plugin"!==r&&!eF(br.urls,r)){let n=iL(e),o=_(n)?e.documentBaseURI.toAbsolute(n):`models/${r}/model${t}.js`;br.load(r,o).catch(()=>{bp(e,"ModelLoadError",bh("model",o,r))})}})(e,t),((e,t)=>{let r=iv(t),n=iy(t);if(!aL.hasCode(r)&&"en"!==r){let o=e4(n)?n:`${t.editorManager.baseURL}/langs/${r}.js`;e.add(o).catch(()=>{bp(t,"LanguageLoadError",bh("language",o,r))})}})(r,e),((e,t,r)=>{let n=ke(t,"default",r),o=Q.from(ic(t)).filter(e4).map(e=>({url:e,name:Q.none()})).orThunk(()=>ke(t,id(t),""));ea((e=>{let t=[],r=e=>{t.push(e)};for(let t=0;t<e.length;t++)e[t].each(r);return t})([n,o]),r=>{e.add(r.url).catch(()=>{bp(t,"IconsLoadError",bh("icons",r.url,r.name.getOrUndefined()))})})})(r,e,t),((e,t)=>{let r=(t,r)=>{bc.load(t,r).catch(()=>{bp(e,"PluginLoadError",bh("plugin",r,t))})};eR(iJ(e),(t,n)=>{r(n,t),e.options.set("plugins",iQ(e).concat(n))}),ea(iQ(e),e=>{!(e=tL.trim(e))||bc.urls[e]||E7(e)||r(e,`plugins/${e}/plugin${t}.js`)})})(e,t),r.loadQueue().then(n,n)},kr=tk().deviceType,kn=kr.isPhone(),ko=kr.isTablet(),ka=e=>{if(D(e))return[];{let t=A(e)?e:e.split(/[ ,]/),r=eo(t,e5);return es(r,e4)}},kl=(e,t)=>{var r,n;let o=((t,r)=>{let n={},o={};return eB(t,(t,r)=>er(e,r),eT(n),eT(o)),{t:n,f:o}})(t);return r=o.t,n=o.f,{sections:j(r),options:j(n)}},ki=(e,t)=>eF(e.sections(),t),ks=(e,t)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:eM(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...t?{menubar:!1}:{}}),kd=(e,t)=>{var r;let n=null!==(r=t.external_plugins)&&void 0!==r?r:{};return e&&e.external_plugins?tL.extend({},e.external_plugins,n):n},kc=(e,t,r,n,o)=>{var a;let l=e?{mobile:ks(null!==(a=o.mobile)&&void 0!==a?a:{},t)}:{},i=kl(["mobile"],CV(l,o)),s=tL.extend(r,n,i.options(),e&&ki(i,"mobile")?((e,t,r={})=>{let n=e.sections(),o=eM(n,t).getOr({});return tL.extend({},r,o)})(i,"mobile"):{},{external_plugins:kd(n,i.options())});return((e,t,r,n)=>{var o,a;let l=ka(r.forced_plugins),i=ka(n.plugins),s=ki(t,o="mobile")?t.sections()[o]:{},d=(a=s.plugins?ka(s.plugins):i,e&&ki(t,"mobile")?a:i),c=[...ka(l),...ka(d)];return tL.extend(n,{forced_plugins:l,plugins:c})})(e,i,n,s)},ku=e=>{(e=>{let t=t=>()=>{ea("left,center,right,justify".split(","),r=>{t!==r&&e.formatter.remove("align"+r)}),"none"!==t&&(e.formatter.toggle("align"+t,void 0),e.nodeChanged())};e.editorCommands.addCommands({JustifyLeft:t("left"),JustifyCenter:t("center"),JustifyRight:t("right"),JustifyFull:t("justify"),JustifyNone:t("none")})})(e),(e=>{let t=t=>()=>{let r=e.selection,n=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return en(n,r=>P(e.formatter.matchNode(r,t)))};e.editorCommands.addCommands({JustifyLeft:t("alignleft"),JustifyCenter:t("aligncenter"),JustifyRight:t("alignright"),JustifyFull:t("alignjustify")},"state")})(e)},km=(e,t)=>{let r=e.selection,n=e.dom;return/^ | $/.test(t)?((e,t,r)=>{let n=ro(e.getRoot());return r=mL(n,ly.fromRangeStart(t))?r.replace(/^ /,"&nbsp;"):r.replace(/^&nbsp;/," "),mM(n,ly.fromRangeEnd(t))?r.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):r.replace(/&nbsp;(<br( \/)?>)?$/," ")})(n,r.getRng(),t):t},kf=(e,t)=>{if(e.selection.isEditable()){let{content:r,details:n}=(e=>{if("string"!=typeof e){let t=tL.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:t}}return{content:e,details:{}}})(t);hc(e,{...n,content:km(e,r),format:"html",set:!1,selection:!0}).each(t=>{var r;let o=(r=t.content,hz(e).editor.insertContent(r,n));hu(e,o,t),e.addVisual()})}},kg={"font-size":"size","font-family":"face"},kp=tX("font"),kh=e=>(t,r)=>Q.from(r).map(ro).filter(tW).bind(r=>{var n;return f1(ro(r.dom),t=>rJ(t,e).orThunk(()=>kp(t)?eM(kg,e).bind(e=>t1(t,e)):Q.none()),e=>rm(ro(t),e)).or((n=r.dom,Q.from(aR.DOM.getStyle(n,e,!0))))}).getOr(""),kb=kh("font-size"),kv=U(e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),kh("font-family")),ky=e=>dt(e.getBody()).bind(e=>{let t=e.container();return Q.from(nR(t)?t.parentNode:t)}),kC=(e,t)=>{var r;return r=z(Q.some,t),Q.from(e.selection.getRng()).bind(t=>{let r=e.getBody();return t.startContainer===r&&0===t.startOffset?Q.none():Q.from(e.selection.getStart(!0))}).orThunk(V(ky,e)).map(ro).filter(tW).bind(r)},kx=(e,t)=>{if(/^[0-9.]+$/.test(t)){let r=parseInt(t,10);if(r>=1&&r<=7){let n=tL.explode(e.options.get("font_size_style_values")),o=tL.explode(e.options.get("font_size_classes"));return o.length>0?o[r-1]||t:n[r-1]||t}}return t},kw=e=>{let t=e.split(/\s*,\s*/);return eo(t,e=>-1===e.indexOf(" ")||e2(e,'"')||e2(e,"'")?e:`'${e}'`).join(",")},kE=e=>{ku(e),(e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":t=>{let r;let n=e.getDoc();try{n.execCommand(t)}catch(e){r=!0}if("paste"!==t||n.queryCommandEnabled(t)||(r=!0),r||!n.queryCommandSupported(t)){let t=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(tT.os.isMacOS()||tT.os.isiOS())&&(t=t.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:t,type:"error"})}}})})(e),(e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})})(e),(e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(t,r,n)=>{let o=0;e.dom.getParent(e.selection.getNode(),t=>!ny(t)||o++!==n||(e.selection.select(t),!1),e.getBody())},mceSelectNode:(t,r,n)=>{e.selection.select(n)},selectAll:()=>{let t=e.dom.getParent(e.selection.getStart(),nM);if(t){let r=e.dom.createRng();r.selectNodeContents(t),e.selection.setRng(r)}}})})(e),(e=>{e.editorCommands.addCommands({mceCleanup:()=>{let t=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(t)},insertImage:(t,r,n)=>{kf(e,e.dom.createHTML("img",{src:n}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(t,r,n)=>{kf(e,e.dom.encode(n))},insertHTML:(t,r,n)=>{kf(e,n)},mceInsertContent:(t,r,n)=>{kf(e,n)},mceSetContent:(t,r,n)=>{e.setContent(n)},mceReplaceContent:(t,r,n)=>{e.execCommand("mceInsertContent",!1,n.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent("")}})})(e),(e=>{let t=(t,r,n)=>{let o=_(n)?{href:n}:n,a=e.dom.getParent(e.selection.getNode(),"a");N(o)&&_(o.href)&&(o.href=o.href.replace(/ /g,"%20"),a&&o.href||e.formatter.remove("link"),o.href&&e.formatter.apply("link",o,a))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isCollapsed()){let t=e.dom.getParent(e.selection.getStart(),"a");t&&e.dom.remove(t,!0)}else e.formatter.remove("link")},mceInsertLink:t,createLink:t})})(e),e.editorCommands.addCommands({Indent:()=>{yD(e,"indent")},Outdent:()=>{yP(e)}}),e.editorCommands.addCommands({Outdent:()=>yO(e)},"state"),(e=>{e.editorCommands.addCommands({insertParagraph:()=>{wl(xY,e)},mceInsertNewLine:(t,r,n)=>{wi(e,n)},InsertLineBreak:(t,r,n)=>{wl(x3,e)}})})(e),(e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{e.getDoc().execCommand(t);let r=e.dom.getParent(e.selection.getNode(),"ol,ul");if(r){let t=r.parentNode;if(t&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(t.nodeName)){let n=e.selection.getBookmark();e.dom.split(t,r),e.selection.moveToBookmark(n)}}}})})(e),(e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{let r=e.dom.getParent(e.selection.getNode(),"ul,ol");return r&&("insertunorderedlist"===t&&"UL"===r.tagName||"insertorderedlist"===t&&"OL"===r.tagName)}},"state")})(e),(e=>{let t=(t,r)=>{e.formatter.toggle(t,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":e=>{t(e)},"ForeColor,HiliteColor":(e,r,n)=>{t(e,{value:n})},BackColor:(e,r,n)=>{t("hilitecolor",{value:n})},FontName:(t,r,n)=>{((e,t)=>{let r=kx(e,t);e.formatter.toggle("fontname",{value:kw(r)}),e.nodeChanged()})(e,n)},FontSize:(t,r,n)=>{e.formatter.toggle("fontsize",{value:kx(e,n)}),e.nodeChanged()},LineHeight:(t,r,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},Lang:(e,r,n)=>{var o;t(e,{value:n.code,customValue:null!==(o=n.customCode)&&void 0!==o?o:null})},RemoveFormat:t=>{e.formatter.remove(t)},mceBlockQuote:()=>{t("blockquote")},FormatBlock:(e,r,n)=>{t(_(n)?n:"p")},mceToggleFormat:(e,r,n)=>{t(n)}})})(e),(e=>{let t=t=>e.formatter.match(t);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":e=>t(e),mceBlockQuote:()=>t("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>kC(e,t=>kv(e.getBody(),t.dom)).getOr("")),e.editorCommands.addQueryValueHandler("FontSize",()=>kC(e,t=>kb(e.getBody(),t.dom)).getOr("")),e.editorCommands.addQueryValueHandler("LineHeight",()=>kC(e,t=>{let r=ro(e.getBody()),n=f1(t,e=>rJ(e,"line-height"),V(rm,r));return n.getOrThunk(()=>{let e=parseFloat(rX(t,"line-height")),r=parseFloat(rX(t,"font-size"));return String(e/r)})}).getOr(""))})(e),(e=>{e.editorCommands.addCommands({mceRemoveNode:(t,r,n)=>{let o=null!=n?n:e.selection.getNode();if(o!==e.getBody()){let t=e.selection.getBookmark();e.dom.remove(o,!0),e.selection.moveToBookmark(t)}},mcePrint:()=>{e.getWin().print()},mceFocus:(t,r,n)=>{e.removed||(!0===n?uD(e):(e=>{var t;let r=e.selection,n=e.getBody(),o=r.getRng();e.quirks.refreshContentEditable(),P(e.bookmark)&&!uB(e)&&ux(e).each(t=>{e.selection.setRng(t),o=t});let a=(t=r.getNode(),e.dom.getParent(t,t=>"true"===e.dom.getContentEditable(t)));if(a&&e.dom.isChildOf(a,n))return uT(a),uO(e,o),void uD(e);e.inline||(tT.browser.isOpera()||uT(n),e.getWin().focus()),(tT.browser.isFirefox()||e.inline)&&(uT(n),uO(e,o)),uD(e)})(e))},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})})(e)},kk=["toggleview"],kS=e=>er(kk,e.toLowerCase());class k_{constructor(e){this.commands={state:{},exec:{},value:{}},this.editor=e}execCommand(e,t=!1,r,n){let o=this.editor,a=e.toLowerCase(),l=null==n?void 0:n.skip_focus;if(o.removed||("mcefocus"!==a&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(a)||l?(e=>{ux(e).each(t=>e.selection.setRng(t))})(o):o.focus()),o.dispatch("BeforeExecCommand",{command:e,ui:t,value:r}).isDefaultPrevented()))return!1;let i=this.commands.exec[a];return!!L(i)&&(i(a,t,r),o.dispatch("ExecCommand",{command:e,ui:t,value:r}),!0)}queryCommandState(e){if(!kS(e)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;let t=e.toLowerCase(),r=this.commands.state[t];return!!L(r)&&r(t)}queryCommandValue(e){if(!kS(e)&&this.editor.quirks.isHidden()||this.editor.removed)return"";let t=e.toLowerCase(),r=this.commands.value[t];return L(r)?r(t):""}addCommands(e,t="exec"){let r=this.commands;eR(e,(e,n)=>{ea(n.toLowerCase().split(","),n=>{r[t][n]=e})})}addCommand(e,t,r){let n=e.toLowerCase();this.commands.exec[n]=(e,n,o)=>t.call(null!=r?r:this.editor,n,o)}queryCommandSupported(e){let t=e.toLowerCase();return!!this.commands.exec[t]}addQueryStateHandler(e,t,r){this.commands.state[e.toLowerCase()]=()=>t.call(null!=r?r:this.editor)}addQueryValueHandler(e,t,r){this.commands.value[e.toLowerCase()]=()=>t.call(null!=r?r:this.editor)}}let kN="data-mce-contenteditable",kR=(e,t,r)=>{try{e.getDoc().execCommand(t,!1,String(r))}catch(e){}},kA=(e,t)=>{e.dom.contentEditable=t?"true":"false"},kO=(e,t)=>{var r;let n=ro(e.getBody());rn(n,r="mce-content-readonly")&&!t?rr(n,r):t&&re(n,r),t?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),(e=>{Q.from(e.selection.getNode()).each(e=>{e.removeAttribute("data-mce-selected")})})(e),e.readonly=!0,kA(n,!1),ea(ng(n,'*[contenteditable="true"]'),e=>{tJ(e,kN,"true"),kA(e,!1)})):(e.readonly=!1,kA(n,!0),ea(ng(n,'*[data-mce-contenteditable="true"]'),e=>{t3(e,kN),kA(e,!0)}),kR(e,"StyleWithCSS",!1),kR(e,"enableInlineTableEditing",!1),kR(e,"enableObjectResizing",!1),(uB(e)||(e=>{let t=rB(ro(e.getElement()));return uf(t).filter(t=>!uS(t.dom)&&u_(e,t.dom)).isSome()})(e))&&e.focus(),(e=>{e.selection.setRng(e.selection.getRng())})(e),e.nodeChanged())},kT=e=>e.readonly,kB=e=>{e.parser.addAttributeFilter("contenteditable",t=>{kT(e)&&ea(t,e=>{e.attr(kN,e.attr("contenteditable")),e.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(kN,t=>{kT(e)&&ea(t,e=>{e.attr("contenteditable",e.attr(kN))})}),e.serializer.addTempAttr(kN)},kD=["copy"],kP=tL.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class kL{constructor(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Y}static isNative(e){return!!kP[e.toLowerCase()]}fire(e,t){return this.dispatch(e,t)}dispatch(e,t){let r=e.toLowerCase(),n=am(r,null!=t?t:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(n);let o=this.bindings[r];if(o)for(let e=0,t=o.length;e<t;e++){let t=o[e];if(!t.removed){if(t.once&&this.off(r,t.func),n.isImmediatePropagationStopped())return n;if(!1===t.func.call(this.scope,n))return n.preventDefault(),n}}return n}on(e,t,r,n){if(!1===t&&(t=Y),t){let o={func:t,removed:!1};n&&tL.extend(o,n);let a=e.toLowerCase().split(" "),l=a.length;for(;l--;){let e=a[l],t=this.bindings[e];t||(t=[],this.toggleEvent(e,!0)),t=r?[o,...t]:[...t,o],this.bindings[e]=t}}return this}off(e,t){if(e){let r=e.toLowerCase().split(" "),n=r.length;for(;n--;){let o=r[n],a=this.bindings[o];if(!o)return eR(this.bindings,(e,t)=>{this.toggleEvent(t,!1),delete this.bindings[t]}),this;if(a){if(t){let e=ei(a,e=>e.func===t);a=e.fail,this.bindings[o]=a,ea(e.pass,e=>{e.removed=!0})}else a.length=0;a.length||(this.toggleEvent(e,!1),delete this.bindings[o])}}}else eR(this.bindings,(e,t)=>{this.toggleEvent(t,!1)}),this.bindings={};return this}once(e,t,r){return this.on(e,t,r,{once:!0})}has(e){e=e.toLowerCase();let t=this.bindings[e];return!(!t||0===t.length)}}let kM=e=>(e._eventDispatcher||(e._eventDispatcher=new kL({scope:e,toggleEvent:(t,r)=>{kL.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,r)}})),e._eventDispatcher),kF={fire(e,t,r){return this.dispatch(e,t,r)},dispatch(e,t,r){if(this.removed&&"remove"!==e&&"detach"!==e)return am(e.toLowerCase(),null!=t?t:{},this);let n=kM(this).dispatch(e,t);if(!1!==r&&this.parent){let t=this.parent();for(;t&&!n.isPropagationStopped();)t.dispatch(e,n,!1),t=t.parent?t.parent():void 0}return n},on(e,t,r){return kM(this).on(e,t,r)},off(e,t){return kM(this).off(e,t)},once(e,t){return kM(this).once(e,t)},hasEventListeners(e){return kM(this).has(e)}},kI=aR.DOM,kU=(e,t)=>{if("selectionchange"===t)return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t))return e.getDoc().documentElement;let r=iO(e);return r?(e.eventRoot||(e.eventRoot=kI.select(r)[0]),e.eventRoot):e.getBody()},kz=(e,t,r)=>{e.hidden||kT(e)?kT(e)&&((e,t)=>{if("click"!==t.type||cw.metaKeyPressed(t))er(kD,t.type)&&e.dispatch(t.type,t);else{let r=ro(t.target);r$(r,"a",t=>rm(t,ro(e.getBody()))).bind(e=>t1(e,"href")).each(r=>{if(t.preventDefault(),/^#/.test(r)){let t=e.dom.select(`${r},[name="${e0(r,"#")}"]`);t.length&&e.selection.scrollIntoView(t[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}})(e,r):e.dispatch(t,r)},kj=(e,r)=>{if(e.delegates||(e.delegates={}),e.delegates[r]||e.removed)return;let n=kU(e,r);if(iO(e)){if(t||(t={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||t&&(eR(t,(t,r)=>{e.dom.unbind(kU(e,r))}),t=null)})),t[r])return;let o=t=>{let n=t.target,o=e.editorManager.get(),a=o.length;for(;a--;){let e=o[a].getBody();(e===n||kI.isChildOf(n,e))&&kz(o[a],r,t)}};t[r]=o,kI.bind(n,r,o)}else{let t=t=>{kz(e,r,t)};kI.bind(n,r,t),e.delegates[r]=t}},kH={...kF,bindPendingEventDelegates(){let e=this;tL.each(e._pendingNativeEvents,t=>{kj(e,t)})},toggleNativeEvent(e,t){let r=this;"focus"!==e&&"blur"!==e&&(r.removed||(t?r.initialized?kj(r,e):r._pendingNativeEvents?r._pendingNativeEvents.push(e):r._pendingNativeEvents=[e]:r.initialized&&r.delegates&&(r.dom.unbind(kU(r,e),e,r.delegates[e]),delete r.delegates[e])))},unbindAllNativeEvents(){let e=this,t=e.getBody(),r=e.dom;e.delegates&&(eR(e.delegates,(t,r)=>{e.dom.unbind(kU(e,r),r,t)}),delete e.delegates),!e.inline&&t&&r&&(t.onload=null,r.unbind(e.getWin()),r.unbind(e.getDoc())),r&&(r.unbind(t),r.unbind(e.getContainer()))}},k$=e=>_(e)?{value:e.split(/[ ,]/),valid:!0}:F(e,_)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},kV=(e,t)=>e+(e7(t.message)?"":`. ${t.message}`),kq=e=>e.valid,kW=(e,t,r="")=>{let n=t(e);return T(n)?n?{value:e,valid:!0}:{valid:!1,message:r}:n},kK=["design","readonly"],kG=(e,t,r,n)=>{let o=r[t.get()],a=r[n];try{a.activate()}catch(e){return void console.error(`problem while activating editor mode ${n}:`,e)}o.deactivate(),o.editorReadOnly!==a.editorReadOnly&&kO(e,a.editorReadOnly),t.set(n),((e,t)=>{e.dispatch("SwitchMode",{mode:t})})(e,n)},kY=tL.each,kX=tL.explode,kQ={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},kJ=tL.makeMap("alt,ctrl,shift,meta,access"),kZ=e=>{let t;let r={},n=tT.os.isMacOS()||tT.os.isiOS();kY(kX(e.toLowerCase(),"+"),e=>{e in kJ?r[e]=!0:/^[0-9]{2,}$/.test(e)?r.keyCode=parseInt(e,10):(r.charCode=e.charCodeAt(0),r.keyCode=kQ[e]||e.toUpperCase().charCodeAt(0))});let o=[r.keyCode];for(t in kJ)r[t]?o.push(t):r[t]=!1;return r.id=o.join(","),r.access&&(r.alt=!0,n?r.ctrl=!0:r.shift=!0),r.meta&&(n?r.meta=!0:(r.ctrl=!0,r.meta=!1)),r};class k0{constructor(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;let t=this;e.on("keyup keypress keydown",e=>{!t.hasModifier(e)&&!t.isFunctionKey(e)||e.isDefaultPrevented()||(kY(t.shortcuts,r=>{t.matchShortcut(e,r)&&(t.pendingPatterns=r.subpatterns.slice(0),"keydown"===e.type&&t.executeShortcutAction(r))}),t.matchShortcut(e,t.pendingPatterns[0])&&(1===t.pendingPatterns.length&&"keydown"===e.type&&t.executeShortcutAction(t.pendingPatterns[0]),t.pendingPatterns.shift()))})}add(e,t,r,n){let o=this,a=o.normalizeCommandFunc(r);return kY(kX(tL.trim(e)),e=>{let r=o.createShortcut(e,t,a,n);o.shortcuts[r.id]=r}),!0}remove(e){let t=this.createShortcut(e);return!!this.shortcuts[t.id]&&(delete this.shortcuts[t.id],!0)}normalizeCommandFunc(e){let t=this;return"string"==typeof e?()=>{t.editor.execCommand(e,!1,null)}:tL.isArray(e)?()=>{t.editor.execCommand(e[0],e[1],e[2])}:e}createShortcut(e,t,r,n){let o=tL.map(kX(e,">"),kZ);return o[o.length-1]=tL.extend(o[o.length-1],{func:r,scope:n||this.editor}),tL.extend(o[0],{desc:this.editor.translate(t),subpatterns:o.slice(1)})}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}isFunctionKey(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}matchShortcut(e,t){return!!t&&t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&t.alt===e.altKey&&t.shift===e.shiftKey&&!!(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode)&&(e.preventDefault(),!0)}executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}let k1=()=>{let e=(()=>{let e={},t={},r={},n={},o={},a={},l={},i={},s=(e,t)=>(r,n)=>{e[r.toLowerCase()]={...n,type:t}};return{addButton:s(e,"button"),addGroupToolbarButton:s(e,"grouptoolbarbutton"),addToggleButton:s(e,"togglebutton"),addMenuButton:s(e,"menubutton"),addSplitButton:s(e,"splitbutton"),addMenuItem:s(t,"menuitem"),addNestedMenuItem:s(t,"nestedmenuitem"),addToggleMenuItem:s(t,"togglemenuitem"),addAutocompleter:s(r,"autocompleter"),addContextMenu:s(o,"contextmenu"),addContextToolbar:s(a,"contexttoolbar"),addContextForm:s(a,"contextform"),addSidebar:s(l,"sidebar"),addView:s(i,"views"),addIcon:(e,t)=>n[e.toLowerCase()]=t,getAll:()=>({buttons:e,menuItems:t,icons:n,popups:r,contextMenus:o,contextToolbars:a,sidebars:l,views:i})}})();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},k2=aR.DOM,k3=tL.extend,k8=tL.each;class k5{constructor(e,t,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,k3(this,kH),this.id=e,this.hidden=!1;let n=kc(kn||ko,kn,t,r.defaultOptions,t);this.options=((e,t)=>{let r={},n={},o=(e,t,r)=>{let o=kW(t,r);return kq(o)?(n[e]=o.value,!0):(console.warn(kV(`Invalid value passed for the ${e} option`,o)),!1)},a=e=>eF(r,e);return{register:(e,a)=>{let l=_(a.processor)?(e=>{let t=(()=>{switch(e){case"array":return A;case"boolean":return T;case"function":return L;case"number":return M;case"object":return N;case"string":return _;case"string[]":return k$;case"object[]":return e=>F(e,N);case"regexp":return e=>S(e,RegExp);default:return X}})();return r=>kW(r,t,`The value must be a ${e}.`)})(a.processor):a.processor,i=((e,t,r)=>{if(!B(t)){let n=kW(t,r);if(kq(n))return n.value;console.error(kV(`Invalid default value passed for the "${e}" option`,n))}})(e,a.default,l);r[e]={...a,default:i,processor:l},eM(n,e).orThunk(()=>eM(t,e)).each(t=>o(e,t,l))},isRegistered:a,get:e=>eM(n,e).orThunk(()=>eM(r,e).map(e=>e.default)).getOrUndefined(),set:(e,t)=>{if(a(e)){let n=r[e];return n.immutable?(console.error(`"${e}" is an immutable option and cannot be updated`),!1):o(e,t,n.processor)}return console.warn(`"${e}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:e=>{let t=a(e);return t&&delete n[e],t},isSet:e=>eF(n,e)}})(0,n),(e=>{let t=e.options.register;t("id",{processor:"string",default:e.id}),t("selector",{processor:"string"}),t("target",{processor:"object"}),t("suffix",{processor:"string"}),t("cache_suffix",{processor:"string"}),t("base_url",{processor:"string"}),t("referrer_policy",{processor:"string",default:""}),t("language_load",{processor:"boolean",default:!0}),t("inline",{processor:"boolean",default:!1}),t("iframe_attrs",{processor:"object",default:{}}),t("doctype",{processor:"string",default:"<!DOCTYPE html>"}),t("document_base_url",{processor:"string",default:e.documentBaseUrl}),t("body_id",{processor:l0(e,"tinymce"),default:"tinymce"}),t("body_class",{processor:l0(e),default:""}),t("content_security_policy",{processor:"string",default:""}),t("br_in_pre",{processor:"boolean",default:!0}),t("forced_root_block",{processor:e=>{let t=_(e)&&e4(e);return t?{value:e,valid:t}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),t("forced_root_block_attrs",{processor:"object",default:{}}),t("newline_behavior",{processor:e=>{let t=er(["block","linebreak","invert","default"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),t("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),t("no_newline_selector",{processor:"string",default:""}),t("keep_styles",{processor:"boolean",default:!0}),t("end_container_on_empty_block",{processor:e=>T(e)||_(e)?{valid:!0,value:e}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),t("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),t("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),t("font_size_classes",{processor:"string",default:""}),t("automatic_uploads",{processor:"boolean",default:!0}),t("images_reuse_filename",{processor:"boolean",default:!1}),t("images_replace_blob_uris",{processor:"boolean",default:!0}),t("icons",{processor:"string",default:""}),t("icons_url",{processor:"string",default:""}),t("images_upload_url",{processor:"string",default:""}),t("images_upload_base_path",{processor:"string",default:""}),t("images_upload_credentials",{processor:"boolean",default:!1}),t("images_upload_handler",{processor:"function"}),t("language",{processor:"string",default:"en"}),t("language_url",{processor:"string",default:""}),t("entity_encoding",{processor:"string",default:"named"}),t("indent",{processor:"boolean",default:!0}),t("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_use_margin",{processor:"boolean",default:!1}),t("indentation",{processor:"string",default:"40px"}),t("content_css",{processor:e=>{let t=!1===e||_(e)||F(e,_);return t?_(e)?{value:eo(e.split(","),e5),valid:t}:A(e)?{value:e,valid:t}:!1===e?{value:[],valid:t}:{value:e,valid:t}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:iH(e)?[]:["default"]}),t("content_style",{processor:"string"}),t("content_css_cors",{processor:"boolean",default:!1}),t("font_css",{processor:e=>{let t=_(e)||F(e,_);return t?{value:A(e)?e:eo(e.split(","),e5),valid:t}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),t("inline_boundaries",{processor:"boolean",default:!0}),t("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),t("object_resizing",{processor:e=>{let t=T(e)||_(e);return t?!1===e||lG.isiPhone()||lG.isiPad()?{value:"",valid:t}:{value:!0===e?"table,img,figure.image,div,video,iframe":e,valid:t}:{valid:!1,message:"Must be boolean or a string"}},default:!lY}),t("resize_img_proportional",{processor:"boolean",default:!0}),t("event_root",{processor:"object"}),t("service_message",{processor:"string"}),t("theme",{processor:e=>!1===e||_(e)||L(e),default:"silver"}),t("theme_url",{processor:"string"}),t("formats",{processor:"object"}),t("format_empty_lines",{processor:"boolean",default:!1}),t("format_noneditable_selector",{processor:"string",default:""}),t("preview_styles",{processor:e=>{let t=!1===e||_(e);return t?{value:!1===e?"":e,valid:t}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),t("custom_ui_selector",{processor:"string",default:""}),t("hidden_input",{processor:"boolean",default:!0}),t("submit_patch",{processor:"boolean",default:!0}),t("encoding",{processor:"string"}),t("add_form_submit_trigger",{processor:"boolean",default:!0}),t("add_unload_trigger",{processor:"boolean",default:!0}),t("custom_undo_redo_levels",{processor:"number",default:0}),t("disable_nodechange",{processor:"boolean",default:!1}),t("readonly",{processor:"boolean",default:!1}),t("plugins",{processor:"string[]",default:[]}),t("external_plugins",{processor:"object"}),t("forced_plugins",{processor:"string[]"}),t("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),t("model_url",{processor:"string"}),t("block_unsupported_drop",{processor:"boolean",default:!0}),t("visual",{processor:"boolean",default:!0}),t("visual_table_class",{processor:"string",default:"mce-item-table"}),t("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),t("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),t("setup",{processor:"function"}),t("init_instance_callback",{processor:"function"}),t("url_converter",{processor:"function",default:e.convertURL}),t("url_converter_scope",{processor:"object",default:e}),t("urlconverter_callback",{processor:"function"}),t("allow_conditional_comments",{processor:"boolean",default:!1}),t("allow_html_data_urls",{processor:"boolean",default:!1}),t("allow_svg_data_urls",{processor:"boolean"}),t("allow_html_in_named_anchor",{processor:"boolean",default:!1}),t("allow_script_urls",{processor:"boolean",default:!1}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),t("fix_list_elements",{processor:"boolean",default:!1}),t("preserve_cdata",{processor:"boolean",default:!1}),t("remove_trailing_brs",{processor:"boolean"}),t("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),t("element_format",{processor:"string",default:"html"}),t("entities",{processor:"string"}),t("schema",{processor:"string",default:"html5"}),t("convert_urls",{processor:"boolean",default:!0}),t("relative_urls",{processor:"boolean",default:!0}),t("remove_script_host",{processor:"boolean",default:!0}),t("custom_elements",{processor:"string"}),t("extended_valid_elements",{processor:"string"}),t("invalid_elements",{processor:"string"}),t("invalid_styles",{processor:lZ}),t("valid_children",{processor:"string"}),t("valid_classes",{processor:lZ}),t("valid_elements",{processor:"string"}),t("valid_styles",{processor:lZ}),t("verify_html",{processor:"boolean",default:!0}),t("auto_focus",{processor:e=>_(e)||!0===e}),t("browser_spellcheck",{processor:"boolean",default:!1}),t("protect",{processor:"array"}),t("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),t("deprecation_warnings",{processor:"boolean",default:!0}),t("a11y_advanced_options",{processor:"boolean",default:!1}),t("api_key",{processor:"string"}),t("paste_block_drop",{processor:"boolean",default:!1}),t("paste_data_images",{processor:"boolean",default:!0}),t("paste_preprocess",{processor:"function"}),t("paste_postprocess",{processor:"function"}),t("paste_webkit_styles",{processor:"string",default:"none"}),t("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),t("paste_merge_formats",{processor:"boolean",default:!0}),t("smart_paste",{processor:"boolean",default:!0}),t("paste_as_text",{processor:"boolean",default:!1}),t("paste_tab_spaces",{processor:"number",default:4}),t("text_patterns",{processor:e=>F(e,N)||!1===e?{value:lK(!1===e?[]:e),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),t("text_patterns_lookup",{processor:e=>L(e)?{value:t=>{let r=e(t);return lK(r)},valid:!0}:{valid:!1,message:"Must be a single function"},default:e=>[]}),t("noneditable_class",{processor:"string",default:"mceNonEditable"}),t("editable_class",{processor:"string",default:"mceEditable"}),t("noneditable_regexp",{processor:e=>F(e,lQ)?{value:e,valid:!0}:lQ(e)?{value:[e],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),t("table_tab_navigation",{processor:"boolean",default:!0}),t("highlight_on_focus",{processor:"boolean",default:!1}),t("xss_sanitization",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{t("directionality",{processor:"string",default:aL.isRtl()?"rtl":void 0}),t("placeholder",{processor:"string",default:lX.getAttrib(e.getElement(),"placeholder")})})})(this);let o=this.options.get;o("deprecation_warnings")&&(((e,t)=>{let r=h3(e),n=h6(t),o=n.length>0,a=r.length>0,l="mobile"===t.theme;if(o||a||l){let e=l?`

Themes:
- mobile`:"",t=o?`

Plugins:
- ${n.join("\n- ")}`:"",i=a?`

Options:
- ${r.join("\n- ")}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+e+t+i)}})(t,n),((e,t)=>{let r=h8(e),n=h9(t),o=n.length>0,a=r.length>0;if(o||a){let e=o?`

Plugins:
- ${n.map(h4).join("\n- ")}`:"",t=a?`

Options:
- ${r.join("\n- ")}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+e+t)}})(t,n));let a=o("suffix");a&&(r.suffix=a),this.suffix=r.suffix;let l=o("base_url");l&&r._setBaseUrl(l),this.baseUri=r.baseURI;let i=ib(this);i&&(aO.ScriptLoader._setReferrerPolicy(i),aR.DOM.styleSheetLoader._setReferrerPolicy(i));let s=iX(this);P(s)&&aR.DOM.styleSheetLoader._setContentCssCors(s),aM.languageLoad=o("language_load"),aM.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new p3(l3(this),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=iH(this),this.hasVisual=i0(this),this.shortcuts=new k0(this),this.editorCommands=new k_(this),kE(this);let d=o("cache_suffix");d&&(tT.cacheSuffix=d.replace(/^[\?\&]+/,"")),this.ui={registry:k1(),styleSheetLoader:void 0,show:I,hide:I,setEnabled:I,isEnabled:X},this.mode=(e=>{let t=aT("design"),r=aT({design:{activate:I,deactivate:I,editorReadOnly:!1},readonly:{activate:I,deactivate:I,editorReadOnly:!0}});return e.serializer?kB(e):e.on("PreInit",()=>{kB(e)}),e.on("ShowCaret",t=>{kT(e)&&t.preventDefault()}),e.on("ObjectSelected",t=>{kT(e)&&t.preventDefault()}),{isReadOnly:()=>kT(e),set:n=>((e,t,r,n)=>{if(n!==r.get()){if(!eF(t,n))throw Error(`Editor mode '${n}' is invalid`);e.initialized?kG(e,r,t,n):e.on("init",()=>kG(e,r,t,n))}})(e,r.get(),t,n),get:()=>t.get(),register:(e,t)=>{r.set(((e,t,r)=>{if(er(kK,t))throw Error(`Cannot override default mode ${t}`);return{...e,[t]:{...r,deactivate:()=>{try{r.deactivate()}catch(e){console.error(`problem while deactivating editor mode ${t}:`,e)}}}}})(r.get(),e,t))}}})(this),r.dispatch("SetupEditor",{editor:this});let c=i8(this);L(c)&&c.call(this,this)}render(){(e=>{let t=e.id;aL.setCode(iv(e));let r=()=>{E4.unbind(window,"ready",r),e.render()};if(!av.Event.domLoaded)return void E4.bind(window,"ready",r);if(!e.getElement())return;let n=ro(e.getElement()),o=t8(n);e.on("remove",()=>{el(n.dom.attributes,e=>t3(n,e.name)),tZ(n,o)}),e.ui.styleSheetLoader=oH.forElement(n,{contentCssCors:iX(e),referrerPolicy:ib(e)}),iH(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");let a=e.getElement().form||E4.getParent(t,"form");a&&(e.formElement=a,i$(e)&&!nN(e.getElement())&&(E4.insertAfter(E4.create("input",{type:"hidden",name:t}),t),e.hasHiddenInput=!0),e.formEventDelegate=t=>{e.dispatch(t.type,t)},E4.bind(a,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),!iV(e)||a.submit.nodeType||a.submit.length||a._mceOldSubmit||(a._mceOldSubmit=a.submit,a.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),a._mceOldSubmit(a)))),e.windowManager=bm(e),e.notificationManager=bd(e),"xml"===e.options.get("encoding")&&e.on("GetContent",e=>{e.save&&(e.content=E4.encode(e.content))}),iq(e)&&e.on("submit",()=>{e.initialized&&e.save()}),iW(e)&&(e._beforeUnload=()=>{!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),kt(e,e.suffix)})(this)}focus(e){this.execCommand("mceFocus",!1,e)}hasFocus(){return uB(this)}translate(e){return aL.translate(e)}getParam(e,t,r){let n=this.options;return n.isRegistered(e)||(P(r)?n.register(e,{processor:r,default:t}):n.register(e,{processor:X,default:t})),n.isSet(e)||B(t)?n.get(e):t}hasPlugin(e,t){return!(!er(iQ(this),e)||t&&void 0===bc.get(e))}nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}addCommand(e,t,r){this.editorCommands.addCommand(e,t,r)}addQueryStateHandler(e,t,r){this.editorCommands.addQueryStateHandler(e,t,r)}addQueryValueHandler(e,t,r){this.editorCommands.addQueryValueHandler(e,t,r)}addShortcut(e,t,r,n){this.shortcuts.add(e,t,r,n)}execCommand(e,t,r,n){return this.editorCommands.execCommand(e,t,r,n)}queryCommandState(e){return this.editorCommands.queryCommandState(e)}queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}show(){let e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable="true":(k2.show(e.getContainer()),k2.hide(e.id)),e.load(),e.dispatch("show"))}hide(){let e=this;e.hidden||(e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(k2.hide(e.getContainer()),k2.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(e,t){this.dispatch("ProgressState",{state:e,time:t})}load(e={}){let t=this.getElement();if(this.removed)return"";if(t){let r={...e,load:!0},n=nN(t)?t.value:t.innerHTML,o=this.setContent(n,r);return r.no_events||this.dispatch("LoadContent",{...r,element:t}),o}return""}save(e={}){let t=this,r=t.getElement();if(!r||!t.initialized||t.removed)return"";let n={...e,save:!0,element:r},o=t.getContent(n),a={...n,content:o};if(a.no_events||t.dispatch("SaveContent",a),"raw"===a.format&&t.dispatch("RawSaveContent",a),o=a.content,nN(r))r.value=o;else{!e.is_removing&&t.inline||(r.innerHTML=o);let n=k2.getParent(t.id,"form");n&&k8(n.elements,e=>e.name!==t.id||(e.value=o,!1))}return a.element=n.element=r=null,!1!==a.set_dirty&&t.setDirty(!1),o}setContent(e,t){return hQ(this,e,t)}getContent(e){return((e,t={})=>{var r;let n=(r=t.format?t.format:"html",{...t,format:r,get:!0,getInner:!0});return hs(e,n).fold(H,t=>{let r=hz(e).editor.getContent(t);return hd(e,r,t)})})(this,e)}insertContent(e,t){t&&(e=k3({content:e},t)),this.execCommand("mceInsertContent",!1,e)}resetContent(e){void 0===e?hQ(this,this.startContent,{format:"raw"}):hQ(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(e){let t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.dispatch("dirty")}getContainer(){let e=this;return e.container||(e.container=e.editorContainer||k2.get(e.id+"_parent")),e.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=k2.get(this.id)),this.targetElm}getWin(){let e=this;if(!e.contentWindow){let t=e.iframeElement;t&&(e.contentWindow=t.contentWindow)}return e.contentWindow}getDoc(){let e=this;if(!e.contentDocument){let t=e.getWin();t&&(e.contentDocument=t.document)}return e.contentDocument}getBody(){var e,t;let r=this.getDoc();return null!==(t=null!==(e=this.bodyElement)&&void 0!==e?e:null==r?void 0:r.body)&&void 0!==t?t:null}convertURL(e,t,r){let n=this.options.get,o=i6(this);return L(o)?o.call(this,e,r,!0,t):!n("convert_urls")||"link"===r||N(r)&&"LINK"===r.nodeName||0===e.indexOf("file:")||0===e.length?e:n("relative_urls")?this.documentBaseURI.toRelative(e):e=this.documentBaseURI.toAbsolute(e,n("remove_script_host"))}addVisual(e){((e,t)=>{hj(e).editor.addVisual(t)})(this,e)}remove(){(e=>{if(!e.removed){let{_selectionOverrides:t,editorUpload:r}=e,n=e.getBody(),o=e.getElement();n&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&P(null==o?void 0:o.nextSibling)&&h7.remove(o.nextSibling),(e=>{e.dispatch("remove")})(e),e.editorManager.remove(e),!e.inline&&n&&h7.setStyle(e.id,"display",e.orgDisplay),(e=>{e.dispatch("detach")})(e),h7.remove(e.getContainer()),be(t),be(r),e.destroy()}})(this)}destroy(e){((e,t)=>{let{selection:r,dom:n}=e;e.destroyed||(t||e.removed?(t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),be(r),be(n)),(e=>{let t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,delete t._mceOldSubmit),h7.unbind(t,"submit reset",e.formEventDelegate))})(e),(e=>{let t=e;t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null;let r=e.selection;if(r){let e=r.dom;t.selection=r.win=r.dom=e.doc=null}})(e),e.destroyed=!0):e.remove())})(this,e)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}let k6=aR.DOM,k9=tL.each,k4,k7=!1,Se=[],St=e=>{let t=e.type;k9(Sa.get(),r=>{switch(t){case"scroll":r.dispatch("ScrollWindow",e);break;case"resize":r.dispatch("ResizeWindow",e)}})},Sr=e=>{if(e!==k7){let t=aR.DOM;e?(t.bind(window,"resize",St),t.bind(window,"scroll",St)):(t.unbind(window,"resize",St),t.unbind(window,"scroll",St)),k7=e}},Sn=e=>{let t=Se;return Se=es(Se,t=>e!==t),Sa.activeEditor===e&&(Sa.activeEditor=Se.length>0?Se[0]:null),Sa.focusedEditor===e&&(Sa.focusedEditor=null),t.length!==Se.length},So="CSS1Compat"!==document.compatMode,Sa={...kF,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"4.0",releaseDate:"2023-03-15",i18n:aL,activeEditor:null,focusedEditor:null,setup(){let e=this,t="",r="",n=p3.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/"));let o=window.tinymce||window.tinyMCEPreInit;if(o)t=o.base||o.baseURL,r=o.suffix;else{let e=document.getElementsByTagName("script");for(let n=0;n<e.length;n++){let o=e[n].src||"";if(""===o)continue;let a=o.substring(o.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(o)){-1!==a.indexOf(".min")&&(r=".min"),t=o.substring(0,o.lastIndexOf("/"));break}}if(!t&&document.currentScript){let e=document.currentScript.src;-1!==e.indexOf(".min")&&(r=".min"),t=e.substring(0,e.lastIndexOf("/"))}}e.baseURL=new p3(n).toAbsolute(t),e.documentBaseURL=n,e.baseURI=new p3(e.baseURL),e.suffix=r,e.on("AddEditor",V(uR,e)),e.on("RemoveEditor",V(uA,e))},overrideDefaults(e){let t=e.base_url;t&&this._setBaseUrl(t);let r=e.suffix;r&&(this.suffix=r),this.defaultOptions=e;let n=e.plugin_base_urls;void 0!==n&&eR(n,(e,t)=>{aM.PluginManager.urls[t]=e})},init(e){let t;let r=this,n=tL.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),o=e=>{t=e},a=()=>{let t,l=0,i=[];k6.unbind(window,"ready",a),(t=>{let n=e.onpageload;n&&n.apply(r,[])})(),t=((e,t)=>{let r=[],n=L(t)?e=>en(r,r=>t(r,e)):e=>er(r,e);for(let t=0,o=e.length;t<o;t++){let o=e[t];n(o)||r.push(o)}return r})(tT.browser.isIE()||tT.browser.isEdge()?(bb("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):So?(bb("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):_(e.selector)?k6.select(e.selector):P(e.target)?[e.target]:[]),tL.each(t,e=>{var t;(t=r.get(e.id))&&t.initialized&&!(t.getContainer()||t.getBody()).parentNode&&(Sn(t),t.unbindAllNativeEvents(),t.destroy(!0),t.removed=!0)}),0===(t=tL.grep(t,e=>!r.get(e.id))).length?o([]):k9(t,a=>{let s;e.inline&&a.tagName.toLowerCase() in n?bb("Could not initialize inline editor on invalid inline target element",a):((e,n,a)=>{let s=new k5(e,n,r);i.push(s),s.on("init",()=>{++l===t.length&&o(i)}),s.targetElm=s.targetElm||a,s.render()})(((s=a.id)||(s=eM(a,"name").filter(e=>!k6.get(e)).getOrThunk(k6.uniqueId),a.setAttribute("id",s)),s),e,a)})};return k6.bind(window,"ready",a),new Promise(e=>{t?e(t):o=t=>{e(t)}})},get(e){return 0==arguments.length?Se.slice(0):_(e)?em(Se,t=>t.id===e).getOr(null):M(e)&&Se[e]?Se[e]:null},add(e){let t=this,r=t.get(e.id);return r===e||(null===r&&Se.push(e),Sr(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),k4||(k4=e=>{let r=t.dispatch("BeforeUnload");if(r.returnValue)return e.preventDefault(),e.returnValue=r.returnValue,r.returnValue},window.addEventListener("beforeunload",k4))),e},createEditor(e,t){return this.add(new k5(e,t,this))},remove(e){let t;let r=this;if(e){if(!_(e))return t=e,O(r.get(t.id))?null:(Sn(t)&&r.dispatch("RemoveEditor",{editor:t}),0===Se.length&&window.removeEventListener("beforeunload",k4),t.remove(),Sr(Se.length>0),t);k9(k6.select(e),e=>{(t=r.get(e.id))&&r.remove(t)})}else for(let e=Se.length-1;e>=0;e--)r.remove(Se[e])},execCommand(e,t,r){var n;let o=N(r)?null!==(n=r.id)&&void 0!==n?n:r.index:r;switch(e){case"mceAddEditor":if(!this.get(o)){let e=r.options;new k5(o,e,this).render()}return!0;case"mceRemoveEditor":{let e=this.get(o);return e&&e.remove(),!0}case"mceToggleEditor":{let e=this.get(o);return e?(e.isHidden()?e.show():e.hide(),!0):(this.execCommand("mceAddEditor",!1,r),!0)}}return!!this.activeEditor&&this.activeEditor.execCommand(e,t,r)},triggerSave:()=>{k9(Se,e=>{e.save()})},addI18n:(e,t)=>{aL.add(e,t)},translate:e=>aL.translate(e),setActive(e){let t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new p3(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new p3(this.baseURL)}};Sa.setup();let Sl=(()=>{let e=aI();return{FakeClipboardItem:e=>({items:e,types:e_(e),getType:t=>eM(e,t).getOrUndefined()}),write:t=>{e.set(t)},read:()=>e.get().getOrUndefined(),clear:e.clear}})(),Si=Math.min,Ss=Math.max,Sd=Math.round,Sc=(e,t,r)=>{let n=t.x,o=t.y,a=e.w,l=e.h,i=t.w,s=t.h,d=(r||"").split("");return"b"===d[0]&&(o+=s),"r"===d[1]&&(n+=i),"c"===d[0]&&(o+=Sd(s/2)),"c"===d[1]&&(n+=Sd(i/2)),"b"===d[3]&&(o-=l),"r"===d[4]&&(n-=a),"c"===d[3]&&(o-=Sd(l/2)),"c"===d[4]&&(n-=Sd(a/2)),Su(n,o,a,l)},Su=(e,t,r,n)=>({x:e,y:t,w:r,h:n}),Sm=(()=>{let e={},t={};return{load:(r,n)=>{let o=`Script at URL "${n}" failed to load`,a=`Script at URL "${n}" did not call \`tinymce.Resource.add('${r}', data)\` within 1 second`;if(void 0!==e[r])return e[r];{let l=new Promise((e,l)=>{let i=((e,t,r=1e3)=>{let n=!1,o=null,a=e=>(...t)=>{n||(n=!0,null!==o&&(clearTimeout(o),o=null),e.apply(null,t))},l=a(e),i=a(t);return{start:(...e)=>{n||null!==o||(o=setTimeout(()=>i.apply(null,e),r))},resolve:l,reject:i}})(e,l);t[r]=i.resolve,aO.ScriptLoader.loadScript(n).then(()=>i.start(a),()=>i.reject(o))});return e[r]=l,l}},add:(r,n)=>{void 0!==t[r]&&(t[r](n),delete t[r]),e[r]=Promise.resolve(n)},unload:t=>{delete e[t]}}})();try{let e="__storage_test__";(r=window.localStorage).setItem(e,e),r.removeItem(e)}catch(e){r=(()=>{let e={},t=[],r={getItem:t=>e[t]||null,setItem:(r,n)=>{t.push(r),e[r]=String(n)},key:e=>t[e],removeItem:r=>{t=t.filter(e=>e===r),delete e[r]},clear:()=>{t=[],e={}},length:0};return Object.defineProperty(r,"length",{get:()=>t.length,configurable:!1,enumerable:!1}),r})()}let Sf={geom:{Rect:{inflate:(e,t,r)=>Su(e.x-t,e.y-r,e.w+2*t,e.h+2*r),relativePosition:Sc,findBestRelativePosition:(e,t,r,n)=>{for(let o=0;o<n.length;o++){let a=Sc(e,t,n[o]);if(a.x>=r.x&&a.x+a.w<=r.w+r.x&&a.y>=r.y&&a.y+a.h<=r.h+r.y)return n[o]}return null},intersect:(e,t)=>{let r=Ss(e.x,t.x),n=Ss(e.y,t.y),o=Si(e.x+e.w,t.x+t.w),a=Si(e.y+e.h,t.y+t.h);return o-r<0||a-n<0?null:Su(r,n,o-r,a-n)},clamp:(e,t,r)=>{let n=e.x,o=e.y,a=e.x+e.w,l=e.y+e.h,i=t.x+t.w,s=t.y+t.h,d=Ss(0,t.x-n),c=Ss(0,t.y-o),u=Ss(0,a-i),m=Ss(0,l-s);return n+=d,o+=c,r&&(a+=d,l+=c,n-=u,o-=m),Su(n,o,(a-=u)-n,(l-=m)-o)},create:Su,fromClientRect:e=>Su(e.left,e.top,e.width,e.height)}},util:{Delay:uE,Tools:tL,VK:cw,URI:p3,EventDispatcher:kL,Observable:kF,I18n:aL,LocalStorage:r,ImageUploader:e=>{let t=bC(),r=bk(e,t);return{upload:(t,n=!0)=>r.upload(t,n?bE(e):void 0)}}},dom:{EventUtils:av,TreeWalker:nh,TextSeeker:a8,DOMUtils:aR,ScriptLoader:aO,RangeUtils:c0,Serializer:hX,StyleSheetLoader:oj,ControlSelection:cN,BookmarkManager:cg,Selection:hK,Event:av.Event},html:{Styles:ad,Entities:o5,Node:uG,Schema:as,DomParser:hl,Writer:u2,Serializer:u3},Env:tT,AddOnManager:aM,Annotator:cf,Formatter:bM,UndoManager:bI,EditorCommands:k_,WindowManager:bm,NotificationManager:bd,EditorObservable:kH,Shortcuts:k0,Editor:k5,FocusManager:uw,EditorManager:Sa,DOM:aR.DOM,ScriptLoader:aO.ScriptLoader,PluginManager:bc,ThemeManager:bu,ModelManager:br,IconManager:bt,Resource:Sm,FakeClipboard:Sl,trim:tL.trim,isArray:tL.isArray,is:tL.is,toArray:tL.toArray,makeMap:tL.makeMap,each:tL.each,map:tL.map,grep:tL.grep,inArray:tL.inArray,extend:tL.extend,walk:tL.walk,resolve:tL.resolve,explode:tL.explode,_addCacheSuffix:tL._addCacheSuffix},Sg=tL.extend(Sa,Sf);window.tinymce=Sg,window.tinyMCE=Sg,(e=>{if("object"==typeof module)try{module.exports=e}catch(e){}})(Sg)}();